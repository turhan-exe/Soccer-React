var S1=t=>{throw TypeError(t)};var Q0=(t,e,n)=>e.has(t)||S1("Cannot "+n);var U=(t,e,n)=>(Q0(t,e,"read from private field"),n?n.call(t):e.get(t)),lt=(t,e,n)=>e.has(t)?S1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Be=(t,e,n,r)=>(Q0(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Pt=(t,e,n)=>(Q0(t,e,"access private method"),n);var Jp=(t,e,n,r)=>({set _(s){Be(t,e,s,n)},get _(){return U(t,e,r)}});function Gj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Hj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kj={exports:{}},dx={},qj={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=Symbol.for("react.element"),Fz=Symbol.for("react.portal"),Vz=Symbol.for("react.fragment"),Bz=Symbol.for("react.strict_mode"),Uz=Symbol.for("react.profiler"),zz=Symbol.for("react.provider"),$z=Symbol.for("react.context"),Wz=Symbol.for("react.forward_ref"),Gz=Symbol.for("react.suspense"),Hz=Symbol.for("react.memo"),Kz=Symbol.for("react.lazy"),T1=Symbol.iterator;function qz(t){return t===null||typeof t!="object"?null:(t=T1&&t[T1]||t["@@iterator"],typeof t=="function"?t:null)}var Yj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qj=Object.assign,Xj={};function eh(t,e,n){this.props=t,this.context=e,this.refs=Xj,this.updater=n||Yj}eh.prototype.isReactComponent={};eh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jj(){}Jj.prototype=eh.prototype;function lS(t,e,n){this.props=t,this.context=e,this.refs=Xj,this.updater=n||Yj}var cS=lS.prototype=new Jj;cS.constructor=lS;Qj(cS,eh.prototype);cS.isPureReactComponent=!0;var I1=Array.isArray,Zj=Object.prototype.hasOwnProperty,uS={current:null},eM={key:!0,ref:!0,__self:!0,__source:!0};function tM(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Zj.call(e,r)&&!eM.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Xm,type:t,key:i,ref:o,props:s,_owner:uS.current}}function Yz(t,e){return{$$typeof:Xm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xm}function Qz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var C1=/\/+/g;function X0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qz(""+t.key):e.toString(36)}function Gg(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xm:case Fz:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+X0(o,0):r,I1(s)?(n="",t!=null&&(n=t.replace(C1,"$&/")+"/"),Gg(s,e,n,"",function(u){return u})):s!=null&&(dS(s)&&(s=Yz(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(C1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",I1(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+X0(i,a);o+=Gg(i,e,n,c,s)}else if(c=qz(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+X0(i,a++),o+=Gg(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zp(t,e,n){if(t==null)return t;var r=[],s=0;return Gg(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Xz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gr={current:null},Hg={transition:null},Jz={ReactCurrentDispatcher:Gr,ReactCurrentBatchConfig:Hg,ReactCurrentOwner:uS};function nM(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:Zp,forEach:function(t,e,n){Zp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zp(t,function(){e++}),e},toArray:function(t){return Zp(t,function(e){return e})||[]},only:function(t){if(!dS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Tt.Component=eh;Tt.Fragment=Vz;Tt.Profiler=Uz;Tt.PureComponent=lS;Tt.StrictMode=Bz;Tt.Suspense=Gz;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jz;Tt.act=nM;Tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qj({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=uS.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Zj.call(e,c)&&!eM.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Xm,type:t.type,key:s,ref:i,props:r,_owner:o}};Tt.createContext=function(t){return t={$$typeof:$z,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zz,_context:t},t.Consumer=t};Tt.createElement=tM;Tt.createFactory=function(t){var e=tM.bind(null,t);return e.type=t,e};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(t){return{$$typeof:Wz,render:t}};Tt.isValidElement=dS;Tt.lazy=function(t){return{$$typeof:Kz,_payload:{_status:-1,_result:t},_init:Xz}};Tt.memo=function(t,e){return{$$typeof:Hz,type:t,compare:e===void 0?null:e}};Tt.startTransition=function(t){var e=Hg.transition;Hg.transition={};try{t()}finally{Hg.transition=e}};Tt.unstable_act=nM;Tt.useCallback=function(t,e){return Gr.current.useCallback(t,e)};Tt.useContext=function(t){return Gr.current.useContext(t)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(t){return Gr.current.useDeferredValue(t)};Tt.useEffect=function(t,e){return Gr.current.useEffect(t,e)};Tt.useId=function(){return Gr.current.useId()};Tt.useImperativeHandle=function(t,e,n){return Gr.current.useImperativeHandle(t,e,n)};Tt.useInsertionEffect=function(t,e){return Gr.current.useInsertionEffect(t,e)};Tt.useLayoutEffect=function(t,e){return Gr.current.useLayoutEffect(t,e)};Tt.useMemo=function(t,e){return Gr.current.useMemo(t,e)};Tt.useReducer=function(t,e,n){return Gr.current.useReducer(t,e,n)};Tt.useRef=function(t){return Gr.current.useRef(t)};Tt.useState=function(t){return Gr.current.useState(t)};Tt.useSyncExternalStore=function(t,e,n){return Gr.current.useSyncExternalStore(t,e,n)};Tt.useTransition=function(){return Gr.current.useTransition()};Tt.version="18.3.1";qj.exports=Tt;var p=qj.exports;const Se=Hj(p),hS=Gj({__proto__:null,default:Se},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zz=p,e$=Symbol.for("react.element"),t$=Symbol.for("react.fragment"),n$=Object.prototype.hasOwnProperty,r$=Zz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s$={key:!0,ref:!0,__self:!0,__source:!0};function rM(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)n$.call(e,r)&&!s$.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:e$,type:t,key:i,ref:o,props:s,_owner:r$.current}}dx.Fragment=t$;dx.jsx=rM;dx.jsxs=rM;Kj.exports=dx;var l=Kj.exports,S_={},sM={exports:{}},ks={},iM={exports:{}},oM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,V){var Z=O.length;O.push(V);e:for(;0<Z;){var ye=Z-1>>>1,ae=O[ye];if(0<s(ae,V))O[ye]=V,O[Z]=ae,Z=ye;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var V=O[0],Z=O.pop();if(Z!==V){O[0]=Z;e:for(var ye=0,ae=O.length,ve=ae>>>1;ye<ve;){var _e=2*(ye+1)-1,de=O[_e],ze=_e+1,re=O[ze];if(0>s(de,Z))ze<ae&&0>s(re,de)?(O[ye]=re,O[ze]=Z,ye=ze):(O[ye]=de,O[_e]=Z,ye=_e);else if(ze<ae&&0>s(re,Z))O[ye]=re,O[ze]=Z,ye=ze;else break e}}return V}function s(O,V){var Z=O.sortIndex-V.sortIndex;return Z!==0?Z:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,m=3,g=!1,w=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(O){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=O)r(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(u)}}function A(O){if(y=!1,I(O),!w)if(n(c)!==null)w=!0,Q(M);else{var V=n(u);V!==null&&le(A,V.startTime-O)}}function M(O,V){w=!1,y&&(y=!1,b(E),E=-1),g=!0;var Z=m;try{for(I(V),h=n(c);h!==null&&(!(h.expirationTime>V)||O&&!P());){var ye=h.callback;if(typeof ye=="function"){h.callback=null,m=h.priorityLevel;var ae=ye(h.expirationTime<=V);V=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(c)&&r(c),I(V)}else r(c);h=n(c)}if(h!==null)var ve=!0;else{var _e=n(u);_e!==null&&le(A,_e.startTime-V),ve=!1}return ve}finally{h=null,m=Z,g=!1}}var j=!1,v=null,E=-1,C=5,S=-1;function P(){return!(t.unstable_now()-S<C)}function R(){if(v!==null){var O=t.unstable_now();S=O;var V=!0;try{V=v(!0,O)}finally{V?k():(j=!1,v=null)}}else j=!1}var k;if(typeof _=="function")k=function(){_(R)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,J=W.port2;W.port1.onmessage=R,k=function(){J.postMessage(null)}}else k=function(){T(R,0)};function Q(O){v=O,j||(j=!0,k())}function le(O,V){E=T(function(){O(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,Q(M))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var Z=m;m=V;try{return O()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Z=m;m=O;try{return V()}finally{m=Z}},t.unstable_scheduleCallback=function(O,V,Z){var ye=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ye+Z:ye):Z=ye,O){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Z+ae,O={id:d++,callback:V,priorityLevel:O,startTime:Z,expirationTime:ae,sortIndex:-1},Z>ye?(O.sortIndex=Z,e(u,O),n(c)===null&&O===n(u)&&(y?(b(E),E=-1):y=!0,le(A,Z-ye))):(O.sortIndex=ae,e(c,O),w||g||(w=!0,Q(M))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var V=m;return function(){var Z=m;m=V;try{return O.apply(this,arguments)}finally{m=Z}}}})(oM);iM.exports=oM;var i$=iM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o$=p,Cs=i$;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aM=new Set,Kf={};function Bc(t,e){yd(t,e),yd(t+"Capture",e)}function yd(t,e){for(Kf[t]=e,t=0;t<e.length;t++)aM.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T_=Object.prototype.hasOwnProperty,a$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N1={},k1={};function l$(t){return T_.call(k1,t)?!0:T_.call(N1,t)?!1:a$.test(t)?k1[t]=!0:(N1[t]=!0,!1)}function c$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function u$(t,e,n,r){if(e===null||typeof e>"u"||c$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xr[t]=new Hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xr[e]=new Hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xr[t]=new Hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xr[t]=new Hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xr[t]=new Hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xr[t]=new Hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xr[t]=new Hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xr[t]=new Hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xr[t]=new Hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var fS=/[\-:]([a-z])/g;function mS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fS,mS);xr[e]=new Hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fS,mS);xr[e]=new Hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fS,mS);xr[e]=new Hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!1,!1)});xr.xlinkHref=new Hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function pS(t,e,n,r){var s=xr.hasOwnProperty(e)?xr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(u$(e,n,s,r)&&(n=null),r||s===null?l$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yo=o$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eg=Symbol.for("react.element"),Eu=Symbol.for("react.portal"),Su=Symbol.for("react.fragment"),gS=Symbol.for("react.strict_mode"),I_=Symbol.for("react.profiler"),lM=Symbol.for("react.provider"),cM=Symbol.for("react.context"),yS=Symbol.for("react.forward_ref"),C_=Symbol.for("react.suspense"),N_=Symbol.for("react.suspense_list"),vS=Symbol.for("react.memo"),ga=Symbol.for("react.lazy"),uM=Symbol.for("react.offscreen"),R1=Symbol.iterator;function jh(t){return t===null||typeof t!="object"?null:(t=R1&&t[R1]||t["@@iterator"],typeof t=="function"?t:null)}var Cn=Object.assign,J0;function sf(t){if(J0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);J0=e&&e[1]||""}return`
`+J0+t}var Z0=!1;function ew(t,e){if(!t||Z0)return"";Z0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Z0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sf(t):""}function d$(t){switch(t.tag){case 5:return sf(t.type);case 16:return sf("Lazy");case 13:return sf("Suspense");case 19:return sf("SuspenseList");case 0:case 2:case 15:return t=ew(t.type,!1),t;case 11:return t=ew(t.type.render,!1),t;case 1:return t=ew(t.type,!0),t;default:return""}}function k_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Su:return"Fragment";case Eu:return"Portal";case I_:return"Profiler";case gS:return"StrictMode";case C_:return"Suspense";case N_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cM:return(t.displayName||"Context")+".Consumer";case lM:return(t._context.displayName||"Context")+".Provider";case yS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vS:return e=t.displayName||null,e!==null?e:k_(t.type)||"Memo";case ga:e=t._payload,t=t._init;try{return k_(t(e))}catch{}}return null}function h$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k_(e);case 8:return e===gS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dM(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function f$(t){var e=dM(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tg(t){t._valueTracker||(t._valueTracker=f$(t))}function hM(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dM(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ky(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function R_(t,e){var n=e.checked;return Cn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function P1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fM(t,e){e=e.checked,e!=null&&pS(t,"checked",e,!1)}function P_(t,e){fM(t,e);var n=tl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?A_(t,e.type,n):e.hasOwnProperty("defaultValue")&&A_(t,e.type,tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function A1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function A_(t,e,n){(e!=="number"||ky(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var of=Array.isArray;function Vu(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tl(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function j_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return Cn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function j1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(we(92));if(of(n)){if(1<n.length)throw Error(we(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tl(n)}}function mM(t,e){var n=tl(e.value),r=tl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function M1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ng,gM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ng=ng||document.createElement("div"),ng.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ng.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m$=["Webkit","ms","Moz","O"];Object.keys(bf).forEach(function(t){m$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bf[e]=bf[t]})});function yM(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bf.hasOwnProperty(t)&&bf[t]?(""+e).trim():e+"px"}function vM(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yM(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var p$=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D_(t,e){if(e){if(p$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function O_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L_=null;function xS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var F_=null,Bu=null,Uu=null;function D1(t){if(t=ep(t)){if(typeof F_!="function")throw Error(we(280));var e=t.stateNode;e&&(e=gx(e),F_(t.stateNode,t.type,e))}}function xM(t){Bu?Uu?Uu.push(t):Uu=[t]:Bu=t}function wM(){if(Bu){var t=Bu,e=Uu;if(Uu=Bu=null,D1(t),e)for(t=0;t<e.length;t++)D1(e[t])}}function _M(t,e){return t(e)}function bM(){}var tw=!1;function EM(t,e,n){if(tw)return t(e,n);tw=!0;try{return _M(t,e,n)}finally{tw=!1,(Bu!==null||Uu!==null)&&(bM(),wM())}}function Yf(t,e){var n=t.stateNode;if(n===null)return null;var r=gx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(we(231,e,typeof n));return n}var V_=!1;if(jo)try{var Mh={};Object.defineProperty(Mh,"passive",{get:function(){V_=!0}}),window.addEventListener("test",Mh,Mh),window.removeEventListener("test",Mh,Mh)}catch{V_=!1}function g$(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ef=!1,Ry=null,Py=!1,B_=null,y$={onError:function(t){Ef=!0,Ry=t}};function v$(t,e,n,r,s,i,o,a,c){Ef=!1,Ry=null,g$.apply(y$,arguments)}function x$(t,e,n,r,s,i,o,a,c){if(v$.apply(this,arguments),Ef){if(Ef){var u=Ry;Ef=!1,Ry=null}else throw Error(we(198));Py||(Py=!0,B_=u)}}function Uc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function SM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function O1(t){if(Uc(t)!==t)throw Error(we(188))}function w$(t){var e=t.alternate;if(!e){if(e=Uc(t),e===null)throw Error(we(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return O1(s),t;if(i===r)return O1(s),e;i=i.sibling}throw Error(we(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?t:e}function TM(t){return t=w$(t),t!==null?IM(t):null}function IM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IM(t);if(e!==null)return e;t=t.sibling}return null}var CM=Cs.unstable_scheduleCallback,L1=Cs.unstable_cancelCallback,_$=Cs.unstable_shouldYield,b$=Cs.unstable_requestPaint,Dn=Cs.unstable_now,E$=Cs.unstable_getCurrentPriorityLevel,wS=Cs.unstable_ImmediatePriority,NM=Cs.unstable_UserBlockingPriority,Ay=Cs.unstable_NormalPriority,S$=Cs.unstable_LowPriority,kM=Cs.unstable_IdlePriority,hx=null,$i=null;function T$(t){if($i&&typeof $i.onCommitFiberRoot=="function")try{$i.onCommitFiberRoot(hx,t,void 0,(t.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:N$,I$=Math.log,C$=Math.LN2;function N$(t){return t>>>=0,t===0?32:31-(I$(t)/C$|0)|0}var rg=64,sg=4194304;function af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=af(a):(i&=o,i!==0&&(r=af(i)))}else o=n&~s,o!==0?r=af(o):i!==0&&(r=af(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mi(e),s=1<<n,r|=t[n],e&=~s;return r}function k$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mi(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=k$(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function U_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RM(){var t=rg;return rg<<=1,!(rg&4194240)&&(rg=64),t}function nw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mi(e),t[e]=n}function P$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mi(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _S(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mi(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Jt=0;function PM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AM,bS,jM,MM,DM,z_=!1,ig=[],Fa=null,Va=null,Ba=null,Qf=new Map,Xf=new Map,va=[],A$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function F1(t,e){switch(t){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Qf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(e.pointerId)}}function Dh(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ep(e),e!==null&&bS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function j$(t,e,n,r,s){switch(e){case"focusin":return Fa=Dh(Fa,t,e,n,r,s),!0;case"dragenter":return Va=Dh(Va,t,e,n,r,s),!0;case"mouseover":return Ba=Dh(Ba,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qf.set(i,Dh(Qf.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xf.set(i,Dh(Xf.get(i)||null,t,e,n,r,s)),!0}return!1}function OM(t){var e=Yl(t.target);if(e!==null){var n=Uc(e);if(n!==null){if(e=n.tag,e===13){if(e=SM(n),e!==null){t.blockedOn=e,DM(t.priority,function(){jM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);L_=r,n.target.dispatchEvent(r),L_=null}else return e=ep(n),e!==null&&bS(e),t.blockedOn=n,!1;e.shift()}return!0}function V1(t,e,n){Kg(t)&&n.delete(e)}function M$(){z_=!1,Fa!==null&&Kg(Fa)&&(Fa=null),Va!==null&&Kg(Va)&&(Va=null),Ba!==null&&Kg(Ba)&&(Ba=null),Qf.forEach(V1),Xf.forEach(V1)}function Oh(t,e){t.blockedOn===e&&(t.blockedOn=null,z_||(z_=!0,Cs.unstable_scheduleCallback(Cs.unstable_NormalPriority,M$)))}function Jf(t){function e(s){return Oh(s,t)}if(0<ig.length){Oh(ig[0],t);for(var n=1;n<ig.length;n++){var r=ig[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fa!==null&&Oh(Fa,t),Va!==null&&Oh(Va,t),Ba!==null&&Oh(Ba,t),Qf.forEach(e),Xf.forEach(e),n=0;n<va.length;n++)r=va[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<va.length&&(n=va[0],n.blockedOn===null);)OM(n),n.blockedOn===null&&va.shift()}var zu=Yo.ReactCurrentBatchConfig,My=!0;function D$(t,e,n,r){var s=Jt,i=zu.transition;zu.transition=null;try{Jt=1,ES(t,e,n,r)}finally{Jt=s,zu.transition=i}}function O$(t,e,n,r){var s=Jt,i=zu.transition;zu.transition=null;try{Jt=4,ES(t,e,n,r)}finally{Jt=s,zu.transition=i}}function ES(t,e,n,r){if(My){var s=$_(t,e,n,r);if(s===null)hw(t,e,r,Dy,n),F1(t,r);else if(j$(s,t,e,n,r))r.stopPropagation();else if(F1(t,r),e&4&&-1<A$.indexOf(t)){for(;s!==null;){var i=ep(s);if(i!==null&&AM(i),i=$_(t,e,n,r),i===null&&hw(t,e,r,Dy,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hw(t,e,r,null,n)}}var Dy=null;function $_(t,e,n,r){if(Dy=null,t=xS(r),t=Yl(t),t!==null)if(e=Uc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=SM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dy=t,null}function LM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E$()){case wS:return 1;case NM:return 4;case Ay:case S$:return 16;case kM:return 536870912;default:return 16}default:return 16}}var ja=null,SS=null,qg=null;function FM(){if(qg)return qg;var t,e=SS,n=e.length,r,s="value"in ja?ja.value:ja.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qg=s.slice(t,1<r?1-r:void 0)}function Yg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function og(){return!0}function B1(){return!1}function Rs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?og:B1,this.isPropagationStopped=B1,this}return Cn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=og)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=og)},persist:function(){},isPersistent:og}),e}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TS=Rs(th),Zm=Cn({},th,{view:0,detail:0}),L$=Rs(Zm),rw,sw,Lh,fx=Cn({},Zm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lh&&(Lh&&t.type==="mousemove"?(rw=t.screenX-Lh.screenX,sw=t.screenY-Lh.screenY):sw=rw=0,Lh=t),rw)},movementY:function(t){return"movementY"in t?t.movementY:sw}}),U1=Rs(fx),F$=Cn({},fx,{dataTransfer:0}),V$=Rs(F$),B$=Cn({},Zm,{relatedTarget:0}),iw=Rs(B$),U$=Cn({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),z$=Rs(U$),$$=Cn({},th,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),W$=Rs($$),G$=Cn({},th,{data:0}),z1=Rs(G$),H$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q$[t])?!!e[t]:!1}function IS(){return Y$}var Q$=Cn({},Zm,{key:function(t){if(t.key){var e=H$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?K$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IS,charCode:function(t){return t.type==="keypress"?Yg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),X$=Rs(Q$),J$=Cn({},fx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$1=Rs(J$),Z$=Cn({},Zm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IS}),e6=Rs(Z$),t6=Cn({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),n6=Rs(t6),r6=Cn({},fx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s6=Rs(r6),i6=[9,13,27,32],CS=jo&&"CompositionEvent"in window,Sf=null;jo&&"documentMode"in document&&(Sf=document.documentMode);var o6=jo&&"TextEvent"in window&&!Sf,VM=jo&&(!CS||Sf&&8<Sf&&11>=Sf),W1=" ",G1=!1;function BM(t,e){switch(t){case"keyup":return i6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tu=!1;function a6(t,e){switch(t){case"compositionend":return UM(e);case"keypress":return e.which!==32?null:(G1=!0,W1);case"textInput":return t=e.data,t===W1&&G1?null:t;default:return null}}function l6(t,e){if(Tu)return t==="compositionend"||!CS&&BM(t,e)?(t=FM(),qg=SS=ja=null,Tu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VM&&e.locale!=="ko"?null:e.data;default:return null}}var c6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c6[t.type]:e==="textarea"}function zM(t,e,n,r){xM(r),e=Oy(e,"onChange"),0<e.length&&(n=new TS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tf=null,Zf=null;function u6(t){ZM(t,0)}function mx(t){var e=Nu(t);if(hM(e))return t}function d6(t,e){if(t==="change")return e}var $M=!1;if(jo){var ow;if(jo){var aw="oninput"in document;if(!aw){var K1=document.createElement("div");K1.setAttribute("oninput","return;"),aw=typeof K1.oninput=="function"}ow=aw}else ow=!1;$M=ow&&(!document.documentMode||9<document.documentMode)}function q1(){Tf&&(Tf.detachEvent("onpropertychange",WM),Zf=Tf=null)}function WM(t){if(t.propertyName==="value"&&mx(Zf)){var e=[];zM(e,Zf,t,xS(t)),EM(u6,e)}}function h6(t,e,n){t==="focusin"?(q1(),Tf=e,Zf=n,Tf.attachEvent("onpropertychange",WM)):t==="focusout"&&q1()}function f6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mx(Zf)}function m6(t,e){if(t==="click")return mx(e)}function p6(t,e){if(t==="input"||t==="change")return mx(e)}function g6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wi=typeof Object.is=="function"?Object.is:g6;function em(t,e){if(wi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!T_.call(e,s)||!wi(t[s],e[s]))return!1}return!0}function Y1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Q1(t,e){var n=Y1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y1(n)}}function GM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function HM(){for(var t=window,e=ky();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ky(t.document)}return e}function NS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y6(t){var e=HM(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GM(n.ownerDocument.documentElement,n)){if(r!==null&&NS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Q1(n,i);var o=Q1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var v6=jo&&"documentMode"in document&&11>=document.documentMode,Iu=null,W_=null,If=null,G_=!1;function X1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;G_||Iu==null||Iu!==ky(r)||(r=Iu,"selectionStart"in r&&NS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),If&&em(If,r)||(If=r,r=Oy(W_,"onSelect"),0<r.length&&(e=new TS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Iu)))}function ag(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cu={animationend:ag("Animation","AnimationEnd"),animationiteration:ag("Animation","AnimationIteration"),animationstart:ag("Animation","AnimationStart"),transitionend:ag("Transition","TransitionEnd")},lw={},KM={};jo&&(KM=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function px(t){if(lw[t])return lw[t];if(!Cu[t])return t;var e=Cu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KM)return lw[t]=e[n];return t}var qM=px("animationend"),YM=px("animationiteration"),QM=px("animationstart"),XM=px("transitionend"),JM=new Map,J1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fl(t,e){JM.set(t,e),Bc(e,[t])}for(var cw=0;cw<J1.length;cw++){var uw=J1[cw],x6=uw.toLowerCase(),w6=uw[0].toUpperCase()+uw.slice(1);fl(x6,"on"+w6)}fl(qM,"onAnimationEnd");fl(YM,"onAnimationIteration");fl(QM,"onAnimationStart");fl("dblclick","onDoubleClick");fl("focusin","onFocus");fl("focusout","onBlur");fl(XM,"onTransitionEnd");yd("onMouseEnter",["mouseout","mouseover"]);yd("onMouseLeave",["mouseout","mouseover"]);yd("onPointerEnter",["pointerout","pointerover"]);yd("onPointerLeave",["pointerout","pointerover"]);Bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_6=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function Z1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,x$(r,e,void 0,t),t.currentTarget=null}function ZM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Z1(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Z1(s,a,u),i=c}}}if(Py)throw t=B_,Py=!1,B_=null,t}function hn(t,e){var n=e[Q_];n===void 0&&(n=e[Q_]=new Set);var r=t+"__bubble";n.has(r)||(eD(e,t,2,!1),n.add(r))}function dw(t,e,n){var r=0;e&&(r|=4),eD(n,t,r,e)}var lg="_reactListening"+Math.random().toString(36).slice(2);function tm(t){if(!t[lg]){t[lg]=!0,aM.forEach(function(n){n!=="selectionchange"&&(_6.has(n)||dw(n,!1,t),dw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lg]||(e[lg]=!0,dw("selectionchange",!1,e))}}function eD(t,e,n,r){switch(LM(e)){case 1:var s=D$;break;case 4:s=O$;break;default:s=ES}n=s.bind(null,e,n,t),s=void 0,!V_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hw(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Yl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}EM(function(){var u=i,d=xS(n),h=[];e:{var m=JM.get(t);if(m!==void 0){var g=TS,w=t;switch(t){case"keypress":if(Yg(n)===0)break e;case"keydown":case"keyup":g=X$;break;case"focusin":w="focus",g=iw;break;case"focusout":w="blur",g=iw;break;case"beforeblur":case"afterblur":g=iw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=U1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=V$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=e6;break;case qM:case YM:case QM:g=z$;break;case XM:g=n6;break;case"scroll":g=L$;break;case"wheel":g=s6;break;case"copy":case"cut":case"paste":g=W$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$1}var y=(e&4)!==0,T=!y&&t==="scroll",b=y?m!==null?m+"Capture":null:m;y=[];for(var _=u,I;_!==null;){I=_;var A=I.stateNode;if(I.tag===5&&A!==null&&(I=A,b!==null&&(A=Yf(_,b),A!=null&&y.push(nm(_,A,I)))),T)break;_=_.return}0<y.length&&(m=new g(m,w,null,n,d),h.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==L_&&(w=n.relatedTarget||n.fromElement)&&(Yl(w)||w[Mo]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?Yl(w):null,w!==null&&(T=Uc(w),w!==T||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(y=U1,A="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=$1,A="onPointerLeave",b="onPointerEnter",_="pointer"),T=g==null?m:Nu(g),I=w==null?m:Nu(w),m=new y(A,_+"leave",g,n,d),m.target=T,m.relatedTarget=I,A=null,Yl(d)===u&&(y=new y(b,_+"enter",w,n,d),y.target=I,y.relatedTarget=T,A=y),T=A,g&&w)t:{for(y=g,b=w,_=0,I=y;I;I=su(I))_++;for(I=0,A=b;A;A=su(A))I++;for(;0<_-I;)y=su(y),_--;for(;0<I-_;)b=su(b),I--;for(;_--;){if(y===b||b!==null&&y===b.alternate)break t;y=su(y),b=su(b)}y=null}else y=null;g!==null&&eN(h,m,g,y,!1),w!==null&&T!==null&&eN(h,T,w,y,!0)}}e:{if(m=u?Nu(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var M=d6;else if(H1(m))if($M)M=p6;else{M=f6;var j=h6}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=m6);if(M&&(M=M(t,u))){zM(h,M,n,d);break e}j&&j(t,m,u),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&A_(m,"number",m.value)}switch(j=u?Nu(u):window,t){case"focusin":(H1(j)||j.contentEditable==="true")&&(Iu=j,W_=u,If=null);break;case"focusout":If=W_=Iu=null;break;case"mousedown":G_=!0;break;case"contextmenu":case"mouseup":case"dragend":G_=!1,X1(h,n,d);break;case"selectionchange":if(v6)break;case"keydown":case"keyup":X1(h,n,d)}var v;if(CS)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Tu?BM(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(VM&&n.locale!=="ko"&&(Tu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Tu&&(v=FM()):(ja=d,SS="value"in ja?ja.value:ja.textContent,Tu=!0)),j=Oy(u,E),0<j.length&&(E=new z1(E,t,null,n,d),h.push({event:E,listeners:j}),v?E.data=v:(v=UM(n),v!==null&&(E.data=v)))),(v=o6?a6(t,n):l6(t,n))&&(u=Oy(u,"onBeforeInput"),0<u.length&&(d=new z1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=v))}ZM(h,e)})}function nm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Oy(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yf(t,n),i!=null&&r.unshift(nm(t,i,s)),i=Yf(t,e),i!=null&&r.push(nm(t,i,s))),t=t.return}return r}function su(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eN(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Yf(n,i),c!=null&&o.unshift(nm(n,c,a))):s||(c=Yf(n,i),c!=null&&o.push(nm(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var b6=/\r\n?/g,E6=/\u0000|\uFFFD/g;function tN(t){return(typeof t=="string"?t:""+t).replace(b6,`
`).replace(E6,"")}function cg(t,e,n){if(e=tN(e),tN(t)!==e&&n)throw Error(we(425))}function Ly(){}var H_=null,K_=null;function q_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Y_=typeof setTimeout=="function"?setTimeout:void 0,S6=typeof clearTimeout=="function"?clearTimeout:void 0,nN=typeof Promise=="function"?Promise:void 0,T6=typeof queueMicrotask=="function"?queueMicrotask:typeof nN<"u"?function(t){return nN.resolve(null).then(t).catch(I6)}:Y_;function I6(t){setTimeout(function(){throw t})}function fw(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Jf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jf(e)}function Ua(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nh=Math.random().toString(36).slice(2),Oi="__reactFiber$"+nh,rm="__reactProps$"+nh,Mo="__reactContainer$"+nh,Q_="__reactEvents$"+nh,C6="__reactListeners$"+nh,N6="__reactHandles$"+nh;function Yl(t){var e=t[Oi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mo]||n[Oi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rN(t);t!==null;){if(n=t[Oi])return n;t=rN(t)}return e}t=n,n=t.parentNode}return null}function ep(t){return t=t[Oi]||t[Mo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function gx(t){return t[rm]||null}var X_=[],ku=-1;function ml(t){return{current:t}}function mn(t){0>ku||(t.current=X_[ku],X_[ku]=null,ku--)}function an(t,e){ku++,X_[ku]=t.current,t.current=e}var nl={},jr=ml(nl),us=ml(!1),fc=nl;function vd(t,e){var n=t.type.contextTypes;if(!n)return nl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ds(t){return t=t.childContextTypes,t!=null}function Fy(){mn(us),mn(jr)}function sN(t,e,n){if(jr.current!==nl)throw Error(we(168));an(jr,e),an(us,n)}function tD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(we(108,h$(t)||"Unknown",s));return Cn({},n,r)}function Vy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nl,fc=jr.current,an(jr,t),an(us,us.current),!0}function iN(t,e,n){var r=t.stateNode;if(!r)throw Error(we(169));n?(t=tD(t,e,fc),r.__reactInternalMemoizedMergedChildContext=t,mn(us),mn(jr),an(jr,t)):mn(us),an(us,n)}var go=null,yx=!1,mw=!1;function nD(t){go===null?go=[t]:go.push(t)}function k6(t){yx=!0,nD(t)}function pl(){if(!mw&&go!==null){mw=!0;var t=0,e=Jt;try{var n=go;for(Jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}go=null,yx=!1}catch(s){throw go!==null&&(go=go.slice(t+1)),CM(wS,pl),s}finally{Jt=e,mw=!1}}return null}var Ru=[],Pu=0,By=null,Uy=0,Ds=[],Os=0,mc=null,xo=1,wo="";function Ml(t,e){Ru[Pu++]=Uy,Ru[Pu++]=By,By=t,Uy=e}function rD(t,e,n){Ds[Os++]=xo,Ds[Os++]=wo,Ds[Os++]=mc,mc=t;var r=xo;t=wo;var s=32-mi(r)-1;r&=~(1<<s),n+=1;var i=32-mi(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,xo=1<<32-mi(e)+s|n<<s|r,wo=i+t}else xo=1<<i|n<<s|r,wo=t}function kS(t){t.return!==null&&(Ml(t,1),rD(t,1,0))}function RS(t){for(;t===By;)By=Ru[--Pu],Ru[Pu]=null,Uy=Ru[--Pu],Ru[Pu]=null;for(;t===mc;)mc=Ds[--Os],Ds[Os]=null,wo=Ds[--Os],Ds[Os]=null,xo=Ds[--Os],Ds[Os]=null}var bs=null,ws=null,_n=!1,ci=null;function sD(t,e){var n=Ls(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function oN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bs=t,ws=Ua(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bs=t,ws=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mc!==null?{id:xo,overflow:wo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ls(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bs=t,ws=null,!0):!1;default:return!1}}function J_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Z_(t){if(_n){var e=ws;if(e){var n=e;if(!oN(t,e)){if(J_(t))throw Error(we(418));e=Ua(n.nextSibling);var r=bs;e&&oN(t,e)?sD(r,n):(t.flags=t.flags&-4097|2,_n=!1,bs=t)}}else{if(J_(t))throw Error(we(418));t.flags=t.flags&-4097|2,_n=!1,bs=t}}}function aN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bs=t}function ug(t){if(t!==bs)return!1;if(!_n)return aN(t),_n=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!q_(t.type,t.memoizedProps)),e&&(e=ws)){if(J_(t))throw iD(),Error(we(418));for(;e;)sD(t,e),e=Ua(e.nextSibling)}if(aN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ws=Ua(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ws=null}}else ws=bs?Ua(t.stateNode.nextSibling):null;return!0}function iD(){for(var t=ws;t;)t=Ua(t.nextSibling)}function xd(){ws=bs=null,_n=!1}function PS(t){ci===null?ci=[t]:ci.push(t)}var R6=Yo.ReactCurrentBatchConfig;function Fh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,t))}return t}function dg(t,e){throw t=Object.prototype.toString.call(e),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lN(t){var e=t._init;return e(t._payload)}function oD(t){function e(b,_){if(t){var I=b.deletions;I===null?(b.deletions=[_],b.flags|=16):I.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=Ga(b,_),b.index=0,b.sibling=null,b}function i(b,_,I){return b.index=I,t?(I=b.alternate,I!==null?(I=I.index,I<_?(b.flags|=2,_):I):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,_,I,A){return _===null||_.tag!==6?(_=_w(I,b.mode,A),_.return=b,_):(_=s(_,I),_.return=b,_)}function c(b,_,I,A){var M=I.type;return M===Su?d(b,_,I.props.children,A,I.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ga&&lN(M)===_.type)?(A=s(_,I.props),A.ref=Fh(b,_,I),A.return=b,A):(A=ny(I.type,I.key,I.props,null,b.mode,A),A.ref=Fh(b,_,I),A.return=b,A)}function u(b,_,I,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=bw(I,b.mode,A),_.return=b,_):(_=s(_,I.children||[]),_.return=b,_)}function d(b,_,I,A,M){return _===null||_.tag!==7?(_=uc(I,b.mode,A,M),_.return=b,_):(_=s(_,I),_.return=b,_)}function h(b,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_w(""+_,b.mode,I),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case eg:return I=ny(_.type,_.key,_.props,null,b.mode,I),I.ref=Fh(b,null,_),I.return=b,I;case Eu:return _=bw(_,b.mode,I),_.return=b,_;case ga:var A=_._init;return h(b,A(_._payload),I)}if(of(_)||jh(_))return _=uc(_,b.mode,I,null),_.return=b,_;dg(b,_)}return null}function m(b,_,I,A){var M=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return M!==null?null:a(b,_,""+I,A);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case eg:return I.key===M?c(b,_,I,A):null;case Eu:return I.key===M?u(b,_,I,A):null;case ga:return M=I._init,m(b,_,M(I._payload),A)}if(of(I)||jh(I))return M!==null?null:d(b,_,I,A,null);dg(b,I)}return null}function g(b,_,I,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return b=b.get(I)||null,a(_,b,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case eg:return b=b.get(A.key===null?I:A.key)||null,c(_,b,A,M);case Eu:return b=b.get(A.key===null?I:A.key)||null,u(_,b,A,M);case ga:var j=A._init;return g(b,_,I,j(A._payload),M)}if(of(A)||jh(A))return b=b.get(I)||null,d(_,b,A,M,null);dg(_,A)}return null}function w(b,_,I,A){for(var M=null,j=null,v=_,E=_=0,C=null;v!==null&&E<I.length;E++){v.index>E?(C=v,v=null):C=v.sibling;var S=m(b,v,I[E],A);if(S===null){v===null&&(v=C);break}t&&v&&S.alternate===null&&e(b,v),_=i(S,_,E),j===null?M=S:j.sibling=S,j=S,v=C}if(E===I.length)return n(b,v),_n&&Ml(b,E),M;if(v===null){for(;E<I.length;E++)v=h(b,I[E],A),v!==null&&(_=i(v,_,E),j===null?M=v:j.sibling=v,j=v);return _n&&Ml(b,E),M}for(v=r(b,v);E<I.length;E++)C=g(v,b,E,I[E],A),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?E:C.key),_=i(C,_,E),j===null?M=C:j.sibling=C,j=C);return t&&v.forEach(function(P){return e(b,P)}),_n&&Ml(b,E),M}function y(b,_,I,A){var M=jh(I);if(typeof M!="function")throw Error(we(150));if(I=M.call(I),I==null)throw Error(we(151));for(var j=M=null,v=_,E=_=0,C=null,S=I.next();v!==null&&!S.done;E++,S=I.next()){v.index>E?(C=v,v=null):C=v.sibling;var P=m(b,v,S.value,A);if(P===null){v===null&&(v=C);break}t&&v&&P.alternate===null&&e(b,v),_=i(P,_,E),j===null?M=P:j.sibling=P,j=P,v=C}if(S.done)return n(b,v),_n&&Ml(b,E),M;if(v===null){for(;!S.done;E++,S=I.next())S=h(b,S.value,A),S!==null&&(_=i(S,_,E),j===null?M=S:j.sibling=S,j=S);return _n&&Ml(b,E),M}for(v=r(b,v);!S.done;E++,S=I.next())S=g(v,b,E,S.value,A),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?E:S.key),_=i(S,_,E),j===null?M=S:j.sibling=S,j=S);return t&&v.forEach(function(R){return e(b,R)}),_n&&Ml(b,E),M}function T(b,_,I,A){if(typeof I=="object"&&I!==null&&I.type===Su&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case eg:e:{for(var M=I.key,j=_;j!==null;){if(j.key===M){if(M=I.type,M===Su){if(j.tag===7){n(b,j.sibling),_=s(j,I.props.children),_.return=b,b=_;break e}}else if(j.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ga&&lN(M)===j.type){n(b,j.sibling),_=s(j,I.props),_.ref=Fh(b,j,I),_.return=b,b=_;break e}n(b,j);break}else e(b,j);j=j.sibling}I.type===Su?(_=uc(I.props.children,b.mode,A,I.key),_.return=b,b=_):(A=ny(I.type,I.key,I.props,null,b.mode,A),A.ref=Fh(b,_,I),A.return=b,b=A)}return o(b);case Eu:e:{for(j=I.key;_!==null;){if(_.key===j)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(b,_.sibling),_=s(_,I.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=bw(I,b.mode,A),_.return=b,b=_}return o(b);case ga:return j=I._init,T(b,_,j(I._payload),A)}if(of(I))return w(b,_,I,A);if(jh(I))return y(b,_,I,A);dg(b,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(b,_.sibling),_=s(_,I),_.return=b,b=_):(n(b,_),_=_w(I,b.mode,A),_.return=b,b=_),o(b)):n(b,_)}return T}var wd=oD(!0),aD=oD(!1),zy=ml(null),$y=null,Au=null,AS=null;function jS(){AS=Au=$y=null}function MS(t){var e=zy.current;mn(zy),t._currentValue=e}function eb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $u(t,e){$y=t,AS=Au=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(is=!0),t.firstContext=null)}function Gs(t){var e=t._currentValue;if(AS!==t)if(t={context:t,memoizedValue:e,next:null},Au===null){if($y===null)throw Error(we(308));Au=t,$y.dependencies={lanes:0,firstContext:t}}else Au=Au.next=t;return e}var Ql=null;function DS(t){Ql===null?Ql=[t]:Ql.push(t)}function lD(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,DS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Do(t,r)}function Do(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ya=!1;function OS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Co(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function za(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Bt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Do(t,n)}return s=r.interleaved,s===null?(e.next=e,DS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Do(t,n)}function Qg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_S(t,n)}}function cN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wy(t,e,n,r){var s=t.updateQueue;ya=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,y=a;switch(m=e,g=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){h=w.call(g,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,m=typeof w=="function"?w.call(g,h,m):w,m==null)break e;h=Cn({},h,m);break e;case 2:ya=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gc|=o,t.lanes=o,t.memoizedState=h}}function uN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(we(191,s));s.call(r)}}}var tp={},Wi=ml(tp),sm=ml(tp),im=ml(tp);function Xl(t){if(t===tp)throw Error(we(174));return t}function LS(t,e){switch(an(im,e),an(sm,t),an(Wi,tp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:M_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=M_(e,t)}mn(Wi),an(Wi,e)}function _d(){mn(Wi),mn(sm),mn(im)}function uD(t){Xl(im.current);var e=Xl(Wi.current),n=M_(e,t.type);e!==n&&(an(sm,t),an(Wi,n))}function FS(t){sm.current===t&&(mn(Wi),mn(sm))}var Sn=ml(0);function Gy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pw=[];function VS(){for(var t=0;t<pw.length;t++)pw[t]._workInProgressVersionPrimary=null;pw.length=0}var Xg=Yo.ReactCurrentDispatcher,gw=Yo.ReactCurrentBatchConfig,pc=0,In=null,Yn=null,ir=null,Hy=!1,Cf=!1,om=0,P6=0;function Sr(){throw Error(we(321))}function BS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wi(t[n],e[n]))return!1;return!0}function US(t,e,n,r,s,i){if(pc=i,In=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xg.current=t===null||t.memoizedState===null?D6:O6,t=n(r,s),Cf){i=0;do{if(Cf=!1,om=0,25<=i)throw Error(we(301));i+=1,ir=Yn=null,e.updateQueue=null,Xg.current=L6,t=n(r,s)}while(Cf)}if(Xg.current=Ky,e=Yn!==null&&Yn.next!==null,pc=0,ir=Yn=In=null,Hy=!1,e)throw Error(we(300));return t}function zS(){var t=om!==0;return om=0,t}function Ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?In.memoizedState=ir=t:ir=ir.next=t,ir}function Hs(){if(Yn===null){var t=In.alternate;t=t!==null?t.memoizedState:null}else t=Yn.next;var e=ir===null?In.memoizedState:ir.next;if(e!==null)ir=e,Yn=t;else{if(t===null)throw Error(we(310));Yn=t,t={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},ir===null?In.memoizedState=ir=t:ir=ir.next=t}return ir}function am(t,e){return typeof e=="function"?e(t):e}function yw(t){var e=Hs(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=Yn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((pc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,In.lanes|=d,gc|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,wi(r,e.memoizedState)||(is=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,In.lanes|=i,gc|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vw(t){var e=Hs(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wi(i,e.memoizedState)||(is=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function dD(){}function hD(t,e){var n=In,r=Hs(),s=e(),i=!wi(r.memoizedState,s);if(i&&(r.memoizedState=s,is=!0),r=r.queue,$S(pD.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ir!==null&&ir.memoizedState.tag&1){if(n.flags|=2048,lm(9,mD.bind(null,n,r,s,e),void 0,null),lr===null)throw Error(we(349));pc&30||fD(n,e,s)}return s}function fD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mD(t,e,n,r){e.value=n,e.getSnapshot=r,gD(e)&&yD(t)}function pD(t,e,n){return n(function(){gD(e)&&yD(t)})}function gD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wi(t,n)}catch{return!0}}function yD(t){var e=Do(t,1);e!==null&&pi(e,t,1,-1)}function dN(t){var e=Ai();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:am,lastRenderedState:t},e.queue=t,t=t.dispatch=M6.bind(null,In,t),[e.memoizedState,t]}function lm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vD(){return Hs().memoizedState}function Jg(t,e,n,r){var s=Ai();In.flags|=t,s.memoizedState=lm(1|e,n,void 0,r===void 0?null:r)}function vx(t,e,n,r){var s=Hs();r=r===void 0?null:r;var i=void 0;if(Yn!==null){var o=Yn.memoizedState;if(i=o.destroy,r!==null&&BS(r,o.deps)){s.memoizedState=lm(e,n,i,r);return}}In.flags|=t,s.memoizedState=lm(1|e,n,i,r)}function hN(t,e){return Jg(8390656,8,t,e)}function $S(t,e){return vx(2048,8,t,e)}function xD(t,e){return vx(4,2,t,e)}function wD(t,e){return vx(4,4,t,e)}function _D(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bD(t,e,n){return n=n!=null?n.concat([t]):null,vx(4,4,_D.bind(null,e,t),n)}function WS(){}function ED(t,e){var n=Hs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&BS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function SD(t,e){var n=Hs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&BS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function TD(t,e,n){return pc&21?(wi(n,e)||(n=RM(),In.lanes|=n,gc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,is=!0),t.memoizedState=n)}function A6(t,e){var n=Jt;Jt=n!==0&&4>n?n:4,t(!0);var r=gw.transition;gw.transition={};try{t(!1),e()}finally{Jt=n,gw.transition=r}}function ID(){return Hs().memoizedState}function j6(t,e,n){var r=Wa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CD(t))ND(e,n);else if(n=lD(t,e,n,r),n!==null){var s=$r();pi(n,t,r,s),kD(n,e,r)}}function M6(t,e,n){var r=Wa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CD(t))ND(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,wi(a,o)){var c=e.interleaved;c===null?(s.next=s,DS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=lD(t,e,s,r),n!==null&&(s=$r(),pi(n,t,r,s),kD(n,e,r))}}function CD(t){var e=t.alternate;return t===In||e!==null&&e===In}function ND(t,e){Cf=Hy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_S(t,n)}}var Ky={readContext:Gs,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},D6={readContext:Gs,useCallback:function(t,e){return Ai().memoizedState=[t,e===void 0?null:e],t},useContext:Gs,useEffect:hN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jg(4194308,4,_D.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jg(4,2,t,e)},useMemo:function(t,e){var n=Ai();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ai();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j6.bind(null,In,t),[r.memoizedState,t]},useRef:function(t){var e=Ai();return t={current:t},e.memoizedState=t},useState:dN,useDebugValue:WS,useDeferredValue:function(t){return Ai().memoizedState=t},useTransition:function(){var t=dN(!1),e=t[0];return t=A6.bind(null,t[1]),Ai().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=In,s=Ai();if(_n){if(n===void 0)throw Error(we(407));n=n()}else{if(n=e(),lr===null)throw Error(we(349));pc&30||fD(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hN(pD.bind(null,r,i,t),[t]),r.flags|=2048,lm(9,mD.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ai(),e=lr.identifierPrefix;if(_n){var n=wo,r=xo;n=(r&~(1<<32-mi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=om++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=P6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O6={readContext:Gs,useCallback:ED,useContext:Gs,useEffect:$S,useImperativeHandle:bD,useInsertionEffect:xD,useLayoutEffect:wD,useMemo:SD,useReducer:yw,useRef:vD,useState:function(){return yw(am)},useDebugValue:WS,useDeferredValue:function(t){var e=Hs();return TD(e,Yn.memoizedState,t)},useTransition:function(){var t=yw(am)[0],e=Hs().memoizedState;return[t,e]},useMutableSource:dD,useSyncExternalStore:hD,useId:ID,unstable_isNewReconciler:!1},L6={readContext:Gs,useCallback:ED,useContext:Gs,useEffect:$S,useImperativeHandle:bD,useInsertionEffect:xD,useLayoutEffect:wD,useMemo:SD,useReducer:vw,useRef:vD,useState:function(){return vw(am)},useDebugValue:WS,useDeferredValue:function(t){var e=Hs();return Yn===null?e.memoizedState=t:TD(e,Yn.memoizedState,t)},useTransition:function(){var t=vw(am)[0],e=Hs().memoizedState;return[t,e]},useMutableSource:dD,useSyncExternalStore:hD,useId:ID,unstable_isNewReconciler:!1};function si(t,e){if(t&&t.defaultProps){e=Cn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xx={isMounted:function(t){return(t=t._reactInternals)?Uc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$r(),s=Wa(t),i=Co(r,s);i.payload=e,n!=null&&(i.callback=n),e=za(t,i,s),e!==null&&(pi(e,t,s,r),Qg(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$r(),s=Wa(t),i=Co(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=za(t,i,s),e!==null&&(pi(e,t,s,r),Qg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$r(),r=Wa(t),s=Co(n,r);s.tag=2,e!=null&&(s.callback=e),e=za(t,s,r),e!==null&&(pi(e,t,r,n),Qg(e,t,r))}};function fN(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!em(n,r)||!em(s,i):!0}function RD(t,e,n){var r=!1,s=nl,i=e.contextType;return typeof i=="object"&&i!==null?i=Gs(i):(s=ds(e)?fc:jr.current,r=e.contextTypes,i=(r=r!=null)?vd(t,s):nl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function mN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xx.enqueueReplaceState(e,e.state,null)}function nb(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},OS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gs(i):(i=ds(e)?fc:jr.current,s.context=vd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(tb(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xx.enqueueReplaceState(s,s.state,null),Wy(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bd(t,e){try{var n="",r=e;do n+=d$(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function xw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F6=typeof WeakMap=="function"?WeakMap:Map;function PD(t,e,n){n=Co(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yy||(Yy=!0,fb=r),rb(t,e)},n}function AD(t,e,n){n=Co(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){rb(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rb(t,e),typeof r!="function"&&($a===null?$a=new Set([this]):$a.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new F6;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=J6.bind(null,t,e,n),e.then(t,t))}function gN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yN(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Co(-1,1),e.tag=2,za(n,e,1))),n.lanes|=1),t)}var V6=Yo.ReactCurrentOwner,is=!1;function Ur(t,e,n,r){e.child=t===null?aD(e,null,n,r):wd(e,t.child,n,r)}function vN(t,e,n,r,s){n=n.render;var i=e.ref;return $u(e,s),r=US(t,e,n,r,i,s),n=zS(),t!==null&&!is?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Oo(t,e,s)):(_n&&n&&kS(e),e.flags|=1,Ur(t,e,r,s),e.child)}function xN(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!JS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,jD(t,e,i,r,s)):(t=ny(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:em,n(o,r)&&t.ref===e.ref)return Oo(t,e,s)}return e.flags|=1,t=Ga(i,r),t.ref=e.ref,t.return=e,e.child=t}function jD(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(em(i,r)&&t.ref===e.ref)if(is=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(is=!0);else return e.lanes=t.lanes,Oo(t,e,s)}return sb(t,e,n,r,s)}function MD(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Mu,ys),ys|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,an(Mu,ys),ys|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,an(Mu,ys),ys|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,an(Mu,ys),ys|=r;return Ur(t,e,s,n),e.child}function DD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sb(t,e,n,r,s){var i=ds(n)?fc:jr.current;return i=vd(e,i),$u(e,s),n=US(t,e,n,r,i,s),r=zS(),t!==null&&!is?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Oo(t,e,s)):(_n&&r&&kS(e),e.flags|=1,Ur(t,e,n,s),e.child)}function wN(t,e,n,r,s){if(ds(n)){var i=!0;Vy(e)}else i=!1;if($u(e,s),e.stateNode===null)Zg(t,e),RD(e,n,r),nb(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gs(u):(u=ds(n)?fc:jr.current,u=vd(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&mN(e,o,r,u),ya=!1;var m=e.memoizedState;o.state=m,Wy(e,r,o,s),c=e.memoizedState,a!==r||m!==c||us.current||ya?(typeof d=="function"&&(tb(e,n,d,r),c=e.memoizedState),(a=ya||fN(e,n,a,r,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:si(e.type,a),o.props=u,h=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Gs(c):(c=ds(n)?fc:jr.current,c=vd(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==c)&&mN(e,o,r,c),ya=!1,m=e.memoizedState,o.state=m,Wy(e,r,o,s);var w=e.memoizedState;a!==h||m!==w||us.current||ya?(typeof g=="function"&&(tb(e,n,g,r),w=e.memoizedState),(u=ya||fN(e,n,u,r,m,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ib(t,e,n,r,i,s)}function ib(t,e,n,r,s,i){DD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&iN(e,n,!1),Oo(t,e,i);r=e.stateNode,V6.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wd(e,t.child,null,i),e.child=wd(e,null,a,i)):Ur(t,e,a,i),e.memoizedState=r.state,s&&iN(e,n,!0),e.child}function OD(t){var e=t.stateNode;e.pendingContext?sN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sN(t,e.context,!1),LS(t,e.containerInfo)}function _N(t,e,n,r,s){return xd(),PS(s),e.flags|=256,Ur(t,e,n,r),e.child}var ob={dehydrated:null,treeContext:null,retryLane:0};function ab(t){return{baseLanes:t,cachePool:null,transitions:null}}function LD(t,e,n){var r=e.pendingProps,s=Sn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),an(Sn,s&1),t===null)return Z_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bx(o,r,0,null),t=uc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ab(n),e.memoizedState=ob,t):GS(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return B6(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ga(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ga(a,i):(i=uc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ab(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ob,r}return i=t.child,t=i.sibling,r=Ga(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function GS(t,e){return e=bx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hg(t,e,n,r){return r!==null&&PS(r),wd(e,t.child,null,n),t=GS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function B6(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=xw(Error(we(422))),hg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bx({mode:"visible",children:r.children},s,0,null),i=uc(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wd(e,t.child,null,o),e.child.memoizedState=ab(o),e.memoizedState=ob,i);if(!(e.mode&1))return hg(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(we(419)),r=xw(i,r,void 0),hg(t,e,o,r)}if(a=(o&t.childLanes)!==0,is||a){if(r=lr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Do(t,s),pi(r,t,s,-1))}return XS(),r=xw(Error(we(421))),hg(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Z6.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ws=Ua(s.nextSibling),bs=e,_n=!0,ci=null,t!==null&&(Ds[Os++]=xo,Ds[Os++]=wo,Ds[Os++]=mc,xo=t.id,wo=t.overflow,mc=e),e=GS(e,r.children),e.flags|=4096,e)}function bN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eb(t.return,e,n)}function ww(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function FD(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ur(t,e,r.children,n),r=Sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bN(t,n,e);else if(t.tag===19)bN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(an(Sn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gy(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ww(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gy(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ww(e,!0,n,null,i);break;case"together":ww(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Oo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,n=Ga(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ga(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U6(t,e,n){switch(e.tag){case 3:OD(e),xd();break;case 5:uD(e);break;case 1:ds(e.type)&&Vy(e);break;case 4:LS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;an(zy,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(an(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?LD(t,e,n):(an(Sn,Sn.current&1),t=Oo(t,e,n),t!==null?t.sibling:null);an(Sn,Sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FD(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),an(Sn,Sn.current),r)break;return null;case 22:case 23:return e.lanes=0,MD(t,e,n)}return Oo(t,e,n)}var VD,lb,BD,UD;VD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lb=function(){};BD=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xl(Wi.current);var i=null;switch(n){case"input":s=R_(t,s),r=R_(t,r),i=[];break;case"select":s=Cn({},s,{value:void 0}),r=Cn({},r,{value:void 0}),i=[];break;case"textarea":s=j_(t,s),r=j_(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ly)}D_(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kf.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kf.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&hn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};UD=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vh(t,e){if(!_n)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function z6(t,e,n){var r=e.pendingProps;switch(RS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(e),null;case 1:return ds(e.type)&&Fy(),Tr(e),null;case 3:return r=e.stateNode,_d(),mn(us),mn(jr),VS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ug(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ci!==null&&(gb(ci),ci=null))),lb(t,e),Tr(e),null;case 5:FS(e);var s=Xl(im.current);if(n=e.type,t!==null&&e.stateNode!=null)BD(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(we(166));return Tr(e),null}if(t=Xl(Wi.current),ug(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Oi]=e,r[rm]=i,t=(e.mode&1)!==0,n){case"dialog":hn("cancel",r),hn("close",r);break;case"iframe":case"object":case"embed":hn("load",r);break;case"video":case"audio":for(s=0;s<lf.length;s++)hn(lf[s],r);break;case"source":hn("error",r);break;case"img":case"image":case"link":hn("error",r),hn("load",r);break;case"details":hn("toggle",r);break;case"input":P1(r,i),hn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},hn("invalid",r);break;case"textarea":j1(r,i),hn("invalid",r)}D_(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&cg(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&cg(r.textContent,a,t),s=["children",""+a]):Kf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hn("scroll",r)}switch(n){case"input":tg(r),A1(r,i,!0);break;case"textarea":tg(r),M1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ly)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pM(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Oi]=e,t[rm]=r,VD(t,e,!1,!1),e.stateNode=t;e:{switch(o=O_(n,r),n){case"dialog":hn("cancel",t),hn("close",t),s=r;break;case"iframe":case"object":case"embed":hn("load",t),s=r;break;case"video":case"audio":for(s=0;s<lf.length;s++)hn(lf[s],t);s=r;break;case"source":hn("error",t),s=r;break;case"img":case"image":case"link":hn("error",t),hn("load",t),s=r;break;case"details":hn("toggle",t),s=r;break;case"input":P1(t,r),s=R_(t,r),hn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Cn({},r,{value:void 0}),hn("invalid",t);break;case"textarea":j1(t,r),s=j_(t,r),hn("invalid",t);break;default:s=r}D_(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?vM(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gM(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qf(t,c):typeof c=="number"&&qf(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Kf.hasOwnProperty(i)?c!=null&&i==="onScroll"&&hn("scroll",t):c!=null&&pS(t,i,c,o))}switch(n){case"input":tg(t),A1(t,r,!1);break;case"textarea":tg(t),M1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vu(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ly)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tr(e),null;case 6:if(t&&e.stateNode!=null)UD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(we(166));if(n=Xl(im.current),Xl(Wi.current),ug(e)){if(r=e.stateNode,n=e.memoizedProps,r[Oi]=e,(i=r.nodeValue!==n)&&(t=bs,t!==null))switch(t.tag){case 3:cg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cg(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Oi]=e,e.stateNode=r}return Tr(e),null;case 13:if(mn(Sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_n&&ws!==null&&e.mode&1&&!(e.flags&128))iD(),xd(),e.flags|=98560,i=!1;else if(i=ug(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(we(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(we(317));i[Oi]=e}else xd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tr(e),i=!1}else ci!==null&&(gb(ci),ci=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?Zn===0&&(Zn=3):XS())),e.updateQueue!==null&&(e.flags|=4),Tr(e),null);case 4:return _d(),lb(t,e),t===null&&tm(e.stateNode.containerInfo),Tr(e),null;case 10:return MS(e.type._context),Tr(e),null;case 17:return ds(e.type)&&Fy(),Tr(e),null;case 19:if(mn(Sn),i=e.memoizedState,i===null)return Tr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vh(i,!1);else{if(Zn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gy(t),o!==null){for(e.flags|=128,Vh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return an(Sn,Sn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Dn()>Ed&&(e.flags|=128,r=!0,Vh(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gy(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_n)return Tr(e),null}else 2*Dn()-i.renderingStartTime>Ed&&n!==1073741824&&(e.flags|=128,r=!0,Vh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Dn(),e.sibling=null,n=Sn.current,an(Sn,r?n&1|2:n&1),e):(Tr(e),null);case 22:case 23:return QS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ys&1073741824&&(Tr(e),e.subtreeFlags&6&&(e.flags|=8192)):Tr(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function $6(t,e){switch(RS(e),e.tag){case 1:return ds(e.type)&&Fy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _d(),mn(us),mn(jr),VS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return FS(e),null;case 13:if(mn(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(we(340));xd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mn(Sn),null;case 4:return _d(),null;case 10:return MS(e.type._context),null;case 22:case 23:return QS(),null;case 24:return null;default:return null}}var fg=!1,Nr=!1,W6=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function ju(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pn(t,e,r)}else n.current=null}function cb(t,e,n){try{n()}catch(r){Pn(t,e,r)}}var EN=!1;function G6(t,e){if(H_=My,t=HM(),NS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++d===r&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(K_={focusedElem:t,selectionRange:n},My=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,T=w.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:si(e.type,y),T);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(A){Pn(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return w=EN,EN=!1,w}function Nf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cb(e,n,i)}s=s.next}while(s!==r)}}function wx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ub(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zD(t){var e=t.alternate;e!==null&&(t.alternate=null,zD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Oi],delete e[rm],delete e[Q_],delete e[C6],delete e[N6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $D(t){return t.tag===5||t.tag===3||t.tag===4}function SN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$D(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function db(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ly));else if(r!==4&&(t=t.child,t!==null))for(db(t,e,n),t=t.sibling;t!==null;)db(t,e,n),t=t.sibling}function hb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hb(t,e,n),t=t.sibling;t!==null;)hb(t,e,n),t=t.sibling}var hr=null,ai=!1;function oa(t,e,n){for(n=n.child;n!==null;)WD(t,e,n),n=n.sibling}function WD(t,e,n){if($i&&typeof $i.onCommitFiberUnmount=="function")try{$i.onCommitFiberUnmount(hx,n)}catch{}switch(n.tag){case 5:Nr||ju(n,e);case 6:var r=hr,s=ai;hr=null,oa(t,e,n),hr=r,ai=s,hr!==null&&(ai?(t=hr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hr.removeChild(n.stateNode));break;case 18:hr!==null&&(ai?(t=hr,n=n.stateNode,t.nodeType===8?fw(t.parentNode,n):t.nodeType===1&&fw(t,n),Jf(t)):fw(hr,n.stateNode));break;case 4:r=hr,s=ai,hr=n.stateNode.containerInfo,ai=!0,oa(t,e,n),hr=r,ai=s;break;case 0:case 11:case 14:case 15:if(!Nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cb(n,e,o),s=s.next}while(s!==r)}oa(t,e,n);break;case 1:if(!Nr&&(ju(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pn(n,e,a)}oa(t,e,n);break;case 21:oa(t,e,n);break;case 22:n.mode&1?(Nr=(r=Nr)||n.memoizedState!==null,oa(t,e,n),Nr=r):oa(t,e,n);break;default:oa(t,e,n)}}function TN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new W6),e.forEach(function(r){var s=e9.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ti(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:hr=a.stateNode,ai=!1;break e;case 3:hr=a.stateNode.containerInfo,ai=!0;break e;case 4:hr=a.stateNode.containerInfo,ai=!0;break e}a=a.return}if(hr===null)throw Error(we(160));WD(i,o,s),hr=null,ai=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Pn(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GD(e,t),e=e.sibling}function GD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ti(e,t),Pi(t),r&4){try{Nf(3,t,t.return),wx(3,t)}catch(y){Pn(t,t.return,y)}try{Nf(5,t,t.return)}catch(y){Pn(t,t.return,y)}}break;case 1:ti(e,t),Pi(t),r&512&&n!==null&&ju(n,n.return);break;case 5:if(ti(e,t),Pi(t),r&512&&n!==null&&ju(n,n.return),t.flags&32){var s=t.stateNode;try{qf(s,"")}catch(y){Pn(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&fM(s,i),O_(a,o);var u=O_(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?vM(s,h):d==="dangerouslySetInnerHTML"?gM(s,h):d==="children"?qf(s,h):pS(s,d,h,u)}switch(a){case"input":P_(s,i);break;case"textarea":mM(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Vu(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Vu(s,!!i.multiple,i.defaultValue,!0):Vu(s,!!i.multiple,i.multiple?[]:"",!1))}s[rm]=i}catch(y){Pn(t,t.return,y)}}break;case 6:if(ti(e,t),Pi(t),r&4){if(t.stateNode===null)throw Error(we(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Pn(t,t.return,y)}}break;case 3:if(ti(e,t),Pi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jf(e.containerInfo)}catch(y){Pn(t,t.return,y)}break;case 4:ti(e,t),Pi(t);break;case 13:ti(e,t),Pi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qS=Dn())),r&4&&TN(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Nr=(u=Nr)||d,ti(e,t),Nr=u):ti(e,t),Pi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Fe=t,d=t.child;d!==null;){for(h=Fe=d;Fe!==null;){switch(m=Fe,g=m.child,m.tag){case 0:case 11:case 14:case 15:Nf(4,m,m.return);break;case 1:ju(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(y){Pn(r,n,y)}}break;case 5:ju(m,m.return);break;case 22:if(m.memoizedState!==null){CN(h);continue}}g!==null?(g.return=m,Fe=g):CN(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=yM("display",o))}catch(y){Pn(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Pn(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ti(e,t),Pi(t),r&4&&TN(t);break;case 21:break;default:ti(e,t),Pi(t)}}function Pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($D(n)){var r=n;break e}n=n.return}throw Error(we(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qf(s,""),r.flags&=-33);var i=SN(t);hb(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=SN(t);db(t,a,o);break;default:throw Error(we(161))}}catch(c){Pn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H6(t,e,n){Fe=t,HD(t)}function HD(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var s=Fe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||fg;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Nr;a=fg;var u=Nr;if(fg=o,(Nr=c)&&!u)for(Fe=s;Fe!==null;)o=Fe,c=o.child,o.tag===22&&o.memoizedState!==null?NN(s):c!==null?(c.return=o,Fe=c):NN(s);for(;i!==null;)Fe=i,HD(i),i=i.sibling;Fe=s,fg=a,Nr=u}IN(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Fe=i):IN(t)}}function IN(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nr||wx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:si(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uN(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Jf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}Nr||e.flags&512&&ub(e)}catch(m){Pn(e,e.return,m)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function CN(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function NN(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wx(4,e)}catch(c){Pn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Pn(e,s,c)}}var i=e.return;try{ub(e)}catch(c){Pn(e,i,c)}break;case 5:var o=e.return;try{ub(e)}catch(c){Pn(e,o,c)}}}catch(c){Pn(e,e.return,c)}if(e===t){Fe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Fe=a;break}Fe=e.return}}var K6=Math.ceil,qy=Yo.ReactCurrentDispatcher,HS=Yo.ReactCurrentOwner,Bs=Yo.ReactCurrentBatchConfig,Bt=0,lr=null,Gn=null,yr=0,ys=0,Mu=ml(0),Zn=0,cm=null,gc=0,_x=0,KS=0,kf=null,ss=null,qS=0,Ed=1/0,po=null,Yy=!1,fb=null,$a=null,mg=!1,Ma=null,Qy=0,Rf=0,mb=null,ey=-1,ty=0;function $r(){return Bt&6?Dn():ey!==-1?ey:ey=Dn()}function Wa(t){return t.mode&1?Bt&2&&yr!==0?yr&-yr:R6.transition!==null?(ty===0&&(ty=RM()),ty):(t=Jt,t!==0||(t=window.event,t=t===void 0?16:LM(t.type)),t):1}function pi(t,e,n,r){if(50<Rf)throw Rf=0,mb=null,Error(we(185));Jm(t,n,r),(!(Bt&2)||t!==lr)&&(t===lr&&(!(Bt&2)&&(_x|=n),Zn===4&&xa(t,yr)),hs(t,r),n===1&&Bt===0&&!(e.mode&1)&&(Ed=Dn()+500,yx&&pl()))}function hs(t,e){var n=t.callbackNode;R$(t,e);var r=jy(t,t===lr?yr:0);if(r===0)n!==null&&L1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&L1(n),e===1)t.tag===0?k6(kN.bind(null,t)):nD(kN.bind(null,t)),T6(function(){!(Bt&6)&&pl()}),n=null;else{switch(PM(r)){case 1:n=wS;break;case 4:n=NM;break;case 16:n=Ay;break;case 536870912:n=kM;break;default:n=Ay}n=e2(n,KD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KD(t,e){if(ey=-1,ty=0,Bt&6)throw Error(we(327));var n=t.callbackNode;if(Wu()&&t.callbackNode!==n)return null;var r=jy(t,t===lr?yr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xy(t,r);else{e=r;var s=Bt;Bt|=2;var i=YD();(lr!==t||yr!==e)&&(po=null,Ed=Dn()+500,cc(t,e));do try{Q6();break}catch(a){qD(t,a)}while(!0);jS(),qy.current=i,Bt=s,Gn!==null?e=0:(lr=null,yr=0,e=Zn)}if(e!==0){if(e===2&&(s=U_(t),s!==0&&(r=s,e=pb(t,s))),e===1)throw n=cm,cc(t,0),xa(t,r),hs(t,Dn()),n;if(e===6)xa(t,r);else{if(s=t.current.alternate,!(r&30)&&!q6(s)&&(e=Xy(t,r),e===2&&(i=U_(t),i!==0&&(r=i,e=pb(t,i))),e===1))throw n=cm,cc(t,0),xa(t,r),hs(t,Dn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(we(345));case 2:Dl(t,ss,po);break;case 3:if(xa(t,r),(r&130023424)===r&&(e=qS+500-Dn(),10<e)){if(jy(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$r(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Y_(Dl.bind(null,t,ss,po),e);break}Dl(t,ss,po);break;case 4:if(xa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mi(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*K6(r/1960))-r,10<r){t.timeoutHandle=Y_(Dl.bind(null,t,ss,po),r);break}Dl(t,ss,po);break;case 5:Dl(t,ss,po);break;default:throw Error(we(329))}}}return hs(t,Dn()),t.callbackNode===n?KD.bind(null,t):null}function pb(t,e){var n=kf;return t.current.memoizedState.isDehydrated&&(cc(t,e).flags|=256),t=Xy(t,e),t!==2&&(e=ss,ss=n,e!==null&&gb(e)),t}function gb(t){ss===null?ss=t:ss.push.apply(ss,t)}function q6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wi(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xa(t,e){for(e&=~KS,e&=~_x,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mi(e),r=1<<n;t[n]=-1,e&=~r}}function kN(t){if(Bt&6)throw Error(we(327));Wu();var e=jy(t,0);if(!(e&1))return hs(t,Dn()),null;var n=Xy(t,e);if(t.tag!==0&&n===2){var r=U_(t);r!==0&&(e=r,n=pb(t,r))}if(n===1)throw n=cm,cc(t,0),xa(t,e),hs(t,Dn()),n;if(n===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dl(t,ss,po),hs(t,Dn()),null}function YS(t,e){var n=Bt;Bt|=1;try{return t(e)}finally{Bt=n,Bt===0&&(Ed=Dn()+500,yx&&pl())}}function yc(t){Ma!==null&&Ma.tag===0&&!(Bt&6)&&Wu();var e=Bt;Bt|=1;var n=Bs.transition,r=Jt;try{if(Bs.transition=null,Jt=1,t)return t()}finally{Jt=r,Bs.transition=n,Bt=e,!(Bt&6)&&pl()}}function QS(){ys=Mu.current,mn(Mu)}function cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S6(n)),Gn!==null)for(n=Gn.return;n!==null;){var r=n;switch(RS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fy();break;case 3:_d(),mn(us),mn(jr),VS();break;case 5:FS(r);break;case 4:_d();break;case 13:mn(Sn);break;case 19:mn(Sn);break;case 10:MS(r.type._context);break;case 22:case 23:QS()}n=n.return}if(lr=t,Gn=t=Ga(t.current,null),yr=ys=e,Zn=0,cm=null,KS=_x=gc=0,ss=kf=null,Ql!==null){for(e=0;e<Ql.length;e++)if(n=Ql[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ql=null}return t}function qD(t,e){do{var n=Gn;try{if(jS(),Xg.current=Ky,Hy){for(var r=In.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hy=!1}if(pc=0,ir=Yn=In=null,Cf=!1,om=0,HS.current=null,n===null||n.return===null){Zn=1,cm=e,Gn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=yr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=gN(o);if(g!==null){g.flags&=-257,yN(g,o,a,i,e),g.mode&1&&pN(i,u,e),e=g,c=u;var w=e.updateQueue;if(w===null){var y=new Set;y.add(c),e.updateQueue=y}else w.add(c);break e}else{if(!(e&1)){pN(i,u,e),XS();break e}c=Error(we(426))}}else if(_n&&a.mode&1){var T=gN(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),yN(T,o,a,i,e),PS(bd(c,a));break e}}i=c=bd(c,a),Zn!==4&&(Zn=2),kf===null?kf=[i]:kf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=PD(i,c,e);cN(i,b);break e;case 1:a=c;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&($a===null||!$a.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=AD(i,a,e);cN(i,A);break e}}i=i.return}while(i!==null)}XD(n)}catch(M){e=M,Gn===n&&n!==null&&(Gn=n=n.return);continue}break}while(!0)}function YD(){var t=qy.current;return qy.current=Ky,t===null?Ky:t}function XS(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),lr===null||!(gc&268435455)&&!(_x&268435455)||xa(lr,yr)}function Xy(t,e){var n=Bt;Bt|=2;var r=YD();(lr!==t||yr!==e)&&(po=null,cc(t,e));do try{Y6();break}catch(s){qD(t,s)}while(!0);if(jS(),Bt=n,qy.current=r,Gn!==null)throw Error(we(261));return lr=null,yr=0,Zn}function Y6(){for(;Gn!==null;)QD(Gn)}function Q6(){for(;Gn!==null&&!_$();)QD(Gn)}function QD(t){var e=ZD(t.alternate,t,ys);t.memoizedProps=t.pendingProps,e===null?XD(t):Gn=e,HS.current=null}function XD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$6(n,e),n!==null){n.flags&=32767,Gn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zn=6,Gn=null;return}}else if(n=z6(n,e,ys),n!==null){Gn=n;return}if(e=e.sibling,e!==null){Gn=e;return}Gn=e=t}while(e!==null);Zn===0&&(Zn=5)}function Dl(t,e,n){var r=Jt,s=Bs.transition;try{Bs.transition=null,Jt=1,X6(t,e,n,r)}finally{Bs.transition=s,Jt=r}return null}function X6(t,e,n,r){do Wu();while(Ma!==null);if(Bt&6)throw Error(we(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(P$(t,i),t===lr&&(Gn=lr=null,yr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mg||(mg=!0,e2(Ay,function(){return Wu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Bs.transition,Bs.transition=null;var o=Jt;Jt=1;var a=Bt;Bt|=4,HS.current=null,G6(t,n),GD(n,t),y6(K_),My=!!H_,K_=H_=null,t.current=n,H6(n),b$(),Bt=a,Jt=o,Bs.transition=i}else t.current=n;if(mg&&(mg=!1,Ma=t,Qy=s),i=t.pendingLanes,i===0&&($a=null),T$(n.stateNode),hs(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yy)throw Yy=!1,t=fb,fb=null,t;return Qy&1&&t.tag!==0&&Wu(),i=t.pendingLanes,i&1?t===mb?Rf++:(Rf=0,mb=t):Rf=0,pl(),null}function Wu(){if(Ma!==null){var t=PM(Qy),e=Bs.transition,n=Jt;try{if(Bs.transition=null,Jt=16>t?16:t,Ma===null)var r=!1;else{if(t=Ma,Ma=null,Qy=0,Bt&6)throw Error(we(331));var s=Bt;for(Bt|=4,Fe=t.current;Fe!==null;){var i=Fe,o=i.child;if(Fe.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Fe=u;Fe!==null;){var d=Fe;switch(d.tag){case 0:case 11:case 15:Nf(8,d,i)}var h=d.child;if(h!==null)h.return=d,Fe=h;else for(;Fe!==null;){d=Fe;var m=d.sibling,g=d.return;if(zD(d),d===u){Fe=null;break}if(m!==null){m.return=g,Fe=m;break}Fe=g}}}var w=i.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}Fe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Fe=o;else e:for(;Fe!==null;){if(i=Fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nf(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Fe=b;break e}Fe=i.return}}var _=t.current;for(Fe=_;Fe!==null;){o=Fe;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Fe=I;else e:for(o=_;Fe!==null;){if(a=Fe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wx(9,a)}}catch(M){Pn(a,a.return,M)}if(a===o){Fe=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Fe=A;break e}Fe=a.return}}if(Bt=s,pl(),$i&&typeof $i.onPostCommitFiberRoot=="function")try{$i.onPostCommitFiberRoot(hx,t)}catch{}r=!0}return r}finally{Jt=n,Bs.transition=e}}return!1}function RN(t,e,n){e=bd(n,e),e=PD(t,e,1),t=za(t,e,1),e=$r(),t!==null&&(Jm(t,1,e),hs(t,e))}function Pn(t,e,n){if(t.tag===3)RN(t,t,n);else for(;e!==null;){if(e.tag===3){RN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($a===null||!$a.has(r))){t=bd(n,t),t=AD(e,t,1),e=za(e,t,1),t=$r(),e!==null&&(Jm(e,1,t),hs(e,t));break}}e=e.return}}function J6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$r(),t.pingedLanes|=t.suspendedLanes&n,lr===t&&(yr&n)===n&&(Zn===4||Zn===3&&(yr&130023424)===yr&&500>Dn()-qS?cc(t,0):KS|=n),hs(t,e)}function JD(t,e){e===0&&(t.mode&1?(e=sg,sg<<=1,!(sg&130023424)&&(sg=4194304)):e=1);var n=$r();t=Do(t,e),t!==null&&(Jm(t,e,n),hs(t,n))}function Z6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JD(t,n)}function e9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(e),JD(t,n)}var ZD;ZD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||us.current)is=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return is=!1,U6(t,e,n);is=!!(t.flags&131072)}else is=!1,_n&&e.flags&1048576&&rD(e,Uy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zg(t,e),t=e.pendingProps;var s=vd(e,jr.current);$u(e,n),s=US(null,e,r,t,s,n);var i=zS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ds(r)?(i=!0,Vy(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,OS(e),s.updater=xx,e.stateNode=s,s._reactInternals=e,nb(e,r,t,n),e=ib(null,e,r,!0,i,n)):(e.tag=0,_n&&i&&kS(e),Ur(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zg(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=n9(r),t=si(r,t),s){case 0:e=sb(null,e,r,t,n);break e;case 1:e=wN(null,e,r,t,n);break e;case 11:e=vN(null,e,r,t,n);break e;case 14:e=xN(null,e,r,si(r.type,t),n);break e}throw Error(we(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:si(r,s),sb(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:si(r,s),wN(t,e,r,s,n);case 3:e:{if(OD(e),t===null)throw Error(we(387));r=e.pendingProps,i=e.memoizedState,s=i.element,cD(t,e),Wy(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bd(Error(we(423)),e),e=_N(t,e,r,n,s);break e}else if(r!==s){s=bd(Error(we(424)),e),e=_N(t,e,r,n,s);break e}else for(ws=Ua(e.stateNode.containerInfo.firstChild),bs=e,_n=!0,ci=null,n=aD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xd(),r===s){e=Oo(t,e,n);break e}Ur(t,e,r,n)}e=e.child}return e;case 5:return uD(e),t===null&&Z_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,q_(r,s)?o=null:i!==null&&q_(r,i)&&(e.flags|=32),DD(t,e),Ur(t,e,o,n),e.child;case 6:return t===null&&Z_(e),null;case 13:return LD(t,e,n);case 4:return LS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wd(e,null,r,n):Ur(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:si(r,s),vN(t,e,r,s,n);case 7:return Ur(t,e,e.pendingProps,n),e.child;case 8:return Ur(t,e,e.pendingProps.children,n),e.child;case 12:return Ur(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,an(zy,r._currentValue),r._currentValue=o,i!==null)if(wi(i.value,o)){if(i.children===s.children&&!us.current){e=Oo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Co(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),eb(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(we(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),eb(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ur(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$u(e,n),s=Gs(s),r=r(s),e.flags|=1,Ur(t,e,r,n),e.child;case 14:return r=e.type,s=si(r,e.pendingProps),s=si(r.type,s),xN(t,e,r,s,n);case 15:return jD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:si(r,s),Zg(t,e),e.tag=1,ds(r)?(t=!0,Vy(e)):t=!1,$u(e,n),RD(e,r,s),nb(e,r,s,n),ib(null,e,r,!0,t,n);case 19:return FD(t,e,n);case 22:return MD(t,e,n)}throw Error(we(156,e.tag))};function e2(t,e){return CM(t,e)}function t9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(t,e,n,r){return new t9(t,e,n,r)}function JS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n9(t){if(typeof t=="function")return JS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yS)return 11;if(t===vS)return 14}return 2}function Ga(t,e){var n=t.alternate;return n===null?(n=Ls(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ny(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")JS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Su:return uc(n.children,s,i,e);case gS:o=8,s|=8;break;case I_:return t=Ls(12,n,e,s|2),t.elementType=I_,t.lanes=i,t;case C_:return t=Ls(13,n,e,s),t.elementType=C_,t.lanes=i,t;case N_:return t=Ls(19,n,e,s),t.elementType=N_,t.lanes=i,t;case uM:return bx(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lM:o=10;break e;case cM:o=9;break e;case yS:o=11;break e;case vS:o=14;break e;case ga:o=16,r=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=Ls(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function uc(t,e,n,r){return t=Ls(7,t,r,e),t.lanes=n,t}function bx(t,e,n,r){return t=Ls(22,t,r,e),t.elementType=uM,t.lanes=n,t.stateNode={isHidden:!1},t}function _w(t,e,n){return t=Ls(6,t,null,e),t.lanes=n,t}function bw(t,e,n){return e=Ls(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r9(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nw(0),this.expirationTimes=nw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nw(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ZS(t,e,n,r,s,i,o,a,c){return t=new r9(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ls(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},OS(i),t}function s9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function t2(t){if(!t)return nl;t=t._reactInternals;e:{if(Uc(t)!==t||t.tag!==1)throw Error(we(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ds(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(t.tag===1){var n=t.type;if(ds(n))return tD(t,n,e)}return e}function n2(t,e,n,r,s,i,o,a,c){return t=ZS(n,r,!0,t,s,i,o,a,c),t.context=t2(null),n=t.current,r=$r(),s=Wa(n),i=Co(r,s),i.callback=e??null,za(n,i,s),t.current.lanes=s,Jm(t,s,r),hs(t,r),t}function Ex(t,e,n,r){var s=e.current,i=$r(),o=Wa(s);return n=t2(n),e.context===null?e.context=n:e.pendingContext=n,e=Co(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=za(s,e,o),t!==null&&(pi(t,s,o,i),Qg(t,s,o)),o}function Jy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function PN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eT(t,e){PN(t,e),(t=t.alternate)&&PN(t,e)}function i9(){return null}var r2=typeof reportError=="function"?reportError:function(t){console.error(t)};function tT(t){this._internalRoot=t}Sx.prototype.render=tT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(we(409));Ex(t,e,null,null)};Sx.prototype.unmount=tT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yc(function(){Ex(null,t,null,null)}),e[Mo]=null}};function Sx(t){this._internalRoot=t}Sx.prototype.unstable_scheduleHydration=function(t){if(t){var e=MM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<va.length&&e!==0&&e<va[n].priority;n++);va.splice(n,0,t),n===0&&OM(t)}};function nT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function AN(){}function o9(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Jy(o);i.call(u)}}var o=n2(e,r,t,0,null,!1,!1,"",AN);return t._reactRootContainer=o,t[Mo]=o.current,tm(t.nodeType===8?t.parentNode:t),yc(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Jy(c);a.call(u)}}var c=ZS(t,0,!1,null,null,!1,!1,"",AN);return t._reactRootContainer=c,t[Mo]=c.current,tm(t.nodeType===8?t.parentNode:t),yc(function(){Ex(e,c,n,r)}),c}function Ix(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Jy(o);a.call(c)}}Ex(e,o,t,s)}else o=o9(n,e,t,s,r);return Jy(o)}AM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=af(e.pendingLanes);n!==0&&(_S(e,n|1),hs(e,Dn()),!(Bt&6)&&(Ed=Dn()+500,pl()))}break;case 13:yc(function(){var r=Do(t,1);if(r!==null){var s=$r();pi(r,t,1,s)}}),eT(t,1)}};bS=function(t){if(t.tag===13){var e=Do(t,134217728);if(e!==null){var n=$r();pi(e,t,134217728,n)}eT(t,134217728)}};jM=function(t){if(t.tag===13){var e=Wa(t),n=Do(t,e);if(n!==null){var r=$r();pi(n,t,e,r)}eT(t,e)}};MM=function(){return Jt};DM=function(t,e){var n=Jt;try{return Jt=t,e()}finally{Jt=n}};F_=function(t,e,n){switch(e){case"input":if(P_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gx(r);if(!s)throw Error(we(90));hM(r),P_(r,s)}}}break;case"textarea":mM(t,n);break;case"select":e=n.value,e!=null&&Vu(t,!!n.multiple,e,!1)}};_M=YS;bM=yc;var a9={usingClientEntryPoint:!1,Events:[ep,Nu,gx,xM,wM,YS]},Bh={findFiberByHostInstance:Yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l9={bundleType:Bh.bundleType,version:Bh.version,rendererPackageName:Bh.rendererPackageName,rendererConfig:Bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TM(t),t===null?null:t.stateNode},findFiberByHostInstance:Bh.findFiberByHostInstance||i9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pg.isDisabled&&pg.supportsFiber)try{hx=pg.inject(l9),$i=pg}catch{}}ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a9;ks.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nT(e))throw Error(we(200));return s9(t,e,null,n)};ks.createRoot=function(t,e){if(!nT(t))throw Error(we(299));var n=!1,r="",s=r2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ZS(t,1,!1,null,null,n,!1,r,s),t[Mo]=e.current,tm(t.nodeType===8?t.parentNode:t),new tT(e)};ks.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=TM(e),t=t===null?null:t.stateNode,t};ks.flushSync=function(t){return yc(t)};ks.hydrate=function(t,e,n){if(!Tx(e))throw Error(we(200));return Ix(null,t,e,!0,n)};ks.hydrateRoot=function(t,e,n){if(!nT(t))throw Error(we(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=r2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=n2(e,null,t,1,n??null,s,!1,i,o),t[Mo]=e.current,tm(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Sx(e)};ks.render=function(t,e,n){if(!Tx(e))throw Error(we(200));return Ix(null,t,e,!1,n)};ks.unmountComponentAtNode=function(t){if(!Tx(t))throw Error(we(40));return t._reactRootContainer?(yc(function(){Ix(null,null,t,!1,function(){t._reactRootContainer=null,t[Mo]=null})}),!0):!1};ks.unstable_batchedUpdates=YS;ks.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tx(n))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return Ix(t,e,n,!1,r)};ks.version="18.3.1-next-f1338f8080-20240426";function s2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s2)}catch(t){console.error(t)}}s2(),sM.exports=ks;var zc=sM.exports;const rT=Hj(zc),c9=Gj({__proto__:null,default:rT},[zc]);var jN=zc;S_.createRoot=jN.createRoot,S_.hydrateRoot=jN.hydrateRoot;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Sd;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Sd||(Sd={}));class Ew extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const u9=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},d9=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:u9(t),i=()=>s()!=="web",o=h=>{const m=u.get(h);return!!(m!=null&&m.platforms.has(s())||a(h))},a=h=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(g=>g.name===h)},c=h=>t.console.error(h),u=new Map,d=(h,m={})=>{const g=u.get(h);if(g)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),g.proxy;const w=s(),y=a(h);let T;const b=async()=>(!T&&w in m?T=typeof m[w]=="function"?T=await m[w]():T=m[w]:e!==null&&!T&&"web"in m&&(T=typeof m.web=="function"?T=await m.web():T=m.web),T),_=(E,C)=>{var S,P;if(y){const R=y==null?void 0:y.methods.find(k=>C===k.name);if(R)return R.rtype==="promise"?k=>n.nativePromise(h,C.toString(),k):(k,W)=>n.nativeCallback(h,C.toString(),k,W);if(E)return(S=E[C])===null||S===void 0?void 0:S.bind(E)}else{if(E)return(P=E[C])===null||P===void 0?void 0:P.bind(E);throw new Ew(`"${h}" plugin is not implemented on ${w}`,Sd.Unimplemented)}},I=E=>{let C;const S=(...P)=>{const R=b().then(k=>{const W=_(k,E);if(W){const J=W(...P);return C=J==null?void 0:J.remove,J}else throw new Ew(`"${h}.${E}()" is not implemented on ${w}`,Sd.Unimplemented)});return E==="addListener"&&(R.remove=async()=>C()),R};return S.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(S,"name",{value:E,writable:!1,configurable:!1}),S},A=I("addListener"),M=I("removeListener"),j=(E,C)=>{const S=A({eventName:E},C),P=async()=>{const k=await S;M({eventName:E,callbackId:k},C)},R=new Promise(k=>S.then(()=>k({remove:P})));return R.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},R},v=new Proxy({},{get(E,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?j:A;case"removeListener":return M;default:return I(C)}}});return r[h]=v,u.set(h,{name:h,proxy:v,platforms:new Set([...Object.keys(m),...y?[w]:[]])}),v};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=c,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Ew,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},h9=t=>t.Capacitor=d9(t),Lo=h9(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Cx=Lo.registerPlugin;class i2{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Lo.Exception(e,Sd.Unimplemented)}unavailable(e="not available"){return new Lo.Exception(e,Sd.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const MN=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),DN=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class f9 extends i2{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=DN(s).trim(),i=DN(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=MN(e.key),r=MN(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Cx("CapacitorCookies",{web:()=>new f9});const m9=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),p9=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},g9=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,c;return Array.isArray(o)?(c="",o.forEach(u=>{a=e?encodeURIComponent(u):u,c+=`${i}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${i}=${a}`),`${r}&${c}`},"").substr(1):null,y9=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=p9(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,c)=>{i.append(c,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class v9 extends i2{async request(e){const n=y9(e,e.webFetchExtra),r=g9(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let c,u;switch(a){case"arraybuffer":case"blob":u=await i.blob(),c=await m9(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const d={};return i.headers.forEach((h,m)=>{d[m]=h}),{data:c,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Cx("CapacitorHttp",{web:()=>new v9});const x9="modulepreload",w9=function(t){return"/"+t},ON={},o2=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=w9(c),c in ON)return;ON[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":x9,u||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},_9=Cx("SplashScreen",{web:()=>o2(()=>import("./web-DChfFa72.js"),[]).then(t=>new t.SplashScreenWeb)});var LN=["light","dark"],b9="(prefers-color-scheme: dark)",E9=p.createContext(void 0),S9={setTheme:t=>{},themes:[]},T9=()=>{var t;return(t=p.useContext(E9))!=null?t:S9};p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?LN.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(w,y=!1,T=!0)=>{let b=o?o[w]:w,_=y?w+"|| ''":`'${b}'`,I="";return s&&T&&!y&&LN.includes(w)&&(I+=`d.style.colorScheme = '${w}';`),n==="class"?y||b?I+=`c.add(${_})`:I+="null":b&&(I+=`d[s](n,${_})`),I},g=t?`!function(){${d}${m(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${b9}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var I9=t=>{switch(t){case"success":return k9;case"info":return P9;case"warning":return R9;case"error":return A9;default:return null}},C9=Array(12).fill(0),N9=({visible:t,className:e})=>Se.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Se.createElement("div",{className:"sonner-spinner"},C9.map((n,r)=>Se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),k9=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),R9=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),P9=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),A9=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),j9=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),M9=()=>{let[t,e]=Se.useState(document.hidden);return Se.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},yb=1,D9=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:yb++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],Se.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(L9(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||yb++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},es=new D9,O9=(t,e)=>{let n=(e==null?void 0:e.id)||yb++;return es.addToast({title:t,...e,id:n}),n},L9=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",F9=O9,V9=()=>es.toasts,B9=()=>es.getActiveToasts(),G=Object.assign(F9,{success:es.success,info:es.info,warning:es.warning,error:es.error,custom:es.custom,message:es.message,promise:es.promise,dismiss:es.dismiss,loading:es.loading},{getHistory:V9,getToasts:B9});function U9(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}U9(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function gg(t){return t.label!==void 0}var z9=3,$9="32px",W9="16px",FN=4e3,G9=356,H9=14,K9=20,q9=200;function ni(...t){return t.filter(Boolean).join(" ")}function Y9(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Q9=t=>{var e,n,r,s,i,o,a,c,u,d,h;let{invert:m,toast:g,unstyled:w,interacting:y,setHeights:T,visibleToasts:b,heights:_,index:I,toasts:A,expanded:M,removeToast:j,defaultRichColors:v,closeButton:E,style:C,cancelButtonStyle:S,actionButtonStyle:P,className:R="",descriptionClassName:k="",duration:W,position:J,gap:Q,loadingIcon:le,expandByDefault:O,classNames:V,icons:Z,closeButtonAriaLabel:ye="Close toast",pauseWhenPageIsHidden:ae}=t,[ve,_e]=Se.useState(null),[de,ze]=Se.useState(null),[re,Pe]=Se.useState(!1),[Ze,De]=Se.useState(!1),[ce,L]=Se.useState(!1),[K,ie]=Se.useState(!1),[Ae,Ie]=Se.useState(!1),[$e,je]=Se.useState(0),[ee,be]=Se.useState(0),Ke=Se.useRef(g.duration||W||FN),tt=Se.useRef(null),me=Se.useRef(null),nt=I===0,He=I+1<=b,te=g.type,ut=g.dismissible!==!1,Zt=g.className||"",_t=g.descriptionClassName||"",tn=Se.useMemo(()=>_.findIndex(st=>st.toastId===g.id)||0,[_,g.id]),Mn=Se.useMemo(()=>{var st;return(st=g.closeButton)!=null?st:E},[g.closeButton,E]),ln=Se.useMemo(()=>g.duration||W||FN,[g.duration,W]),xt=Se.useRef(0),X=Se.useRef(0),F=Se.useRef(0),z=Se.useRef(null),[oe,he]=J.split("-"),xe=Se.useMemo(()=>_.reduce((st,pt,Ot)=>Ot>=tn?st:st+pt.height,0),[_,tn]),ot=M9(),Ht=g.invert||m,ur=te==="loading";X.current=Se.useMemo(()=>tn*Q+xe,[tn,xe]),Se.useEffect(()=>{Ke.current=ln},[ln]),Se.useEffect(()=>{Pe(!0)},[]),Se.useEffect(()=>{let st=me.current;if(st){let pt=st.getBoundingClientRect().height;return be(pt),T(Ot=>[{toastId:g.id,height:pt,position:g.position},...Ot]),()=>T(Ot=>Ot.filter(yn=>yn.toastId!==g.id))}},[T,g.id]),Se.useLayoutEffect(()=>{if(!re)return;let st=me.current,pt=st.style.height;st.style.height="auto";let Ot=st.getBoundingClientRect().height;st.style.height=pt,be(Ot),T(yn=>yn.find(Bn=>Bn.toastId===g.id)?yn.map(Bn=>Bn.toastId===g.id?{...Bn,height:Ot}:Bn):[{toastId:g.id,height:Ot,position:g.position},...yn])},[re,g.title,g.description,T,g.id]);let gt=Se.useCallback(()=>{De(!0),je(X.current),T(st=>st.filter(pt=>pt.toastId!==g.id)),setTimeout(()=>{j(g)},q9)},[g,j,T,X]);Se.useEffect(()=>{if(g.promise&&te==="loading"||g.duration===1/0||g.type==="loading")return;let st;return M||y||ae&&ot?(()=>{if(F.current<xt.current){let pt=new Date().getTime()-xt.current;Ke.current=Ke.current-pt}F.current=new Date().getTime()})():Ke.current!==1/0&&(xt.current=new Date().getTime(),st=setTimeout(()=>{var pt;(pt=g.onAutoClose)==null||pt.call(g,g),gt()},Ke.current)),()=>clearTimeout(st)},[M,y,g,te,ae,ot,gt]),Se.useEffect(()=>{g.delete&&gt()},[gt,g.delete]);function Mr(){var st,pt,Ot;return Z!=null&&Z.loading?Se.createElement("div",{className:ni(V==null?void 0:V.loader,(st=g==null?void 0:g.classNames)==null?void 0:st.loader,"sonner-loader"),"data-visible":te==="loading"},Z.loading):le?Se.createElement("div",{className:ni(V==null?void 0:V.loader,(pt=g==null?void 0:g.classNames)==null?void 0:pt.loader,"sonner-loader"),"data-visible":te==="loading"},le):Se.createElement(N9,{className:ni(V==null?void 0:V.loader,(Ot=g==null?void 0:g.classNames)==null?void 0:Ot.loader),visible:te==="loading"})}return Se.createElement("li",{tabIndex:0,ref:me,className:ni(R,Zt,V==null?void 0:V.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[te],(n=g==null?void 0:g.classNames)==null?void 0:n[te]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:v,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":re,"data-promise":!!g.promise,"data-swiped":Ae,"data-removed":Ze,"data-visible":He,"data-y-position":oe,"data-x-position":he,"data-index":I,"data-front":nt,"data-swiping":ce,"data-dismissible":ut,"data-type":te,"data-invert":Ht,"data-swipe-out":K,"data-swipe-direction":de,"data-expanded":!!(M||O&&re),style:{"--index":I,"--toasts-before":I,"--z-index":A.length-I,"--offset":`${Ze?$e:X.current}px`,"--initial-height":O?"auto":`${ee}px`,...C,...g.style},onDragEnd:()=>{L(!1),_e(null),z.current=null},onPointerDown:st=>{ur||!ut||(tt.current=new Date,je(X.current),st.target.setPointerCapture(st.pointerId),st.target.tagName!=="BUTTON"&&(L(!0),z.current={x:st.clientX,y:st.clientY}))},onPointerUp:()=>{var st,pt,Ot,yn;if(K||!ut)return;z.current=null;let Bn=Number(((st=me.current)==null?void 0:st.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Kt=Number(((pt=me.current)==null?void 0:pt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),B=new Date().getTime()-((Ot=tt.current)==null?void 0:Ot.getTime()),$=ve==="x"?Bn:Kt,Y=Math.abs($)/B;if(Math.abs($)>=K9||Y>.11){je(X.current),(yn=g.onDismiss)==null||yn.call(g,g),ze(ve==="x"?Bn>0?"right":"left":Kt>0?"down":"up"),gt(),ie(!0),Ie(!1);return}L(!1),_e(null)},onPointerMove:st=>{var pt,Ot,yn,Bn;if(!z.current||!ut||((pt=window.getSelection())==null?void 0:pt.toString().length)>0)return;let Kt=st.clientY-z.current.y,B=st.clientX-z.current.x,$=(Ot=t.swipeDirections)!=null?Ot:Y9(J);!ve&&(Math.abs(B)>1||Math.abs(Kt)>1)&&_e(Math.abs(B)>Math.abs(Kt)?"x":"y");let Y={x:0,y:0};ve==="y"?($.includes("top")||$.includes("bottom"))&&($.includes("top")&&Kt<0||$.includes("bottom")&&Kt>0)&&(Y.y=Kt):ve==="x"&&($.includes("left")||$.includes("right"))&&($.includes("left")&&B<0||$.includes("right")&&B>0)&&(Y.x=B),(Math.abs(Y.x)>0||Math.abs(Y.y)>0)&&Ie(!0),(yn=me.current)==null||yn.style.setProperty("--swipe-amount-x",`${Y.x}px`),(Bn=me.current)==null||Bn.style.setProperty("--swipe-amount-y",`${Y.y}px`)}},Mn&&!g.jsx?Se.createElement("button",{"aria-label":ye,"data-disabled":ur,"data-close-button":!0,onClick:ur||!ut?()=>{}:()=>{var st;gt(),(st=g.onDismiss)==null||st.call(g,g)},className:ni(V==null?void 0:V.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(i=Z==null?void 0:Z.close)!=null?i:j9):null,g.jsx||p.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:Se.createElement(Se.Fragment,null,te||g.icon||g.promise?Se.createElement("div",{"data-icon":"",className:ni(V==null?void 0:V.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Mr():null,g.type!=="loading"?g.icon||(Z==null?void 0:Z[te])||I9(te):null):null,Se.createElement("div",{"data-content":"",className:ni(V==null?void 0:V.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},Se.createElement("div",{"data-title":"",className:ni(V==null?void 0:V.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?Se.createElement("div",{"data-description":"",className:ni(k,_t,V==null?void 0:V.description,(u=g==null?void 0:g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),p.isValidElement(g.cancel)?g.cancel:g.cancel&&gg(g.cancel)?Se.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||S,onClick:st=>{var pt,Ot;gg(g.cancel)&&ut&&((Ot=(pt=g.cancel).onClick)==null||Ot.call(pt,st),gt())},className:ni(V==null?void 0:V.cancelButton,(d=g==null?void 0:g.classNames)==null?void 0:d.cancelButton)},g.cancel.label):null,p.isValidElement(g.action)?g.action:g.action&&gg(g.action)?Se.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||P,onClick:st=>{var pt,Ot;gg(g.action)&&((Ot=(pt=g.action).onClick)==null||Ot.call(pt,st),!st.defaultPrevented&&gt())},className:ni(V==null?void 0:V.actionButton,(h=g==null?void 0:g.classNames)==null?void 0:h.actionButton)},g.action.label):null))};function VN(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function X9(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?W9:$9;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),n}var J9=p.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:g,visibleToasts:w=z9,toastOptions:y,dir:T=VN(),gap:b=H9,loadingIcon:_,icons:I,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:M}=t,[j,v]=Se.useState([]),E=Se.useMemo(()=>Array.from(new Set([r].concat(j.filter(ae=>ae.position).map(ae=>ae.position)))),[j,r]),[C,S]=Se.useState([]),[P,R]=Se.useState(!1),[k,W]=Se.useState(!1),[J,Q]=Se.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),le=Se.useRef(null),O=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=Se.useRef(null),Z=Se.useRef(!1),ye=Se.useCallback(ae=>{v(ve=>{var _e;return(_e=ve.find(de=>de.id===ae.id))!=null&&_e.delete||es.dismiss(ae.id),ve.filter(({id:de})=>de!==ae.id)})},[]);return Se.useEffect(()=>es.subscribe(ae=>{if(ae.dismiss){v(ve=>ve.map(_e=>_e.id===ae.id?{..._e,delete:!0}:_e));return}setTimeout(()=>{rT.flushSync(()=>{v(ve=>{let _e=ve.findIndex(de=>de.id===ae.id);return _e!==-1?[...ve.slice(0,_e),{...ve[_e],...ae},...ve.slice(_e+1)]:[ae,...ve]})})})}),[]),Se.useEffect(()=>{if(d!=="system"){Q(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window>"u")return;let ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:ve})=>{Q(ve?"dark":"light")})}catch{ae.addListener(({matches:_e})=>{try{Q(_e?"dark":"light")}catch(de){console.error(de)}})}},[d]),Se.useEffect(()=>{j.length<=1&&R(!1)},[j]),Se.useEffect(()=>{let ae=ve=>{var _e,de;s.every(ze=>ve[ze]||ve.code===ze)&&(R(!0),(_e=le.current)==null||_e.focus()),ve.code==="Escape"&&(document.activeElement===le.current||(de=le.current)!=null&&de.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[s]),Se.useEffect(()=>{if(le.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,Z.current=!1)}},[le.current]),Se.createElement("section",{ref:e,"aria-label":`${A} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((ae,ve)=>{var _e;let[de,ze]=ae.split("-");return j.length?Se.createElement("ol",{key:ae,dir:T==="auto"?VN():T,tabIndex:-1,ref:le,className:a,"data-sonner-toaster":!0,"data-theme":J,"data-y-position":de,"data-lifted":P&&j.length>1&&!i,"data-x-position":ze,style:{"--front-toast-height":`${((_e=C[0])==null?void 0:_e.height)||0}px`,"--width":`${G9}px`,"--gap":`${b}px`,...g,...X9(c,u)},onBlur:re=>{Z.current&&!re.currentTarget.contains(re.relatedTarget)&&(Z.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,V.current=re.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{k||R(!1)},onDragEnd:()=>R(!1),onPointerDown:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},j.filter(re=>!re.position&&ve===0||re.position===ae).map((re,Pe)=>{var Ze,De;return Se.createElement(Q9,{key:re.id,icons:I,index:Pe,toast:re,defaultRichColors:h,duration:(Ze=y==null?void 0:y.duration)!=null?Ze:m,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:w,closeButton:(De=y==null?void 0:y.closeButton)!=null?De:o,interacting:k,position:ae,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:ye,toasts:j.filter(ce=>ce.position==re.position),heights:C.filter(ce=>ce.position==re.position),setHeights:S,expandByDefault:i,gap:b,loadingIcon:_,expanded:P,pauseWhenPageIsHidden:M,swipeDirections:t.swipeDirections})})):null}))});const Z9=({...t})=>{const{theme:e="system"}=T9();return l.jsx(J9,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function Ne(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function BN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Nx(...t){return e=>{let n=!1;const r=t.map(s=>{const i=BN(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():BN(t[s],null)}}}}function vt(...t){return p.useCallback(Nx(...t),t)}function eW(t,e){const n=p.createContext(e),r=i=>{const{children:o,...a}=i,c=p.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Ps(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),c=n.length;n=[...n,o];const u=h=>{var b;const{scope:m,children:g,...w}=h,y=((b=m==null?void 0:m[t])==null?void 0:b[c])||a,T=p.useMemo(()=>w,Object.values(w));return l.jsx(y.Provider,{value:T,children:g})};u.displayName=i+"Provider";function d(h,m){var y;const g=((y=m==null?void 0:m[t])==null?void 0:y[c])||a,w=p.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,tW(s,...e)]}function tW(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function rl(t){const e=rW(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),c=a.find(iW);if(c){const u=c.props.children,d=a.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return l.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var nW=rl("Slot");function rW(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=aW(s),a=oW(i,s.props);return s.type!==p.Fragment&&(a.ref=r?Nx(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var a2=Symbol("radix.slottable");function sW(t){const e=({children:n})=>l.jsx(l.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=a2,e}function iW(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===a2}function oW(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function aW(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var lW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=lW.reduce((t,e)=>{const n=rl(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function l2(t,e){t&&zc.flushSync(()=>t.dispatchEvent(e))}function mr(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function cW(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var uW="DismissableLayer",vb="dismissableLayer.update",dW="dismissableLayer.pointerDownOutside",hW="dismissableLayer.focusOutside",UN,c2=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rh=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=p.useContext(c2),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),w=vt(e,v=>h(v)),y=Array.from(u.layers),[T]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(T),_=d?y.indexOf(d):-1,I=u.layersWithOutsidePointerEventsDisabled.size>0,A=_>=b,M=pW(v=>{const E=v.target,C=[...u.branches].some(S=>S.contains(E));!A||C||(s==null||s(v),o==null||o(v),v.defaultPrevented||a==null||a())},m),j=gW(v=>{const E=v.target;[...u.branches].some(S=>S.contains(E))||(i==null||i(v),o==null||o(v),v.defaultPrevented||a==null||a())},m);return cW(v=>{_===u.layers.size-1&&(r==null||r(v),!v.defaultPrevented&&a&&(v.preventDefault(),a()))},m),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(UN=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),zN(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=UN)}},[d,m,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),zN())},[d,u]),p.useEffect(()=>{const v=()=>g({});return document.addEventListener(vb,v),()=>document.removeEventListener(vb,v)},[]),l.jsx(rt.div,{...c,ref:w,style:{pointerEvents:I?A?"auto":"none":void 0,...t.style},onFocusCapture:Ne(t.onFocusCapture,j.onFocusCapture),onBlurCapture:Ne(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Ne(t.onPointerDownCapture,M.onPointerDownCapture)})});rh.displayName=uW;var fW="DismissableLayerBranch",mW=p.forwardRef((t,e)=>{const n=p.useContext(c2),r=p.useRef(null),s=vt(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(rt.div,{...t,ref:s})});mW.displayName=fW;function pW(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){u2(dW,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function gW(t,e=globalThis==null?void 0:globalThis.document){const n=mr(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&u2(hW,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function zN(){const t=new CustomEvent(vb);document.dispatchEvent(t)}function u2(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?l2(s,i):s.dispatchEvent(i)}var wr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},yW=hS[" useId ".trim().toString()]||(()=>{}),vW=0;function Us(t){const[e,n]=p.useState(yW());return wr(()=>{n(r=>r??String(vW++))},[t]),e?`radix-${e}`:""}const xW=["top","right","bottom","left"],sl=Math.min,xs=Math.max,Zy=Math.round,yg=Math.floor,Gi=t=>({x:t,y:t}),wW={left:"right",right:"left",bottom:"top",top:"bottom"},_W={start:"end",end:"start"};function xb(t,e,n){return xs(t,sl(e,n))}function Fo(t,e){return typeof t=="function"?t(e):t}function Vo(t){return t.split("-")[0]}function sh(t){return t.split("-")[1]}function sT(t){return t==="x"?"y":"x"}function iT(t){return t==="y"?"height":"width"}const bW=new Set(["top","bottom"]);function Bi(t){return bW.has(Vo(t))?"y":"x"}function oT(t){return sT(Bi(t))}function EW(t,e,n){n===void 0&&(n=!1);const r=sh(t),s=oT(t),i=iT(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ev(o)),[o,ev(o)]}function SW(t){const e=ev(t);return[wb(t),e,wb(e)]}function wb(t){return t.replace(/start|end/g,e=>_W[e])}const $N=["left","right"],WN=["right","left"],TW=["top","bottom"],IW=["bottom","top"];function CW(t,e,n){switch(t){case"top":case"bottom":return n?e?WN:$N:e?$N:WN;case"left":case"right":return e?TW:IW;default:return[]}}function NW(t,e,n,r){const s=sh(t);let i=CW(Vo(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(wb)))),i}function ev(t){return t.replace(/left|right|bottom|top/g,e=>wW[e])}function kW(t){return{top:0,right:0,bottom:0,left:0,...t}}function d2(t){return typeof t!="number"?kW(t):{top:t,right:t,bottom:t,left:t}}function tv(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function GN(t,e,n){let{reference:r,floating:s}=t;const i=Bi(e),o=oT(e),a=iT(o),c=Vo(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let g;switch(c){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(sh(e)){case"start":g[o]-=m*(n&&u?-1:1);break;case"end":g[o]+=m*(n&&u?-1:1);break}return g}const RW=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=GN(u,r,c),m=r,g={},w=0;for(let y=0;y<a.length;y++){const{name:T,fn:b}=a[y],{x:_,y:I,data:A,reset:M}=await b({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});d=_??d,h=I??h,g={...g,[T]:{...g[T],...A}},M&&w<=50&&(w++,typeof M=="object"&&(M.placement&&(m=M.placement),M.rects&&(u=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):M.rects),{x:d,y:h}=GN(u,m,c)),y=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:g}};async function um(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Fo(e,t),w=d2(g),T=a[m?h==="floating"?"reference":"floating":h],b=tv(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(T)))==null||n?T:T.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),_=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),A=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},M=tv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:I,strategy:c}):_);return{top:(b.top-M.top+w.top)/A.y,bottom:(M.bottom-b.bottom+w.bottom)/A.y,left:(b.left-M.left+w.left)/A.x,right:(M.right-b.right+w.right)/A.x}}const PW=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=Fo(t,e)||{};if(u==null)return{};const h=d2(d),m={x:n,y:r},g=oT(s),w=iT(g),y=await o.getDimensions(u),T=g==="y",b=T?"top":"left",_=T?"bottom":"right",I=T?"clientHeight":"clientWidth",A=i.reference[w]+i.reference[g]-m[g]-i.floating[w],M=m[g]-i.reference[g],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let v=j?j[I]:0;(!v||!await(o.isElement==null?void 0:o.isElement(j)))&&(v=a.floating[I]||i.floating[w]);const E=A/2-M/2,C=v/2-y[w]/2-1,S=sl(h[b],C),P=sl(h[_],C),R=S,k=v-y[w]-P,W=v/2-y[w]/2+E,J=xb(R,W,k),Q=!c.arrow&&sh(s)!=null&&W!==J&&i.reference[w]/2-(W<R?S:P)-y[w]/2<0,le=Q?W<R?W-R:W-k:0;return{[g]:m[g]+le,data:{[g]:J,centerOffset:W-J-le,...Q&&{alignmentOffset:le}},reset:Q}}}),AW=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,...T}=Fo(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Vo(s),_=Bi(a),I=Vo(a)===a,A=await(c.isRTL==null?void 0:c.isRTL(u.floating)),M=m||(I||!y?[ev(a)]:SW(a)),j=w!=="none";!m&&j&&M.push(...NW(a,y,w,A));const v=[a,...M],E=await um(e,T),C=[];let S=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&C.push(E[b]),h){const W=EW(s,o,A);C.push(E[W[0]],E[W[1]])}if(S=[...S,{placement:s,overflows:C}],!C.every(W=>W<=0)){var P,R;const W=(((P=i.flip)==null?void 0:P.index)||0)+1,J=v[W];if(J&&(!(h==="alignment"?_!==Bi(J):!1)||S.every(O=>Bi(O.placement)===_?O.overflows[0]>0:!0)))return{data:{index:W,overflows:S},reset:{placement:J}};let Q=(R=S.filter(le=>le.overflows[0]<=0).sort((le,O)=>le.overflows[1]-O.overflows[1])[0])==null?void 0:R.placement;if(!Q)switch(g){case"bestFit":{var k;const le=(k=S.filter(O=>{if(j){const V=Bi(O.placement);return V===_||V==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(V=>V>0).reduce((V,Z)=>V+Z,0)]).sort((O,V)=>O[1]-V[1])[0])==null?void 0:k[0];le&&(Q=le);break}case"initialPlacement":Q=a;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function HN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KN(t){return xW.some(e=>t[e]>=0)}const jW=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Fo(t,e);switch(r){case"referenceHidden":{const i=await um(e,{...s,elementContext:"reference"}),o=HN(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KN(o)}}}case"escaped":{const i=await um(e,{...s,altBoundary:!0}),o=HN(i,n.floating);return{data:{escapedOffsets:o,escaped:KN(o)}}}default:return{}}}}},h2=new Set(["left","top"]);async function MW(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Vo(n),a=sh(n),c=Bi(n)==="y",u=h2.has(o)?-1:1,d=i&&c?-1:1,h=Fo(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(g=a==="end"?w*-1:w),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const DW=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await MW(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},OW=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:T=>{let{x:b,y:_}=T;return{x:b,y:_}}},...c}=Fo(t,e),u={x:n,y:r},d=await um(e,c),h=Bi(Vo(s)),m=sT(h);let g=u[m],w=u[h];if(i){const T=m==="y"?"top":"left",b=m==="y"?"bottom":"right",_=g+d[T],I=g-d[b];g=xb(_,g,I)}if(o){const T=h==="y"?"top":"left",b=h==="y"?"bottom":"right",_=w+d[T],I=w-d[b];w=xb(_,w,I)}const y=a.fn({...e,[m]:g,[h]:w});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[m]:i,[h]:o}}}}}},LW=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Fo(t,e),d={x:n,y:r},h=Bi(s),m=sT(h);let g=d[m],w=d[h];const y=Fo(a,e),T=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const I=m==="y"?"height":"width",A=i.reference[m]-i.floating[I]+T.mainAxis,M=i.reference[m]+i.reference[I]-T.mainAxis;g<A?g=A:g>M&&(g=M)}if(u){var b,_;const I=m==="y"?"width":"height",A=h2.has(Vo(s)),M=i.reference[h]-i.floating[I]+(A&&((b=o.offset)==null?void 0:b[h])||0)+(A?0:T.crossAxis),j=i.reference[h]+i.reference[I]+(A?0:((_=o.offset)==null?void 0:_[h])||0)-(A?T.crossAxis:0);w<M?w=M:w>j&&(w=j)}return{[m]:g,[h]:w}}}},FW=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=Fo(t,e),d=await um(e,u),h=Vo(s),m=sh(s),g=Bi(s)==="y",{width:w,height:y}=i.floating;let T,b;h==="top"||h==="bottom"?(T=h,b=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=h,T=m==="end"?"top":"bottom");const _=y-d.top-d.bottom,I=w-d.left-d.right,A=sl(y-d[T],_),M=sl(w-d[b],I),j=!e.middlewareData.shift;let v=A,E=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(v=_),j&&!m){const S=xs(d.left,0),P=xs(d.right,0),R=xs(d.top,0),k=xs(d.bottom,0);g?E=w-2*(S!==0||P!==0?S+P:xs(d.left,d.right)):v=y-2*(R!==0||k!==0?R+k:xs(d.top,d.bottom))}await c({...e,availableWidth:E,availableHeight:v});const C=await o.getDimensions(a.floating);return w!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function kx(){return typeof window<"u"}function ih(t){return f2(t)?(t.nodeName||"").toLowerCase():"#document"}function Es(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function eo(t){var e;return(e=(f2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function f2(t){return kx()?t instanceof Node||t instanceof Es(t).Node:!1}function _i(t){return kx()?t instanceof Element||t instanceof Es(t).Element:!1}function Yi(t){return kx()?t instanceof HTMLElement||t instanceof Es(t).HTMLElement:!1}function qN(t){return!kx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Es(t).ShadowRoot}const VW=new Set(["inline","contents"]);function np(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=bi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!VW.has(s)}const BW=new Set(["table","td","th"]);function UW(t){return BW.has(ih(t))}const zW=[":popover-open",":modal"];function Rx(t){return zW.some(e=>{try{return t.matches(e)}catch{return!1}})}const $W=["transform","translate","scale","rotate","perspective"],WW=["transform","translate","scale","rotate","perspective","filter"],GW=["paint","layout","strict","content"];function aT(t){const e=lT(),n=_i(t)?bi(t):t;return $W.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||WW.some(r=>(n.willChange||"").includes(r))||GW.some(r=>(n.contain||"").includes(r))}function HW(t){let e=il(t);for(;Yi(e)&&!Td(e);){if(aT(e))return e;if(Rx(e))return null;e=il(e)}return null}function lT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const KW=new Set(["html","body","#document"]);function Td(t){return KW.has(ih(t))}function bi(t){return Es(t).getComputedStyle(t)}function Px(t){return _i(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function il(t){if(ih(t)==="html")return t;const e=t.assignedSlot||t.parentNode||qN(t)&&t.host||eo(t);return qN(e)?e.host:e}function m2(t){const e=il(t);return Td(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yi(e)&&np(e)?e:m2(e)}function dm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=m2(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Es(s);if(i){const a=_b(o);return e.concat(o,o.visualViewport||[],np(s)?s:[],a&&n?dm(a):[])}return e.concat(s,dm(s,[],n))}function _b(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function p2(t){const e=bi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Yi(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Zy(n)!==i||Zy(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function cT(t){return _i(t)?t:t.contextElement}function Gu(t){const e=cT(t);if(!Yi(e))return Gi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=p2(e);let o=(i?Zy(n.width):n.width)/r,a=(i?Zy(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const qW=Gi(0);function g2(t){const e=Es(t);return!lT()||!e.visualViewport?qW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function YW(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Es(t)?!1:e}function vc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=cT(t);let o=Gi(1);e&&(r?_i(r)&&(o=Gu(r)):o=Gu(t));const a=YW(i,n,r)?g2(i):Gi(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const m=Es(i),g=r&&_i(r)?Es(r):r;let w=m,y=_b(w);for(;y&&r&&g!==w;){const T=Gu(y),b=y.getBoundingClientRect(),_=bi(y),I=b.left+(y.clientLeft+parseFloat(_.paddingLeft))*T.x,A=b.top+(y.clientTop+parseFloat(_.paddingTop))*T.y;c*=T.x,u*=T.y,d*=T.x,h*=T.y,c+=I,u+=A,w=Es(y),y=_b(w)}}return tv({width:d,height:h,x:c,y:u})}function uT(t,e){const n=Px(t).scrollLeft;return e?e.left+n:vc(eo(t)).left+n}function y2(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:uT(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function QW(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=eo(r),a=e?Rx(e.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Gi(1);const d=Gi(0),h=Yi(r);if((h||!h&&!i)&&((ih(r)!=="body"||np(o))&&(c=Px(r)),Yi(r))){const g=vc(r);u=Gu(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=o&&!h&&!i?y2(o,c,!0):Gi(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function XW(t){return Array.from(t.getClientRects())}function JW(t){const e=eo(t),n=Px(t),r=t.ownerDocument.body,s=xs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=xs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+uT(t);const a=-n.scrollTop;return bi(r).direction==="rtl"&&(o+=xs(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function ZW(t,e){const n=Es(t),r=eo(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=lT();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}const eG=new Set(["absolute","fixed"]);function tG(t,e){const n=vc(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Yi(t)?Gu(t):Gi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function YN(t,e,n){let r;if(e==="viewport")r=ZW(t,n);else if(e==="document")r=JW(eo(t));else if(_i(e))r=tG(e,n);else{const s=g2(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return tv(r)}function v2(t,e){const n=il(t);return n===e||!_i(n)||Td(n)?!1:bi(n).position==="fixed"||v2(n,e)}function nG(t,e){const n=e.get(t);if(n)return n;let r=dm(t,[],!1).filter(a=>_i(a)&&ih(a)!=="body"),s=null;const i=bi(t).position==="fixed";let o=i?il(t):t;for(;_i(o)&&!Td(o);){const a=bi(o),c=aT(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&eG.has(s.position)||np(o)&&!c&&v2(t,o))?r=r.filter(d=>d!==o):s=a,o=il(o)}return e.set(t,r),r}function rG(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Rx(e)?[]:nG(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,d)=>{const h=YN(e,d,s);return u.top=xs(h.top,u.top),u.right=sl(h.right,u.right),u.bottom=sl(h.bottom,u.bottom),u.left=xs(h.left,u.left),u},YN(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function sG(t){const{width:e,height:n}=p2(t);return{width:e,height:n}}function iG(t,e,n){const r=Yi(e),s=eo(e),i=n==="fixed",o=vc(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=Gi(0);function u(){c.x=uT(s)}if(r||!r&&!i)if((ih(e)!=="body"||np(s))&&(a=Px(e)),r){const g=vc(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?y2(s,a):Gi(0),h=o.left+a.scrollLeft-c.x-d.x,m=o.top+a.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function Sw(t){return bi(t).position==="static"}function QN(t,e){if(!Yi(t)||bi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return eo(t)===n&&(n=n.ownerDocument.body),n}function x2(t,e){const n=Es(t);if(Rx(t))return n;if(!Yi(t)){let s=il(t);for(;s&&!Td(s);){if(_i(s)&&!Sw(s))return s;s=il(s)}return n}let r=QN(t,e);for(;r&&UW(r)&&Sw(r);)r=QN(r,e);return r&&Td(r)&&Sw(r)&&!aT(r)?n:r||HW(t)||n}const oG=async function(t){const e=this.getOffsetParent||x2,n=this.getDimensions,r=await n(t.floating);return{reference:iG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aG(t){return bi(t).direction==="rtl"}const lG={convertOffsetParentRelativeRectToViewportRelativeRect:QW,getDocumentElement:eo,getClippingRect:rG,getOffsetParent:x2,getElementRects:oG,getClientRects:XW,getDimensions:sG,getScale:Gu,isElement:_i,isRTL:aG};function w2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function cG(t,e){let n=null,r;const s=eo(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=u;if(a||e(),!m||!g)return;const w=yg(h),y=yg(s.clientWidth-(d+m)),T=yg(s.clientHeight-(h+g)),b=yg(d),I={rootMargin:-w+"px "+-y+"px "+-T+"px "+-b+"px",threshold:xs(0,sl(1,c))||1};let A=!0;function M(j){const v=j[0].intersectionRatio;if(v!==c){if(!A)return o();v?o(!1,v):r=setTimeout(()=>{o(!1,1e-7)},1e3)}v===1&&!w2(u,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(M,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,I)}n.observe(t)}return o(!0),i}function uG(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=cT(t),d=s||i?[...u?dm(u):[],...dm(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const h=u&&a?cG(u,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(b=>{let[_]=b;_&&_.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var I;(I=g)==null||I.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let w,y=c?vc(t):null;c&&T();function T(){const b=vc(t);y&&!w2(y,b)&&n(),y=b,w=requestAnimationFrame(T)}return n(),()=>{var b;d.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const dG=DW,hG=OW,fG=AW,mG=FW,pG=jW,XN=PW,gG=LW,yG=(t,e,n)=>{const r=new Map,s={platform:lG,...n},i={...s.platform,_c:r};return RW(t,e,{...s,platform:i})};var vG=typeof document<"u",xG=function(){},ry=vG?p.useLayoutEffect:xG;function nv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!nv(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!nv(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function _2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function JN(t,e){const n=_2(t);return Math.round(e*n)/n}function Tw(t){const e=p.useRef(t);return ry(()=>{e.current=t}),e}function wG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[d,h]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(r);nv(m,r)||g(r);const[w,y]=p.useState(null),[T,b]=p.useState(null),_=p.useCallback(O=>{O!==j.current&&(j.current=O,y(O))},[]),I=p.useCallback(O=>{O!==v.current&&(v.current=O,b(O))},[]),A=i||w,M=o||T,j=p.useRef(null),v=p.useRef(null),E=p.useRef(d),C=c!=null,S=Tw(c),P=Tw(s),R=Tw(u),k=p.useCallback(()=>{if(!j.current||!v.current)return;const O={placement:e,strategy:n,middleware:m};P.current&&(O.platform=P.current),yG(j.current,v.current,O).then(V=>{const Z={...V,isPositioned:R.current!==!1};W.current&&!nv(E.current,Z)&&(E.current=Z,zc.flushSync(()=>{h(Z)}))})},[m,e,n,P,R]);ry(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[u]);const W=p.useRef(!1);ry(()=>(W.current=!0,()=>{W.current=!1}),[]),ry(()=>{if(A&&(j.current=A),M&&(v.current=M),A&&M){if(S.current)return S.current(A,M,k);k()}},[A,M,k,S,C]);const J=p.useMemo(()=>({reference:j,floating:v,setReference:_,setFloating:I}),[_,I]),Q=p.useMemo(()=>({reference:A,floating:M}),[A,M]),le=p.useMemo(()=>{const O={position:n,left:0,top:0};if(!Q.floating)return O;const V=JN(Q.floating,d.x),Z=JN(Q.floating,d.y);return a?{...O,transform:"translate("+V+"px, "+Z+"px)",..._2(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:Z}},[n,a,Q.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:k,refs:J,elements:Q,floatingStyles:le}),[d,k,J,Q,le])}const _G=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?XN({element:r.current,padding:s}).fn(n):{}:r?XN({element:r,padding:s}).fn(n):{}}}},bG=(t,e)=>({...dG(t),options:[t,e]}),EG=(t,e)=>({...hG(t),options:[t,e]}),SG=(t,e)=>({...gG(t),options:[t,e]}),TG=(t,e)=>({...fG(t),options:[t,e]}),IG=(t,e)=>({...mG(t),options:[t,e]}),CG=(t,e)=>({...pG(t),options:[t,e]}),NG=(t,e)=>({..._G(t),options:[t,e]});var kG="Arrow",b2=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return l.jsx(rt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});b2.displayName=kG;var RG=b2;function E2(t){const[e,n]=p.useState(void 0);return wr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var dT="Popper",[S2,gl]=Ps(dT),[PG,T2]=S2(dT),I2=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return l.jsx(PG,{scope:e,anchor:r,onAnchorChange:s,children:n})};I2.displayName=dT;var C2="PopperAnchor",N2=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=T2(C2,n),o=p.useRef(null),a=vt(e,o),c=p.useRef(null);return p.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||o.current,u!==c.current&&i.onAnchorChange(c.current)}),r?null:l.jsx(rt.div,{...s,ref:a})});N2.displayName=C2;var hT="PopperContent",[AG,jG]=S2(hT),k2=p.forwardRef((t,e)=>{var re,Pe,Ze,De,ce,L;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:w,...y}=t,T=T2(hT,n),[b,_]=p.useState(null),I=vt(e,K=>_(K)),[A,M]=p.useState(null),j=E2(A),v=(j==null?void 0:j.width)??0,E=(j==null?void 0:j.height)??0,C=r+(i!=="center"?"-"+i:""),S=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],R=P.length>0,k={padding:S,boundary:P.filter(DG),altBoundary:R},{refs:W,floatingStyles:J,placement:Q,isPositioned:le,middlewareData:O}=wG({strategy:"fixed",placement:C,whileElementsMounted:(...K)=>uG(...K,{animationFrame:g==="always"}),elements:{reference:T.anchor},middleware:[bG({mainAxis:s+E,alignmentAxis:o}),c&&EG({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?SG():void 0,...k}),c&&TG({...k}),IG({...k,apply:({elements:K,rects:ie,availableWidth:Ae,availableHeight:Ie})=>{const{width:$e,height:je}=ie.reference,ee=K.floating.style;ee.setProperty("--radix-popper-available-width",`${Ae}px`),ee.setProperty("--radix-popper-available-height",`${Ie}px`),ee.setProperty("--radix-popper-anchor-width",`${$e}px`),ee.setProperty("--radix-popper-anchor-height",`${je}px`)}}),A&&NG({element:A,padding:a}),OG({arrowWidth:v,arrowHeight:E}),m&&CG({strategy:"referenceHidden",...k})]}),[V,Z]=A2(Q),ye=mr(w);wr(()=>{le&&(ye==null||ye())},[le,ye]);const ae=(re=O.arrow)==null?void 0:re.x,ve=(Pe=O.arrow)==null?void 0:Pe.y,_e=((Ze=O.arrow)==null?void 0:Ze.centerOffset)!==0,[de,ze]=p.useState();return wr(()=>{b&&ze(window.getComputedStyle(b).zIndex)},[b]),l.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:le?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(De=O.transformOrigin)==null?void 0:De.x,(ce=O.transformOrigin)==null?void 0:ce.y].join(" "),...((L=O.hide)==null?void 0:L.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(AG,{scope:n,placedSide:V,onArrowChange:M,arrowX:ae,arrowY:ve,shouldHideArrow:_e,children:l.jsx(rt.div,{"data-side":V,"data-align":Z,...y,ref:I,style:{...y.style,animation:le?void 0:"none"}})})})});k2.displayName=hT;var R2="PopperArrow",MG={top:"bottom",right:"left",bottom:"top",left:"right"},P2=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=jG(R2,r),o=MG[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(RG,{...s,ref:n,style:{...s.style,display:"block"}})})});P2.displayName=R2;function DG(t){return t!==null}var OG=t=>({name:"transformOrigin",options:t,fn(e){var T,b,_;const{placement:n,rects:r,middlewareData:s}=e,o=((T=s.arrow)==null?void 0:T.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=A2(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((b=s.arrow)==null?void 0:b.x)??0)+a/2,g=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let w="",y="";return u==="bottom"?(w=o?h:`${m}px`,y=`${-c}px`):u==="top"?(w=o?h:`${m}px`,y=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,y=o?h:`${g}px`):u==="left"&&(w=`${r.floating.width+c}px`,y=o?h:`${g}px`),{data:{x:w,y}}}});function A2(t){const[e,n="center"]=t.split("-");return[e,n]}var Ax=I2,rp=N2,jx=k2,Mx=P2,LG="Portal",oh=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);wr(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?rT.createPortal(l.jsx(rt.div,{...r,ref:e}),o):null});oh.displayName=LG;function FG(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var _r=t=>{const{present:e,children:n}=t,r=VG(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=vt(r.ref,BG(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};_r.displayName="Presence";function VG(t){const[e,n]=p.useState(),r=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,c]=FG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=vg(r.current);i.current=a==="mounted"?u:"none"},[a]),wr(()=>{const u=r.current,d=s.current;if(d!==t){const m=i.current,g=vg(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),wr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=g=>{const y=vg(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&y&&(c("ANIMATION_END"),!s.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},m=g=>{g.target===e&&(i.current=vg(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function vg(t){return(t==null?void 0:t.animationName)||"none"}function BG(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var UG=hS[" useInsertionEffect ".trim().toString()]||wr;function Bo({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=zG({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:s;{const d=p.useRef(t!==void 0);p.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=p.useCallback(d=>{var h;if(a){const m=$G(d)?d(t):d;m!==t&&((h=o.current)==null||h.call(o,m))}else i(d)},[a,t,i,o]);return[c,u]}function zG({defaultProp:t,onChange:e}){const[n,r]=p.useState(t),s=p.useRef(n),i=p.useRef(e);return UG(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function $G(t){return typeof t=="function"}var j2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),WG="VisuallyHidden",M2=p.forwardRef((t,e)=>l.jsx(rt.span,{...t,ref:e,style:{...j2,...t.style}}));M2.displayName=WG;var GG=M2,[Dx,Nme]=Ps("Tooltip",[gl]),Ox=gl(),D2="TooltipProvider",HG=700,bb="tooltip.open",[KG,fT]=Dx(D2),O2=t=>{const{__scopeTooltip:e,delayDuration:n=HG,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),a=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(KG,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};O2.displayName=D2;var hm="Tooltip",[qG,sp]=Dx(hm),L2=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,c=fT(hm,t.__scopeTooltip),u=Ox(e),[d,h]=p.useState(null),m=Us(),g=p.useRef(0),w=o??c.disableHoverableContent,y=a??c.delayDuration,T=p.useRef(!1),[b,_]=Bo({prop:r,defaultProp:s??!1,onChange:v=>{v?(c.onOpen(),document.dispatchEvent(new CustomEvent(bb))):c.onClose(),i==null||i(v)},caller:hm}),I=p.useMemo(()=>b?T.current?"delayed-open":"instant-open":"closed",[b]),A=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T.current=!1,_(!0)},[_]),M=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),j=p.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{T.current=!0,_(!0),g.current=0},y)},[y,_]);return p.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),l.jsx(Ax,{...u,children:l.jsx(qG,{scope:e,contentId:m,open:b,stateAttribute:I,trigger:d,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?j():A()},[c.isOpenDelayedRef,j,A]),onTriggerLeave:p.useCallback(()=>{w?M():(window.clearTimeout(g.current),g.current=0)},[M,w]),onOpen:A,onClose:M,disableHoverableContent:w,children:n})})};L2.displayName=hm;var Eb="TooltipTrigger",F2=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=sp(Eb,n),i=fT(Eb,n),o=Ox(n),a=p.useRef(null),c=vt(e,a,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(rp,{asChild:!0,...o,children:l.jsx(rt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Ne(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ne(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ne(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ne(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Ne(t.onBlur,s.onClose),onClick:Ne(t.onClick,s.onClose)})})});F2.displayName=Eb;var mT="TooltipPortal",[YG,QG]=Dx(mT,{forceMount:void 0}),V2=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=sp(mT,e);return l.jsx(YG,{scope:e,forceMount:n,children:l.jsx(_r,{present:n||i.open,children:l.jsx(oh,{asChild:!0,container:s,children:r})})})};V2.displayName=mT;var Id="TooltipContent",B2=p.forwardRef((t,e)=>{const n=QG(Id,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=sp(Id,t.__scopeTooltip);return l.jsx(_r,{present:r||o.open,children:o.disableHoverableContent?l.jsx(U2,{side:s,...i,ref:e}):l.jsx(XG,{side:s,...i,ref:e})})}),XG=p.forwardRef((t,e)=>{const n=sp(Id,t.__scopeTooltip),r=fT(Id,t.__scopeTooltip),s=p.useRef(null),i=vt(e,s),[o,a]=p.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,m=p.useCallback(()=>{a(null),h(!1)},[h]),g=p.useCallback((w,y)=>{const T=w.currentTarget,b={x:w.clientX,y:w.clientY},_=n8(b,T.getBoundingClientRect()),I=r8(b,_),A=s8(y.getBoundingClientRect()),M=o8([...I,...A]);a(M),h(!0)},[h]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&d){const w=T=>g(T,d),y=T=>g(T,c);return c.addEventListener("pointerleave",w),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",y)}}},[c,d,g,m]),p.useEffect(()=>{if(o){const w=y=>{const T=y.target,b={x:y.clientX,y:y.clientY},_=(c==null?void 0:c.contains(T))||(d==null?void 0:d.contains(T)),I=!i8(b,o);_?m():I&&(m(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,d,o,u,m]),l.jsx(U2,{...t,ref:i})}),[JG,ZG]=Dx(hm,{isInside:!1}),e8=sW("TooltipContent"),U2=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,c=sp(Id,n),u=Ox(n),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(bb,d),()=>document.removeEventListener(bb,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),l.jsx(rh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:l.jsxs(jx,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(e8,{children:r}),l.jsx(JG,{scope:n,isInside:!0,children:l.jsx(GG,{id:c.contentId,role:"tooltip",children:s||r})})]})})});B2.displayName=Id;var z2="TooltipArrow",t8=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ox(n);return ZG(z2,n).isInside?null:l.jsx(Mx,{...s,...r,ref:e})});t8.displayName=z2;function n8(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function r8(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function s8(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function i8(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,d=a.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function o8(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),a8(e)}function a8(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var l8=O2,c8=L2,u8=F2,d8=V2,$2=B2;function W2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=W2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function G2(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=W2(t))&&(r&&(r+=" "),r+=e);return r}const pT="-",h8=t=>{const e=m8(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(pT);return a[0]===""&&a.length!==1&&a.shift(),H2(a,e)||f8(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},H2=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?H2(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(pT);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},ZN=/^\[(.+)\]$/,f8=t=>{if(ZN.test(t)){const e=ZN.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},m8=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return g8(Object.entries(t.classGroups),n).forEach(([i,o])=>{Sb(o,r,i,e)}),r},Sb=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ek(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(p8(s)){Sb(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Sb(o,ek(e,i),n,r)})})},ek=(t,e)=>{let n=t;return e.split(pT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},p8=t=>t.isThemeGetter,g8=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,y8=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},K2="!",v8=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,h;for(let T=0;T<a.length;T++){let b=a[T];if(u===0){if(b===s&&(r||a.slice(T,T+i)===e)){c.push(a.slice(d,T)),d=T+i;continue}if(b==="/"){h=T;continue}}b==="["?u++:b==="]"&&u--}const m=c.length===0?a:a.substring(d),g=m.startsWith(K2),w=g?m.substring(1):m,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},x8=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},w8=t=>({cache:y8(t.cacheSize),parseClassName:v8(t),...h8(t)}),_8=/\s+/,b8=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(_8);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let w=!!g,y=r(w?m.substring(0,g):m);if(!y){if(!w){a=u+(a.length>0?" "+a:a);continue}if(y=r(m),!y){a=u+(a.length>0?" "+a:a);continue}w=!1}const T=x8(d).join(":"),b=h?T+K2:T,_=b+y;if(i.includes(_))continue;i.push(_);const I=s(y,w);for(let A=0;A<I.length;++A){const M=I[A];i.push(b+M)}a=u+(a.length>0?" "+a:a)}return a};function E8(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=q2(e))&&(r&&(r+=" "),r+=n);return r}const q2=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=q2(t[r]))&&(n&&(n+=" "),n+=e);return n};function S8(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=w8(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=b8(c,n);return s(c,d),d}return function(){return i(E8.apply(null,arguments))}}const dn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Y2=/^\[(?:([a-z-]+):)?(.+)\]$/i,T8=/^\d+\/\d+$/,I8=new Set(["px","full","screen"]),C8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,k8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,P8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,uo=t=>Hu(t)||I8.has(t)||T8.test(t),aa=t=>ah(t,"length",V8),Hu=t=>!!t&&!Number.isNaN(Number(t)),Iw=t=>ah(t,"number",Hu),Uh=t=>!!t&&Number.isInteger(Number(t)),A8=t=>t.endsWith("%")&&Hu(t.slice(0,-1)),mt=t=>Y2.test(t),la=t=>C8.test(t),j8=new Set(["length","size","percentage"]),M8=t=>ah(t,j8,Q2),D8=t=>ah(t,"position",Q2),O8=new Set(["image","url"]),L8=t=>ah(t,O8,U8),F8=t=>ah(t,"",B8),zh=()=>!0,ah=(t,e,n)=>{const r=Y2.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},V8=t=>N8.test(t)&&!k8.test(t),Q2=()=>!1,B8=t=>R8.test(t),U8=t=>P8.test(t),z8=()=>{const t=dn("colors"),e=dn("spacing"),n=dn("blur"),r=dn("brightness"),s=dn("borderColor"),i=dn("borderRadius"),o=dn("borderSpacing"),a=dn("borderWidth"),c=dn("contrast"),u=dn("grayscale"),d=dn("hueRotate"),h=dn("invert"),m=dn("gap"),g=dn("gradientColorStops"),w=dn("gradientColorStopPositions"),y=dn("inset"),T=dn("margin"),b=dn("opacity"),_=dn("padding"),I=dn("saturate"),A=dn("scale"),M=dn("sepia"),j=dn("skew"),v=dn("space"),E=dn("translate"),C=()=>["auto","contain","none"],S=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",mt,e],R=()=>[mt,e],k=()=>["",uo,aa],W=()=>["auto",Hu,mt],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",mt],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ye=()=>[Hu,mt];return{cacheSize:500,separator:":",theme:{colors:[zh],spacing:[uo,aa],blur:["none","",la,mt],brightness:ye(),borderColor:[t],borderRadius:["none","","full",la,mt],borderSpacing:R(),borderWidth:k(),contrast:ye(),grayscale:V(),hueRotate:ye(),invert:V(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[A8,aa],inset:P(),margin:P(),opacity:ye(),padding:R(),saturate:ye(),scale:ye(),sepia:V(),skew:ye(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",mt]}],container:["container"],columns:[{columns:[la]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),mt]}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uh,mt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mt]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Uh,mt]}],"grid-cols":[{"grid-cols":[zh]}],"col-start-end":[{col:["auto",{span:["full",Uh,mt]},mt]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[zh]}],"row-start-end":[{row:["auto",{span:[Uh,mt]},mt]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[v]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[v]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mt,e]}],"min-w":[{"min-w":[mt,e,"min","max","fit"]}],"max-w":[{"max-w":[mt,e,"none","full","min","max","fit","prose",{screen:[la]},la]}],h:[{h:[mt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",la,aa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Iw]}],"font-family":[{font:[zh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mt]}],"line-clamp":[{"line-clamp":["none",Hu,Iw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",uo,mt]}],"list-image":[{"list-image":["none",mt]}],"list-style-type":[{list:["none","disc","decimal",mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",uo,aa]}],"underline-offset":[{"underline-offset":["auto",uo,mt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),D8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",M8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L8]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[uo,mt]}],"outline-w":[{outline:[uo,aa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[uo,aa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",la,F8]}],"shadow-color":[{shadow:[zh]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",la,mt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mt]}],duration:[{duration:ye()}],ease:[{ease:["linear","in","out","in-out",mt]}],delay:[{delay:ye()}],animate:[{animate:["none","spin","ping","pulse","bounce",mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Uh,mt]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[uo,aa,Iw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$8=S8(z8);function ue(...t){return $8(G2(t))}const W8=l8,lh=c8,ch=u8,$c=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(d8,{children:l.jsx($2,{ref:r,sideOffset:e,className:ue("z-[200] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));$c.displayName=$2.displayName;var ip=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xc=typeof window>"u"||"Deno"in globalThis;function ns(){}function G8(t,e){return typeof t=="function"?t(e):t}function Tb(t){return typeof t=="number"&&t>=0&&t!==1/0}function X2(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ha(t,e){return typeof t=="function"?t(e):t}function Ms(t,e){return typeof t=="function"?t(e):t}function tk(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==gT(o,e.options))return!1}else if(!mm(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function nk(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(fm(e.options.mutationKey)!==fm(i))return!1}else if(!mm(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function gT(t,e){return((e==null?void 0:e.queryKeyHashFn)||fm)(t)}function fm(t){return JSON.stringify(t,(e,n)=>Cb(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function mm(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>mm(t[n],e[n])):!1}function J2(t,e){if(t===e)return t;const n=rk(t)&&rk(e);if(n||Cb(t)&&Cb(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=J2(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:a}return e}function Ib(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function rk(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Cb(t){if(!sk(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!sk(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sk(t){return Object.prototype.toString.call(t)==="[object Object]"}function H8(t){return new Promise(e=>{setTimeout(e,t)})}function Nb(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?J2(t,e):e}function K8(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function q8(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var yT=Symbol();function Z2(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===yT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Y8(t,e){return typeof t=="function"?t(...e):!!t}var tc,Ta,sd,Oj,Q8=(Oj=class extends ip{constructor(){super();lt(this,tc);lt(this,Ta);lt(this,sd);Be(this,sd,e=>{if(!xc&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){U(this,Ta)||this.setEventListener(U(this,sd))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,Ta))==null||e.call(this),Be(this,Ta,void 0))}setEventListener(e){var n;Be(this,sd,e),(n=U(this,Ta))==null||n.call(this),Be(this,Ta,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){U(this,tc)!==e&&(Be(this,tc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof U(this,tc)=="boolean"?U(this,tc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},tc=new WeakMap,Ta=new WeakMap,sd=new WeakMap,Oj),vT=new Q8,id,Ia,od,Lj,X8=(Lj=class extends ip{constructor(){super();lt(this,id,!0);lt(this,Ia);lt(this,od);Be(this,od,e=>{if(!xc&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){U(this,Ia)||this.setEventListener(U(this,od))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,Ia))==null||e.call(this),Be(this,Ia,void 0))}setEventListener(e){var n;Be(this,od,e),(n=U(this,Ia))==null||n.call(this),Be(this,Ia,e(this.setOnline.bind(this)))}setOnline(e){U(this,id)!==e&&(Be(this,id,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return U(this,id)}},id=new WeakMap,Ia=new WeakMap,od=new WeakMap,Lj),rv=new X8;function kb(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function J8(t){return Math.min(1e3*2**t,3e4)}function eO(t){return(t??"online")==="online"?rv.isOnline():!0}var tO=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function nO(t){let e=!1,n=0,r;const s=kb(),i=()=>s.status!=="pending",o=y=>{var T;i()||(m(new tO(y)),(T=t.abort)==null||T.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>vT.isFocused()&&(t.networkMode==="always"||rv.isOnline())&&t.canRun(),d=()=>eO(t.networkMode)&&t.canRun(),h=y=>{i()||(r==null||r(),s.resolve(y))},m=y=>{i()||(r==null||r(),s.reject(y))},g=()=>new Promise(y=>{var T;r=b=>{(i()||u())&&y(b)},(T=t.onPause)==null||T.call(t)}).then(()=>{var y;r=void 0,i()||(y=t.onContinue)==null||y.call(t)}),w=()=>{if(i())return;let y;const T=n===0?t.initialPromise:void 0;try{y=T??t.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var j;if(i())return;const _=t.retry??(xc?0:3),I=t.retryDelay??J8,A=typeof I=="function"?I(n,b):I,M=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,b);if(e||!M){m(b);return}n++,(j=t.onFail)==null||j.call(t,n,b),H8(A).then(()=>u()?void 0:g()).then(()=>{e?m(b):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?w():g().then(w),s)}}var Z8=t=>setTimeout(t,0);function e7(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Z8;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var fr=e7(),nc,Fj,rO=(Fj=class{constructor(){lt(this,nc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tb(this.gcTime)&&Be(this,nc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(xc?1/0:5*60*1e3))}clearGcTimeout(){U(this,nc)&&(clearTimeout(U(this,nc)),Be(this,nc,void 0))}},nc=new WeakMap,Fj),ad,ld,js,rc,nr,Km,sc,ii,ho,Vj,t7=(Vj=class extends rO{constructor(n){super();lt(this,ii);lt(this,ad);lt(this,ld);lt(this,js);lt(this,rc);lt(this,nr);lt(this,Km);lt(this,sc);Be(this,sc,!1),Be(this,Km,n.defaultOptions),this.setOptions(n.options),this.observers=[],Be(this,rc,n.client),Be(this,js,U(this,rc).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Be(this,ad,n7(this.options)),this.state=n.state??U(this,ad),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=U(this,nr))==null?void 0:n.promise}setOptions(n){this.options={...U(this,Km),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,js).remove(this)}setData(n,r){const s=Nb(this.state.data,n,this.options);return Pt(this,ii,ho).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Pt(this,ii,ho).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=U(this,nr))==null?void 0:s.promise;return(i=U(this,nr))==null||i.cancel(n),r?r.then(ns).catch(ns):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,ad))}isActive(){return this.observers.some(n=>Ms(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Ha(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!X2(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=U(this,nr))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=U(this,nr))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),U(this,js).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(U(this,nr)&&(U(this,sc)?U(this,nr).cancel({revert:!0}):U(this,nr).cancelRetry()),this.scheduleGc()),U(this,js).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pt(this,ii,ho).call(this,{type:"invalidate"})}async fetch(n,r){var u,d,h,m,g,w,y,T,b,_,I,A;if(this.state.fetchStatus!=="idle"&&((u=U(this,nr))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,nr))return U(this,nr).continueRetry(),U(this,nr).promise}if(n&&this.setOptions(n),!this.options.queryFn){const M=this.observers.find(j=>j.options.queryFn);M&&this.setOptions(M.options)}const s=new AbortController,i=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(Be(this,sc,!0),s.signal)})},o=()=>{const M=Z2(this.options,r),v=(()=>{const E={client:U(this,rc),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return Be(this,sc,!1),this.options.persister?this.options.persister(M,v,this):M(v)},c=(()=>{const M={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:U(this,rc),state:this.state,fetchFn:o};return i(M),M})();(d=this.options.behavior)==null||d.onFetch(c,this),Be(this,ld,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Pt(this,ii,ho).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta}),Be(this,nr,nO({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onFail:(M,j)=>{Pt(this,ii,ho).call(this,{type:"failed",failureCount:M,error:j})},onPause:()=>{Pt(this,ii,ho).call(this,{type:"pause"})},onContinue:()=>{Pt(this,ii,ho).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const M=await U(this,nr).start();if(M===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(M),(w=(g=U(this,js).config).onSuccess)==null||w.call(g,M,this),(T=(y=U(this,js).config).onSettled)==null||T.call(y,M,this.state.error,this),M}catch(M){if(M instanceof tO){if(M.silent)return U(this,nr).promise;if(M.revert)return this.setState({...U(this,ld),fetchStatus:"idle"}),this.state.data}throw Pt(this,ii,ho).call(this,{type:"error",error:M}),(_=(b=U(this,js).config).onError)==null||_.call(b,M,this),(A=(I=U(this,js).config).onSettled)==null||A.call(I,this.state.data,M,this),M}finally{this.scheduleGc()}}},ad=new WeakMap,ld=new WeakMap,js=new WeakMap,rc=new WeakMap,nr=new WeakMap,Km=new WeakMap,sc=new WeakMap,ii=new WeakSet,ho=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...sO(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Be(this,ld,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),fr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),U(this,js).notify({query:this,type:"updated",action:n})})},Vj);function sO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:eO(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function n7(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ji,Bj,r7=(Bj=class extends ip{constructor(e={}){super();lt(this,ji);this.config=e,Be(this,ji,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??gT(s,n);let o=this.get(i);return o||(o=new t7({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){U(this,ji).has(e.queryHash)||(U(this,ji).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=U(this,ji).get(e.queryHash);n&&(e.destroy(),n===e&&U(this,ji).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return U(this,ji).get(e)}getAll(){return[...U(this,ji).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>tk(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>tk(e,r)):n}notify(e){fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ji=new WeakMap,Bj),Mi,Vr,ic,Di,fa,Uj,s7=(Uj=class extends rO{constructor(n){super();lt(this,Di);lt(this,Mi);lt(this,Vr);lt(this,ic);this.mutationId=n.mutationId,Be(this,Vr,n.mutationCache),Be(this,Mi,[]),this.state=n.state||i7(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){U(this,Mi).includes(n)||(U(this,Mi).push(n),this.clearGcTimeout(),U(this,Vr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Be(this,Mi,U(this,Mi).filter(r=>r!==n)),this.scheduleGc(),U(this,Vr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){U(this,Mi).length||(this.state.status==="pending"?this.scheduleGc():U(this,Vr).remove(this))}continue(){var n;return((n=U(this,ic))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,c,u,d,h,m,g,w,y,T,b,_,I,A,M,j,v,E,C;const r=()=>{Pt(this,Di,fa).call(this,{type:"continue"})};Be(this,ic,nO({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(S,P)=>{Pt(this,Di,fa).call(this,{type:"failed",failureCount:S,error:P})},onPause:()=>{Pt(this,Di,fa).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,Vr).canRun(this)}));const s=this.state.status==="pending",i=!U(this,ic).canStart();try{if(s)r();else{Pt(this,Di,fa).call(this,{type:"pending",variables:n,isPaused:i}),await((a=(o=U(this,Vr).config).onMutate)==null?void 0:a.call(o,n,this));const P=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));P!==this.state.context&&Pt(this,Di,fa).call(this,{type:"pending",context:P,variables:n,isPaused:i})}const S=await U(this,ic).start();return await((h=(d=U(this,Vr).config).onSuccess)==null?void 0:h.call(d,S,n,this.state.context,this)),await((g=(m=this.options).onSuccess)==null?void 0:g.call(m,S,n,this.state.context)),await((y=(w=U(this,Vr).config).onSettled)==null?void 0:y.call(w,S,null,this.state.variables,this.state.context,this)),await((b=(T=this.options).onSettled)==null?void 0:b.call(T,S,null,n,this.state.context)),Pt(this,Di,fa).call(this,{type:"success",data:S}),S}catch(S){try{throw await((I=(_=U(this,Vr).config).onError)==null?void 0:I.call(_,S,n,this.state.context,this)),await((M=(A=this.options).onError)==null?void 0:M.call(A,S,n,this.state.context)),await((v=(j=U(this,Vr).config).onSettled)==null?void 0:v.call(j,void 0,S,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,S,n,this.state.context)),S}finally{Pt(this,Di,fa).call(this,{type:"error",error:S})}}finally{U(this,Vr).runNext(this)}}},Mi=new WeakMap,Vr=new WeakMap,ic=new WeakMap,Di=new WeakSet,fa=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),fr.batch(()=>{U(this,Mi).forEach(s=>{s.onMutationUpdate(n)}),U(this,Vr).notify({mutation:this,type:"updated",action:n})})},Uj);function i7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yo,oi,qm,zj,o7=(zj=class extends ip{constructor(e={}){super();lt(this,yo);lt(this,oi);lt(this,qm);this.config=e,Be(this,yo,new Set),Be(this,oi,new Map),Be(this,qm,0)}build(e,n,r){const s=new s7({mutationCache:this,mutationId:++Jp(this,qm)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){U(this,yo).add(e);const n=xg(e);if(typeof n=="string"){const r=U(this,oi).get(n);r?r.push(e):U(this,oi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(U(this,yo).delete(e)){const n=xg(e);if(typeof n=="string"){const r=U(this,oi).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&U(this,oi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=xg(e);if(typeof n=="string"){const r=U(this,oi).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=xg(e);if(typeof n=="string"){const s=(r=U(this,oi).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){fr.batch(()=>{U(this,yo).forEach(e=>{this.notify({type:"removed",mutation:e})}),U(this,yo).clear(),U(this,oi).clear()})}getAll(){return Array.from(U(this,yo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>nk(n,r))}findAll(e={}){return this.getAll().filter(n=>nk(e,n))}notify(e){fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return fr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ns))))}},yo=new WeakMap,oi=new WeakMap,qm=new WeakMap,zj);function xg(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ik(t){return{onFetch:(e,n)=>{var d,h,m,g,w;const r=e.options,s=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const T=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},b=Z2(e.options,e.fetchOptions),_=async(I,A,M)=>{if(y)return Promise.reject();if(A==null&&I.pages.length)return Promise.resolve(I);const v=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:M?"backward":"forward",meta:e.options.meta};return T(P),P})(),E=await b(v),{maxPages:C}=e.options,S=M?q8:K8;return{pages:S(I.pages,E,C),pageParams:S(I.pageParams,A,C)}};if(s&&i.length){const I=s==="backward",A=I?a7:ok,M={pages:i,pageParams:o},j=A(r,M);a=await _(M,j,I)}else{const I=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:ok(r,a);if(c>0&&A==null)break;a=await _(a,A),c++}while(c<I)}return a};e.options.persister?e.fetchFn=()=>{var y,T;return(T=(y=e.options).persister)==null?void 0:T.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function ok(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function a7(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Rn,Ca,Na,cd,ud,ka,dd,hd,$j,l7=($j=class{constructor(t={}){lt(this,Rn);lt(this,Ca);lt(this,Na);lt(this,cd);lt(this,ud);lt(this,ka);lt(this,dd);lt(this,hd);Be(this,Rn,t.queryCache||new r7),Be(this,Ca,t.mutationCache||new o7),Be(this,Na,t.defaultOptions||{}),Be(this,cd,new Map),Be(this,ud,new Map),Be(this,ka,0)}mount(){Jp(this,ka)._++,U(this,ka)===1&&(Be(this,dd,vT.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,Rn).onFocus())})),Be(this,hd,rv.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,Rn).onOnline())})))}unmount(){var t,e;Jp(this,ka)._--,U(this,ka)===0&&((t=U(this,dd))==null||t.call(this),Be(this,dd,void 0),(e=U(this,hd))==null||e.call(this),Be(this,hd,void 0))}isFetching(t){return U(this,Rn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return U(this,Ca).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,Rn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=U(this,Rn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ha(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return U(this,Rn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=U(this,Rn).get(r.queryHash),i=s==null?void 0:s.state.data,o=G8(e,i);if(o!==void 0)return U(this,Rn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return fr.batch(()=>U(this,Rn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,Rn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=U(this,Rn);fr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=U(this,Rn);return fr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=fr.batch(()=>U(this,Rn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ns).catch(ns)}invalidateQueries(t,e={}){return fr.batch(()=>(U(this,Rn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=fr.batch(()=>U(this,Rn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ns)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ns)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=U(this,Rn).build(this,e);return n.isStaleByTime(Ha(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ns).catch(ns)}fetchInfiniteQuery(t){return t.behavior=ik(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ns).catch(ns)}ensureInfiniteQueryData(t){return t.behavior=ik(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rv.isOnline()?U(this,Ca).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,Rn)}getMutationCache(){return U(this,Ca)}getDefaultOptions(){return U(this,Na)}setDefaultOptions(t){Be(this,Na,t)}setQueryDefaults(t,e){U(this,cd).set(fm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...U(this,cd).values()],n={};return e.forEach(r=>{mm(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){U(this,ud).set(fm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...U(this,ud).values()],n={};return e.forEach(r=>{mm(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...U(this,Na).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=gT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yT&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...U(this,Na).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){U(this,Rn).clear(),U(this,Ca).clear()}},Rn=new WeakMap,Ca=new WeakMap,Na=new WeakMap,cd=new WeakMap,ud=new WeakMap,ka=new WeakMap,dd=new WeakMap,hd=new WeakMap,$j),Jr,At,Ym,Br,oc,fd,Ra,Pa,Qm,md,pd,ac,lc,Aa,gd,Wt,cf,Rb,Pb,Ab,jb,Mb,Db,Ob,iO,Wj,c7=(Wj=class extends ip{constructor(e,n){super();lt(this,Wt);lt(this,Jr);lt(this,At);lt(this,Ym);lt(this,Br);lt(this,oc);lt(this,fd);lt(this,Ra);lt(this,Pa);lt(this,Qm);lt(this,md);lt(this,pd);lt(this,ac);lt(this,lc);lt(this,Aa);lt(this,gd,new Set);this.options=n,Be(this,Jr,e),Be(this,Pa,null),Be(this,Ra,kb()),this.options.experimental_prefetchInRender||U(this,Ra).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,At).addObserver(this),ak(U(this,At),this.options)?Pt(this,Wt,cf).call(this):this.updateResult(),Pt(this,Wt,jb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Lb(U(this,At),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Lb(U(this,At),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pt(this,Wt,Mb).call(this),Pt(this,Wt,Db).call(this),U(this,At).removeObserver(this)}setOptions(e){const n=this.options,r=U(this,At);if(this.options=U(this,Jr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ms(this.options.enabled,U(this,At))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pt(this,Wt,Ob).call(this),U(this,At).setOptions(this.options),n._defaulted&&!Ib(this.options,n)&&U(this,Jr).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,At),observer:this});const s=this.hasListeners();s&&lk(U(this,At),r,this.options,n)&&Pt(this,Wt,cf).call(this),this.updateResult(),s&&(U(this,At)!==r||Ms(this.options.enabled,U(this,At))!==Ms(n.enabled,U(this,At))||Ha(this.options.staleTime,U(this,At))!==Ha(n.staleTime,U(this,At)))&&Pt(this,Wt,Rb).call(this);const i=Pt(this,Wt,Pb).call(this);s&&(U(this,At)!==r||Ms(this.options.enabled,U(this,At))!==Ms(n.enabled,U(this,At))||i!==U(this,Aa))&&Pt(this,Wt,Ab).call(this,i)}getOptimisticResult(e){const n=U(this,Jr).getQueryCache().build(U(this,Jr),e),r=this.createResult(n,e);return d7(this,r)&&(Be(this,Br,r),Be(this,fd,this.options),Be(this,oc,U(this,At).state)),r}getCurrentResult(){return U(this,Br)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){U(this,gd).add(e)}getCurrentQuery(){return U(this,At)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=U(this,Jr).defaultQueryOptions(e),r=U(this,Jr).getQueryCache().build(U(this,Jr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Pt(this,Wt,cf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,Br)))}createResult(e,n){var C;const r=U(this,At),s=this.options,i=U(this,Br),o=U(this,oc),a=U(this,fd),u=e!==r?e.state:U(this,Ym),{state:d}=e;let h={...d},m=!1,g;if(n._optimisticResults){const S=this.hasListeners(),P=!S&&ak(e,n),R=S&&lk(e,r,n,s);(P||R)&&(h={...h,...sO(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:y,status:T}=h;g=h.data;let b=!1;if(n.placeholderData!==void 0&&g===void 0&&T==="pending"){let S;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(S=i.data,b=!0):S=typeof n.placeholderData=="function"?n.placeholderData((C=U(this,pd))==null?void 0:C.state.data,U(this,pd)):n.placeholderData,S!==void 0&&(T="success",g=Nb(i==null?void 0:i.data,S,n),m=!0)}if(n.select&&g!==void 0&&!b)if(i&&g===(o==null?void 0:o.data)&&n.select===U(this,Qm))g=U(this,md);else try{Be(this,Qm,n.select),g=n.select(g),g=Nb(i==null?void 0:i.data,g,n),Be(this,md,g),Be(this,Pa,null)}catch(S){Be(this,Pa,S)}U(this,Pa)&&(w=U(this,Pa),g=U(this,md),y=Date.now(),T="error");const _=h.fetchStatus==="fetching",I=T==="pending",A=T==="error",M=I&&_,j=g!==void 0,E={status:T,fetchStatus:h.fetchStatus,isPending:I,isSuccess:T==="success",isError:A,isInitialLoading:M,isLoading:M,data:g,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:_,isRefetching:_&&!I,isLoadingError:A&&!j,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:A&&j,isStale:xT(e,n),refetch:this.refetch,promise:U(this,Ra),isEnabled:Ms(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const S=k=>{E.status==="error"?k.reject(E.error):E.data!==void 0&&k.resolve(E.data)},P=()=>{const k=Be(this,Ra,E.promise=kb());S(k)},R=U(this,Ra);switch(R.status){case"pending":e.queryHash===r.queryHash&&S(R);break;case"fulfilled":(E.status==="error"||E.data!==R.value)&&P();break;case"rejected":(E.status!=="error"||E.error!==R.reason)&&P();break}}return E}updateResult(){const e=U(this,Br),n=this.createResult(U(this,At),this.options);if(Be(this,oc,U(this,At).state),Be(this,fd,this.options),U(this,oc).data!==void 0&&Be(this,pd,U(this,At)),Ib(n,e))return;Be(this,Br,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!U(this,gd).size)return!0;const o=new Set(i??U(this,gd));return this.options.throwOnError&&o.add("error"),Object.keys(U(this,Br)).some(a=>{const c=a;return U(this,Br)[c]!==e[c]&&o.has(c)})};Pt(this,Wt,iO).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pt(this,Wt,jb).call(this)}},Jr=new WeakMap,At=new WeakMap,Ym=new WeakMap,Br=new WeakMap,oc=new WeakMap,fd=new WeakMap,Ra=new WeakMap,Pa=new WeakMap,Qm=new WeakMap,md=new WeakMap,pd=new WeakMap,ac=new WeakMap,lc=new WeakMap,Aa=new WeakMap,gd=new WeakMap,Wt=new WeakSet,cf=function(e){Pt(this,Wt,Ob).call(this);let n=U(this,At).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ns)),n},Rb=function(){Pt(this,Wt,Mb).call(this);const e=Ha(this.options.staleTime,U(this,At));if(xc||U(this,Br).isStale||!Tb(e))return;const r=X2(U(this,Br).dataUpdatedAt,e)+1;Be(this,ac,setTimeout(()=>{U(this,Br).isStale||this.updateResult()},r))},Pb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,At)):this.options.refetchInterval)??!1},Ab=function(e){Pt(this,Wt,Db).call(this),Be(this,Aa,e),!(xc||Ms(this.options.enabled,U(this,At))===!1||!Tb(U(this,Aa))||U(this,Aa)===0)&&Be(this,lc,setInterval(()=>{(this.options.refetchIntervalInBackground||vT.isFocused())&&Pt(this,Wt,cf).call(this)},U(this,Aa)))},jb=function(){Pt(this,Wt,Rb).call(this),Pt(this,Wt,Ab).call(this,Pt(this,Wt,Pb).call(this))},Mb=function(){U(this,ac)&&(clearTimeout(U(this,ac)),Be(this,ac,void 0))},Db=function(){U(this,lc)&&(clearInterval(U(this,lc)),Be(this,lc,void 0))},Ob=function(){const e=U(this,Jr).getQueryCache().build(U(this,Jr),this.options);if(e===U(this,At))return;const n=U(this,At);Be(this,At,e),Be(this,Ym,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},iO=function(e){fr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(U(this,Br))}),U(this,Jr).getQueryCache().notify({query:U(this,At),type:"observerResultsUpdated"})})},Wj);function u7(t,e){return Ms(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ak(t,e){return u7(t,e)||t.state.data!==void 0&&Lb(t,e,e.refetchOnMount)}function Lb(t,e,n){if(Ms(e.enabled,t)!==!1&&Ha(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&xT(t,e)}return!1}function lk(t,e,n,r){return(t!==e||Ms(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&xT(t,n)}function xT(t,e){return Ms(e.enabled,t)!==!1&&t.isStaleByTime(Ha(e.staleTime,t))}function d7(t,e){return!Ib(t.getCurrentResult(),e)}var oO=p.createContext(void 0),h7=t=>{const e=p.useContext(oO);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},f7=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(oO.Provider,{value:t,children:e})),aO=p.createContext(!1),m7=()=>p.useContext(aO);aO.Provider;function p7(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var g7=p.createContext(p7()),y7=()=>p.useContext(g7),v7=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},x7=t=>{p.useEffect(()=>{t.clearReset()},[t])},w7=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Y8(n,[t.error,r])),_7=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},b7=(t,e)=>t.isLoading&&t.isFetching&&!e,E7=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ck=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function S7(t,e,n){var h,m,g,w,y;const r=m7(),s=y7(),i=h7(),o=i.defaultQueryOptions(t);(m=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",_7(o),v7(o,s),x7(s);const a=!i.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new e(i,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(T=>{const b=d?c.subscribe(fr.batchCalls(T)):ns;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o)},[o,c]),E7(o,u))throw ck(o,c,s);if(w7({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||w.call(g,o,u),o.experimental_prefetchInRender&&!xc&&b7(u,r)){const T=a?ck(o,c,s):(y=i.getQueryCache().get(o.queryHash))==null?void 0:y.promise;T==null||T.catch(ns).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function T7(t,e){return S7(t,c7)}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xn(){return xn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xn.apply(this,arguments)}var Wn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wn||(Wn={}));const uk="popstate";function I7(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return pm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:op(s)}return N7(e,n,null,t)}function jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C7(){return Math.random().toString(36).substr(2,8)}function dk(t,e){return{usr:t.state,key:t.key,idx:e}}function pm(t,e,n,r){return n===void 0&&(n=null),xn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yl(e):e,{state:n,key:e&&e.key||r||C7()})}function op(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function N7(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Wn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(xn({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Wn.Pop;let T=d(),b=T==null?null:T-u;u=T,c&&c({action:a,location:y.location,delta:b})}function m(T,b){a=Wn.Push;let _=pm(y.location,T,b);u=d()+1;let I=dk(_,u),A=y.createHref(_);try{o.pushState(I,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(A)}i&&c&&c({action:a,location:y.location,delta:1})}function g(T,b){a=Wn.Replace;let _=pm(y.location,T,b);u=d();let I=dk(_,u),A=y.createHref(_);o.replaceState(I,"",A),i&&c&&c({action:a,location:y.location,delta:0})}function w(T){let b=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof T=="string"?T:op(T);return _=_.replace(/ $/,"%20"),jt(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let y={get action(){return a},get location(){return t(s,o)},listen(T){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(uk,h),c=T,()=>{s.removeEventListener(uk,h),c=null}},createHref(T){return e(s,T)},createURL:w,encodeLocation(T){let b=w(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:g,go(T){return o.go(T)}};return y}var Qt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qt||(Qt={}));const k7=new Set(["lazy","caseSensitive","path","id","index","children"]);function R7(t){return t.index===!0}function sv(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let o=[...n,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(jt(s.index!==!0||!s.children,"Cannot specify children on an index route"),jt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),R7(s)){let c=xn({},s,e(s),{id:a});return r[a]=c,c}else{let c=xn({},s,e(s),{id:a,children:void 0});return r[a]=c,s.children&&(c.children=sv(s.children,e,o,r)),c}})}function Ul(t,e,n){return n===void 0&&(n="/"),sy(t,e,n,!1)}function sy(t,e,n,r){let s=typeof e=="string"?yl(e):e,i=ap(s.pathname||"/",n);if(i==null)return null;let o=lO(t);A7(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=$7(i);a=U7(o[c],u,r)}return a}function P7(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function lO(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(jt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Ka([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(jt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),lO(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:V7(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of cO(i.path))s(i,o,c)}),e}function cO(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=cO(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function A7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:B7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const j7=/^:[\w-]+$/,M7=3,D7=2,O7=1,L7=10,F7=-2,hk=t=>t==="*";function V7(t,e){let n=t.split("/"),r=n.length;return n.some(hk)&&(r+=F7),e&&(r+=D7),n.filter(s=>!hk(s)).reduce((s,i)=>s+(j7.test(i)?M7:i===""?O7:L7),r)}function B7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function U7(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=fk({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=fk({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ka([i,h.pathname]),pathnameBase:H7(Ka([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Ka([i,h.pathnameBase]))}return o}function fk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=z7(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const w=a[h];return g&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function z7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ap(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function W7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?yl(t):t;return{pathname:n?n.startsWith("/")?n:G7(n,e):e,search:K7(r),hash:q7(s)}}function G7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dO(t,e){let n=uO(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hO(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=yl(t):(s=xn({},t),jt(!s.pathname||!s.pathname.includes("?"),Cw("?","pathname","search",s)),jt(!s.pathname||!s.pathname.includes("#"),Cw("#","pathname","hash",s)),jt(!s.search||!s.search.includes("#"),Cw("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let c=W7(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ka=t=>t.join("/").replace(/\/\/+/g,"/"),H7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),K7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,q7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class iv{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function gm(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fO=["post","put","patch","delete"],Y7=new Set(fO),Q7=["get",...fO],X7=new Set(Q7),J7=new Set([301,302,303,307,308]),Z7=new Set([307,308]),Nw={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},eH={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$h={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},wT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tH=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),mO="remix-router-transitions";function nH(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;jt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let B=t.detectErrorBoundary;s=$=>({hasErrorBoundary:B($)})}else s=tH;let i={},o=sv(t.routes,s,void 0,i),a,c=t.basename||"/",u=t.dataStrategy||oH,d=t.patchRoutesOnNavigation,h=xn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,g=new Set,w=null,y=null,T=null,b=t.hydrationData!=null,_=Ul(o,t.history.location,c),I=!1,A=null;if(_==null&&!d){let B=Zr(404,{pathname:t.history.location.pathname}),{matches:$,route:Y}=Sk(o);_=$,A={[Y.id]:B}}_&&!t.hydrationData&&Ot(_,o,t.history.location.pathname).active&&(_=null);let M;if(_)if(_.some(B=>B.route.lazy))M=!1;else if(!_.some(B=>B.route.loader))M=!0;else if(h.v7_partialHydration){let B=t.hydrationData?t.hydrationData.loaderData:null,$=t.hydrationData?t.hydrationData.errors:null;if($){let Y=_.findIndex(ge=>$[ge.route.id]!==void 0);M=_.slice(0,Y+1).every(ge=>!Vb(ge.route,B,$))}else M=_.every(Y=>!Vb(Y.route,B,$))}else M=t.hydrationData!=null;else if(M=!1,_=[],h.v7_partialHydration){let B=Ot(null,o,t.history.location.pathname);B.active&&B.matches&&(I=!0,_=B.matches)}let j,v={historyAction:t.history.action,location:t.history.location,matches:_,initialized:M,navigation:Nw,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||A,fetchers:new Map,blockers:new Map},E=Wn.Pop,C=!1,S,P=!1,R=new Map,k=null,W=!1,J=!1,Q=[],le=new Set,O=new Map,V=0,Z=-1,ye=new Map,ae=new Set,ve=new Map,_e=new Map,de=new Set,ze=new Map,re=new Map,Pe;function Ze(){if(m=t.history.listen(B=>{let{action:$,location:Y,delta:ge}=B;if(Pe){Pe(),Pe=void 0;return}Cd(re.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ke=ot({currentLocation:v.location,nextLocation:Y,historyAction:$});if(ke&&ge!=null){let Ye=new Promise(at=>{Pe=at});t.history.go(ge*-1),xe(ke,{state:"blocked",location:Y,proceed(){xe(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),Ye.then(()=>t.history.go(ge))},reset(){let at=new Map(v.blockers);at.set(ke,$h),L({blockers:at})}});return}return Ie($,Y)}),n){wH(e,R);let B=()=>_H(e,R);e.addEventListener("pagehide",B),k=()=>e.removeEventListener("pagehide",B)}return v.initialized||Ie(Wn.Pop,v.location,{initialHydration:!0}),j}function De(){m&&m(),k&&k(),g.clear(),S&&S.abort(),v.fetchers.forEach((B,$)=>Mn($)),v.blockers.forEach((B,$)=>he($))}function ce(B){return g.add(B),()=>g.delete(B)}function L(B,$){$===void 0&&($={}),v=xn({},v,B);let Y=[],ge=[];h.v7_fetcherPersist&&v.fetchers.forEach((ke,Ye)=>{ke.state==="idle"&&(de.has(Ye)?ge.push(Ye):Y.push(Ye))}),de.forEach(ke=>{!v.fetchers.has(ke)&&!O.has(ke)&&ge.push(ke)}),[...g].forEach(ke=>ke(v,{deletedFetchers:ge,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),h.v7_fetcherPersist?(Y.forEach(ke=>v.fetchers.delete(ke)),ge.forEach(ke=>Mn(ke))):ge.forEach(ke=>de.delete(ke))}function K(B,$,Y){var ge,ke;let{flushSync:Ye}=Y===void 0?{}:Y,at=v.actionData!=null&&v.navigation.formMethod!=null&&li(v.navigation.formMethod)&&v.navigation.state==="loading"&&((ge=B.state)==null?void 0:ge._isRedirect)!==!0,We;$.actionData?Object.keys($.actionData).length>0?We=$.actionData:We=null:at?We=v.actionData:We=null;let Ve=$.loaderData?bk(v.loaderData,$.loaderData,$.matches||[],$.errors):v.loaderData,Oe=v.blockers;Oe.size>0&&(Oe=new Map(Oe),Oe.forEach((ft,Un)=>Oe.set(Un,$h)));let Qe=C===!0||v.navigation.formMethod!=null&&li(v.navigation.formMethod)&&((ke=B.state)==null?void 0:ke._isRedirect)!==!0;a&&(o=a,a=void 0),W||E===Wn.Pop||(E===Wn.Push?t.history.push(B,B.state):E===Wn.Replace&&t.history.replace(B,B.state));let dt;if(E===Wn.Pop){let ft=R.get(v.location.pathname);ft&&ft.has(B.pathname)?dt={currentLocation:v.location,nextLocation:B}:R.has(B.pathname)&&(dt={currentLocation:B,nextLocation:v.location})}else if(P){let ft=R.get(v.location.pathname);ft?ft.add(B.pathname):(ft=new Set([B.pathname]),R.set(v.location.pathname,ft)),dt={currentLocation:v.location,nextLocation:B}}L(xn({},$,{actionData:We,loaderData:Ve,historyAction:E,location:B,initialized:!0,navigation:Nw,revalidation:"idle",restoreScrollPosition:pt(B,$.matches||v.matches),preventScrollReset:Qe,blockers:Oe}),{viewTransitionOpts:dt,flushSync:Ye===!0}),E=Wn.Pop,C=!1,P=!1,W=!1,J=!1,Q=[]}async function ie(B,$){if(typeof B=="number"){t.history.go(B);return}let Y=Fb(v.location,v.matches,c,h.v7_prependBasename,B,h.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:ge,submission:ke,error:Ye}=mk(h.v7_normalizeFormMethod,!1,Y,$),at=v.location,We=pm(v.location,ge,$&&$.state);We=xn({},We,t.history.encodeLocation(We));let Ve=$&&$.replace!=null?$.replace:void 0,Oe=Wn.Push;Ve===!0?Oe=Wn.Replace:Ve===!1||ke!=null&&li(ke.formMethod)&&ke.formAction===v.location.pathname+v.location.search&&(Oe=Wn.Replace);let Qe=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,dt=($&&$.flushSync)===!0,ft=ot({currentLocation:at,nextLocation:We,historyAction:Oe});if(ft){xe(ft,{state:"blocked",location:We,proceed(){xe(ft,{state:"proceeding",proceed:void 0,reset:void 0,location:We}),ie(B,$)},reset(){let Un=new Map(v.blockers);Un.set(ft,$h),L({blockers:Un})}});return}return await Ie(Oe,We,{submission:ke,pendingError:Ye,preventScrollReset:Qe,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:dt})}function Ae(){if(ut(),L({revalidation:"loading"}),v.navigation.state!=="submitting"){if(v.navigation.state==="idle"){Ie(v.historyAction,v.location,{startUninterruptedRevalidation:!0});return}Ie(E||v.historyAction,v.navigation.location,{overrideNavigation:v.navigation,enableViewTransition:P===!0})}}async function Ie(B,$,Y){S&&S.abort(),S=null,E=B,W=(Y&&Y.startUninterruptedRevalidation)===!0,st(v.location,v.matches),C=(Y&&Y.preventScrollReset)===!0,P=(Y&&Y.enableViewTransition)===!0;let ge=a||o,ke=Y&&Y.overrideNavigation,Ye=Y!=null&&Y.initialHydration&&v.matches&&v.matches.length>0&&!I?v.matches:Ul(ge,$,c),at=(Y&&Y.flushSync)===!0;if(Ye&&v.initialized&&!J&&hH(v.location,$)&&!(Y&&Y.submission&&li(Y.submission.formMethod))){K($,{matches:Ye},{flushSync:at});return}let We=Ot(Ye,ge,$.pathname);if(We.active&&We.matches&&(Ye=We.matches),!Ye){let{error:qt,notFoundMatches:Rt,route:sn}=Ht($.pathname);K($,{matches:Rt,loaderData:{},errors:{[sn.id]:qt}},{flushSync:at});return}S=new AbortController;let Ve=iu(t.history,$,S.signal,Y&&Y.submission),Oe;if(Y&&Y.pendingError)Oe=[zl(Ye).route.id,{type:Qt.error,error:Y.pendingError}];else if(Y&&Y.submission&&li(Y.submission.formMethod)){let qt=await $e(Ve,$,Y.submission,Ye,We.active,{replace:Y.replace,flushSync:at});if(qt.shortCircuited)return;if(qt.pendingActionResult){let[Rt,sn]=qt.pendingActionResult;if(vs(sn)&&gm(sn.error)&&sn.error.status===404){S=null,K($,{matches:qt.matches,loaderData:{},errors:{[Rt]:sn.error}});return}}Ye=qt.matches||Ye,Oe=qt.pendingActionResult,ke=kw($,Y.submission),at=!1,We.active=!1,Ve=iu(t.history,Ve.url,Ve.signal)}let{shortCircuited:Qe,matches:dt,loaderData:ft,errors:Un}=await je(Ve,$,Ye,We.active,ke,Y&&Y.submission,Y&&Y.fetcherSubmission,Y&&Y.replace,Y&&Y.initialHydration===!0,at,Oe);Qe||(S=null,K($,xn({matches:dt||Ye},Ek(Oe),{loaderData:ft,errors:Un})))}async function $e(B,$,Y,ge,ke,Ye){Ye===void 0&&(Ye={}),ut();let at=vH($,Y);if(L({navigation:at},{flushSync:Ye.flushSync===!0}),ke){let Oe=await yn(ge,$.pathname,B.signal);if(Oe.type==="aborted")return{shortCircuited:!0};if(Oe.type==="error"){let Qe=zl(Oe.partialMatches).route.id;return{matches:Oe.partialMatches,pendingActionResult:[Qe,{type:Qt.error,error:Oe.error}]}}else if(Oe.matches)ge=Oe.matches;else{let{notFoundMatches:Qe,error:dt,route:ft}=Ht($.pathname);return{matches:Qe,pendingActionResult:[ft.id,{type:Qt.error,error:dt}]}}}let We,Ve=uf(ge,$);if(!Ve.route.action&&!Ve.route.lazy)We={type:Qt.error,error:Zr(405,{method:B.method,pathname:$.pathname,routeId:Ve.route.id})};else if(We=(await He("action",v,B,[Ve],ge,null))[Ve.route.id],B.signal.aborted)return{shortCircuited:!0};if(Jl(We)){let Oe;return Ye&&Ye.replace!=null?Oe=Ye.replace:Oe=xk(We.response.headers.get("Location"),new URL(B.url),c)===v.location.pathname+v.location.search,await nt(B,We,!0,{submission:Y,replace:Oe}),{shortCircuited:!0}}if(Da(We))throw Zr(400,{type:"defer-action"});if(vs(We)){let Oe=zl(ge,Ve.route.id);return(Ye&&Ye.replace)!==!0&&(E=Wn.Push),{matches:ge,pendingActionResult:[Oe.route.id,We]}}return{matches:ge,pendingActionResult:[Ve.route.id,We]}}async function je(B,$,Y,ge,ke,Ye,at,We,Ve,Oe,Qe){let dt=ke||kw($,Ye),ft=Ye||at||Ik(dt),Un=!W&&(!h.v7_partialHydration||!Ve);if(ge){if(Un){let cn=ee(Qe);L(xn({navigation:dt},cn!==void 0?{actionData:cn}:{}),{flushSync:Oe})}let Lt=await yn(Y,$.pathname,B.signal);if(Lt.type==="aborted")return{shortCircuited:!0};if(Lt.type==="error"){let cn=zl(Lt.partialMatches).route.id;return{matches:Lt.partialMatches,loaderData:{},errors:{[cn]:Lt.error}}}else if(Lt.matches)Y=Lt.matches;else{let{error:cn,notFoundMatches:ao,route:ra}=Ht($.pathname);return{matches:ao,loaderData:{},errors:{[ra.id]:cn}}}}let qt=a||o,[Rt,sn]=gk(t.history,v,Y,ft,$,h.v7_partialHydration&&Ve===!0,h.v7_skipActionErrorRevalidation,J,Q,le,de,ve,ae,qt,c,Qe);if(ur(Lt=>!(Y&&Y.some(cn=>cn.route.id===Lt))||Rt&&Rt.some(cn=>cn.route.id===Lt)),Z=++V,Rt.length===0&&sn.length===0){let Lt=F();return K($,xn({matches:Y,loaderData:{},errors:Qe&&vs(Qe[1])?{[Qe[0]]:Qe[1].error}:null},Ek(Qe),Lt?{fetchers:new Map(v.fetchers)}:{}),{flushSync:Oe}),{shortCircuited:!0}}if(Un){let Lt={};if(!ge){Lt.navigation=dt;let cn=ee(Qe);cn!==void 0&&(Lt.actionData=cn)}sn.length>0&&(Lt.fetchers=be(sn)),L(Lt,{flushSync:Oe})}sn.forEach(Lt=>{xt(Lt.key),Lt.controller&&O.set(Lt.key,Lt.controller)});let io=()=>sn.forEach(Lt=>xt(Lt.key));S&&S.signal.addEventListener("abort",io);let{loaderResults:ta,fetcherResults:Zs}=await te(v,Y,Rt,sn,B);if(B.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",io),sn.forEach(Lt=>O.delete(Lt.key));let Dr=wg(ta);if(Dr)return await nt(B,Dr.result,!0,{replace:We}),{shortCircuited:!0};if(Dr=wg(Zs),Dr)return ae.add(Dr.key),await nt(B,Dr.result,!0,{replace:We}),{shortCircuited:!0};let{loaderData:eu,errors:oo}=_k(v,Y,ta,Qe,sn,Zs,ze);ze.forEach((Lt,cn)=>{Lt.subscribe(ao=>{(ao||Lt.done)&&ze.delete(cn)})}),h.v7_partialHydration&&Ve&&v.errors&&(oo=xn({},v.errors,oo));let ms=F(),As=z(Z),na=ms||As||sn.length>0;return xn({matches:Y,loaderData:eu,errors:oo},na?{fetchers:new Map(v.fetchers)}:{})}function ee(B){if(B&&!vs(B[1]))return{[B[0]]:B[1].data};if(v.actionData)return Object.keys(v.actionData).length===0?null:v.actionData}function be(B){return B.forEach($=>{let Y=v.fetchers.get($.key),ge=Wh(void 0,Y?Y.data:void 0);v.fetchers.set($.key,ge)}),new Map(v.fetchers)}function Ke(B,$,Y,ge){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xt(B);let ke=(ge&&ge.flushSync)===!0,Ye=a||o,at=Fb(v.location,v.matches,c,h.v7_prependBasename,Y,h.v7_relativeSplatPath,$,ge==null?void 0:ge.relative),We=Ul(Ye,at,c),Ve=Ot(We,Ye,at);if(Ve.active&&Ve.matches&&(We=Ve.matches),!We){_t(B,$,Zr(404,{pathname:at}),{flushSync:ke});return}let{path:Oe,submission:Qe,error:dt}=mk(h.v7_normalizeFormMethod,!0,at,ge);if(dt){_t(B,$,dt,{flushSync:ke});return}let ft=uf(We,Oe),Un=(ge&&ge.preventScrollReset)===!0;if(Qe&&li(Qe.formMethod)){tt(B,$,Oe,ft,We,Ve.active,ke,Un,Qe);return}ve.set(B,{routeId:$,path:Oe}),me(B,$,Oe,ft,We,Ve.active,ke,Un,Qe)}async function tt(B,$,Y,ge,ke,Ye,at,We,Ve){ut(),ve.delete(B);function Oe(vn){if(!vn.route.action&&!vn.route.lazy){let Ri=Zr(405,{method:Ve.formMethod,pathname:Y,routeId:$});return _t(B,$,Ri,{flushSync:at}),!0}return!1}if(!Ye&&Oe(ge))return;let Qe=v.fetchers.get(B);Zt(B,xH(Ve,Qe),{flushSync:at});let dt=new AbortController,ft=iu(t.history,Y,dt.signal,Ve);if(Ye){let vn=await yn(ke,new URL(ft.url).pathname,ft.signal,B);if(vn.type==="aborted")return;if(vn.type==="error"){_t(B,$,vn.error,{flushSync:at});return}else if(vn.matches){if(ke=vn.matches,ge=uf(ke,Y),Oe(ge))return}else{_t(B,$,Zr(404,{pathname:Y}),{flushSync:at});return}}O.set(B,dt);let Un=V,Rt=(await He("action",v,ft,[ge],ke,B))[ge.route.id];if(ft.signal.aborted){O.get(B)===dt&&O.delete(B);return}if(h.v7_fetcherPersist&&de.has(B)){if(Jl(Rt)||vs(Rt)){Zt(B,ma(void 0));return}}else{if(Jl(Rt))if(O.delete(B),Z>Un){Zt(B,ma(void 0));return}else return ae.add(B),Zt(B,Wh(Ve)),nt(ft,Rt,!1,{fetcherSubmission:Ve,preventScrollReset:We});if(vs(Rt)){_t(B,$,Rt.error);return}}if(Da(Rt))throw Zr(400,{type:"defer-action"});let sn=v.navigation.location||v.location,io=iu(t.history,sn,dt.signal),ta=a||o,Zs=v.navigation.state!=="idle"?Ul(ta,v.navigation.location,c):v.matches;jt(Zs,"Didn't find any matches after fetcher action");let Dr=++V;ye.set(B,Dr);let eu=Wh(Ve,Rt.data);v.fetchers.set(B,eu);let[oo,ms]=gk(t.history,v,Zs,Ve,sn,!1,h.v7_skipActionErrorRevalidation,J,Q,le,de,ve,ae,ta,c,[ge.route.id,Rt]);ms.filter(vn=>vn.key!==B).forEach(vn=>{let Ri=vn.key,Th=v.fetchers.get(Ri),Bp=Wh(void 0,Th?Th.data:void 0);v.fetchers.set(Ri,Bp),xt(Ri),vn.controller&&O.set(Ri,vn.controller)}),L({fetchers:new Map(v.fetchers)});let As=()=>ms.forEach(vn=>xt(vn.key));dt.signal.addEventListener("abort",As);let{loaderResults:na,fetcherResults:Lt}=await te(v,Zs,oo,ms,io);if(dt.signal.aborted)return;dt.signal.removeEventListener("abort",As),ye.delete(B),O.delete(B),ms.forEach(vn=>O.delete(vn.key));let cn=wg(na);if(cn)return nt(io,cn.result,!1,{preventScrollReset:We});if(cn=wg(Lt),cn)return ae.add(cn.key),nt(io,cn.result,!1,{preventScrollReset:We});let{loaderData:ao,errors:ra}=_k(v,Zs,na,void 0,ms,Lt,ze);if(v.fetchers.has(B)){let vn=ma(Rt.data);v.fetchers.set(B,vn)}z(Dr),v.navigation.state==="loading"&&Dr>Z?(jt(E,"Expected pending action"),S&&S.abort(),K(v.navigation.location,{matches:Zs,loaderData:ao,errors:ra,fetchers:new Map(v.fetchers)})):(L({errors:ra,loaderData:bk(v.loaderData,ao,Zs,ra),fetchers:new Map(v.fetchers)}),J=!1)}async function me(B,$,Y,ge,ke,Ye,at,We,Ve){let Oe=v.fetchers.get(B);Zt(B,Wh(Ve,Oe?Oe.data:void 0),{flushSync:at});let Qe=new AbortController,dt=iu(t.history,Y,Qe.signal);if(Ye){let Rt=await yn(ke,new URL(dt.url).pathname,dt.signal,B);if(Rt.type==="aborted")return;if(Rt.type==="error"){_t(B,$,Rt.error,{flushSync:at});return}else if(Rt.matches)ke=Rt.matches,ge=uf(ke,Y);else{_t(B,$,Zr(404,{pathname:Y}),{flushSync:at});return}}O.set(B,Qe);let ft=V,qt=(await He("loader",v,dt,[ge],ke,B))[ge.route.id];if(Da(qt)&&(qt=await _T(qt,dt.signal,!0)||qt),O.get(B)===Qe&&O.delete(B),!dt.signal.aborted){if(de.has(B)){Zt(B,ma(void 0));return}if(Jl(qt))if(Z>ft){Zt(B,ma(void 0));return}else{ae.add(B),await nt(dt,qt,!1,{preventScrollReset:We});return}if(vs(qt)){_t(B,$,qt.error);return}jt(!Da(qt),"Unhandled fetcher deferred data"),Zt(B,ma(qt.data))}}async function nt(B,$,Y,ge){let{submission:ke,fetcherSubmission:Ye,preventScrollReset:at,replace:We}=ge===void 0?{}:ge;$.response.headers.has("X-Remix-Revalidate")&&(J=!0);let Ve=$.response.headers.get("Location");jt(Ve,"Expected a Location header on the redirect Response"),Ve=xk(Ve,new URL(B.url),c);let Oe=pm(v.location,Ve,{_isRedirect:!0});if(n){let Rt=!1;if($.response.headers.has("X-Remix-Reload-Document"))Rt=!0;else if(wT.test(Ve)){const sn=t.history.createURL(Ve);Rt=sn.origin!==e.location.origin||ap(sn.pathname,c)==null}if(Rt){We?e.location.replace(Ve):e.location.assign(Ve);return}}S=null;let Qe=We===!0||$.response.headers.has("X-Remix-Replace")?Wn.Replace:Wn.Push,{formMethod:dt,formAction:ft,formEncType:Un}=v.navigation;!ke&&!Ye&&dt&&ft&&Un&&(ke=Ik(v.navigation));let qt=ke||Ye;if(Z7.has($.response.status)&&qt&&li(qt.formMethod))await Ie(Qe,Oe,{submission:xn({},qt,{formAction:Ve}),preventScrollReset:at||C,enableViewTransition:Y?P:void 0});else{let Rt=kw(Oe,ke);await Ie(Qe,Oe,{overrideNavigation:Rt,fetcherSubmission:Ye,preventScrollReset:at||C,enableViewTransition:Y?P:void 0})}}async function He(B,$,Y,ge,ke,Ye){let at,We={};try{at=await aH(u,B,$,Y,ge,ke,Ye,i,s)}catch(Ve){return ge.forEach(Oe=>{We[Oe.route.id]={type:Qt.error,error:Ve}}),We}for(let[Ve,Oe]of Object.entries(at))if(fH(Oe)){let Qe=Oe.result;We[Ve]={type:Qt.redirect,response:uH(Qe,Y,Ve,ke,c,h.v7_relativeSplatPath)}}else We[Ve]=await cH(Oe);return We}async function te(B,$,Y,ge,ke){let Ye=B.matches,at=He("loader",B,ke,Y,$,null),We=Promise.all(ge.map(async Qe=>{if(Qe.matches&&Qe.match&&Qe.controller){let ft=(await He("loader",B,iu(t.history,Qe.path,Qe.controller.signal),[Qe.match],Qe.matches,Qe.key))[Qe.match.route.id];return{[Qe.key]:ft}}else return Promise.resolve({[Qe.key]:{type:Qt.error,error:Zr(404,{pathname:Qe.path})}})})),Ve=await at,Oe=(await We).reduce((Qe,dt)=>Object.assign(Qe,dt),{});return await Promise.all([gH($,Ve,ke.signal,Ye,B.loaderData),yH($,Oe,ge)]),{loaderResults:Ve,fetcherResults:Oe}}function ut(){J=!0,Q.push(...ur()),ve.forEach((B,$)=>{O.has($)&&le.add($),xt($)})}function Zt(B,$,Y){Y===void 0&&(Y={}),v.fetchers.set(B,$),L({fetchers:new Map(v.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function _t(B,$,Y,ge){ge===void 0&&(ge={});let ke=zl(v.matches,$);Mn(B),L({errors:{[ke.route.id]:Y},fetchers:new Map(v.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function tn(B){return _e.set(B,(_e.get(B)||0)+1),de.has(B)&&de.delete(B),v.fetchers.get(B)||eH}function Mn(B){let $=v.fetchers.get(B);O.has(B)&&!($&&$.state==="loading"&&ye.has(B))&&xt(B),ve.delete(B),ye.delete(B),ae.delete(B),h.v7_fetcherPersist&&de.delete(B),le.delete(B),v.fetchers.delete(B)}function ln(B){let $=(_e.get(B)||0)-1;$<=0?(_e.delete(B),de.add(B),h.v7_fetcherPersist||Mn(B)):_e.set(B,$),L({fetchers:new Map(v.fetchers)})}function xt(B){let $=O.get(B);$&&($.abort(),O.delete(B))}function X(B){for(let $ of B){let Y=tn($),ge=ma(Y.data);v.fetchers.set($,ge)}}function F(){let B=[],$=!1;for(let Y of ae){let ge=v.fetchers.get(Y);jt(ge,"Expected fetcher: "+Y),ge.state==="loading"&&(ae.delete(Y),B.push(Y),$=!0)}return X(B),$}function z(B){let $=[];for(let[Y,ge]of ye)if(ge<B){let ke=v.fetchers.get(Y);jt(ke,"Expected fetcher: "+Y),ke.state==="loading"&&(xt(Y),ye.delete(Y),$.push(Y))}return X($),$.length>0}function oe(B,$){let Y=v.blockers.get(B)||$h;return re.get(B)!==$&&re.set(B,$),Y}function he(B){v.blockers.delete(B),re.delete(B)}function xe(B,$){let Y=v.blockers.get(B)||$h;jt(Y.state==="unblocked"&&$.state==="blocked"||Y.state==="blocked"&&$.state==="blocked"||Y.state==="blocked"&&$.state==="proceeding"||Y.state==="blocked"&&$.state==="unblocked"||Y.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+Y.state+" -> "+$.state);let ge=new Map(v.blockers);ge.set(B,$),L({blockers:ge})}function ot(B){let{currentLocation:$,nextLocation:Y,historyAction:ge}=B;if(re.size===0)return;re.size>1&&Cd(!1,"A router only supports one blocker at a time");let ke=Array.from(re.entries()),[Ye,at]=ke[ke.length-1],We=v.blockers.get(Ye);if(!(We&&We.state==="proceeding")&&at({currentLocation:$,nextLocation:Y,historyAction:ge}))return Ye}function Ht(B){let $=Zr(404,{pathname:B}),Y=a||o,{matches:ge,route:ke}=Sk(Y);return ur(),{notFoundMatches:ge,route:ke,error:$}}function ur(B){let $=[];return ze.forEach((Y,ge)=>{(!B||B(ge))&&(Y.cancel(),$.push(ge),ze.delete(ge))}),$}function gt(B,$,Y){if(w=B,T=$,y=Y||null,!b&&v.navigation===Nw){b=!0;let ge=pt(v.location,v.matches);ge!=null&&L({restoreScrollPosition:ge})}return()=>{w=null,T=null,y=null}}function Mr(B,$){return y&&y(B,$.map(ge=>P7(ge,v.loaderData)))||B.key}function st(B,$){if(w&&T){let Y=Mr(B,$);w[Y]=T()}}function pt(B,$){if(w){let Y=Mr(B,$),ge=w[Y];if(typeof ge=="number")return ge}return null}function Ot(B,$,Y){if(d)if(B){if(Object.keys(B[0].params).length>0)return{active:!0,matches:sy($,Y,c,!0)}}else return{active:!0,matches:sy($,Y,c,!0)||[]};return{active:!1,matches:null}}async function yn(B,$,Y,ge){if(!d)return{type:"success",matches:B};let ke=B;for(;;){let Ye=a==null,at=a||o,We=i;try{await d({signal:Y,path:$,matches:ke,fetcherKey:ge,patch:(Qe,dt)=>{Y.aborted||vk(Qe,dt,at,We,s)}})}catch(Qe){return{type:"error",error:Qe,partialMatches:ke}}finally{Ye&&!Y.aborted&&(o=[...o])}if(Y.aborted)return{type:"aborted"};let Ve=Ul(at,$,c);if(Ve)return{type:"success",matches:Ve};let Oe=sy(at,$,c,!0);if(!Oe||ke.length===Oe.length&&ke.every((Qe,dt)=>Qe.route.id===Oe[dt].route.id))return{type:"success",matches:null};ke=Oe}}function Bn(B){i={},a=sv(B,s,void 0,i)}function Kt(B,$){let Y=a==null;vk(B,$,a||o,i,s),Y&&(o=[...o],L({}))}return j={get basename(){return c},get future(){return h},get state(){return v},get routes(){return o},get window(){return e},initialize:Ze,subscribe:ce,enableScrollRestoration:gt,navigate:ie,fetch:Ke,revalidate:Ae,createHref:B=>t.history.createHref(B),encodeLocation:B=>t.history.encodeLocation(B),getFetcher:tn,deleteFetcher:ln,dispose:De,getBlocker:oe,deleteBlocker:he,patchRoutes:Kt,_internalFetchControllers:O,_internalActiveDeferreds:ze,_internalSetRoutes:Bn},j}function rH(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Fb(t,e,n,r,s,i,o,a){let c,u;if(o){c=[];for(let h of e)if(c.push(h),h.route.id===o){u=h;break}}else c=e,u=e[e.length-1];let d=hO(s||".",dO(c,i),ap(t.pathname,n)||t.pathname,a==="path");if(s==null&&(d.search=t.search,d.hash=t.hash),(s==null||s===""||s===".")&&u){let h=bT(d.search);if(u.route.index&&!h)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&h){let m=new URLSearchParams(d.search),g=m.getAll("index");m.delete("index"),g.filter(y=>y).forEach(y=>m.append("index",y));let w=m.toString();d.search=w?"?"+w:""}}return r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Ka([n,d.pathname])),op(d)}function mk(t,e,n,r){if(!r||!rH(r))return{path:n};if(r.formMethod&&!pH(r.formMethod))return{path:n,error:Zr(405,{method:r.formMethod})};let s=()=>({path:n,error:Zr(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=yO(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!li(o))return s();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,w)=>{let[y,T]=w;return""+g+y+"="+T+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!li(o))return s();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return s()}}}jt(typeof FormData=="function","FormData is not available in this environment");let c,u;if(r.formData)c=Bb(r.formData),u=r.formData;else if(r.body instanceof FormData)c=Bb(r.body),u=r.body;else if(r.body instanceof URLSearchParams)c=r.body,u=wk(c);else if(r.body==null)c=new URLSearchParams,u=new FormData;else try{c=new URLSearchParams(r.body),u=wk(c)}catch{return s()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(li(d.formMethod))return{path:n,submission:d};let h=yl(n);return e&&h.search&&bT(h.search)&&c.append("index",""),h.search="?"+c,{path:op(h),submission:d}}function pk(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(s=>s.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function gk(t,e,n,r,s,i,o,a,c,u,d,h,m,g,w,y){let T=y?vs(y[1])?y[1].error:y[1].data:void 0,b=t.createURL(e.location),_=t.createURL(s),I=n;i&&e.errors?I=pk(n,Object.keys(e.errors)[0],!0):y&&vs(y[1])&&(I=pk(n,y[0]));let A=y?y[1].statusCode:void 0,M=o&&A&&A>=400,j=I.filter((E,C)=>{let{route:S}=E;if(S.lazy)return!0;if(S.loader==null)return!1;if(i)return Vb(S,e.loaderData,e.errors);if(sH(e.loaderData,e.matches[C],E)||c.some(k=>k===E.route.id))return!0;let P=e.matches[C],R=E;return yk(E,xn({currentUrl:b,currentParams:P.params,nextUrl:_,nextParams:R.params},r,{actionResult:T,actionStatus:A,defaultShouldRevalidate:M?!1:a||b.pathname+b.search===_.pathname+_.search||b.search!==_.search||pO(P,R)}))}),v=[];return h.forEach((E,C)=>{if(i||!n.some(W=>W.route.id===E.routeId)||d.has(C))return;let S=Ul(g,E.path,w);if(!S){v.push({key:C,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(C),R=uf(S,E.path),k=!1;m.has(C)?k=!1:u.has(C)?(u.delete(C),k=!0):P&&P.state!=="idle"&&P.data===void 0?k=a:k=yk(R,xn({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:T,actionStatus:A,defaultShouldRevalidate:M?!1:a})),k&&v.push({key:C,routeId:E.routeId,path:E.path,matches:S,match:R,controller:new AbortController})}),[j,v]}function Vb(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,s=n!=null&&n[t.id]!==void 0;return!r&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!s}function sH(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function pO(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function yk(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function vk(t,e,n,r,s){var i;let o;if(t){let u=r[t];jt(u,"No route found to patch children into: routeId = "+t),u.children||(u.children=[]),o=u.children}else o=n;let a=e.filter(u=>!o.some(d=>gO(u,d))),c=sv(a,s,[t||"_","patch",String(((i=o)==null?void 0:i.length)||"0")],r);o.push(...c)}function gO(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var s;return(s=e.children)==null?void 0:s.some(i=>gO(n,i))}):!1}async function iH(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];jt(s,"No route found in manifest");let i={};for(let o in r){let c=s[o]!==void 0&&o!=="hasErrorBoundary";Cd(!c,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!c&&!k7.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,xn({},e(s),{lazy:void 0}))}async function oH(t){let{matches:e}=t,n=e.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,i,o)=>Object.assign(s,{[n[o].route.id]:i}),{})}async function aH(t,e,n,r,s,i,o,a,c,u){let d=i.map(g=>g.route.lazy?iH(g.route,c,a):void 0),h=i.map((g,w)=>{let y=d[w],T=s.some(_=>_.route.id===g.route.id);return xn({},g,{shouldLoad:T,resolve:async _=>(_&&r.method==="GET"&&(g.route.lazy||g.route.loader)&&(T=!0),T?lH(e,r,g,y,_,u):Promise.resolve({type:Qt.data,result:void 0}))})}),m=await t({matches:h,request:r,params:i[0].params,fetcherKey:o,context:u});try{await Promise.all(d)}catch{}return m}async function lH(t,e,n,r,s,i){let o,a,c=u=>{let d,h=new Promise((w,y)=>d=y);a=()=>d(),e.signal.addEventListener("abort",a);let m=w=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:i},...w!==void 0?[w]:[]),g=(async()=>{try{return{type:"data",result:await(s?s(y=>m(y)):m())}}catch(w){return{type:"error",result:w}}})();return Promise.race([g,h])};try{let u=n.route[t];if(r)if(u){let d,[h]=await Promise.all([c(u).catch(m=>{d=m}),r]);if(d!==void 0)throw d;o=h}else if(await r,u=n.route[t],u)o=await c(u);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw Zr(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:Qt.data,result:void 0};else if(u)o=await c(u);else{let d=new URL(e.url),h=d.pathname+d.search;throw Zr(404,{pathname:h})}jt(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Qt.error,result:u}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function cH(t){let{result:e,type:n}=t;if(vO(e)){let h;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(m){return{type:Qt.error,error:m}}return n===Qt.error?{type:Qt.error,error:new iv(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:Qt.data,data:h,statusCode:e.status,headers:e.headers}}if(n===Qt.error){if(Tk(e)){var r,s;if(e.data instanceof Error){var i,o;return{type:Qt.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Qt.error,error:new iv(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:gm(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Qt.error,error:e,statusCode:gm(e)?e.status:void 0}}if(mH(e)){var a,c;return{type:Qt.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((c=e.init)==null?void 0:c.headers)&&new Headers(e.init.headers)}}if(Tk(e)){var u,d;return{type:Qt.data,data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}}return{type:Qt.data,data:e}}function uH(t,e,n,r,s,i){let o=t.headers.get("Location");if(jt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!wT.test(o)){let a=r.slice(0,r.findIndex(c=>c.route.id===n)+1);o=Fb(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function xk(t,e,n){if(wT.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=ap(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function iu(t,e,n,r){let s=t.createURL(yO(e)).toString(),i={signal:n};if(r&&li(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=Bb(r.formData):i.body=r.formData}return new Request(s,i)}function Bb(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function wk(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function dH(t,e,n,r,s){let i={},o=null,a,c=!1,u={},d=n&&vs(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let m=h.route.id,g=e[m];if(jt(!Jl(g),"Cannot handle redirect results in processLoaderData"),vs(g)){let w=g.error;d!==void 0&&(w=d,d=void 0),o=o||{};{let y=zl(t,m);o[y.route.id]==null&&(o[y.route.id]=w)}i[m]=void 0,c||(c=!0,a=gm(g.error)?g.error.status:500),g.headers&&(u[m]=g.headers)}else Da(g)?(r.set(m,g.deferredData),i[m]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!c&&(a=g.statusCode),g.headers&&(u[m]=g.headers)):(i[m]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(a=g.statusCode),g.headers&&(u[m]=g.headers))}),d!==void 0&&n&&(o={[n[0]]:d},i[n[0]]=void 0),{loaderData:i,errors:o,statusCode:a||200,loaderHeaders:u}}function _k(t,e,n,r,s,i,o){let{loaderData:a,errors:c}=dH(e,n,r,o);return s.forEach(u=>{let{key:d,match:h,controller:m}=u,g=i[d];if(jt(g,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(vs(g)){let w=zl(t.matches,h==null?void 0:h.route.id);c&&c[w.route.id]||(c=xn({},c,{[w.route.id]:g.error})),t.fetchers.delete(d)}else if(Jl(g))jt(!1,"Unhandled fetcher revalidation redirect");else if(Da(g))jt(!1,"Unhandled fetcher deferred data");else{let w=ma(g.data);t.fetchers.set(d,w)}}),{loaderData:a,errors:c}}function bk(t,e,n,r){let s=xn({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),r&&r.hasOwnProperty(o))break}return s}function Ek(t){return t?vs(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function zl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Sk(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zr(t,e){let{pathname:n,routeId:r,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(a="Bad Request",s&&n&&r?c="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?c="defer() is not supported in actions":i==="invalid-body"&&(c="Unable to encode submission body")):t===403?(a="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",c='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?c="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(c='Invalid request method "'+s.toUpperCase()+'"')),new iv(t||500,a,new Error(c),!0)}function wg(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,s]=e[n];if(Jl(s))return{key:r,result:s}}}function yO(t){let e=typeof t=="string"?yl(t):t;return op(xn({},e,{hash:""}))}function hH(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function fH(t){return vO(t.result)&&J7.has(t.result.status)}function Da(t){return t.type===Qt.deferred}function vs(t){return t.type===Qt.error}function Jl(t){return(t&&t.type)===Qt.redirect}function Tk(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function mH(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function vO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function pH(t){return X7.has(t.toLowerCase())}function li(t){return Y7.has(t.toLowerCase())}async function gH(t,e,n,r,s){let i=Object.entries(e);for(let o=0;o<i.length;o++){let[a,c]=i[o],u=t.find(m=>(m==null?void 0:m.route.id)===a);if(!u)continue;let d=r.find(m=>m.route.id===u.route.id),h=d!=null&&!pO(d,u)&&(s&&s[u.route.id])!==void 0;Da(c)&&h&&await _T(c,n,!1).then(m=>{m&&(e[a]=m)})}}async function yH(t,e,n){for(let r=0;r<n.length;r++){let{key:s,routeId:i,controller:o}=n[r],a=e[s];t.find(u=>(u==null?void 0:u.route.id)===i)&&Da(a)&&(jt(o,"Expected an AbortController for revalidating fetcher deferred result"),await _T(a,o.signal,!0).then(u=>{u&&(e[s]=u)}))}}async function _T(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Qt.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Qt.error,error:s}}return{type:Qt.data,data:t.deferredData.data}}}function bT(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function uf(t,e){let n=typeof e=="string"?yl(e).search:e.search;if(t[t.length-1].route.index&&bT(n||""))return t[t.length-1];let r=uO(t);return r[r.length-1]}function Ik(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:o}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function kw(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function vH(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Wh(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function xH(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ma(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function wH(t,e){try{let n=t.sessionStorage.getItem(mO);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function _H(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(mO,JSON.stringify(n))}catch(r){Cd(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ov.apply(this,arguments)}const Lx=p.createContext(null),xO=p.createContext(null),Fx=p.createContext(null),ET=p.createContext(null),vl=p.createContext({outlet:null,matches:[],isDataRoute:!1}),wO=p.createContext(null);function Vx(){return p.useContext(ET)!=null}function lp(){return Vx()||jt(!1),p.useContext(ET).location}function _O(t){p.useContext(Fx).static||p.useLayoutEffect(t)}function qs(){let{isDataRoute:t}=p.useContext(vl);return t?DH():bH()}function bH(){Vx()||jt(!1);let t=p.useContext(Lx),{basename:e,future:n,navigator:r}=p.useContext(Fx),{matches:s}=p.useContext(vl),{pathname:i}=lp(),o=JSON.stringify(dO(s,n.v7_relativeSplatPath)),a=p.useRef(!1);return _O(()=>{a.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=hO(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ka([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const EH=p.createContext(null);function SH(t){let e=p.useContext(vl).outlet;return e&&p.createElement(EH.Provider,{value:t},e)}function bO(){let{matches:t}=p.useContext(vl),e=t[t.length-1];return e?e.params:{}}function TH(t,e,n,r){Vx()||jt(!1);let{navigator:s}=p.useContext(Fx),{matches:i}=p.useContext(vl),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=lp(),d;d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=Ul(t,{pathname:m});return RH(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ka([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Ka([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r)}function IH(){let t=MH(),e=gm(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,null)}const CH=p.createElement(IH,null);class NH extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(vl.Provider,{value:this.props.routeContext},p.createElement(wO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kH(t){let{routeContext:e,match:n,children:r}=t,s=p.useContext(Lx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(vl.Provider,{value:e},r)}function RH(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||jt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:g}=n,w=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let g,w=!1,y=null,T=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||CH,c&&(u<0&&m===0?(OH("route-fallback"),w=!0,T=null):u===m&&(w=!0,T=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,m+1)),_=()=>{let I;return g?I=y:w?I=T:h.route.Component?I=p.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,p.createElement(kH,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(NH,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var EO=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(EO||{}),SO=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SO||{});function PH(t){let e=p.useContext(Lx);return e||jt(!1),e}function AH(t){let e=p.useContext(xO);return e||jt(!1),e}function jH(t){let e=p.useContext(vl);return e||jt(!1),e}function TO(t){let e=jH(),n=e.matches[e.matches.length-1];return n.route.id||jt(!1),n.route.id}function MH(){var t;let e=p.useContext(wO),n=AH(),r=TO();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function DH(){let{router:t}=PH(EO.UseNavigateStable),e=TO(SO.UseNavigateStable),n=p.useRef(!1);return _O(()=>{n.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ov({fromRouteId:e},i)))},[t,e])}const Ck={};function OH(t,e,n){Ck[t]||(Ck[t]=!0)}function LH(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function FH(t){return SH(t.context)}function VH(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Wn.Pop,navigator:i,static:o=!1,future:a}=t;Vx()&&jt(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:ov({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=yl(r));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:w="default"}=r,y=p.useMemo(()=>{let T=ap(d,c);return T==null?null:{location:{pathname:T,search:h,hash:m,state:g,key:w},navigationType:s}},[c,d,h,m,g,w,s]);return y==null?null:p.createElement(Fx.Provider,{value:u},p.createElement(ET.Provider,{children:n,value:y}))}new Promise(()=>{});function BH(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:p.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:p.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:p.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},av.apply(this,arguments)}const UH="6";try{window.__reactRouterVersion=UH}catch{}function zH(t,e){return nH({basename:e==null?void 0:e.basename,future:av({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:I7({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||$H(),routes:t,mapRouteProperties:BH,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function $H(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=av({},e,{errors:WH(e.errors)})),e}function WH(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new iv(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const GH=p.createContext({isTransitioning:!1}),HH=p.createContext(new Map),KH="startTransition",Nk=hS[KH],qH="flushSync",kk=c9[qH];function YH(t){Nk?Nk(t):t()}function Gh(t){kk?kk(t):t()}let QH=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function XH(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=p.useState(n.state),[o,a]=p.useState(),[c,u]=p.useState({isTransitioning:!1}),[d,h]=p.useState(),[m,g]=p.useState(),[w,y]=p.useState(),T=p.useRef(new Map),{v7_startTransition:b}=r||{},_=p.useCallback(E=>{b?YH(E):E()},[b]),I=p.useCallback((E,C)=>{let{deletedFetchers:S,flushSync:P,viewTransitionOpts:R}=C;E.fetchers.forEach((W,J)=>{W.data!==void 0&&T.current.set(J,W.data)}),S.forEach(W=>T.current.delete(W));let k=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!R||k){P?Gh(()=>i(E)):_(()=>i(E));return}if(P){Gh(()=>{m&&(d&&d.resolve(),m.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:R.currentLocation,nextLocation:R.nextLocation})});let W=n.window.document.startViewTransition(()=>{Gh(()=>i(E))});W.finished.finally(()=>{Gh(()=>{h(void 0),g(void 0),a(void 0),u({isTransitioning:!1})})}),Gh(()=>g(W));return}m?(d&&d.resolve(),m.skipTransition(),y({state:E,currentLocation:R.currentLocation,nextLocation:R.nextLocation})):(a(E),u({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}))},[n.window,m,d,T,_]);p.useLayoutEffect(()=>n.subscribe(I),[n,I]),p.useEffect(()=>{c.isTransitioning&&!c.flushSync&&h(new QH)},[c]),p.useEffect(()=>{if(d&&o&&n.window){let E=o,C=d.promise,S=n.window.document.startViewTransition(async()=>{_(()=>i(E)),await C});S.finished.finally(()=>{h(void 0),g(void 0),a(void 0),u({isTransitioning:!1})}),g(S)}},[_,o,d,n.window]),p.useEffect(()=>{d&&o&&s.location.key===o.location.key&&d.resolve()},[d,m,s.location,o]),p.useEffect(()=>{!c.isTransitioning&&w&&(a(w.state),u({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),y(void 0))},[c.isTransitioning,w]),p.useEffect(()=>{},[]);let A=p.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:E=>n.navigate(E),push:(E,C,S)=>n.navigate(E,{state:C,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:(E,C,S)=>n.navigate(E,{replace:!0,state:C,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[n]),M=n.basename||"/",j=p.useMemo(()=>({router:n,navigator:A,static:!1,basename:M}),[n,A,M]),v=p.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return p.useEffect(()=>LH(r,n.future),[r,n.future]),p.createElement(p.Fragment,null,p.createElement(Lx.Provider,{value:j},p.createElement(xO.Provider,{value:s},p.createElement(HH.Provider,{value:T.current},p.createElement(GH.Provider,{value:c},p.createElement(VH,{basename:M,location:s.location,navigationType:s.historyAction,navigator:A,future:v},s.initialized||n.future.v7_partialHydration?p.createElement(JH,{routes:n.routes,future:n.future,state:s}):e))))),null)}const JH=p.memo(ZH);function ZH(t){let{routes:e,future:n,state:r}=t;return TH(e,void 0,r,n)}var Rk;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rk||(Rk={}));var Pk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Pk||(Pk={}));var Ak={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te=function(t,e){if(!t)throw uh(e)},uh=function(t){return new Error("Firebase Database ("+IO.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},eK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Bx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(n[d],n[h],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new tK;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NO=function(t){const e=CO(t);return Bx.encodeByteArray(e,!0)},lv=function(t){return NO(t).replace(/\./g,"")},cv=function(t){try{return Bx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){return kO(void 0,t)}function kO(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!rK(n)||(t[n]=kO(t[n],e[n]));return t}function rK(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK=()=>sK().__FIREBASE_DEFAULTS__,oK=()=>{if(typeof process>"u"||typeof Ak>"u")return;const t=Ak.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cv(t[1]);return e&&JSON.parse(e)},Ux=()=>{try{return iK()||oK()||aK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RO=t=>{var e,n;return(n=(e=Ux())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},PO=t=>{const e=RO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},AO=()=>{var t;return(t=Ux())===null||t===void 0?void 0:t.config},jO=t=>{var e;return(e=Ux())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lv(JSON.stringify(n)),lv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ST(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function cK(){var t;const e=(t=Ux())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hK(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fK(){return IO.NODE_ADMIN===!0}function DO(){return!cK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TT(){try{return typeof indexedDB=="object"}catch{return!1}}function mK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK="FirebaseError";class Ys extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pK,Object.setPrototypeOf(this,Ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dh.prototype.create)}}class dh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gK(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ys(s,a,r)}}function gK(t,e){return t.replace(yK,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yK=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t){return JSON.parse(t)}function ar(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=vm(cv(i[0])||""),n=vm(cv(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},vK=function(t){const e=OO(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},xK=function(t){const e=OO(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nd(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ub(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uv(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function xm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jk(i)&&jk(o)){if(!xm(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function df(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function hf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const m=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(m<<1|m>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):h<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const m=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=m}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function _K(t,e){const n=new bK(t,e);return n.subscribe.bind(n)}class bK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EK(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Rw),s.error===void 0&&(s.error=Rw),s.complete===void 0&&(s.complete=Rw);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rw(){}function LO(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Te(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zx=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class Ei{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ym;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CK(e))try{this.getOrInitializeService({instanceIdentifier:Ol})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ol){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ol){return this.instances.has(e)}getOptions(e=Ol){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ol){return this.component?this.component.multipleInstances?e:Ol:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IK(t){return t===Ol?void 0:t}function CK(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TK(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(bt||(bt={}));const kK={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},RK=bt.INFO,PK={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},AK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=PK[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=RK,this._logHandler=AK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...e),this._logHandler(this,bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...e),this._logHandler(this,bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...e),this._logHandler(this,bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...e),this._logHandler(this,bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...e),this._logHandler(this,bt.ERROR,...e)}}const jK=(t,e)=>e.some(n=>t instanceof n);let Mk,Dk;function MK(){return Mk||(Mk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DK(){return Dk||(Dk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FO=new WeakMap,zb=new WeakMap,VO=new WeakMap,Pw=new WeakMap,IT=new WeakMap;function OK(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qa(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FO.set(n,t)}).catch(()=>{}),IT.set(e,t),e}function LK(t){if(zb.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});zb.set(t,e)}let $b={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FK(t){$b=t($b)}function VK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Aw(this),e,...n);return VO.set(r,e.sort?e.sort():[e]),qa(r)}:DK().includes(t)?function(...e){return t.apply(Aw(this),e),qa(FO.get(this))}:function(...e){return qa(t.apply(Aw(this),e))}}function BK(t){return typeof t=="function"?VK(t):(t instanceof IDBTransaction&&LK(t),jK(t,MK())?new Proxy(t,$b):t)}function qa(t){if(t instanceof IDBRequest)return OK(t);if(Pw.has(t))return Pw.get(t);const e=BK(t);return e!==t&&(Pw.set(t,e),IT.set(e,t)),e}const Aw=t=>IT.get(t);function UK(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=qa(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qa(o.result),c.oldVersion,c.newVersion,qa(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const zK=["get","getKey","getAll","getAllKeys","count"],$K=["put","add","delete","clear"],jw=new Map;function Ok(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jw.get(e))return jw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$K.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||zK.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return jw.set(e,i),i}FK(t=>({...t,get:(e,n,r)=>Ok(e,n)||t.get(e,n,r),has:(e,n)=>!!Ok(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wb="@firebase/app",Lk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new cp("@firebase/app"),HK="@firebase/app-compat",KK="@firebase/analytics-compat",qK="@firebase/analytics",YK="@firebase/app-check-compat",QK="@firebase/app-check",XK="@firebase/auth",JK="@firebase/auth-compat",ZK="@firebase/database",eq="@firebase/data-connect",tq="@firebase/database-compat",nq="@firebase/functions",rq="@firebase/functions-compat",sq="@firebase/installations",iq="@firebase/installations-compat",oq="@firebase/messaging",aq="@firebase/messaging-compat",lq="@firebase/performance",cq="@firebase/performance-compat",uq="@firebase/remote-config",dq="@firebase/remote-config-compat",hq="@firebase/storage",fq="@firebase/storage-compat",mq="@firebase/firestore",pq="@firebase/vertexai-preview",gq="@firebase/firestore-compat",yq="firebase",vq="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="[DEFAULT]",xq={[Wb]:"fire-core",[HK]:"fire-core-compat",[qK]:"fire-analytics",[KK]:"fire-analytics-compat",[QK]:"fire-app-check",[YK]:"fire-app-check-compat",[XK]:"fire-auth",[JK]:"fire-auth-compat",[ZK]:"fire-rtdb",[eq]:"fire-data-connect",[tq]:"fire-rtdb-compat",[nq]:"fire-fn",[rq]:"fire-fn-compat",[sq]:"fire-iid",[iq]:"fire-iid-compat",[oq]:"fire-fcm",[aq]:"fire-fcm-compat",[lq]:"fire-perf",[cq]:"fire-perf-compat",[uq]:"fire-rc",[dq]:"fire-rc-compat",[hq]:"fire-gcs",[fq]:"fire-gcs-compat",[mq]:"fire-fst",[gq]:"fire-fst-compat",[pq]:"fire-vertex","fire-js":"fire-js",[yq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new Map,wq=new Map,Hb=new Map;function Fk(t,e){try{t.container.addComponent(e)}catch(n){Uo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qi(t){const e=t.name;if(Hb.has(e))return Uo.debug(`There were multiple attempts to register component ${e}.`),!1;Hb.set(e,t);for(const n of dv.values())Fk(n,t);for(const n of wq.values())Fk(n,t);return!0}function up(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ya=new dh("app","Firebase",_q);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=vq;function BO(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gb,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ya.create("bad-app-name",{appName:String(s)});if(n||(n=AO()),!n)throw Ya.create("no-options");const i=dv.get(s);if(i){if(xm(n,i.options)&&xm(r,i.config))return i;throw Ya.create("duplicate-app",{appName:s})}const o=new NK(s);for(const c of Hb.values())o.addComponent(c);const a=new bq(n,r,o);return dv.set(s,a),a}function CT(t=Gb){const e=dv.get(t);if(!e&&t===Gb&&AO())return BO();if(!e)throw Ya.create("no-app",{appName:t});return e}function Ss(t,e,n){var r;let s=(r=xq[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Uo.warn(a.join(" "));return}Qi(new Ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq="firebase-heartbeat-database",Sq=1,wm="firebase-heartbeat-store";let Mw=null;function UO(){return Mw||(Mw=UK(Eq,Sq,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wm)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ya.create("idb-open",{originalErrorMessage:t.message})})),Mw}async function Tq(t){try{const n=(await UO()).transaction(wm),r=await n.objectStore(wm).get(zO(t));return await n.done,r}catch(e){if(e instanceof Ys)Uo.warn(e.message);else{const n=Ya.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Uo.warn(n.message)}}}async function Vk(t,e){try{const r=(await UO()).transaction(wm,"readwrite");await r.objectStore(wm).put(e,zO(t)),await r.done}catch(n){if(n instanceof Ys)Uo.warn(n.message);else{const r=Ya.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Uo.warn(r.message)}}}function zO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq=1024,Cq=30*24*60*60*1e3;class Nq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Bk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Cq}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Uo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bk(),{heartbeatsToSend:r,unsentEntries:s}=kq(this._heartbeatsCache.heartbeats),i=lv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Uo.warn(n),""}}}function Bk(){return new Date().toISOString().substring(0,10)}function kq(t,e=Iq){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Uk(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Rq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TT()?mK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Tq(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Uk(t){return lv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t){Qi(new Ei("platform-logger",e=>new WK(e),"PRIVATE")),Qi(new Ei("heartbeat",e=>new Nq(e),"PRIVATE")),Ss(Wb,Lk,t),Ss(Wb,Lk,"esm2017"),Ss("fire-js","")}Pq("");var Li=function(){return Li=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Li.apply(this,arguments)};function dp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Aq(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function $O(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jq=$O,WO=new dh("auth","Firebase",$O());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new cp("@firebase/auth");function Mq(t,...e){hv.logLevel<=bt.WARN&&hv.warn(`Auth (${Wc}): ${t}`,...e)}function iy(t,...e){hv.logLevel<=bt.ERROR&&hv.error(`Auth (${Wc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t,...e){throw kT(t,...e)}function gi(t,...e){return kT(t,...e)}function NT(t,e,n){const r=Object.assign(Object.assign({},jq()),{[e]:n});return new dh("auth","Firebase",r).create(e,{appName:t.name})}function Hi(t){return NT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ks(t,"argument-error"),NT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WO.create(t,...e)}function it(t,e,...n){if(!t)throw kT(e,...n)}function _o(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iy(e),new Error(e)}function zo(t,e){t||_o(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Dq(){return zk()==="http:"||zk()==="https:"}function zk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dq()||dK()||"connection"in navigator)?navigator.onLine:!0}function Lq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.shortDelay=e,this.longDelay=n,zo(n>e,"Short delay should be less than long delay!"),this.isMobile=ST()||MO()}get(){return Oq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e){zo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=new hp(3e4,6e4);function xl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xo(t,e,n,r,s={}){return KO(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=hh(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return uK()||(u.referrerPolicy="no-referrer"),HO.fetch()(qO(t,t.config.apiHost,n,a),u)})}async function KO(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Fq),e);try{const s=new Uq(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw _g(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _g(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw _g(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw _g(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw NT(t,d,u);Ks(t,d)}}catch(s){if(s instanceof Ys)throw s;Ks(t,"network-request-failed",{message:String(s)})}}async function fp(t,e,n,r,s={}){const i=await Xo(t,e,n,r,s);return"mfaPendingCredential"in i&&Ks(t,"multi-factor-auth-required",{_serverResponse:i}),i}function qO(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?RT(t.config,s):`${t.config.apiScheme}://${s}`}function Bq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Uq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gi(this.auth,"network-request-failed")),Vq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _g(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gi(t,e,r);return s.customData._tokenResponse=n,s}function $k(t){return t!==void 0&&t.enterprise!==void 0}class zq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Bq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function $q(t,e){return Xo(t,"GET","/v2/recaptchaConfig",xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wq(t,e){return Xo(t,"POST","/v1/accounts:delete",e)}async function YO(t,e){return Xo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gq(t,e=!1){const n=Gt(t),r=await n.getIdToken(e),s=PT(r);it(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Pf(Dw(s.auth_time)),issuedAtTime:Pf(Dw(s.iat)),expirationTime:Pf(Dw(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Dw(t){return Number(t)*1e3}function PT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return iy("JWT malformed, contained fewer than 3 sections"),null;try{const s=cv(n);return s?JSON.parse(s):(iy("Failed to decode base64 JWT payload"),null)}catch(s){return iy("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Wk(t){const e=PT(t);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ys&&Hq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Hq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pf(this.lastLoginAt),this.creationTime=Pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fv(t){var e;const n=t.auth,r=await t.getIdToken(),s=await kd(t,YO(n,{idToken:r}));it(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?QO(i.providerUserInfo):[],a=Yq(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new qb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function qq(t){const e=Gt(t);await fv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yq(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function QO(t){return t.map(e=>{var{providerId:n}=e,r=dp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qq(t,e){const n=await KO(t,{},async()=>{const r=hh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=qO(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HO.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Xq(t,e){return Xo(t,"POST","/v2/accounts:revokeToken",xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=Wk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Qq(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ku;return r&&(it(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(it(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(it(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ku,this.toJSON())}_performRefresh(){return _o("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t,e){it(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bo{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=dp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await kd(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gq(this,e)}reload(){return qq(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await fv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fs(this.auth.app))return Promise.reject(Hi(this.auth));const e=await this.getIdToken();return await kd(this,Wq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:A,isAnonymous:M,providerData:j,stsTokenManager:v}=n;it(I&&v,e,"internal-error");const E=Ku.fromJSON(this.name,v);it(typeof I=="string",e,"internal-error"),ca(h,e.name),ca(m,e.name),it(typeof A=="boolean",e,"internal-error"),it(typeof M=="boolean",e,"internal-error"),ca(g,e.name),ca(w,e.name),ca(y,e.name),ca(T,e.name),ca(b,e.name),ca(_,e.name);const C=new bo({uid:I,auth:e,email:m,emailVerified:A,displayName:h,isAnonymous:M,photoURL:w,phoneNumber:g,tenantId:y,stsTokenManager:E,createdAt:b,lastLoginAt:_});return j&&Array.isArray(j)&&(C.providerData=j.map(S=>Object.assign({},S))),T&&(C._redirectEventId=T),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ku;s.updateFromServerResponse(n);const i=new bo({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await fv(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];it(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?QO(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ku;a.updateFromIdToken(r);const c=new bo({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new Map;function Eo(t){zo(t instanceof Function,"Expected a class definition");let e=Gk.get(t);return e?(zo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XO.type="NONE";const Hk=XO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e,n){return`firebase:${t}:${e}:${n}`}class qu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=oy(this.userKey,s.apiKey,i),this.fullPersistenceKey=oy("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qu(Eo(Hk),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Eo(Hk);const o=oy(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=bo._fromJSON(e,d);u!==i&&(a=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new qu(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new qu(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rL(e))return"Blackberry";if(sL(e))return"Webos";if(ZO(e))return"Safari";if((e.includes("chrome/")||eL(e))&&!e.includes("edge/"))return"Chrome";if(nL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JO(t=er()){return/firefox\//i.test(t)}function ZO(t=er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eL(t=er()){return/crios\//i.test(t)}function tL(t=er()){return/iemobile/i.test(t)}function nL(t=er()){return/android/i.test(t)}function rL(t=er()){return/blackberry/i.test(t)}function sL(t=er()){return/webos/i.test(t)}function AT(t=er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Jq(t=er()){var e;return AT(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Zq(){return hK()&&document.documentMode===10}function iL(t=er()){return AT(t)||nL(t)||sL(t)||rL(t)||/windows phone/i.test(t)||tL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t,e=[]){let n;switch(t){case"Browser":n=Kk(er());break;case"Worker":n=`${Kk(er())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tY(t,e={}){return Xo(t,"GET","/v2/passwordPolicy",xl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY=6;class rY{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nY,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qk(this),this.idTokenSubscription=new qk(this),this.beforeStateQueue=new eY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Eo(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await qu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await YO(this,{idToken:e}),r=await bo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fs(this.app))return Promise.reject(Hi(this));const n=e?Gt(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fs(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fs(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tY(this),n=new rY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Xq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Eo(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await qu.create(this,[Eo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Mq(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function to(t){return Gt(t)}class qk{constructor(e){this.auth=e,this.observer=null,this.addObserver=_K(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $x={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iY(t){$x=t}function aL(t){return $x.loadJS(t)}function oY(){return $x.recaptchaEnterpriseScript}function aY(){return $x.gapiScript}function lY(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const cY="recaptcha-enterprise",uY="NO_RECAPTCHA";class dY{constructor(e){this.type=cY,this.auth=to(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{$q(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new zq(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;$k(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(uY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&$k(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=oY();c.length!==0&&(c+=a),aL(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Yk(t,e,n,r=!1){const s=new dY(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yb(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Yk(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Yk(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t,e){const n=up(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(xm(i,e??{}))return s;Ks(s,"already-initialized")}return n.initialize({options:e})}function hY(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fY(t,e,n){const r=to(t);it(r._canInitEmulator,r,"emulator-config-failed"),it(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=cL(e),{host:o,port:a}=mY(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),pY()}function cL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mY(t){const e=cL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Qk(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Qk(o)}}}function Qk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _o("not implemented")}_getIdTokenResponse(e){return _o("not implemented")}_linkToIdToken(e,n){return _o("not implemented")}_getReauthenticationResolver(e){return _o("not implemented")}}async function gY(t,e){return Xo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yY(t,e){return fp(t,"POST","/v1/accounts:signInWithPassword",xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vY(t,e){return fp(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}async function xY(t,e){return fp(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends jT{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new _m(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _m(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,n,"signInWithPassword",yY);case"emailLink":return vY(e,{email:this._email,oobCode:this._password});default:Ks(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,r,"signUpPassword",gY);case"emailLink":return xY(e,{idToken:n,email:this._email,oobCode:this._password});default:Ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(t,e){return fp(t,"POST","/v1/accounts:signInWithIdp",xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wY="http://localhost";class $o extends jT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ks("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=dp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new $o(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yu(e,n)}buildRequest(){const e={requestUri:wY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Y(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bY(t){const e=df(hf(t)).link,n=e?df(hf(e)).deep_link_id:null,r=df(hf(t)).deep_link_id;return(r?df(hf(r)).link:null)||r||n||e||t}class MT{constructor(e){var n,r,s,i,o,a;const c=df(hf(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,h=_Y((s=c.mode)!==null&&s!==void 0?s:null);it(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=bY(e);try{return new MT(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.providerId=fh.PROVIDER_ID}static credential(e,n){return _m._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=MT.parseLink(n);return it(r,"argument-error"),_m._fromEmailAndCode(e,r.code,r.tenantId)}}fh.PROVIDER_ID="password";fh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Wx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Af extends mh{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return it("providerId"in n&&"signInMethod"in n,"argument-error"),$o._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return it(e.idToken||e.accessToken,"argument-error"),$o._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Af.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Af.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:a}=e;if(!r&&!s&&!n&&!i||!a)return null;try{return new Af(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends mh{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends mh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vo.credential(n,r)}catch{return null}}}vo.GOOGLE_SIGN_IN_METHOD="google.com";vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends mh{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.GITHUB_SIGN_IN_METHOD="github.com";_a.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends mh{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ba.credential(n,r)}catch{return null}}}ba.TWITTER_SIGN_IN_METHOD="twitter.com";ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EY(t,e){return fp(t,"POST","/v1/accounts:signUp",xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await bo._fromIdTokenResponse(e,r,s),o=Xk(r);return new wc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Xk(r);return new wc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Xk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends Ys{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,mv.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new mv(e,n,r,s)}}function uL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?mv._fromErrorAndOperation(t,i,e,r):i})}async function SY(t,e,n=!1){const r=await kd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TY(t,e,n=!1){const{auth:r}=t;if(Fs(r.app))return Promise.reject(Hi(r));const s="reauthenticate";try{const i=await kd(t,uL(r,s,e,t),n);it(i.idToken,r,"internal-error");const o=PT(i.idToken);it(o,r,"internal-error");const{sub:a}=o;return it(t.uid===a,r,"user-mismatch"),wc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ks(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(t,e,n=!1){if(Fs(t.app))return Promise.reject(Hi(t));const r="signIn",s=await uL(t,r,e),i=await wc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function IY(t,e){return dL(to(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t){const e=to(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CY(t,e,n){if(Fs(t.app))return Promise.reject(Hi(t));const r=to(t),o=await Yb(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EY).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&hL(t),c}),a=await wc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function NY(t,e,n){return Fs(t.app)?Promise.reject(Hi(t)):IY(Gt(t),fh.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hL(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kY(t,e){return Xo(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Gt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await kd(r,kY(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function RY(t,e,n,r){return Gt(t).onIdTokenChanged(e,n,r)}function PY(t,e,n){return Gt(t).beforeAuthStateChanged(e,n)}function Zk(t,e,n,r){return Gt(t).onAuthStateChanged(e,n,r)}function AY(t){return Gt(t).signOut()}const pv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pv,"1"),this.storage.removeItem(pv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jY=1e3,MY=10;class mL extends fL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Zq()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,MY):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mL.type="LOCAL";const DY=mL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL extends fL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pL.type="SESSION";const gL=pL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Gx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await OY(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=DT("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function FY(t){Ki().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function VY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UY(){return yL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="firebaseLocalStorageDb",zY=1,gv="firebaseLocalStorage",xL="fbase_key";class mp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hx(t,e){return t.transaction([gv],e?"readwrite":"readonly").objectStore(gv)}function $Y(){const t=indexedDB.deleteDatabase(vL);return new mp(t).toPromise()}function Qb(){const t=indexedDB.open(vL,zY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(gv,{keyPath:xL})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(gv)?e(r):(r.close(),await $Y(),e(await Qb()))})})}async function eR(t,e,n){const r=Hx(t,!0).put({[xL]:e,value:n});return new mp(r).toPromise()}async function WY(t,e){const n=Hx(t,!1).get(e),r=await new mp(n).toPromise();return r===void 0?null:r.value}function tR(t,e){const n=Hx(t,!0).delete(e);return new mp(n).toPromise()}const GY=800,HY=3;class wL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gx._getInstance(UY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VY(),!this.activeServiceWorker)return;this.sender=new LY(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qb();return await eR(e,pv,"1"),await tR(e,pv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>eR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hx(s,!1).getAll();return new mp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wL.type="LOCAL";const _L=wL;new hp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e){return e?Eo(e):(it(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends jT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KY(t){return dL(t.auth,new LT(t),t.bypassAuthState)}function qY(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),TY(n,new LT(t),t.bypassAuthState)}async function YY(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),SY(n,new LT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KY;case"linkViaPopup":case"linkViaRedirect":return YY;case"reauthViaPopup":case"reauthViaRedirect":return qY;default:Ks(this.auth,"internal-error")}}resolve(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=new hp(2e3,1e4);async function EL(t,e,n){if(Fs(t.app))return Promise.reject(gi(t,"operation-not-supported-in-this-environment"));const r=to(t);GO(t,e,Wx);const s=OT(r,n);return new Zl(r,"signInViaPopup",e,s).executeNotNull()}class Zl extends bL{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zl.currentPopupAction&&Zl.currentPopupAction.cancel(),Zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return it(e,this.auth,"internal-error"),e}async onExecution(){zo(this.filter.length===1,"Popup operations only handle one event");const e=DT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QY.get())};e()}}Zl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY="pendingRedirect",ay=new Map;class JY extends bL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ay.get(this.auth._key());if(!e){try{const r=await ZY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ay.set(this.auth._key(),e)}return this.bypassAuthState||ay.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZY(t,e){const n=TL(e),r=SL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function eQ(t,e){return SL(t)._set(TL(e),"true")}function tQ(t,e){ay.set(t._key(),e)}function SL(t){return Eo(t._redirectPersistence)}function TL(t){return oy(XY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e,n){return nQ(t,e,n)}async function nQ(t,e,n){if(Fs(t.app))return Promise.reject(Hi(t));const r=to(t);GO(t,e,Wx),await r._initializationPromise;const s=OT(r,n);return await eQ(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function rQ(t,e){return await to(t)._initializationPromise,IL(t,e,!1)}async function IL(t,e,n=!1){if(Fs(t.app))return Promise.reject(Hi(t));const r=to(t),s=OT(r,e),o=await new JY(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ=10*60*1e3;class iQ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oQ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CL(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(nR(e))}saveEventToCache(e){this.cachedEventUids.add(nR(e)),this.lastProcessedEventTime=Date.now()}}function nR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oQ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aQ(t,e={}){return Xo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cQ=/^https?/;async function uQ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aQ(t);for(const n of e)try{if(dQ(n))return}catch{}Ks(t,"unauthorized-domain")}function dQ(t){const e=Kb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cQ.test(n))return!1;if(lQ.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ=new hp(3e4,6e4);function rR(){const t=Ki().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fQ(t){return new Promise((e,n)=>{var r,s,i;function o(){rR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rR(),n(gi(t,"network-request-failed"))},timeout:hQ.get()})}if(!((s=(r=Ki().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ki().gapi)===null||i===void 0)&&i.load)o();else{const a=lY("iframefcb");return Ki()[a]=()=>{gapi.load?o():n(gi(t,"network-request-failed"))},aL(`${aY()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw ly=null,e})}let ly=null;function mQ(t){return ly=ly||fQ(t),ly}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ=new hp(5e3,15e3),gQ="__/auth/iframe",yQ="emulator/auth/iframe",vQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wQ(t){const e=t.config;it(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?RT(e,yQ):`https://${t.config.authDomain}/${gQ}`,r={apiKey:e.apiKey,appName:t.name,v:Wc},s=xQ.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${hh(r).slice(1)}`}async function _Q(t){const e=await mQ(t),n=Ki().gapi;return it(n,t,"internal-error"),e.open({where:document.body,url:wQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vQ,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=gi(t,"network-request-failed"),a=Ki().setTimeout(()=>{i(o)},pQ.get());function c(){Ki().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EQ=500,SQ=600,TQ="_blank",IQ="http://localhost";class sR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CQ(t,e,n,r=EQ,s=SQ){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},bQ),{width:r.toString(),height:s.toString(),top:i,left:o}),u=er().toLowerCase();n&&(a=eL(u)?TQ:n),JO(u)&&(e=e||IQ,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[g,w])=>`${m}${g}=${w},`,"");if(Jq(u)&&a!=="_self")return NQ(e||"",a),new sR(null);const h=window.open(e||"",a,d);it(h,t,"popup-blocked");try{h.focus()}catch{}return new sR(h)}function NQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kQ="__/auth/handler",RQ="emulator/auth/handler",PQ=encodeURIComponent("fac");async function iR(t,e,n,r,s,i){it(t.config.authDomain,t,"auth-domain-config-required"),it(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wc,eventId:s};if(e instanceof Wx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ub(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof mh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${PQ}=${encodeURIComponent(c)}`:"";return`${AQ(t)}?${hh(a).slice(1)}${u}`}function AQ({config:t}){return t.emulator?RT(t,RQ):`https://${t.authDomain}/${kQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="webStorageSupport";class jQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gL,this._completeRedirectFn=IL,this._overrideRedirectResult=tQ}async _openPopup(e,n,r,s){var i;zo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await iR(e,n,r,Kb(),s);return CQ(e,o,DT())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await iR(e,n,r,Kb(),s);return FY(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(zo(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _Q(e),r=new iQ(e);return n.register("authEvent",s=>(it(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ow,{type:Ow},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ow];o!==void 0&&n(!!o),Ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uQ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iL()||ZO()||AT()}}const MQ=jQ;var oR="@firebase/auth",aR="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LQ(t){Qi(new Ei("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;it(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oL(t)},u=new sY(r,s,i,c);return hY(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qi(new Ei("auth-internal",e=>{const n=to(e.getProvider("auth").getImmediate());return(r=>new DQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(oR,aR,OQ(t)),Ss(oR,aR,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FQ=5*60,VQ=jO("authIdTokenMaxAge")||FQ;let lR=null;const BQ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VQ)return;const s=n==null?void 0:n.token;lR!==s&&(lR=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UQ(t=CT()){const e=up(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lL(t,{popupRedirectResolver:MQ,persistence:[_L,DY,gL]}),r=jO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=BQ(i.toString());PY(n,o,()=>o(n.currentUser)),RY(n,a=>o(a))}}const s=RO("auth");return s&&fY(n,`http://${s}`),n}function zQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}iY({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=gi("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",zQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LQ("Browser");const Jb=Cx("App",{web:()=>o2(()=>import("./web-C07nMhKr.js"),[]).then(t=>new t.AppWeb)});var $Q="firebase",WQ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss($Q,WQ,"app");var cR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dc,NL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,E){function C(){}C.prototype=E.prototype,v.D=E.prototype,v.prototype=new C,v.prototype.constructor=v,v.C=function(S,P,R){for(var k=Array(arguments.length-2),W=2;W<arguments.length;W++)k[W-2]=arguments[W];return E.prototype[P].apply(S,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,E,C){C||(C=0);var S=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)S[P]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(P=0;16>P;++P)S[P]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=v.g[0],C=v.g[1],P=v.g[2];var R=v.g[3],k=E+(R^C&(P^R))+S[0]+3614090360&4294967295;E=C+(k<<7&4294967295|k>>>25),k=R+(P^E&(C^P))+S[1]+3905402710&4294967295,R=E+(k<<12&4294967295|k>>>20),k=P+(C^R&(E^C))+S[2]+606105819&4294967295,P=R+(k<<17&4294967295|k>>>15),k=C+(E^P&(R^E))+S[3]+3250441966&4294967295,C=P+(k<<22&4294967295|k>>>10),k=E+(R^C&(P^R))+S[4]+4118548399&4294967295,E=C+(k<<7&4294967295|k>>>25),k=R+(P^E&(C^P))+S[5]+1200080426&4294967295,R=E+(k<<12&4294967295|k>>>20),k=P+(C^R&(E^C))+S[6]+2821735955&4294967295,P=R+(k<<17&4294967295|k>>>15),k=C+(E^P&(R^E))+S[7]+4249261313&4294967295,C=P+(k<<22&4294967295|k>>>10),k=E+(R^C&(P^R))+S[8]+1770035416&4294967295,E=C+(k<<7&4294967295|k>>>25),k=R+(P^E&(C^P))+S[9]+2336552879&4294967295,R=E+(k<<12&4294967295|k>>>20),k=P+(C^R&(E^C))+S[10]+4294925233&4294967295,P=R+(k<<17&4294967295|k>>>15),k=C+(E^P&(R^E))+S[11]+2304563134&4294967295,C=P+(k<<22&4294967295|k>>>10),k=E+(R^C&(P^R))+S[12]+1804603682&4294967295,E=C+(k<<7&4294967295|k>>>25),k=R+(P^E&(C^P))+S[13]+4254626195&4294967295,R=E+(k<<12&4294967295|k>>>20),k=P+(C^R&(E^C))+S[14]+2792965006&4294967295,P=R+(k<<17&4294967295|k>>>15),k=C+(E^P&(R^E))+S[15]+1236535329&4294967295,C=P+(k<<22&4294967295|k>>>10),k=E+(P^R&(C^P))+S[1]+4129170786&4294967295,E=C+(k<<5&4294967295|k>>>27),k=R+(C^P&(E^C))+S[6]+3225465664&4294967295,R=E+(k<<9&4294967295|k>>>23),k=P+(E^C&(R^E))+S[11]+643717713&4294967295,P=R+(k<<14&4294967295|k>>>18),k=C+(R^E&(P^R))+S[0]+3921069994&4294967295,C=P+(k<<20&4294967295|k>>>12),k=E+(P^R&(C^P))+S[5]+3593408605&4294967295,E=C+(k<<5&4294967295|k>>>27),k=R+(C^P&(E^C))+S[10]+38016083&4294967295,R=E+(k<<9&4294967295|k>>>23),k=P+(E^C&(R^E))+S[15]+3634488961&4294967295,P=R+(k<<14&4294967295|k>>>18),k=C+(R^E&(P^R))+S[4]+3889429448&4294967295,C=P+(k<<20&4294967295|k>>>12),k=E+(P^R&(C^P))+S[9]+568446438&4294967295,E=C+(k<<5&4294967295|k>>>27),k=R+(C^P&(E^C))+S[14]+3275163606&4294967295,R=E+(k<<9&4294967295|k>>>23),k=P+(E^C&(R^E))+S[3]+4107603335&4294967295,P=R+(k<<14&4294967295|k>>>18),k=C+(R^E&(P^R))+S[8]+1163531501&4294967295,C=P+(k<<20&4294967295|k>>>12),k=E+(P^R&(C^P))+S[13]+2850285829&4294967295,E=C+(k<<5&4294967295|k>>>27),k=R+(C^P&(E^C))+S[2]+4243563512&4294967295,R=E+(k<<9&4294967295|k>>>23),k=P+(E^C&(R^E))+S[7]+1735328473&4294967295,P=R+(k<<14&4294967295|k>>>18),k=C+(R^E&(P^R))+S[12]+2368359562&4294967295,C=P+(k<<20&4294967295|k>>>12),k=E+(C^P^R)+S[5]+4294588738&4294967295,E=C+(k<<4&4294967295|k>>>28),k=R+(E^C^P)+S[8]+2272392833&4294967295,R=E+(k<<11&4294967295|k>>>21),k=P+(R^E^C)+S[11]+1839030562&4294967295,P=R+(k<<16&4294967295|k>>>16),k=C+(P^R^E)+S[14]+4259657740&4294967295,C=P+(k<<23&4294967295|k>>>9),k=E+(C^P^R)+S[1]+2763975236&4294967295,E=C+(k<<4&4294967295|k>>>28),k=R+(E^C^P)+S[4]+1272893353&4294967295,R=E+(k<<11&4294967295|k>>>21),k=P+(R^E^C)+S[7]+4139469664&4294967295,P=R+(k<<16&4294967295|k>>>16),k=C+(P^R^E)+S[10]+3200236656&4294967295,C=P+(k<<23&4294967295|k>>>9),k=E+(C^P^R)+S[13]+681279174&4294967295,E=C+(k<<4&4294967295|k>>>28),k=R+(E^C^P)+S[0]+3936430074&4294967295,R=E+(k<<11&4294967295|k>>>21),k=P+(R^E^C)+S[3]+3572445317&4294967295,P=R+(k<<16&4294967295|k>>>16),k=C+(P^R^E)+S[6]+76029189&4294967295,C=P+(k<<23&4294967295|k>>>9),k=E+(C^P^R)+S[9]+3654602809&4294967295,E=C+(k<<4&4294967295|k>>>28),k=R+(E^C^P)+S[12]+3873151461&4294967295,R=E+(k<<11&4294967295|k>>>21),k=P+(R^E^C)+S[15]+530742520&4294967295,P=R+(k<<16&4294967295|k>>>16),k=C+(P^R^E)+S[2]+3299628645&4294967295,C=P+(k<<23&4294967295|k>>>9),k=E+(P^(C|~R))+S[0]+4096336452&4294967295,E=C+(k<<6&4294967295|k>>>26),k=R+(C^(E|~P))+S[7]+1126891415&4294967295,R=E+(k<<10&4294967295|k>>>22),k=P+(E^(R|~C))+S[14]+2878612391&4294967295,P=R+(k<<15&4294967295|k>>>17),k=C+(R^(P|~E))+S[5]+4237533241&4294967295,C=P+(k<<21&4294967295|k>>>11),k=E+(P^(C|~R))+S[12]+1700485571&4294967295,E=C+(k<<6&4294967295|k>>>26),k=R+(C^(E|~P))+S[3]+2399980690&4294967295,R=E+(k<<10&4294967295|k>>>22),k=P+(E^(R|~C))+S[10]+4293915773&4294967295,P=R+(k<<15&4294967295|k>>>17),k=C+(R^(P|~E))+S[1]+2240044497&4294967295,C=P+(k<<21&4294967295|k>>>11),k=E+(P^(C|~R))+S[8]+1873313359&4294967295,E=C+(k<<6&4294967295|k>>>26),k=R+(C^(E|~P))+S[15]+4264355552&4294967295,R=E+(k<<10&4294967295|k>>>22),k=P+(E^(R|~C))+S[6]+2734768916&4294967295,P=R+(k<<15&4294967295|k>>>17),k=C+(R^(P|~E))+S[13]+1309151649&4294967295,C=P+(k<<21&4294967295|k>>>11),k=E+(P^(C|~R))+S[4]+4149444226&4294967295,E=C+(k<<6&4294967295|k>>>26),k=R+(C^(E|~P))+S[11]+3174756917&4294967295,R=E+(k<<10&4294967295|k>>>22),k=P+(E^(R|~C))+S[2]+718787259&4294967295,P=R+(k<<15&4294967295|k>>>17),k=C+(R^(P|~E))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+E&4294967295,v.g[1]=v.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,v.g[2]=v.g[2]+P&4294967295,v.g[3]=v.g[3]+R&4294967295}r.prototype.u=function(v,E){E===void 0&&(E=v.length);for(var C=E-this.blockSize,S=this.B,P=this.h,R=0;R<E;){if(P==0)for(;R<=C;)s(this,v,R),R+=this.blockSize;if(typeof v=="string"){for(;R<E;)if(S[P++]=v.charCodeAt(R++),P==this.blockSize){s(this,S),P=0;break}}else for(;R<E;)if(S[P++]=v[R++],P==this.blockSize){s(this,S),P=0;break}}this.h=P,this.o+=E},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var E=1;E<v.length-8;++E)v[E]=0;var C=8*this.o;for(E=v.length-8;E<v.length;++E)v[E]=C&255,C/=256;for(this.u(v),v=Array(16),E=C=0;4>E;++E)for(var S=0;32>S;S+=8)v[C++]=this.g[E]>>>S&255;return v};function i(v,E){var C=a;return Object.prototype.hasOwnProperty.call(C,v)?C[v]:C[v]=E(v)}function o(v,E){this.h=E;for(var C=[],S=!0,P=v.length-1;0<=P;P--){var R=v[P]|0;S&&R==E||(C[P]=R,S=!1)}this.g=C}var a={};function c(v){return-128<=v&&128>v?i(v,function(E){return new o([E|0],0>E?-1:0)}):new o([v|0],0>v?-1:0)}function u(v){if(isNaN(v)||!isFinite(v))return h;if(0>v)return T(u(-v));for(var E=[],C=1,S=0;v>=C;S++)E[S]=v/C|0,C*=4294967296;return new o(E,0)}function d(v,E){if(v.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(v.charAt(0)=="-")return T(d(v.substring(1),E));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(E,8)),S=h,P=0;P<v.length;P+=8){var R=Math.min(8,v.length-P),k=parseInt(v.substring(P,P+R),E);8>R?(R=u(Math.pow(E,R)),S=S.j(R).add(u(k))):(S=S.j(C),S=S.add(u(k)))}return S}var h=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-T(this).m();for(var v=0,E=1,C=0;C<this.g.length;C++){var S=this.i(C);v+=(0<=S?S:4294967296+S)*E,E*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w(this))return"0";if(y(this))return"-"+T(this).toString(v);for(var E=u(Math.pow(v,6)),C=this,S="";;){var P=A(C,E).g;C=b(C,P.j(E));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(v);if(C=P,w(C))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function w(v){if(v.h!=0)return!1;for(var E=0;E<v.g.length;E++)if(v.g[E]!=0)return!1;return!0}function y(v){return v.h==-1}t.l=function(v){return v=b(this,v),y(v)?-1:w(v)?0:1};function T(v){for(var E=v.g.length,C=[],S=0;S<E;S++)C[S]=~v.g[S];return new o(C,~v.h).add(m)}t.abs=function(){return y(this)?T(this):this},t.add=function(v){for(var E=Math.max(this.g.length,v.g.length),C=[],S=0,P=0;P<=E;P++){var R=S+(this.i(P)&65535)+(v.i(P)&65535),k=(R>>>16)+(this.i(P)>>>16)+(v.i(P)>>>16);S=k>>>16,R&=65535,k&=65535,C[P]=k<<16|R}return new o(C,C[C.length-1]&-2147483648?-1:0)};function b(v,E){return v.add(T(E))}t.j=function(v){if(w(this)||w(v))return h;if(y(this))return y(v)?T(this).j(T(v)):T(T(this).j(v));if(y(v))return T(this.j(T(v)));if(0>this.l(g)&&0>v.l(g))return u(this.m()*v.m());for(var E=this.g.length+v.g.length,C=[],S=0;S<2*E;S++)C[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<v.g.length;P++){var R=this.i(S)>>>16,k=this.i(S)&65535,W=v.i(P)>>>16,J=v.i(P)&65535;C[2*S+2*P]+=k*J,_(C,2*S+2*P),C[2*S+2*P+1]+=R*J,_(C,2*S+2*P+1),C[2*S+2*P+1]+=k*W,_(C,2*S+2*P+1),C[2*S+2*P+2]+=R*W,_(C,2*S+2*P+2)}for(S=0;S<E;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=E;S<2*E;S++)C[S]=0;return new o(C,0)};function _(v,E){for(;(v[E]&65535)!=v[E];)v[E+1]+=v[E]>>>16,v[E]&=65535,E++}function I(v,E){this.g=v,this.h=E}function A(v,E){if(w(E))throw Error("division by zero");if(w(v))return new I(h,h);if(y(v))return E=A(T(v),E),new I(T(E.g),T(E.h));if(y(E))return E=A(v,T(E)),new I(T(E.g),E.h);if(30<v.g.length){if(y(v)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var C=m,S=E;0>=S.l(v);)C=M(C),S=M(S);var P=j(C,1),R=j(S,1);for(S=j(S,2),C=j(C,2);!w(S);){var k=R.add(S);0>=k.l(v)&&(P=P.add(C),R=k),S=j(S,1),C=j(C,1)}return E=b(v,P.j(E)),new I(P,E)}for(P=h;0<=v.l(E);){for(C=Math.max(1,Math.floor(v.m()/E.m())),S=Math.ceil(Math.log(C)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=u(C),k=R.j(E);y(k)||0<k.l(v);)C-=S,R=u(C),k=R.j(E);w(R)&&(R=m),P=P.add(R),v=b(v,k)}return new I(P,v)}t.A=function(v){return A(this,v).h},t.and=function(v){for(var E=Math.max(this.g.length,v.g.length),C=[],S=0;S<E;S++)C[S]=this.i(S)&v.i(S);return new o(C,this.h&v.h)},t.or=function(v){for(var E=Math.max(this.g.length,v.g.length),C=[],S=0;S<E;S++)C[S]=this.i(S)|v.i(S);return new o(C,this.h|v.h)},t.xor=function(v){for(var E=Math.max(this.g.length,v.g.length),C=[],S=0;S<E;S++)C[S]=this.i(S)^v.i(S);return new o(C,this.h^v.h)};function M(v){for(var E=v.g.length+1,C=[],S=0;S<E;S++)C[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(C,v.h)}function j(v,E){var C=E>>5;E%=32;for(var S=v.g.length-C,P=[],R=0;R<S;R++)P[R]=0<E?v.i(R+C)>>>E|v.i(R+C+1)<<32-E:v.i(R+C);return new o(P,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NL=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,dc=o}).apply(typeof cR<"u"?cR:typeof self<"u"?self:typeof window<"u"?window:{});var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kL,ff,RL,cy,Zb,PL,AL,jL;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,x,N){return f==Array.prototype||f==Object.prototype||(f[x]=N.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof bg=="object"&&bg];for(var x=0;x<f.length;++x){var N=f[x];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function s(f,x){if(x)e:{var N=r;f=f.split(".");for(var D=0;D<f.length-1;D++){var H=f[D];if(!(H in N))break e;N=N[H]}f=f[f.length-1],D=N[f],x=x(D),x!=D&&x!=null&&e(N,f,{configurable:!0,writable:!0,value:x})}}function i(f,x){f instanceof String&&(f+="");var N=0,D=!1,H={next:function(){if(!D&&N<f.length){var ne=N++;return{value:x(ne,f[ne]),done:!1}}return D=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(f){return f||function(){return i(this,function(x,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(f){var x=typeof f;return x=x!="object"?x:f?Array.isArray(f)?"array":x:"null",x=="array"||x=="object"&&typeof f.length=="number"}function u(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function d(f,x,N){return f.call.apply(f.bind,arguments)}function h(f,x,N){if(!f)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,D),f.apply(x,H)}}return function(){return f.apply(x,arguments)}}function m(f,x,N){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(f,x){var N=Array.prototype.slice.call(arguments,1);return function(){var D=N.slice();return D.push.apply(D,arguments),f.apply(this,D)}}function w(f,x){function N(){}N.prototype=x.prototype,f.aa=x.prototype,f.prototype=new N,f.prototype.constructor=f,f.Qb=function(D,H,ne){for(var Ce=Array(arguments.length-2),nn=2;nn<arguments.length;nn++)Ce[nn-2]=arguments[nn];return x.prototype[H].apply(D,Ce)}}function y(f){const x=f.length;if(0<x){const N=Array(x);for(let D=0;D<x;D++)N[D]=f[D];return N}return[]}function T(f,x){for(let N=1;N<arguments.length;N++){const D=arguments[N];if(c(D)){const H=f.length||0,ne=D.length||0;f.length=H+ne;for(let Ce=0;Ce<ne;Ce++)f[H+Ce]=D[Ce]}else f.push(D)}}class b{constructor(x,N){this.i=x,this.j=N,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function _(f){return/^[\s\xa0]*$/.test(f)}function I(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function A(f){return A[" "](f),f}A[" "]=function(){};var M=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function j(f,x,N){for(const D in f)x.call(N,f[D],D,f)}function v(f,x){for(const N in f)x.call(void 0,f[N],N,f)}function E(f){const x={};for(const N in f)x[N]=f[N];return x}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(f,x){let N,D;for(let H=1;H<arguments.length;H++){D=arguments[H];for(N in D)f[N]=D[N];for(let ne=0;ne<C.length;ne++)N=C[ne],Object.prototype.hasOwnProperty.call(D,N)&&(f[N]=D[N])}}function P(f){var x=1;f=f.split(":");const N=[];for(;0<x&&f.length;)N.push(f.shift()),x--;return f.length&&N.push(f.join(":")),N}function R(f){a.setTimeout(()=>{throw f},0)}function k(){var f=V;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class W{constructor(){this.h=this.g=null}add(x,N){const D=J.get();D.set(x,N),this.h?this.h.next=D:this.g=D,this.h=D}}var J=new b(()=>new Q,f=>f.reset());class Q{constructor(){this.next=this.g=this.h=null}set(x,N){this.h=x,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let le,O=!1,V=new W,Z=()=>{const f=a.Promise.resolve(void 0);le=()=>{f.then(ye)}};var ye=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(N){R(N)}var x=J;x.j(f),100>x.h&&(x.h++,f.next=x.g,x.g=f)}O=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const N=()=>{};a.addEventListener("test",N,x),a.removeEventListener("test",N,x)}catch{}return f}();function de(f,x){if(ve.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var N=this.type=f.type,D=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget){if(M){e:{try{A(x.nodeName);var H=!0;break e}catch{}H=!1}H||(x=null)}}else N=="mouseover"?x=f.fromElement:N=="mouseout"&&(x=f.toElement);this.relatedTarget=x,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ze[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&de.aa.h.call(this)}}w(de,ve);var ze={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function Ze(f,x,N,D,H){this.listener=f,this.proxy=null,this.src=x,this.type=N,this.capture=!!D,this.ha=H,this.key=++Pe,this.da=this.fa=!1}function De(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ce(f){this.src=f,this.g={},this.h=0}ce.prototype.add=function(f,x,N,D,H){var ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);var Ce=K(f,x,D,H);return-1<Ce?(x=f[Ce],N||(x.fa=!1)):(x=new Ze(x,this.src,ne,!!D,H),x.fa=N,f.push(x)),x};function L(f,x){var N=x.type;if(N in f.g){var D=f.g[N],H=Array.prototype.indexOf.call(D,x,void 0),ne;(ne=0<=H)&&Array.prototype.splice.call(D,H,1),ne&&(De(x),f.g[N].length==0&&(delete f.g[N],f.h--))}}function K(f,x,N,D){for(var H=0;H<f.length;++H){var ne=f[H];if(!ne.da&&ne.listener==x&&ne.capture==!!N&&ne.ha==D)return H}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),Ae={};function Ie(f,x,N,D,H){if(Array.isArray(x)){for(var ne=0;ne<x.length;ne++)Ie(f,x[ne],N,D,H);return null}return N=He(N),f&&f[re]?f.K(x,N,u(D)?!!D.capture:!1,H):$e(f,x,N,!1,D,H)}function $e(f,x,N,D,H,ne){if(!x)throw Error("Invalid event type");var Ce=u(H)?!!H.capture:!!H,nn=me(f);if(nn||(f[ie]=nn=new ce(f)),N=nn.add(x,N,D,Ce,ne),N.proxy)return N;if(D=je(),N.proxy=D,D.src=f,D.listener=N,f.addEventListener)_e||(H=Ce),H===void 0&&(H=!1),f.addEventListener(x.toString(),D,H);else if(f.attachEvent)f.attachEvent(Ke(x.toString()),D);else if(f.addListener&&f.removeListener)f.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return N}function je(){function f(N){return x.call(f.src,f.listener,N)}const x=tt;return f}function ee(f,x,N,D,H){if(Array.isArray(x))for(var ne=0;ne<x.length;ne++)ee(f,x[ne],N,D,H);else D=u(D)?!!D.capture:!!D,N=He(N),f&&f[re]?(f=f.i,x=String(x).toString(),x in f.g&&(ne=f.g[x],N=K(ne,N,D,H),-1<N&&(De(ne[N]),Array.prototype.splice.call(ne,N,1),ne.length==0&&(delete f.g[x],f.h--)))):f&&(f=me(f))&&(x=f.g[x.toString()],f=-1,x&&(f=K(x,N,D,H)),(N=-1<f?x[f]:null)&&be(N))}function be(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[re])L(x.i,f);else{var N=f.type,D=f.proxy;x.removeEventListener?x.removeEventListener(N,D,f.capture):x.detachEvent?x.detachEvent(Ke(N),D):x.addListener&&x.removeListener&&x.removeListener(D),(N=me(x))?(L(N,f),N.h==0&&(N.src=null,x[ie]=null)):De(f)}}}function Ke(f){return f in Ae?Ae[f]:Ae[f]="on"+f}function tt(f,x){if(f.da)f=!0;else{x=new de(x,this);var N=f.listener,D=f.ha||f.src;f.fa&&be(f),f=N.call(D,x)}return f}function me(f){return f=f[ie],f instanceof ce?f:null}var nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function He(f){return typeof f=="function"?f:(f[nt]||(f[nt]=function(x){return f.handleEvent(x)}),f[nt])}function te(){ae.call(this),this.i=new ce(this),this.M=this,this.F=null}w(te,ae),te.prototype[re]=!0,te.prototype.removeEventListener=function(f,x,N,D){ee(this,f,x,N,D)};function ut(f,x){var N,D=f.F;if(D)for(N=[];D;D=D.F)N.push(D);if(f=f.M,D=x.type||x,typeof x=="string")x=new ve(x,f);else if(x instanceof ve)x.target=x.target||f;else{var H=x;x=new ve(D,f),S(x,H)}if(H=!0,N)for(var ne=N.length-1;0<=ne;ne--){var Ce=x.g=N[ne];H=Zt(Ce,D,!0,x)&&H}if(Ce=x.g=f,H=Zt(Ce,D,!0,x)&&H,H=Zt(Ce,D,!1,x)&&H,N)for(ne=0;ne<N.length;ne++)Ce=x.g=N[ne],H=Zt(Ce,D,!1,x)&&H}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var f=this.i,x;for(x in f.g){for(var N=f.g[x],D=0;D<N.length;D++)De(N[D]);delete f.g[x],f.h--}}this.F=null},te.prototype.K=function(f,x,N,D){return this.i.add(String(f),x,!1,N,D)},te.prototype.L=function(f,x,N,D){return this.i.add(String(f),x,!0,N,D)};function Zt(f,x,N,D){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();for(var H=!0,ne=0;ne<x.length;++ne){var Ce=x[ne];if(Ce&&!Ce.da&&Ce.capture==N){var nn=Ce.listener,dr=Ce.ha||Ce.src;Ce.fa&&L(f.i,Ce),H=nn.call(dr,D)!==!1&&H}}return H&&!D.defaultPrevented}function _t(f,x,N){if(typeof f=="function")N&&(f=m(f,N));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:a.setTimeout(f,x||0)}function tn(f){f.g=_t(()=>{f.g=null,f.i&&(f.i=!1,tn(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class Mn extends ae{constructor(x,N){super(),this.m=x,this.l=N,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:tn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(f){ae.call(this),this.h=f,this.g={}}w(ln,ae);var xt=[];function X(f){j(f.g,function(x,N){this.g.hasOwnProperty(N)&&be(x)},f),f.g={}}ln.prototype.N=function(){ln.aa.N.call(this),X(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var F=a.JSON.stringify,z=a.JSON.parse,oe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function he(){}he.prototype.h=null;function xe(f){return f.h||(f.h=f.i())}function ot(){}var Ht={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){ve.call(this,"d")}w(ur,ve);function gt(){ve.call(this,"c")}w(gt,ve);var Mr={},st=null;function pt(){return st=st||new te}Mr.La="serverreachability";function Ot(f){ve.call(this,Mr.La,f)}w(Ot,ve);function yn(f){const x=pt();ut(x,new Ot(x))}Mr.STAT_EVENT="statevent";function Bn(f,x){ve.call(this,Mr.STAT_EVENT,f),this.stat=x}w(Bn,ve);function Kt(f){const x=pt();ut(x,new Bn(x,f))}Mr.Ma="timingevent";function B(f,x){ve.call(this,Mr.Ma,f),this.size=x}w(B,ve);function $(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},x)}function Y(){this.g=!0}Y.prototype.xa=function(){this.g=!1};function ge(f,x,N,D,H,ne){f.info(function(){if(f.g)if(ne)for(var Ce="",nn=ne.split("&"),dr=0;dr<nn.length;dr++){var Ut=nn[dr].split("=");if(1<Ut.length){var br=Ut[0];Ut=Ut[1];var Er=br.split("_");Ce=2<=Er.length&&Er[1]=="type"?Ce+(br+"="+Ut+"&"):Ce+(br+"=redacted&")}}else Ce=null;else Ce=ne;return"XMLHTTP REQ ("+D+") [attempt "+H+"]: "+x+`
`+N+`
`+Ce})}function ke(f,x,N,D,H,ne,Ce){f.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+H+"]: "+x+`
`+N+`
`+ne+" "+Ce})}function Ye(f,x,N,D){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+We(f,N)+(D?" "+D:"")})}function at(f,x){f.info(function(){return"TIMEOUT: "+x})}Y.prototype.info=function(){};function We(f,x){if(!f.g)return x;if(!x)return null;try{var N=JSON.parse(x);if(N){for(f=0;f<N.length;f++)if(Array.isArray(N[f])){var D=N[f];if(!(2>D.length)){var H=D[1];if(Array.isArray(H)&&!(1>H.length)){var ne=H[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var Ce=1;Ce<H.length;Ce++)H[Ce]=""}}}}return F(N)}catch{return x}}var Ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qe;function dt(){}w(dt,he),dt.prototype.g=function(){return new XMLHttpRequest},dt.prototype.i=function(){return{}},Qe=new dt;function ft(f,x,N,D){this.j=f,this.i=x,this.l=N,this.R=D||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Un}function Un(){this.i=null,this.g="",this.h=!1}var qt={},Rt={};function sn(f,x,N){f.L=1,f.v=$p(lo(x)),f.m=N,f.P=!0,io(f,null)}function io(f,x){f.F=Date.now(),Dr(f),f.A=lo(f.v);var N=f.A,D=f.R;Array.isArray(D)||(D=[String(D)]),n1(N.i,"t",D),f.C=0,N=f.j.J,f.h=new Un,f.g=w1(f.j,N?x:null,!f.m),0<f.O&&(f.M=new Mn(m(f.Y,f,f.g),f.O)),x=f.U,N=f.g,D=f.ca;var H="readystatechange";Array.isArray(H)||(H&&(xt[0]=H.toString()),H=xt);for(var ne=0;ne<H.length;ne++){var Ce=Ie(N,H[ne],D||x.handleEvent,!1,x.h||x);if(!Ce)break;x.g[Ce.key]=Ce}x=f.H?E(f.H):{},f.m?(f.u||(f.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,x)):(f.u="GET",f.g.ea(f.A,f.u,null,x)),yn(),ge(f.i,f.u,f.A,f.l,f.R,f.m)}ft.prototype.ca=function(f){f=f.target;const x=this.M;x&&co(f)==3?x.j():this.Y(f)},ft.prototype.Y=function(f){try{if(f==this.g)e:{const Er=co(this.g);var x=this.g.Ba();const ru=this.g.Z();if(!(3>Er)&&(Er!=3||this.g&&(this.h.h||this.g.oa()||c1(this.g)))){this.J||Er!=4||x==7||(x==8||0>=ru?yn(3):yn(2)),oo(this);var N=this.g.Z();this.X=N;t:if(ta(this)){var D=c1(this.g);f="";var H=D.length,ne=co(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),ms(this);var Ce="";break t}this.h.i=new a.TextDecoder}for(x=0;x<H;x++)this.h.h=!0,f+=this.h.i.decode(D[x],{stream:!(ne&&x==H-1)});D.length=0,this.h.g+=f,this.C=0,Ce=this.h.g}else Ce=this.g.oa();if(this.o=N==200,ke(this.i,this.u,this.A,this.l,this.R,Er,N),this.o){if(this.T&&!this.K){t:{if(this.g){var nn,dr=this.g;if((nn=dr.g?dr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(nn)){var Ut=nn;break t}}Ut=null}if(N=Ut)Ye(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,na(this,N);else{this.o=!1,this.s=3,Kt(12),As(this),ms(this);break e}}if(this.P){N=!0;let ei;for(;!this.J&&this.C<Ce.length;)if(ei=Zs(this,Ce),ei==Rt){Er==4&&(this.s=4,Kt(14),N=!1),Ye(this.i,this.l,null,"[Incomplete Response]");break}else if(ei==qt){this.s=4,Kt(15),Ye(this.i,this.l,Ce,"[Invalid Chunk]"),N=!1;break}else Ye(this.i,this.l,ei,null),na(this,ei);if(ta(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Er!=4||Ce.length!=0||this.h.h||(this.s=1,Kt(16),N=!1),this.o=this.o&&N,!N)Ye(this.i,this.l,Ce,"[Invalid Chunked Response]"),As(this),ms(this);else if(0<Ce.length&&!this.W){this.W=!0;var br=this.j;br.g==this&&br.ba&&!br.M&&(br.j.info("Great, no buffering proxy detected. Bytes received: "+Ce.length),q0(br),br.M=!0,Kt(11))}}else Ye(this.i,this.l,Ce,null),na(this,Ce);Er==4&&As(this),this.o&&!this.J&&(Er==4?g1(this.j,this):(this.o=!1,Dr(this)))}else Oz(this.g),N==400&&0<Ce.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),As(this),ms(this)}}}catch{}finally{}};function ta(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Zs(f,x){var N=f.C,D=x.indexOf(`
`,N);return D==-1?Rt:(N=Number(x.substring(N,D)),isNaN(N)?qt:(D+=1,D+N>x.length?Rt:(x=x.slice(D,D+N),f.C=D+N,x)))}ft.prototype.cancel=function(){this.J=!0,As(this)};function Dr(f){f.S=Date.now()+f.I,eu(f,f.I)}function eu(f,x){if(f.B!=null)throw Error("WatchDog timer not null");f.B=$(m(f.ba,f),x)}function oo(f){f.B&&(a.clearTimeout(f.B),f.B=null)}ft.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(at(this.i,this.A),this.L!=2&&(yn(),Kt(17)),As(this),this.s=2,ms(this)):eu(this,this.S-f)};function ms(f){f.j.G==0||f.J||g1(f.j,f)}function As(f){oo(f);var x=f.M;x&&typeof x.ma=="function"&&x.ma(),f.M=null,X(f.U),f.g&&(x=f.g,f.g=null,x.abort(),x.ma())}function na(f,x){try{var N=f.j;if(N.G!=0&&(N.g==f||vn(N.h,f))){if(!f.K&&vn(N.h,f)&&N.G==3){try{var D=N.Da.g.parse(x)}catch{D=null}if(Array.isArray(D)&&D.length==3){var H=D;if(H[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<f.F)Yp(N),Kp(N);else break e;K0(N),Kt(18)}}else N.za=H[1],0<N.za-N.T&&37500>H[2]&&N.F&&N.v==0&&!N.C&&(N.C=$(m(N.Za,N),6e3));if(1>=ra(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else kl(N,11)}else if((f.K||N.g==f)&&Yp(N),!_(x))for(H=N.Da.g.parse(x),x=0;x<H.length;x++){let Ut=H[x];if(N.T=Ut[0],Ut=Ut[1],N.G==2)if(Ut[0]=="c"){N.K=Ut[1],N.ia=Ut[2];const br=Ut[3];br!=null&&(N.la=br,N.j.info("VER="+N.la));const Er=Ut[4];Er!=null&&(N.Aa=Er,N.j.info("SVER="+N.Aa));const ru=Ut[5];ru!=null&&typeof ru=="number"&&0<ru&&(D=1.5*ru,N.L=D,N.j.info("backChannelRequestTimeoutMs_="+D)),D=N;const ei=f.g;if(ei){const Xp=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xp){var ne=D.h;ne.g||Xp.indexOf("spdy")==-1&&Xp.indexOf("quic")==-1&&Xp.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Ri(ne,ne.h),ne.h=null))}if(D.D){const Y0=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Y0&&(D.ya=Y0,un(D.I,D.D,Y0))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-f.F,N.j.info("Handshake RTT: "+N.R+"ms")),D=N;var Ce=f;if(D.qa=x1(D,D.J?D.ia:null,D.W),Ce.K){Th(D.h,Ce);var nn=Ce,dr=D.L;dr&&(nn.I=dr),nn.B&&(oo(nn),Dr(nn)),D.g=Ce}else m1(D);0<N.i.length&&qp(N)}else Ut[0]!="stop"&&Ut[0]!="close"||kl(N,7);else N.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?kl(N,7):H0(N):Ut[0]!="noop"&&N.l&&N.l.ta(Ut),N.v=0)}}yn(4)}catch{}}var Lt=class{constructor(f,x){this.g=f,this.map=x}};function cn(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ao(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ra(f){return f.h?1:f.g?f.g.size:0}function vn(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Ri(f,x){f.g?f.g.add(x):f.h=x}function Th(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}cn.prototype.cancel=function(){if(this.i=Bp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Bp(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const N of f.g.values())x=x.concat(N.D);return x}return y(f.i)}function _z(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var x=[],N=f.length,D=0;D<N;D++)x.push(f[D]);return x}x=[],N=0;for(D in f)x[N++]=f[D];return x}function bz(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var x=[];f=f.length;for(var N=0;N<f;N++)x.push(N);return x}x=[],N=0;for(const D in f)x[N++]=D;return x}}}function QC(f,x){if(f.forEach&&typeof f.forEach=="function")f.forEach(x,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,x,void 0);else for(var N=bz(f),D=_z(f),H=D.length,ne=0;ne<H;ne++)x.call(void 0,D[ne],N&&N[ne],f)}var XC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ez(f,x){if(f){f=f.split("&");for(var N=0;N<f.length;N++){var D=f[N].indexOf("="),H=null;if(0<=D){var ne=f[N].substring(0,D);H=f[N].substring(D+1)}else ne=f[N];x(ne,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Nl(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Nl){this.h=f.h,Up(this,f.j),this.o=f.o,this.g=f.g,zp(this,f.s),this.l=f.l;var x=f.i,N=new Nh;N.i=x.i,x.g&&(N.g=new Map(x.g),N.h=x.h),JC(this,N),this.m=f.m}else f&&(x=String(f).match(XC))?(this.h=!1,Up(this,x[1]||"",!0),this.o=Ih(x[2]||""),this.g=Ih(x[3]||"",!0),zp(this,x[4]),this.l=Ih(x[5]||"",!0),JC(this,x[6]||"",!0),this.m=Ih(x[7]||"")):(this.h=!1,this.i=new Nh(null,this.h))}Nl.prototype.toString=function(){var f=[],x=this.j;x&&f.push(Ch(x,ZC,!0),":");var N=this.g;return(N||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Ch(x,ZC,!0),"@"),f.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&f.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&f.push("/"),f.push(Ch(N,N.charAt(0)=="/"?Iz:Tz,!0))),(N=this.i.toString())&&f.push("?",N),(N=this.m)&&f.push("#",Ch(N,Nz)),f.join("")};function lo(f){return new Nl(f)}function Up(f,x,N){f.j=N?Ih(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function zp(f,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);f.s=x}else f.s=null}function JC(f,x,N){x instanceof Nh?(f.i=x,kz(f.i,f.h)):(N||(x=Ch(x,Cz)),f.i=new Nh(x,f.h))}function un(f,x,N){f.i.set(x,N)}function $p(f){return un(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ih(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ch(f,x,N){return typeof f=="string"?(f=encodeURI(f).replace(x,Sz),N&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Sz(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ZC=/[#\/\?@]/g,Tz=/[#\?:]/g,Iz=/[#\?]/g,Cz=/[#\?@]/g,Nz=/#/g;function Nh(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function sa(f){f.g||(f.g=new Map,f.h=0,f.i&&Ez(f.i,function(x,N){f.add(decodeURIComponent(x.replace(/\+/g," ")),N)}))}t=Nh.prototype,t.add=function(f,x){sa(this),this.i=null,f=tu(this,f);var N=this.g.get(f);return N||this.g.set(f,N=[]),N.push(x),this.h+=1,this};function e1(f,x){sa(f),x=tu(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function t1(f,x){return sa(f),x=tu(f,x),f.g.has(x)}t.forEach=function(f,x){sa(this),this.g.forEach(function(N,D){N.forEach(function(H){f.call(x,H,D,this)},this)},this)},t.na=function(){sa(this);const f=Array.from(this.g.values()),x=Array.from(this.g.keys()),N=[];for(let D=0;D<x.length;D++){const H=f[D];for(let ne=0;ne<H.length;ne++)N.push(x[D])}return N},t.V=function(f){sa(this);let x=[];if(typeof f=="string")t1(this,f)&&(x=x.concat(this.g.get(tu(this,f))));else{f=Array.from(this.g.values());for(let N=0;N<f.length;N++)x=x.concat(f[N])}return x},t.set=function(f,x){return sa(this),this.i=null,f=tu(this,f),t1(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},t.get=function(f,x){return f?(f=this.V(f),0<f.length?String(f[0]):x):x};function n1(f,x,N){e1(f,x),0<N.length&&(f.i=null,f.g.set(tu(f,x),y(N)),f.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(var N=0;N<x.length;N++){var D=x[N];const ne=encodeURIComponent(String(D)),Ce=this.V(D);for(D=0;D<Ce.length;D++){var H=ne;Ce[D]!==""&&(H+="="+encodeURIComponent(String(Ce[D]))),f.push(H)}}return this.i=f.join("&")};function tu(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function kz(f,x){x&&!f.j&&(sa(f),f.i=null,f.g.forEach(function(N,D){var H=D.toLowerCase();D!=H&&(e1(this,D),n1(this,H,N))},f)),f.j=x}function Rz(f,x){const N=new Y;if(a.Image){const D=new Image;D.onload=g(ia,N,"TestLoadImage: loaded",!0,x,D),D.onerror=g(ia,N,"TestLoadImage: error",!1,x,D),D.onabort=g(ia,N,"TestLoadImage: abort",!1,x,D),D.ontimeout=g(ia,N,"TestLoadImage: timeout",!1,x,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=f}else x(!1)}function Pz(f,x){const N=new Y,D=new AbortController,H=setTimeout(()=>{D.abort(),ia(N,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:D.signal}).then(ne=>{clearTimeout(H),ne.ok?ia(N,"TestPingServer: ok",!0,x):ia(N,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(H),ia(N,"TestPingServer: error",!1,x)})}function ia(f,x,N,D,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),D(N)}catch{}}function Az(){this.g=new oe}function jz(f,x,N){const D=N||"";try{QC(f,function(H,ne){let Ce=H;u(H)&&(Ce=F(H)),x.push(D+ne+"="+encodeURIComponent(Ce))})}catch(H){throw x.push(D+"type="+encodeURIComponent("_badmap")),H}}function Wp(f){this.l=f.Ub||null,this.j=f.eb||!1}w(Wp,he),Wp.prototype.g=function(){return new Gp(this.l,this.j)},Wp.prototype.i=function(f){return function(){return f}}({});function Gp(f,x){te.call(this),this.D=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Gp,te),t=Gp.prototype,t.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=x,this.readyState=1,Rh(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(x.body=f),(this.D||a).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kh(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Rh(this)),this.g&&(this.readyState=3,Rh(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;r1(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function r1(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?kh(this):Rh(this),this.readyState==3&&r1(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,kh(this))},t.Qa=function(f){this.g&&(this.response=f,kh(this))},t.ga=function(){this.g&&kh(this)};function kh(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Rh(f)}t.setRequestHeader=function(f,x){this.u.append(f,x)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var N=x.next();!N.done;)N=N.value,f.push(N[0]+": "+N[1]),N=x.next();return f.join(`\r
`)};function Rh(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Gp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function s1(f){let x="";return j(f,function(N,D){x+=D,x+=":",x+=N,x+=`\r
`}),x}function G0(f,x,N){e:{for(D in N){var D=!1;break e}D=!0}D||(N=s1(N),typeof f=="string"?N!=null&&encodeURIComponent(String(N)):un(f,x,N))}function kn(f){te.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(kn,te);var Mz=/^https?$/i,Dz=["POST","PUT"];t=kn.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,x,N,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qe.g(),this.v=this.o?xe(this.o):xe(Qe),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(ne){i1(this,ne);return}if(f=N||"",N=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var H in D)N.set(H,D[H]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ne of D.keys())N.set(ne,D.get(ne));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(N.keys()).find(ne=>ne.toLowerCase()=="content-type"),H=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Dz,x,void 0))||D||H||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ce]of N)this.g.setRequestHeader(ne,Ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{l1(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){i1(this,ne)}};function i1(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.m=5,o1(f),Hp(f)}function o1(f){f.A||(f.A=!0,ut(f,"complete"),ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ut(this,"complete"),ut(this,"abort"),Hp(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hp(this,!0)),kn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?a1(this):this.bb())},t.bb=function(){a1(this)};function a1(f){if(f.h&&typeof o<"u"&&(!f.v[1]||co(f)!=4||f.Z()!=2)){if(f.u&&co(f)==4)_t(f.Ea,0,f);else if(ut(f,"readystatechange"),co(f)==4){f.h=!1;try{const Ce=f.Z();e:switch(Ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var N;if(!(N=x)){var D;if(D=Ce===0){var H=String(f.D).match(XC)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),D=!Mz.test(H?H.toLowerCase():"")}N=D}if(N)ut(f,"complete"),ut(f,"success");else{f.m=6;try{var ne=2<co(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",o1(f)}}finally{Hp(f)}}}}function Hp(f,x){if(f.g){l1(f);const N=f.g,D=f.v[0]?()=>{}:null;f.g=null,f.v=null,x||ut(f,"ready");try{N.onreadystatechange=D}catch{}}}function l1(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function co(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<co(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),z(x)}};function c1(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Oz(f){const x={};f=(f.g&&2<=co(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<f.length;D++){if(_(f[D]))continue;var N=P(f[D]);const H=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ne=x[H]||[];x[H]=ne,ne.push(N)}v(x,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ph(f,x,N){return N&&N.internalChannelParams&&N.internalChannelParams[f]||x}function u1(f){this.Aa=0,this.i=[],this.j=new Y,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ph("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ph("baseRetryDelayMs",5e3,f),this.cb=Ph("retryDelaySeedMs",1e4,f),this.Wa=Ph("forwardChannelMaxRetries",2,f),this.wa=Ph("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new cn(f&&f.concurrentRequestLimit),this.Da=new Az,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=u1.prototype,t.la=8,t.G=1,t.connect=function(f,x,N,D){Kt(0),this.W=f,this.H=x||{},N&&D!==void 0&&(this.H.OSID=N,this.H.OAID=D),this.F=this.X,this.I=x1(this,null,this.W),qp(this)};function H0(f){if(d1(f),f.G==3){var x=f.U++,N=lo(f.I);if(un(N,"SID",f.K),un(N,"RID",x),un(N,"TYPE","terminate"),Ah(f,N),x=new ft(f,f.j,x),x.L=2,x.v=$p(lo(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(x.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=x.v,N=!0),N||(x.g=w1(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Dr(x)}v1(f)}function Kp(f){f.g&&(q0(f),f.g.cancel(),f.g=null)}function d1(f){Kp(f),f.u&&(a.clearTimeout(f.u),f.u=null),Yp(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function qp(f){if(!ao(f.h)&&!f.s){f.s=!0;var x=f.Ga;le||Z(),O||(le(),O=!0),V.add(x,f),f.B=0}}function Lz(f,x){return ra(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=x.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=$(m(f.Ga,f,x),y1(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const H=new ft(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=E(ne),S(ne,this.S)):ne=this.S),this.m!==null||this.O||(H.H=ne,ne=null),this.P)e:{for(var x=0,N=0;N<this.i.length;N++){t:{var D=this.i[N];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(x+=D,4096<x){x=N;break e}if(x===4096||N===this.i.length-1){x=N+1;break e}}x=1e3}else x=1e3;x=f1(this,H,x),N=lo(this.I),un(N,"RID",f),un(N,"CVER",22),this.D&&un(N,"X-HTTP-Session-Id",this.D),Ah(this,N),ne&&(this.O?x="headers="+encodeURIComponent(String(s1(ne)))+"&"+x:this.m&&G0(N,this.m,ne)),Ri(this.h,H),this.Ua&&un(N,"TYPE","init"),this.P?(un(N,"$req",x),un(N,"SID","null"),H.T=!0,sn(H,N,null)):sn(H,N,x),this.G=2}}else this.G==3&&(f?h1(this,f):this.i.length==0||ao(this.h)||h1(this))};function h1(f,x){var N;x?N=x.l:N=f.U++;const D=lo(f.I);un(D,"SID",f.K),un(D,"RID",N),un(D,"AID",f.T),Ah(f,D),f.m&&f.o&&G0(D,f.m,f.o),N=new ft(f,f.j,N,f.B+1),f.m===null&&(N.H=f.o),x&&(f.i=x.D.concat(f.i)),x=f1(f,N,1e3),N.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ri(f.h,N),sn(N,D,x)}function Ah(f,x){f.H&&j(f.H,function(N,D){un(x,D,N)}),f.l&&QC({},function(N,D){un(x,D,N)})}function f1(f,x,N){N=Math.min(f.i.length,N);var D=f.l?m(f.l.Na,f.l,f):null;e:{var H=f.i;let ne=-1;for(;;){const Ce=["count="+N];ne==-1?0<N?(ne=H[0].g,Ce.push("ofs="+ne)):ne=0:Ce.push("ofs="+ne);let nn=!0;for(let dr=0;dr<N;dr++){let Ut=H[dr].g;const br=H[dr].map;if(Ut-=ne,0>Ut)ne=Math.max(0,H[dr].g-100),nn=!1;else try{jz(br,Ce,"req"+Ut+"_")}catch{D&&D(br)}}if(nn){D=Ce.join("&");break e}}}return f=f.i.splice(0,N),x.D=f,D}function m1(f){if(!f.g&&!f.u){f.Y=1;var x=f.Fa;le||Z(),O||(le(),O=!0),V.add(x,f),f.v=0}}function K0(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=$(m(f.Fa,f),y1(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,p1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=$(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Kp(this),p1(this))};function q0(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function p1(f){f.g=new ft(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var x=lo(f.qa);un(x,"RID","rpc"),un(x,"SID",f.K),un(x,"AID",f.T),un(x,"CI",f.F?"0":"1"),!f.F&&f.ja&&un(x,"TO",f.ja),un(x,"TYPE","xmlhttp"),Ah(f,x),f.m&&f.o&&G0(x,f.m,f.o),f.L&&(f.g.I=f.L);var N=f.g;f=f.ia,N.L=1,N.v=$p(lo(x)),N.m=null,N.P=!0,io(N,f)}t.Za=function(){this.C!=null&&(this.C=null,Kp(this),K0(this),Kt(19))};function Yp(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function g1(f,x){var N=null;if(f.g==x){Yp(f),q0(f),f.g=null;var D=2}else if(vn(f.h,x))N=x.D,Th(f.h,x),D=1;else return;if(f.G!=0){if(x.o)if(D==1){N=x.m?x.m.length:0,x=Date.now()-x.F;var H=f.B;D=pt(),ut(D,new B(D,N)),qp(f)}else m1(f);else if(H=x.s,H==3||H==0&&0<x.X||!(D==1&&Lz(f,x)||D==2&&K0(f)))switch(N&&0<N.length&&(x=f.h,x.i=x.i.concat(N)),H){case 1:kl(f,5);break;case 4:kl(f,10);break;case 3:kl(f,6);break;default:kl(f,2)}}}function y1(f,x){let N=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(N*=2),N*x}function kl(f,x){if(f.j.info("Error code "+x),x==2){var N=m(f.fb,f),D=f.Xa;const H=!D;D=new Nl(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Up(D,"https"),$p(D),H?Rz(D.toString(),N):Pz(D.toString(),N)}else Kt(2);f.G=0,f.l&&f.l.sa(x),v1(f),d1(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function v1(f){if(f.G=0,f.ka=[],f.l){const x=Bp(f.h);(x.length!=0||f.i.length!=0)&&(T(f.ka,x),T(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function x1(f,x,N){var D=N instanceof Nl?lo(N):new Nl(N);if(D.g!="")x&&(D.g=x+"."+D.g),zp(D,D.s);else{var H=a.location;D=H.protocol,x=x?x+"."+H.hostname:H.hostname,H=+H.port;var ne=new Nl(null);D&&Up(ne,D),x&&(ne.g=x),H&&zp(ne,H),N&&(ne.l=N),D=ne}return N=f.D,x=f.ya,N&&x&&un(D,N,x),un(D,"VER",f.la),Ah(f,D),D}function w1(f,x,N){if(x&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Ca&&!f.pa?new kn(new Wp({eb:N})):new kn(f.pa),x.Ha(f.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _1(){}t=_1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qp(){}Qp.prototype.g=function(f,x){return new ps(f,x)};function ps(f,x){te.call(this),this.g=new u1(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(f?f["X-WebChannel-Client-Profile"]=x.va:f={"X-WebChannel-Client-Profile":x.va}),this.g.S=f,(f=x&&x.Sb)&&!_(f)&&(this.g.m=f),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!_(x)&&(this.g.D=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new nu(this)}w(ps,te),ps.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ps.prototype.close=function(){H0(this.g)},ps.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var N={};N.__data__=f,f=N}else this.u&&(N={},N.__data__=F(f),f=N);x.i.push(new Lt(x.Ya++,f)),x.G==3&&qp(x)},ps.prototype.N=function(){this.g.l=null,delete this.j,H0(this.g),delete this.g,ps.aa.N.call(this)};function b1(f){ur.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const N in x){f=N;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}w(b1,ur);function E1(){gt.call(this),this.status=1}w(E1,gt);function nu(f){this.g=f}w(nu,_1),nu.prototype.ua=function(){ut(this.g,"a")},nu.prototype.ta=function(f){ut(this.g,new b1(f))},nu.prototype.sa=function(f){ut(this.g,new E1)},nu.prototype.ra=function(){ut(this.g,"b")},Qp.prototype.createWebChannel=Qp.prototype.g,ps.prototype.send=ps.prototype.o,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,jL=function(){return new Qp},AL=function(){return pt()},PL=Mr,Zb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ve.NO_ERROR=0,Ve.TIMEOUT=8,Ve.HTTP_ERROR=6,cy=Ve,Oe.COMPLETE="complete",RL=Oe,ot.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",te.prototype.listen=te.prototype.K,ff=ot,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,kL=kn}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});const uR="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new cp("@firebase/firestore");function gu(){return _c.logLevel}function pe(t,...e){if(_c.logLevel<=bt.DEBUG){const n=e.map(FT);_c.debug(`Firestore (${ph}): ${t}`,...n)}}function On(t,...e){if(_c.logLevel<=bt.ERROR){const n=e.map(FT);_c.error(`Firestore (${ph}): ${t}`,...n)}}function bm(t,...e){if(_c.logLevel<=bt.WARN){const n=e.map(FT);_c.warn(`Firestore (${ph}): ${t}`,...n)}}function FT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t="Unexpected state"){const e=`FIRESTORE (${ph}) INTERNAL ASSERTION FAILED: `+t;throw On(e),new Error(e)}function qe(t,e){t||Le()}function Ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cr.UNAUTHENTICATED))}shutdown(){}}class KQ{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new yi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new yi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string"),new GQ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new Cr(e)}}class qQ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YQ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qQ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){qe(this.o===void 0);const r=i=>{i.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.R=n.token,new QQ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=JQ(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function Rd(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function DL(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new et(e)}static min(){return new et(new Dt(0,0))}static max(){return new et(new Dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,r){n===void 0?n=0:n>e.length&&Le(),r===void 0?r=e.length-n:r>e.length-n&&Le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Em.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Em?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Vt extends Em{construct(e,n,r){return new Vt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Vt(n)}static emptyPath(){return new Vt([])}}const ZQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Em{construct(e,n,r){return new Tn(e,n,r)}static isValidIdentifier(e){return ZQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Ee(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ee(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Ee(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(n)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Vt.fromString(e))}static fromName(e){return new Re(Vt.fromString(e).popFirst(5))}static empty(){return new Re(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function eE(t){return t.fields.find(e=>e.kind===2)}function Ll(t){return t.fields.filter(e=>e.kind!==2)}yv.UNKNOWN_ID=-1;class uy{constructor(e,n){this.fieldPath=e,this.kind=n}}class Sm{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Sm(0,Ns.min())}}function OL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=et.fromTimestamp(r===1e9?new Dt(n+1,0):new Dt(n,r));return new Ns(s,Re.empty(),e)}function LL(t){return new Ns(t.readTime,t.key,-1)}class Ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ns(et.min(),Re.empty(),-1)}static max(){return new Ns(et.max(),Re.empty(),-1)}}function VT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==FL)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new jf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=BT(r.target.error);this.V.reject(new jf(e,s))}}static open(e,n,r,s){try{return new Kx(n,e.transaction(s,r))}catch(i){throw new jf(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tX(n)}}class Qa{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Qa.S(er())===12.2&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pe("SimpleDb","Removing database:",e),$l(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!TT())return!1;if(Qa.v())return!0;const e=er(),n=Qa.S(e),r=0<n&&n<10,s=BL(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(pe("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new jf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Ee(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Ee(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new jf(e,o))},s.onupgradeneeded=i=>{pe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{pe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Kx.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),q.reject(u))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(pe("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class eX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $l(this.B.delete())}}class jf extends Ee{constructor(e,n){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _l(t){return t.name==="IndexedDbTransactionError"}class tX{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(pe("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$l(r)}add(e){return pe("SimpleDb","ADD",this.store.name,e,e),$l(this.store.add(e))}get(e){return $l(this.store.get(e)).next(n=>(n===void 0&&(n=null),pe("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return pe("SimpleDb","DELETE",this.store.name,e),$l(this.store.delete(e))}count(){return pe("SimpleDb","COUNT",this.store.name),$l(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new q((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new q((r,s)=>{n.onerror=i=>{const o=BT(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new q((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new eX(a),u=n(a.primaryKey,a.value,c);if(u instanceof q){const d=u.catch(h=>(c.done(),q.reject(h)));r.push(d)}c.isDone?s():c.K===null?a.continue():a.continue(c.K)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function $l(t){return new q((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=BT(r.target.error);n(s)}})}let dR=!1;function BT(t){const e=Qa.S(er());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dR||(dR=!0,setTimeout(()=>{throw r},0)),r}}return t}class nX{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){pe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{pe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){_l(n)?pe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await wl(n)}await this.X(6e4)})}}class rX{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return q.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return pe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(pe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=LL(i);VT(o,r)>0&&(r=o)}),new Ns(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}os.oe=-1;function pp(t){return t==null}function Tm(t){return t===0&&1/t==-1/0}function UL(t){return typeof t=="number"&&Number.isInteger(t)&&!Tm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hR(e)),e=sX(t.get(n),e);return hR(e)}function sX(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function hR(t){return t+""}function Ui(t){const e=t.length;if(qe(e>=2),e===2)return qe(t.charAt(0)===""&&t.charAt(1)===""),Vt.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&Le(),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Le()}i=o+2}return new Vt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t,e){return[t,Wr(e)]}function zL(t,e,n){return[t,Wr(e),n]}const iX={},oX=["prefixPath","collectionGroup","readTime","documentId"],aX=["prefixPath","collectionGroup","documentId"],lX=["collectionGroup","readTime","prefixPath","documentId"],cX=["canonicalId","targetId"],uX=["targetId","path"],dX=["path","targetId"],hX=["collectionId","parent"],fX=["indexId","uid"],mX=["uid","sequenceNumber"],pX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gX=["indexId","uid","orderedDocumentKey"],yX=["userId","collectionPath","documentId"],vX=["userId","collectionPath","largestBatchId"],xX=["userId","collectionGroup","largestBatchId"],$L=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wX=[...$L,"documentOverlays"],WL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GL=WL,UT=[...GL,"indexConfiguration","indexState","indexEntries"],_X=UT,bX=[...UT,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE extends VL{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function tr(t,e){const n=Ge(t);return Qa.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nn=class nE{constructor(e,n){this.comparator=e,this.root=n||Xa.EMPTY}insert(e,n){return new nE(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xa.BLACK,null,null))}remove(e){return new nE(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xa.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eg(this.root,e,this.comparator,!0)}},Eg=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xa=class fo{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??fo.RED,this.left=s??fo.EMPTY,this.right=i??fo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new fo(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return fo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return fo.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Le();const e=this.left.check();if(e!==this.right.check())throw Le();return e+(this.isRed()?0:1)}};Xa.EMPTY=null,Xa.RED=!0,Xa.BLACK=!1;Xa.EMPTY=new class{constructor(){this.size=0}get key(){throw Le()}get value(){throw Le()}get color(){throw Le()}get left(){throw Le()}get right(){throw Le()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xa(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pR(this.data.getIterator())}getIteratorFrom(e){return new pR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class pR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ou(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new as([])}unionWith(e){let n=new en(Tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new as(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new KL("Invalid base64 string: "+i):i}}(e);return new Fn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const EX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(t){if(qe(!!t),typeof t=="string"){let e=0;const n=EX.exec(t);if(qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ol(t){return typeof t=="string"?Fn.fromBase64String(t):Fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $T(t){const e=t.mapValue.fields.__previous_value__;return zT(e)?$T(e):e}function Im(t){const e=Wo(t.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class bc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hy={nullValue:"NULL_VALUE"};function Ec(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zT(t)?4:qL(t)?9007199254740991:qx(t)?10:11:Le()}function Xi(t,e){if(t===e)return!0;const n=Ec(t);if(n!==Ec(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Im(t).isEqual(Im(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Wo(s.timestampValue),a=Wo(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ol(s.bytesValue).isEqual(ol(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return wn(s.geoPointValue.latitude)===wn(i.geoPointValue.latitude)&&wn(s.geoPointValue.longitude)===wn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return wn(s.integerValue)===wn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=wn(s.doubleValue),a=wn(i.doubleValue);return o===a?Tm(o)===Tm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Rd(t.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(mR(o)!==mR(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Xi(o[c],a[c])))return!1;return!0}(t,e);default:return Le()}}function Cm(t,e){return(t.values||[]).find(n=>Xi(n,e))!==void 0}function al(t,e){if(t===e)return 0;const n=Ec(t),r=Ec(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=wn(i.integerValue||i.doubleValue),c=wn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return gR(t.timestampValue,e.timestampValue);case 4:return gR(Im(t),Im(e));case 5:return ht(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ol(i),c=ol(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=ht(a[u],c[u]);if(d!==0)return d}return ht(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ht(wn(i.latitude),wn(o.latitude));return a!==0?a:ht(wn(i.longitude),wn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yR(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,d;const h=i.fields||{},m=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,y=ht(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:yR(g,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Oa.mapValue&&o===Oa.mapValue)return 0;if(i===Oa.mapValue)return 1;if(o===Oa.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=ht(c[h],d[h]);if(m!==0)return m;const g=al(a[c[h]],u[d[h]]);if(g!==0)return g}return ht(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Le()}}function gR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=Wo(t),r=Wo(e),s=ht(n.seconds,r.seconds);return s!==0?s:ht(n.nanos,r.nanos)}function yR(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=al(n[s],r[s]);if(i)return i}return ht(n.length,r.length)}function Pd(t){return rE(t)}function rE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ol(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rE(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${rE(n.fields[o])}`;return s+"}"}(t.mapValue):Le()}function Nm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sE(t){return!!t&&"integerValue"in t}function km(t){return!!t&&"arrayValue"in t}function vR(t){return!!t&&"nullValue"in t}function xR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fy(t){return!!t&&"mapValue"in t}function qx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Mf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const YL={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function TX(t){return"nullValue"in t?hy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Nm(bc.empty(),Re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?qx(t)?YL:{mapValue:{}}:Le()}function IX(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Nm(bc.empty(),Re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?YL:"mapValue"in t?qx(t)?{mapValue:{}}:Oa:Le()}function wR(t,e){const n=al(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function _R(t,e){const n=al(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mf(n)}setAll(e){let n=Tn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Mf(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());fy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gc(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pr(Mf(this.value))}}function QL(t){const e=[];return Gc(t.fields,(n,r)=>{const s=new Tn([n]);if(fy(r)){const i=QL(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new as(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bn(e,0,et.min(),et.min(),et.min(),pr.empty(),0)}static newFoundDocument(e,n,r,s){return new bn(e,1,n,et.min(),r,s,0)}static newNoDocument(e,n){return new bn(e,2,n,et.min(),et.min(),pr.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,et.min(),et.min(),pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function bR(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Re.comparator(Re.fromName(o.referenceValue),n.key):r=al(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ER(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n="asc"){this.field=e,this.dir=n}}function CX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XL=class{};class Nt extends XL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NX(e,n,r):n==="array-contains"?new PX(e,r):n==="in"?new rF(e,r):n==="not-in"?new AX(e,r):n==="array-contains-any"?new jX(e,r):new Nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kX(e,r):new RX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(al(n,this.value)):n!==null&&Ec(this.value)===Ec(n)&&this.matchesComparison(al(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends XL{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Xt(e,n)}matches(e){return jd(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jd(t){return t.op==="and"}function iE(t){return t.op==="or"}function WT(t){return JL(t)&&jd(t)}function JL(t){for(const e of t.filters)if(e instanceof Xt)return!1;return!0}function oE(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+Pd(t.value);if(WT(t))return t.filters.map(e=>oE(e)).join(",");{const e=t.filters.map(n=>oE(n)).join(",");return`${t.op}(${e})`}}function ZL(t,e){return t instanceof Nt?function(r,s){return s instanceof Nt&&r.op===s.op&&r.field.isEqual(s.field)&&Xi(r.value,s.value)}(t,e):t instanceof Xt?function(r,s){return s instanceof Xt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&ZL(o,s.filters[a]),!0):!1}(t,e):void Le()}function eF(t,e){const n=t.filters.concat(e);return Xt.create(n,t.op)}function tF(t){return t instanceof Nt?function(n){return`${n.field.canonicalString()} ${n.op} ${Pd(n.value)}`}(t):t instanceof Xt?function(n){return n.op.toString()+" {"+n.getFilters().map(tF).join(" ,")+"}"}(t):"Filter"}class NX extends Nt{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class kX extends Nt{constructor(e,n){super(e,"in",n),this.keys=nF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RX extends Nt{constructor(e,n){super(e,"not-in",n),this.keys=nF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Re.fromName(r.referenceValue))}class PX extends Nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return km(n)&&Cm(n.arrayValue,this.value)}}class rF extends Nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cm(this.value.arrayValue,n)}}class AX extends Nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Cm(this.value.arrayValue,n)}}class jX extends Nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MX{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function aE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new MX(t,e,n,r,s,i,o)}function Sc(t){const e=Ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),pp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pd(r)).join(",")),e.ue=n}return e.ue}function gp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ER(t.startAt,e.startAt)&&ER(t.endAt,e.endAt)}function vv(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function xv(t,e){return t.filters.filter(n=>n instanceof Nt&&n.field.isEqual(e))}function SR(t,e,n){let r=hy,s=!0;for(const i of xv(t,e)){let o=hy,a=!0;switch(i.op){case"<":case"<=":o=TX(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=hy}wR({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];wR({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function TR(t,e,n){let r=Oa,s=!0;for(const i of xv(t,e)){let o=Oa,a=!0;switch(i.op){case">=":case">":o=IX(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Oa}_R({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];_R({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sF(t,e,n,r,s,i,o,a){return new Hc(t,e,n,r,s,i,o,a)}function yp(t){return new Hc(t)}function IR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iF(t){return t.collectionGroup!==null}function Df(t){const e=Ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new en(Tn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Rm(i,r))}),n.has(Tn.keyField().canonicalString())||e.ce.push(new Rm(Tn.keyField(),r))}return e.ce}function Ts(t){const e=Ge(t);return e.le||(e.le=DX(e,Df(t))),e.le}function DX(t,e){if(t.limitType==="F")return aE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Rm(s.field,i)});const n=t.endAt?new Ad(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ad(t.startAt.position,t.startAt.inclusive):null;return aE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lE(t,e){const n=t.filters.concat([e]);return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wv(t,e,n){return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yx(t,e){return gp(Ts(t),Ts(e))&&t.limitType===e.limitType}function oF(t){return`${Sc(Ts(t))}|lt:${t.limitType}`}function yu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>tF(s)).join(", ")}]`),pp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Pd(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Pd(s)).join(",")),`Target(${r})`}(Ts(t))}; limitType=${t.limitType})`}function vp(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Df(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=bR(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Df(r),s)||r.endAt&&!function(o,a,c){const u=bR(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Df(r),s))}(t,e)}function aF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lF(t){return(e,n)=>{let r=!1;for(const s of Df(t)){const i=OX(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function OX(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?al(c,u):Le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gc(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return HL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=new Nn(Re.comparator);function _s(){return LX}const cF=new Nn(Re.comparator);function mf(...t){let e=cF;for(const n of t)e=e.insert(n.key,n);return e}function uF(t){let e=cF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zi(){return Of()}function dF(){return Of()}function Of(){return new bl(t=>t.toString(),(t,e)=>t.isEqual(e))}const FX=new Nn(Re.comparator),VX=new en(Re.comparator);function yt(...t){let e=VX;for(const n of t)e=e.add(n);return e}const BX=new en(ht);function GT(){return BX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tm(e)?"-0":e}}function hF(t){return{integerValue:""+t}}function fF(t,e){return UL(e)?hF(e):HT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this._=void 0}}function UX(t,e,n){return t instanceof Md?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&zT(i)&&(i=$T(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Dd?pF(t,e):t instanceof Od?gF(t,e):function(s,i){const o=mF(s,i),a=CR(o)+CR(s.Pe);return sE(o)&&sE(s.Pe)?hF(a):HT(s.serializer,a)}(t,e)}function zX(t,e,n){return t instanceof Dd?pF(t,e):t instanceof Od?gF(t,e):n}function mF(t,e){return t instanceof Ld?function(r){return sE(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Md extends Qx{}class Dd extends Qx{constructor(e){super(),this.elements=e}}function pF(t,e){const n=yF(e);for(const r of t.elements)n.some(s=>Xi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Od extends Qx{constructor(e){super(),this.elements=e}}function gF(t,e){let n=yF(e);for(const r of t.elements)n=n.filter(s=>!Xi(s,r));return{arrayValue:{values:n}}}class Ld extends Qx{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function CR(t){return wn(t.integerValue||t.doubleValue)}function yF(t){return km(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.field=e,this.transform=n}}function $X(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Dd&&s instanceof Dd||r instanceof Od&&s instanceof Od?Rd(r.elements,s.elements,Xi):r instanceof Ld&&s instanceof Ld?Xi(r.Pe,s.Pe):r instanceof Md&&s instanceof Md}(t.transform,e.transform)}class WX{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function my(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xx{}function vF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yh(t.key,En.none()):new gh(t.key,t.data,En.none());{const n=t.data,r=pr.empty();let s=new en(Tn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Jo(t.key,r,new as(s.toArray()),En.none())}}function GX(t,e,n){t instanceof gh?function(s,i,o){const a=s.value.clone(),c=kR(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Jo?function(s,i,o){if(!my(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=kR(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(xF(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Lf(t,e,n,r){return t instanceof gh?function(i,o,a,c){if(!my(i.precondition,o))return a;const u=i.value.clone(),d=RR(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jo?function(i,o,a,c){if(!my(i.precondition,o))return a;const u=RR(i.fieldTransforms,c,o),d=o.data;return d.setAll(xF(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return my(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function HX(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=mF(r.transform,s||null);i!=null&&(n===null&&(n=pr.empty()),n.set(r.field,i))}return n||null}function NR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Rd(r,s,(i,o)=>$X(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gh extends Xx{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jo extends Xx{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kR(t,e,n){const r=new Map;qe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,zX(o,a,n[s]))}return r}function RR(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,UX(i,o,e))}return r}class yh extends Xx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qT extends Xx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&GX(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dF();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=vF(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),yt())}isEqual(e){return this.batchId===e.batchId&&Rd(this.mutations,e.mutations,(n,r)=>NR(n,r))&&Rd(this.baseMutations,e.baseMutations,(n,r)=>NR(n,r))}}class QT{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){qe(e.mutations.length===r.length);let s=function(){return FX}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new QT(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XT=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zn,Ft;function wF(t){switch(t){default:return Le();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function _F(t){if(t===void 0)return On("GRPC error has no .code"),se.UNKNOWN;switch(t){case zn.OK:return se.OK;case zn.CANCELLED:return se.CANCELLED;case zn.UNKNOWN:return se.UNKNOWN;case zn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case zn.INTERNAL:return se.INTERNAL;case zn.UNAVAILABLE:return se.UNAVAILABLE;case zn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case zn.NOT_FOUND:return se.NOT_FOUND;case zn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case zn.ABORTED:return se.ABORTED;case zn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case zn.DATA_LOSS:return se.DATA_LOSS;default:return Le()}}(Ft=zn||(zn={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qX(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX=new dc([4294967295,4294967295],0);function PR(t){const e=qX().encode(t),n=new NL;return n.update(e),new Uint8Array(n.digest())}function AR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new dc([n,r],0),new dc([s,i],0)]}class JT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pf(`Invalid padding: ${n}`);if(r<0)throw new pf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=dc.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(dc.fromNumber(r)));return s.compare(YX)===1&&(s=new dc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=PR(e),[r,s]=AR(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new JT(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=PR(e),[r,s]=AR(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,wp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xp(et.min(),s,new Nn(ht),_s(),yt())}}class wp{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wp(r,n,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class bF{constructor(e,n){this.targetId=e,this.me=n}}class EF{constructor(e,n,r=Fn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jR{constructor(){this.fe=0,this.ge=DR(),this.pe=Fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=yt(),n=yt(),r=yt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Le()}}),new wp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=DR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class QX{constructor(e){this.Le=e,this.Be=new Map,this.ke=_s(),this.qe=MR(),this.Qe=new Nn(ht)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(vv(i))if(r===0){const o=new Re(i.path);this.Ue(n,o,bn.newNoDocument(o,et.min()))}else qe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ol(r).toUint8Array()}catch(c){if(c instanceof KL)return bm("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new JT(o,s,i)}catch(c){return bm(c instanceof pf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&vv(a.target)){const c=new Re(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,bn.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=yt();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new xp(e,n,this.Qe,this.ke,r);return this.ke=_s(),this.qe=MR(),this.Qe=new Nn(ht),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jR,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new en(ht),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jR),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function MR(){return new Nn(Re.comparator)}function DR(){return new Nn(Re.comparator)}const XX={asc:"ASCENDING",desc:"DESCENDING"},JX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZX={and:"AND",or:"OR"};class eJ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cE(t,e){return t.useProto3Json||pp(e)?e:{value:e}}function Fd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tJ(t,e){return Fd(t,e.toTimestamp())}function cr(t){return qe(!!t),et.fromTimestamp(function(n){const r=Wo(n);return new Dt(r.seconds,r.nanos)}(t))}function ZT(t,e){return uE(t,e).canonicalString()}function uE(t,e){const n=function(s){return new Vt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TF(t){const e=Vt.fromString(t);return qe(MF(e)),e}function Pm(t,e){return ZT(t.databaseId,e.path)}function No(t,e){const n=TF(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(NF(n))}function IF(t,e){return ZT(t.databaseId,e)}function CF(t){const e=TF(t);return e.length===4?Vt.emptyPath():NF(e)}function dE(t){return new Vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NF(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OR(t,e,n){return{name:Pm(t,e),fields:n.value.mapValue.fields}}function nJ(t,e,n){const r=No(t,e.name),s=cr(e.updateTime),i=e.createTime?cr(e.createTime):et.min(),o=new pr({mapValue:{fields:e.fields}}),a=bn.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function rJ(t,e){return"found"in e?function(r,s){qe(!!s.found),s.found.name,s.found.updateTime;const i=No(r,s.found.name),o=cr(s.found.updateTime),a=s.found.createTime?cr(s.found.createTime):et.min(),c=new pr({mapValue:{fields:s.found.fields}});return bn.newFoundDocument(i,o,a,c)}(t,e):"missing"in e?function(r,s){qe(!!s.missing),qe(!!s.readTime);const i=No(r,s.missing),o=cr(s.readTime);return bn.newNoDocument(i,o)}(t,e):Le()}function sJ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Le()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(qe(d===void 0||typeof d=="string"),Fn.fromBase64String(d||"")):(qe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Fn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?se.UNKNOWN:_F(u.code);return new Ee(d,u.message||"")}(o);n=new EF(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=No(t,r.document.name),i=cr(r.document.updateTime),o=r.document.createTime?cr(r.document.createTime):et.min(),a=new pr({mapValue:{fields:r.document.fields}}),c=bn.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new py(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=No(t,r.document),i=r.readTime?cr(r.readTime):et.min(),o=bn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new py([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=No(t,r.document),i=r.removedTargetIds||[];n=new py([],i,s,null)}else{if(!("filter"in e))return Le();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new KX(s,i),a=r.targetId;n=new bF(a,o)}}return n}function Am(t,e){let n;if(e instanceof gh)n={update:OR(t,e.key,e.value)};else if(e instanceof yh)n={delete:Pm(t,e.key)};else if(e instanceof Jo)n={update:OR(t,e.key,e.data),updateMask:uJ(e.fieldMask)};else{if(!(e instanceof qT))return Le();n={verify:Pm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Md)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Od)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:tJ(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Le()}(t,e.precondition)),n}function hE(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?En.updateTime(cr(i.updateTime)):i.exists!==void 0?En.exists(i.exists):En.none()}(e.currentDocument):En.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)qe(a.setToServerValue==="REQUEST_TIME"),c=new Md;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];c=new Dd(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];c=new Od(d)}else"increment"in a?c=new Ld(o,a.increment):Le();const u=Tn.fromServerFormat(a.fieldPath);return new KT(u,c)}(t,s)):[];if(e.update){e.update.name;const s=No(t,e.update.name),i=new pr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new as(u.map(d=>Tn.fromServerFormat(d)))}(e.updateMask);return new Jo(s,i,o,n,r)}return new gh(s,i,n,r)}if(e.delete){const s=No(t,e.delete);return new yh(s,n)}if(e.verify){const s=No(t,e.verify);return new qT(s,n)}return Le()}function iJ(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?cr(s.updateTime):cr(i);return o.isEqual(et.min())&&(o=cr(i)),new WX(o,s.transformResults||[])}(n,e))):[]}function kF(t,e){return{documents:[IF(t,e.path)]}}function RF(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IF(t,s);const i=function(u){if(u.length!==0)return jF(Xt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:vu(m.field),direction:aJ(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=cE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function PF(t){let e=CF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){qe(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const m=AF(h);return m instanceof Xt&&WT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(w){return new Rm(xu(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,pp(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(h){const m=!!h.before,g=h.values||[];return new Ad(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new Ad(g,m)}(n.endAt)),sF(e,s,o,i,a,"F",c,u)}function oJ(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xu(n.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xu(n.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xu(n.unaryFilter.field);return Nt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xu(n.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Le()}}(t):t.fieldFilter!==void 0?function(n){return Nt.create(xu(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xt.create(n.compositeFilter.filters.map(r=>AF(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le()}}(n.compositeFilter.op))}(t):Le()}function aJ(t){return XX[t]}function lJ(t){return JX[t]}function cJ(t){return ZX[t]}function vu(t){return{fieldPath:t.canonicalString()}}function xu(t){return Tn.fromServerFormat(t.fieldPath)}function jF(t){return t instanceof Nt?function(n){if(n.op==="=="){if(xR(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NAN"}};if(vR(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xR(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NOT_NAN"}};if(vR(n.value))return{unaryFilter:{field:vu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vu(n.field),op:lJ(n.op),value:n.value}}}(t):t instanceof Xt?function(n){const r=n.getFilters().map(s=>jF(s));return r.length===1?r[0]:{compositeFilter:{op:cJ(n.op),filters:r}}}(t):Le()}function uJ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n,r,s,i=et.min(),o=et.min(),a=Fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.ct=e}}function dJ(t,e){let n;if(e.document)n=nJ(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Re.fromSegments(e.noDocument.path),s=Ic(e.noDocument.readTime);n=bn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Le();{const r=Re.fromSegments(e.unknownDocument.path),s=Ic(e.unknownDocument.version);n=bn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Dt(s[0],s[1]);return et.fromTimestamp(i)}(e.readTime)),n}function LR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:_v(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Pm(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Fd(i,o.version.toTimestamp()),createTime:Fd(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Tc(e.version)};else{if(!e.isUnknownDocument())return Le();r.unknownDocument={path:n.path.toArray(),version:Tc(e.version)}}return r}function _v(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Tc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ic(t){const e=new Dt(t.seconds,t.nanoseconds);return et.fromTimestamp(e)}function Wl(t,e){const n=(e.baseMutations||[]).map(i=>hE(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>hE(t.ct,i)),s=Dt.fromMillis(e.localWriteTimeMs);return new YT(e.batchId,s,n,r)}function gf(t){const e=Ic(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ic(t.lastLimboFreeSnapshotVersion):et.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return qe(i.documents.length===1),Ts(yp(CF(i.documents[0])))}(t.query):function(i){return Ts(PF(i))}(t.query),new So(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Fn.fromBase64String(t.resumeToken))}function OF(t,e){const n=Tc(e.snapshotVersion),r=Tc(e.lastLimboFreeSnapshotVersion);let s;s=vv(e.target)?kF(t.ct,e.target):RF(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sc(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function LF(t){const e=PF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wv(e,e.limit,"L"):e}function Lw(t,e){return new XT(e.largestBatchId,hE(t.ct,e.overlayMutation))}function FR(t,e){const n=e.path.lastSegment();return[t,Wr(e.path.popLast()),n]}function VR(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Tc(r.readTime),documentKey:Wr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{getBundleMetadata(e,n){return BR(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Ic(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return BR(e).put(function(s){return{bundleId:s.id,createTime:Tc(cr(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return UR(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:LF(i.bundledQuery),readTime:Ic(i.readTime)}}(r)})}saveNamedQuery(e,n){return UR(e).put(function(s){return{name:s.name,readTime:Tc(cr(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function BR(t){return tr(t,"bundles")}function UR(t){return tr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Jx(e,r)}getOverlay(e,n){return Hh(e).get(FR(this.userId,n)).next(r=>r?Lw(this.serializer,r):null)}getOverlays(e,n){const r=zi();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new XT(n,o);s.push(this.ht(e,a))}),q.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Wr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Hh(e).j("collectionPathOverlayIndex",a))}),q.waitFor(i)}getOverlaysForCollection(e,n,r){const s=zi(),i=Wr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Hh(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=Lw(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=zi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Hh(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{const h=Lw(this.serializer,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}ht(e,n){return Hh(e).put(function(s,i,o){const[a,c,u]=FR(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Am(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Hh(t){return tr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fJ{Pt(e){return tr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Fn.fromUint8Array(r):Fn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Tm(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Wo(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ol(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?qL(e)?this.dt(n,Number.MAX_SAFE_INTEGER):qx(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Le()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(wn(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),Re.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Gl.vt=new Gl;function mJ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function zR(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=mJ(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class pJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=zR(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=zR(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class gJ{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class yJ{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Kh{constructor(){this.jt=new pJ,this.Ht=new gJ(this.jt),this.Jt=new yJ(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hl(this.indexId,this.documentKey,this.arrayValue,r)}}function ua(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=$R(t.arrayValue,e.arrayValue),n!==0?n:(n=$R(t.directionalValue,e.directionalValue),n!==0?n:Re.comparator(t.documentKey,e.documentKey)))}function $R(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.Xt=new en((n,r)=>Tn.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(qe(e.collectionGroup===this.collectionId),this.nn)return!1;const n=eE(e);if(n!==void 0&&!this.sn(n))return!1;const r=Ll(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new en(Tn.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new uy(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new uy(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new uy(r.field,r.dir==="asc"?0:1)));return new yv(yv.UNKNOWN_ID,this.collectionId,n,Sm.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){var e,n;if(qe(t instanceof Nt||t instanceof Xt),t instanceof Nt){if(t instanceof rF){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Nt.create(t.field,"==",i)))||[];return Xt.create(s,"or")}return t}const r=t.filters.map(s=>FF(s));return Xt.create(r,t.op)}function vJ(t){if(t.getFilters().length===0)return[];const e=pE(FF(t));return qe(VF(e)),fE(e)||mE(e)?[e]:e.getFilters()}function fE(t){return t instanceof Nt}function mE(t){return t instanceof Xt&&WT(t)}function VF(t){return fE(t)||mE(t)||function(n){if(n instanceof Xt&&iE(n)){for(const r of n.getFilters())if(!fE(r)&&!mE(r))return!1;return!0}return!1}(t)}function pE(t){if(qe(t instanceof Nt||t instanceof Xt),t instanceof Nt)return t;if(t.filters.length===1)return pE(t.filters[0]);const e=t.filters.map(r=>pE(r));let n=Xt.create(e,t.op);return n=bv(n),VF(n)?n:(qe(n instanceof Xt),qe(jd(n)),qe(n.filters.length>1),n.filters.reduce((r,s)=>eI(r,s)))}function eI(t,e){let n;return qe(t instanceof Nt||t instanceof Xt),qe(e instanceof Nt||e instanceof Xt),n=t instanceof Nt?e instanceof Nt?function(s,i){return Xt.create([s,i],"and")}(t,e):GR(t,e):e instanceof Nt?GR(e,t):function(s,i){if(qe(s.filters.length>0&&i.filters.length>0),jd(s)&&jd(i))return eF(s,i.getFilters());const o=iE(s)?s:i,a=iE(s)?i:s,c=o.filters.map(u=>eI(u,a));return Xt.create(c,"or")}(t,e),bv(n)}function GR(t,e){if(jd(e))return eF(e,t.getFilters());{const n=e.filters.map(r=>eI(t,r));return Xt.create(n,"or")}}function bv(t){if(qe(t instanceof Nt||t instanceof Xt),t instanceof Nt)return t;const e=t.getFilters();if(e.length===1)return bv(e[0]);if(JL(t))return t;const n=e.map(s=>bv(s)),r=[];return n.forEach(s=>{s instanceof Nt?r.push(s):s instanceof Xt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Xt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(){this.un=new tI}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Ns.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class tI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new en(Vt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new en(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=new Uint8Array(0);class wJ{constructor(e,n){this.databaseId=n,this.cn=new tI,this.ln=new bl(r=>Sc(r),(r,s)=>gp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:Wr(s)};return HR(e).put(i)}return q.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[DL(n),""],!1,!0);return HR(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Ui(o.parent))}return r})}addFieldIndex(e,n){const r=qh(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=lu(e);return i.next(a=>{o.put(VR(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=qh(e),s=lu(e),i=au(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=qh(e),r=au(e),s=lu(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return q.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new WR(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=au(e);let s=!0;const i=new Map;return q.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=yt();const a=[];return q.forEach(i,(c,u)=>{pe("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`}(c)} to execute ${Sc(n)}`);const d=function(I,A){const M=eE(A);if(M===void 0)return null;for(const j of xv(I,M.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(u,c),h=function(I,A){const M=new Map;for(const j of Ll(A))for(const v of xv(I,j.fieldPath))switch(v.op){case"==":case"in":M.set(j.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return M.set(j.fieldPath.canonicalString(),v.value),Array.from(M.values())}return null}(u,c),m=function(I,A){const M=[];let j=!0;for(const v of Ll(A)){const E=v.kind===0?SR(I,v.fieldPath,I.startAt):TR(I,v.fieldPath,I.startAt);M.push(E.value),j&&(j=E.inclusive)}return new Ad(M,j)}(u,c),g=function(I,A){const M=[];let j=!0;for(const v of Ll(A)){const E=v.kind===0?TR(I,v.fieldPath,I.endAt):SR(I,v.fieldPath,I.endAt);M.push(E.value),j&&(j=E.inclusive)}return new Ad(M,j)}(u,c),w=this.In(c,u,m),y=this.In(c,u,g),T=this.Tn(c,u,h),b=this.En(c.indexId,d,w,m.inclusive,y,g.inclusive,T);return q.forEach(b,_=>r.G(_,n.limit).next(I=>{I.forEach(A=>{const M=Re.fromSegments(A.documentKey);o.has(M)||(o=o.add(M),a.push(M))})}))}).next(()=>a)}return q.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=vJ(Xt.create(e.filters,"and")).map(r=>aE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),d=[];for(let h=0;h<c;++h){const m=n?this.dn(n[h/u]):Sg,g=this.An(e,m,r[h%u],s),w=this.Rn(e,m,i[h%u],o),y=a.map(T=>this.An(e,m,T,!0));d.push(...this.createRange(g,w,y))}return d}An(e,n,r,s){const i=new Hl(e,Re.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new Hl(e,Re.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new WR(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return q.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new en(Tn.comparator),d=!1;for(const h of c.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Kh;for(const s of Ll(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);Gl.vt.It(i,o)}return r.zt()}dn(e){const n=new Kh;return Gl.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Kh;return Gl.vt.It(Nm(this.databaseId,n),r.Yt(function(i){const o=Ll(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Kh);let i=0;for(const o of Ll(e)){const a=r[i++];for(const c of s)if(this.fn(n,o.fieldPath)&&km(a))s=this.gn(s,o,a);else{const u=c.Yt(o.kind);Gl.vt.It(a,u)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new Kh;c.seed(a.zt()),Gl.vt.It(o,c.Yt(n.kind)),i.push(c)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Nt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=qh(e),s=lu(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return q.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(d,h){const m=h?new Sm(h.sequenceNumber,new Ns(Ic(h.readTime),new Re(Ui(h.documentKey)),h.largestBatchId)):Sm.empty(),g=d.fields.map(([w,y])=>new uy(Tn.fromServerFormat(w),y));return new yv(d.indexId,d.collectionGroup,g,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ht(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=qh(e),i=lu(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>q.forEach(a,c=>i.put(VR(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return q.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),q.forEach(a,c=>this.wn(e,s,c).next(u=>{const d=this.Sn(i,c);return u.isEqual(d)?q.resolve():this.bn(e,i,c,u,d)}))))})}Dn(e,n,r,s){return au(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return au(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=au(e);let i=new en(ua);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new Hl(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new en(ua);const s=this.Vn(n,e);if(s==null)return r;const i=eE(n);if(i!=null){const o=e.data.field(i.fieldPath);if(km(o))for(const a of o.arrayValue.values||[])r=r.add(new Hl(n.indexId,e.key,this.dn(a),s))}else r=r.add(new Hl(n.indexId,e.key,Sg,s));return r}bn(e,n,r,s,i){pe("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,u,d,h,m){const g=c.getIterator(),w=u.getIterator();let y=ou(g),T=ou(w);for(;y||T;){let b=!1,_=!1;if(y&&T){const I=d(y,T);I<0?_=!0:I>0&&(b=!0)}else y!=null?_=!0:b=!0;b?(h(T),T=ou(w)):_?(m(y),y=ou(g)):(y=ou(g),T=ou(w))}}(s,i,ua,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),q.waitFor(o)}yn(e){let n=1;return lu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ua(o,a)).filter((o,a,c)=>!a||ua(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ua(o,e),c=ua(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&c<0)s.push(o),s.push(o.Zt());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Sg,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Sg,[]];i.push(IDBKeyRange.bound(a,c))}return i}Cn(e,n){return ua(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(KR)}getMinOffset(e,n){return q.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||Le())).next(KR)}}function HR(t){return tr(t,"collectionParents")}function au(t){return tr(t,"indexEntries")}function qh(t){return tr(t,"indexConfiguration")}function lu(t){return tr(t,"indexState")}function KR(t){qe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;VT(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Ns(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rs{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rs(e,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},(d,h,m)=>(a++,m.delete()));i.push(c.next(()=>{qe(a===1)}));const u=[];for(const d of n.mutations){const h=zL(e,d.key.path,n.batchId);i.push(s.delete(h)),u.push(d.key)}return q.waitFor(i).next(()=>u)}function Ev(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Le();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class Zx{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){qe(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Zx(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return da(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=wu(e),o=da(e);return o.add({}).next(a=>{qe(typeof a=="number");const c=new YT(a,n,r,s),u=function(g,w,y){const T=y.baseMutations.map(_=>Am(g.ct,_)),b=y.mutations.map(_=>Am(g.ct,_));return{userId:w,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:T,mutations:b}}(this.serializer,this.userId,c),d=[];let h=new en((m,g)=>ht(m.canonicalString(),g.canonicalString()));for(const m of s){const g=zL(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),d.push(o.put(u)),d.push(i.put(g,iX))}return h.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),q.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return da(e).get(n).next(r=>r?(qe(r.userId===this.userId),Wl(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?q.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return da(e).J({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(qe(a.batchId>=r),i=Wl(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return da(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return da(e).U("userMutationsIndex",n).next(r=>r.map(s=>Wl(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=dy(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return wu(e).J({range:s},(o,a,c)=>{const[u,d,h]=o,m=Ui(d);if(u===this.userId&&n.path.isEqual(m))return da(e).get(h).next(g=>{if(!g)throw Le();qe(g.userId===this.userId),i.push(Wl(this.serializer,g))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new en(ht);const s=[];return n.forEach(i=>{const o=dy(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=wu(e).J({range:a},(u,d,h)=>{const[m,g,w]=u,y=Ui(g);m===this.userId&&i.path.isEqual(y)?r=r.add(w):h.done()});s.push(c)}),q.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=dy(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new en(ht);return wu(e).J({range:o},(c,u,d)=>{const[h,m,g]=c,w=Ui(m);h===this.userId&&r.isPrefixOf(w)?w.length===s&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(da(e).get(i).next(o=>{if(o===null)throw Le();qe(o.userId===this.userId),r.push(Wl(this.serializer,o))}))}),q.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return BF(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),q.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return q.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return wu(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=Ui(i[1]);s.push(c)}else a.done()}).next(()=>{qe(s.length===0)})})}containsKey(e,n){return UF(e,this.userId,n)}Nn(e){return zF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function UF(t,e,n){const r=dy(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return wu(t).J({range:i,H:!0},(a,c,u)=>{const[d,h,m]=a;d===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function da(t){return tr(t,"mutations")}function wu(t){return tr(t,"documentMutations")}function zF(t){return tr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Cc(0)}static kn(){return new Cc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Cc(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>et.fromTimestamp(new Dt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>cu(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(qe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return cu(e).J((o,a)=>{const c=gf(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>q.waitFor(i)).next(()=>s)}forEachTarget(e,n){return cu(e).J((r,s)=>{const i=gf(s);n(i)})}qn(e){return YR(e).get("targetGlobalKey").next(n=>(qe(n!==null),n))}Qn(e,n){return YR(e).put("targetGlobalKey",n)}Kn(e,n){return cu(e).put(OF(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Sc(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return cu(e).J({range:s,index:"queryTargetsIndex"},(o,a,c)=>{const u=gf(a);gp(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Ea(e);return n.forEach(o=>{const a=Wr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(s)}removeMatchingKeys(e,n,r){const s=Ea(e);return q.forEach(n,i=>{const o=Wr(i.path);return q.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Ea(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Ea(e);let i=yt();return s.J({range:r,H:!0},(o,a,c)=>{const u=Ui(o[1]),d=new Re(u);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=Wr(n.path),s=IDBKeyRange.bound([r],[DL(r)],!1,!0);let i=0;return Ea(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ot(e,n){return cu(e).get(n).next(r=>r?gf(r):null)}}function cu(t){return tr(t,"targets")}function YR(t){return tr(t,"targetGlobal")}function Ea(t){return tr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR([t,e],[n,r]){const s=ht(t,n);return s===0?ht(e,r):s}class bJ{constructor(e){this.Un=e,this.buffer=new en(QR),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EJ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_l(n)?pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await wl(n)}await this.Hn(3e5)})}}class SJ{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(os.oe);const r=new bJ(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(qR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qR):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),gu()<=bt.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function TJ(t,e){return new SJ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJ{constructor(e,n){this.db=e,this.garbageCollector=TJ(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return Tg(e,r)}removeReference(e,n,r){return Tg(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Tg(e,n)}nr(e,n){return function(s,i){let o=!1;return zF(s).Y(a=>UF(s,a,i).next(c=>(c&&(o=!0),q.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const c=this.nr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,et.min()),Ea(e).delete(function(h){return[0,Wr(h.path)]}(o))))});s.push(c)}}).next(()=>q.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Tg(e,n)}tr(e,n){const r=Ea(e);let s,i=os.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==os.oe&&n(new Re(Ui(s)),i),i=u,s=c):i=os.oe}).next(()=>{i!==os.oe&&n(new Re(Ui(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tg(t,e){return Ea(t).put(function(r,s){return{targetId:0,path:Wr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(){this.changes=new bl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Rl(e).put(r)}removeEntry(e,n,r){return Rl(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_v(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=bn.newInvalidDocument(n);return Rl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yh(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:bn.newInvalidDocument(n)};return Rl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yh(n))},(s,i)=>{r={document:this.ir(n,i),size:Ev(i)}}).next(()=>r)}getEntries(e,n){let r=_s();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=_s(),s=new Nn(Re.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,Ev(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return q.resolve();let s=new en(ZR);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(Yh(s.first()),Yh(s.last())),o=s.getIterator();let a=o.getNext();return Rl(e).J({index:"documentKeyIndex",range:i},(c,u,d)=>{const h=Re.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&ZR(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(Yh(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),_v(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rl(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let d=_s();for(const h of u){const m=this.ir(Re.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(vp(n,m)||s.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=_s();const o=JR(n,r),a=JR(n,Ns.max());return Rl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,d)=>{const h=this.ir(Re.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new NJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return XR(e).get("remoteDocumentGlobalKey").next(n=>(qe(!!n),n))}rr(e,n){return XR(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=dJ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(et.min())))return r}return bn.newInvalidDocument(e)}}function WF(t){return new CJ(t)}class NJ extends $F{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new bl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new en((i,o)=>ht(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=LR(this.cr.serializer,o);s=s.add(i.path.popLast());const u=Ev(c);r+=u-a.size,n.push(this.cr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=LR(this.cr.serializer,o.convertToNoDocument(et.min()));n.push(this.cr.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),q.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function XR(t){return tr(t,"remoteDocumentGlobal")}function Rl(t){return tr(t,"remoteDocumentsV14")}function Yh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JR(t,e){const n=e.documentKey.path.toArray();return[t,_v(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ZR(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ht(n[i],r[i]),s)return s;return s=ht(n.length,r.length),s||(s=ht(n[n.length-2],r[r.length-2]),s||ht(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Lf(r.mutation,s,as.empty(),Dt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,yt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=yt()){const s=zi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=mf();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,yt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=_s();const o=Of(),a=function(){return Of()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Jo)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Lf(d.mutation,u,d.mutation.getFieldMask(),Dt.now())):o.set(u.key,as.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new kJ(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Of();let s=new Nn((o,a)=>o-a),i=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||as.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(s.get(a.batchId)||yt()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=dF();d.forEach(m=>{if(!i.has(m)){const g=vF(n.get(m),r.get(m));g!==null&&h.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(zi());let a=-1,c=i;return o.next(u=>q.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?q.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,yt())).next(d=>({batchId:a,changes:uF(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(r=>{let s=mf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=mf();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,c=>{const u=function(h,m){return new Hc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,bn.newInvalidDocument(d)))});let a=mf();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Lf(d.mutation,u,as.empty(),Dt.now()),vp(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RJ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:cr(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:LF(s.bundledQuery),readTime:cr(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(){this.overlays=new Nn(Re.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zi();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=zi(),i=n.length+1,o=new Re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Nn((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=zi(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=zi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return q.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XT(n,r));let i=this.Ir.get(n);i===void 0&&(i=yt(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.Tr=new en(sr.Er),this.dr=new en(sr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new sr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new sr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Re(new Vt([])),r=new sr(n,e),s=new sr(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Re(new Vt([])),r=new sr(n,e),s=new sr(n,e+1);let i=yt();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new sr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Re.comparator(e.key,n.key)||ht(e.wr,n.wr)}static Ar(e,n){return ht(e.wr,n.wr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new en(sr.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YT(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new sr(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sr(n,0),s=new sr(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new en(ht);return n.forEach(s=>{const i=new sr(s,0),o=new sr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Re.isDocumentKey(i)||(i=i.child(""));const o=new sr(new Re(i),0);let a=new en(ht);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.wr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){qe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,s=>{const i=new sr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new sr(n,0),s=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(e){this.Mr=e,this.docs=function(){return new Nn(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let r=_s();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():bn.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=_s();const o=n.path,a=new Re(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||VT(LL(d),r)<=0||(s.has(d.key)||vp(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Le()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DJ(this)}getSize(e){return q.resolve(this.size)}}class DJ extends $F{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{constructor(e){this.persistence=e,this.Nr=new bl(n=>Sc(n),gp),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nI,this.targetCount=0,this.kr=Cc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Cc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n){this.qr={},this.overlays={},this.Qr=new os(0),this.Kr=!1,this.Kr=!0,this.$r=new AJ,this.referenceDelegate=e(this),this.Ur=new OJ(this),this.indexManager=new xJ,this.remoteDocumentCache=function(s){return new MJ(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new DF(n),this.Gr=new RJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PJ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new jJ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const s=new LJ(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class LJ extends VL{constructor(e){super(),this.currentSequenceNumber=e}}class e0{constructor(e){this.persistence=e,this.Jr=new nI,this.Yr=null}static Zr(e){return new e0(e)}get Xr(){if(this.Yr)return this.Yr;throw Le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const s=Re.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,et.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Kx("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fR,{unique:!0}),c.createObjectStore("documentMutations")}(e),eP(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),eP(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fR,{unique:!0});const h=u.store("mutations"),m=d.map(g=>h.put(g));return q.waitFor(m)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:yX});u.createIndex("collectionPathOverlayIndex",vX,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",xX,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:oX});u.createIndex("documentKeyIndex",aX),u.createIndex("collectionGroupIndex",lX)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:fX}).createIndex("sequenceNumberIndex",mX,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:pX}).createIndex("documentKeyIndex",gX,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=Ev(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>q.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>q.forEach(a,c=>{qe(c.userId===i.userId);const u=Wl(this.serializer,c);return BF(e,i.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const c=new Vt(o),u=function(h){return[0,Wr(h)]}(c);i.push(n.get(u).next(d=>d?q.resolve():(h=>n.put({targetId:0,path:Wr(h),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>q.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:hX});const r=n.store("collectionParents"),s=new tI,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Wr(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Vt(o);return i(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],u)=>{const d=Ui(a);return i(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=gf(s),o=OF(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),c=function(h){return h.document?new Re(Vt.fromString(h.document.name).popFirst(5)):h.noDocument?Re.fromSegments(h.noDocument.path):h.unknownDocument?Re.fromSegments(h.unknownDocument.path):Le()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>q.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=WF(this.serializer),i=new HF(e0.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:yt();Wl(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),q.forEach(a,(c,u)=>{const d=new Cr(u),h=Jx.lt(this.serializer,d),m=i.getIndexManager(d),g=Zx.lt(d,this.serializer,m,i.referenceDelegate);return new GF(s,g,h,m).recalculateAndSaveOverlaysForDocumentKeys(new tE(n,os.oe),c).next()})})}}function eP(t){t.createObjectStore("targetDocuments",{keyPath:uX}).createIndex("documentTargetsIndex",dX,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cX,{unique:!0}),t.createObjectStore("targetGlobal")}const Fw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rI{constructor(e,n,r,s,i,o,a,c,u,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=u,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!rI.D())throw new Ee(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new IJ(this,s),this.Ai=n+"main",this.serializer=new DF(c),this.Ri=new Qa(this.Ai,this.hi,new FJ(this.serializer)),this.$r=new fJ,this.Ur=new _J(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WF(this.serializer),this.Gr=new hJ,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&On("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(se.FAILED_PRECONDITION,Fw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new os(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ig(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(_l(e))return pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Qh(e).get("owner").next(n=>q.resolve(this.vi(n)))}Ci(e){return Ig(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=tr(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return q.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?q.resolve(!0):Qh(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Ee(se.FAILED_PRECONDITION,Fw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ig(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&pe("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new tE(e,os.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ig(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Zx.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wJ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Jx.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){pe("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===17?bX:c===16?_X:c===15?UT:c===14?GL:c===13?WL:c===12?wX:c===11?$L:void Le()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new tE(a,this.Qr?this.Qr.next():os.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ee(se.FAILED_PRECONDITION,FL);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Qh(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ee(se.FAILED_PRECONDITION,Fw)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qh(e).put("owner",n)}static D(){return Qa.D()}bi(e){const n=Qh(e);return n.get("owner").next(r=>this.vi(r)?(pe("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):q.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(On(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;DO()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return On("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qh(t){return tr(t,"owner")}function Ig(t){return tr(t,"clientMetadata")}function KF(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=yt(),s=yt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sI(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DO()?8:BL(er())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new VJ;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(gu()<=bt.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",yu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(gu()<=bt.DEBUG&&pe("QueryEngine","Query:",yu(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(gu()<=bt.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",yu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ts(n))):q.resolve())}Yi(e,n){if(IR(n))return q.resolve(null);let r=Ts(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=wv(n,null,"F"),r=Ts(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=yt(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,a);return this.ns(n,u,o,c.readTime)?this.Yi(e,wv(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return IR(n)||s.isEqual(et.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?q.resolve(null):(gu()<=bt.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yu(n)),this.rs(e,o,n,OL(s,-1)).next(a=>a))})}ts(e,n){let r=new en(lF(e));return n.forEach((s,i)=>{vp(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return gu()<=bt.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",yu(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ns.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Nn(ht),this._s=new bl(i=>Sc(i),gp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function YF(t,e,n,r){return new BJ(t,e,n,r)}async function QF(t,e){const n=Ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=yt();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function UJ(t,e){const n=Ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,m=h.keys();let g=q.resolve();return m.forEach(w=>{g=g.next(()=>d.getEntry(c,w)).next(y=>{const T=u.docVersions.get(w);qe(T!==null),y.version.compareTo(T)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=yt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function XF(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function zJ(t,e){const n=Ge(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,h)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Fn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(y,T,b){return y.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,g,d)&&a.push(n.Ur.updateTargetData(i,g))});let c=_s(),u=yt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push($J(i,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(et.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(h=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.os=s,i))}function $J(t,e,n){let r=yt(),s=yt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=_s();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(et.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):pe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function WJ(t,e){const n=Ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sv(t,e){const n=Ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new So(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Vd(t,e,n){const r=Ge(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!_l(o))throw o;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function gE(t,e,n){const r=Ge(t);let s=et.min(),i=yt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Ge(c),m=h._s.get(d);return m!==void 0?q.resolve(h.os.get(m)):h.Ur.getTargetData(u,d)}(r,o,Ts(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:et.min(),n?i:yt())).next(a=>(e4(r,aF(e),a),{documents:a,Ts:i})))}function JF(t,e){const n=Ge(t),r=Ge(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function ZF(t,e){const n=Ge(t),r=n.us.get(e)||et.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,OL(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(e4(n,e,s),s))}function e4(t,e,n){let r=t.us.get(e)||et.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}function tP(t,e){return`firestore_clients_${t}_${e}`}function nP(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Vw(t,e){return`firestore_targets_${t}_${e}`}class Tv{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Ee(s.error.code,s.error.message))),o?new Tv(e,n,s.state,i):(On("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ff{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Ee(r.error.code,r.error.message))),i?new Ff(e,r.state,s):(On("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=GT();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=UL(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Iv(e,i):(On("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class iI{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new iI(n.clientId,n.onlineState):(On("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yE{constructor(){this.activeTargetIds=GT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bw{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Nn(ht),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=tP(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new yE),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(tP(this.persistenceKey,r));if(s){const i=Iv.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Vw(this.persistenceKey,e));if(s){const i=Ff.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vw(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return pe("SharedClientState","READ",e,n),n}setItem(e,n){pe("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(pe("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=os.oe;if(i!=null)try{const a=JSON.parse(i);qe(typeof a=="number"),o=a}catch(a){On("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==os.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new Tv(this.currentUser,e,n,r),i=nP(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=nP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Vw(this.persistenceKey,e),i=new Ff(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Iv.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Tv.Rs(new Cr(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return Ff.Rs(s,n)}Ls(e){return iI.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach(c=>{s.has(c)||o.push(c)}),s.forEach(c=>{i.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=GT();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class t4{constructor(){this.so=new yE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cg=null;function Uw(){return Cg===null?Cg=function(){return 268435456+Math.round(2147483648*Math.random())}():Cg++,"0x"+Cg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="WebChannelConnection";class qJ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Uw(),c=this.xo(n,r.toUriEncodedString());pe("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then(d=>(pe("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw bm("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ph}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=HJ[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Uw();return new Promise((o,a)=>{const c=new kL;c.setWithCredentials(!0),c.listenOnce(RL.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cy.NO_ERROR:const d=c.getResponseJson();pe(Ir,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case cy.TIMEOUT:pe(Ir,`RPC '${e}' ${i} timed out`),a(new Ee(se.DEADLINE_EXCEEDED,"Request time out"));break;case cy.HTTP_ERROR:const h=c.getStatus();if(pe(Ir,`RPC '${e}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const w=function(T){const b=T.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(b)>=0?b:se.UNKNOWN}(g.status);a(new Ee(w,g.message))}else a(new Ee(se.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Ee(se.UNAVAILABLE,"Connection failed."));break;default:Le()}}finally{pe(Ir,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);pe(Ir,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Uw(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jL(),a=AL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");pe(Ir,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=o.createWebChannel(d,c);let m=!1,g=!1;const w=new KJ({Io:T=>{g?pe(Ir,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(pe(Ir,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),pe(Ir,`RPC '${e}' stream ${s} sending:`,T),h.send(T))},To:()=>h.close()}),y=(T,b,_)=>{T.listen(b,I=>{try{_(I)}catch(A){setTimeout(()=>{throw A},0)}})};return y(h,ff.EventType.OPEN,()=>{g||(pe(Ir,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),y(h,ff.EventType.CLOSE,()=>{g||(g=!0,pe(Ir,`RPC '${e}' stream ${s} transport closed`),w.So())}),y(h,ff.EventType.ERROR,T=>{g||(g=!0,bm(Ir,`RPC '${e}' stream ${s} transport errored:`,T),w.So(new Ee(se.UNAVAILABLE,"The operation could not be completed")))}),y(h,ff.EventType.MESSAGE,T=>{var b;if(!g){const _=T.data[0];qe(!!_);const I=_,A=I.error||((b=I[0])===null||b===void 0?void 0:b.error);if(A){pe(Ir,`RPC '${e}' stream ${s} received error:`,A);const M=A.status;let j=function(C){const S=zn[C];if(S!==void 0)return _F(S)}(M),v=A.message;j===void 0&&(j=se.INTERNAL,v="Unknown error status: "+M+" with message "+A.message),g=!0,w.So(new Ee(j,v)),h.close()}else pe(Ir,`RPC '${e}' stream ${s} received:`,_),w.bo(_)}}),y(a,PL.STAT_EVENT,T=>{T.stat===Zb.PROXY?pe(Ir,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Zb.NOPROXY&&pe(Ir,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(){return typeof window<"u"?window:null}function gy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){return new eJ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new oI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Ee(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YJ extends r4{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sJ(this.serializer,e),r=function(i){if(!("targetChange"in i))return et.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?et.min():o.readTime?cr(o.readTime):et.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=dE(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=vv(c)?{documents:kF(i,c)}:{query:RF(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SF(i,o.resumeToken);const u=cE(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(et.min())>0){a.readTime=Fd(i,o.snapshotVersion.toTimestamp());const u=cE(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=oJ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=dE(this.serializer),n.removeTarget=e,this.a_(n)}}class QJ extends r4{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=iJ(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=dE(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Am(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,uE(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(se.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,uE(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(se.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JJ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(On(n),this.D_=!1):pe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZJ{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Kc(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Ge(c);u.L_.add(4),await _p(u),u.q_.set("Unknown"),u.L_.delete(4),await n0(u)}(this))})}),this.q_=new JJ(r,s)}}async function n0(t){if(Kc(t))for(const e of t.B_)await e(!0)}async function _p(t){for(const e of t.B_)await e(!1)}function r0(t,e){const n=Ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cI(n)?lI(n):xh(n).r_()&&aI(n,e))}function Bd(t,e){const n=Ge(t),r=xh(n);n.N_.delete(e),r.r_()&&s4(n,e),n.N_.size===0&&(r.r_()?r.o_():Kc(n)&&n.q_.set("Unknown"))}function aI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xh(t).A_(e)}function s4(t,e){t.Q_.xe(e),xh(t).R_(e)}function lI(t){t.Q_=new QX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xh(t).start(),t.q_.v_()}function cI(t){return Kc(t)&&!xh(t).n_()&&t.N_.size>0}function Kc(t){return Ge(t).L_.size===0}function i4(t){t.Q_=void 0}async function eZ(t){t.q_.set("Online")}async function tZ(t){t.N_.forEach((e,n)=>{aI(t,e)})}async function nZ(t,e){i4(t),cI(t)?(t.q_.M_(e),lI(t)):t.q_.set("Unknown")}async function rZ(t,e,n){if(t.q_.set("Online"),e instanceof EF&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cv(t,r)}else if(e instanceof py?t.Q_.Ke(e):e instanceof bF?t.Q_.He(e):t.Q_.We(e),!n.isEqual(et.min()))try{const r=await XF(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.N_.get(u);d&&i.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const d=i.N_.get(c);if(!d)return;i.N_.set(c,d.withResumeToken(Fn.EMPTY_BYTE_STRING,d.snapshotVersion)),s4(i,c);const h=new So(d.target,c,u,d.sequenceNumber);aI(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){pe("RemoteStore","Failed to raise snapshot:",r),await Cv(t,r)}}async function Cv(t,e,n){if(!_l(e))throw e;t.L_.add(1),await _p(t),t.q_.set("Offline"),n||(n=()=>XF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await n0(t)})}function o4(t,e){return e().catch(n=>Cv(t,n,e))}async function vh(t){const e=Ge(t),n=ll(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sZ(e);)try{const s=await WJ(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,iZ(e,s)}catch(s){await Cv(e,s)}a4(e)&&l4(e)}function sZ(t){return Kc(t)&&t.O_.length<10}function iZ(t,e){t.O_.push(e);const n=ll(t);n.r_()&&n.V_&&n.m_(e.mutations)}function a4(t){return Kc(t)&&!ll(t).n_()&&t.O_.length>0}function l4(t){ll(t).start()}async function oZ(t){ll(t).p_()}async function aZ(t){const e=ll(t);for(const n of t.O_)e.m_(n.mutations)}async function lZ(t,e,n){const r=t.O_.shift(),s=QT.from(r,e,n);await o4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vh(t)}async function cZ(t,e){e&&ll(t).V_&&await async function(r,s){if(function(o){return wF(o)&&o!==se.ABORTED}(s.code)){const i=r.O_.shift();ll(r).s_(),await o4(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await vh(r)}}(t,e),a4(t)&&l4(t)}async function sP(t,e){const n=Ge(t);n.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const r=Kc(n);n.L_.add(3),await _p(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await n0(n)}async function vE(t,e){const n=Ge(t);e?(n.L_.delete(2),await n0(n)):e||(n.L_.add(2),await _p(n),n.q_.set("Unknown"))}function xh(t){return t.K_||(t.K_=function(n,r,s){const i=Ge(n);return i.w_(),new YJ(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:eZ.bind(null,t),Ro:tZ.bind(null,t),mo:nZ.bind(null,t),d_:rZ.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cI(t)?lI(t):t.q_.set("Unknown")):(await t.K_.stop(),i4(t))})),t.K_}function ll(t){return t.U_||(t.U_=function(n,r,s){const i=Ge(n);return i.w_(),new QJ(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oZ.bind(null,t),mo:cZ.bind(null,t),f_:aZ.bind(null,t),g_:lZ.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vh(t)):(await t.U_.stop(),t.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new uI(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dI(t,e){if(On("AsyncQueue",`${e}: ${t}`),_l(t))return new Ee(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=mf(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new Qu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.W_=new Nn(Re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ud{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ud(e,n,Qu.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class dZ{constructor(){this.queries=oP(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ge(n),i=s.queries;s.queries=oP(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new Ee(se.ABORTED,"Firestore shutting down"))}}function oP(){return new bl(t=>oF(t),Yx)}async function hI(t,e){const n=Ge(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new uZ,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=dI(o,`Initialization of query '${yu(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&mI(n)}async function fI(t,e){const n=Ge(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hZ(t,e){const n=Ge(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&mI(n)}function fZ(t,e,n){const r=Ge(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function mI(t){t.Y_.forEach(e=>{e.next()})}var xE,aP;(aP=xE||(xE={})).ea="default",aP.Cache="cache";class pI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.key=e}}class u4{constructor(e){this.key=e}}class mZ{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=yt(),this.mutatedKeys=yt(),this.Aa=lF(e),this.Ra=new Qu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iP,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),g=vp(this.query,h)?h:null,w=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;m&&g?m.data.isEqual(g.data)?w!==y&&(r.track({type:3,doc:g}),T=!0):this.ga(m,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),T=!0):m&&!g&&(r.track({type:1,doc:m}),T=!0,(c||u)&&(a=!0)),T&&(g?(o=o.add(g),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,w){const y=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le()}};return y(g)-y(w)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Ud(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iP,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=yt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new u4(r))}),this.da.forEach(r=>{e.has(r)||n.push(new c4(r))}),n}ba(e){this.Ta=e.Ts,this.da=yt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ud.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class pZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gZ{constructor(e){this.key=e,this.va=!1}}class yZ{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bl(a=>oF(a),Yx),this.Ma=new Map,this.xa=new Set,this.Oa=new Nn(Re.comparator),this.Na=new Map,this.La=new nI,this.Ba={},this.ka=new Map,this.qa=Cc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vZ(t,e,n=!0){const r=s0(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await d4(r,e,n,!0),s}async function xZ(t,e){const n=s0(t);await d4(n,e,!0,!1)}async function d4(t,e,n,r){const s=await Sv(t.localStore,Ts(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await gI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&r0(t.remoteStore,s),a}async function gI(t,e,n,r,s){t.Ka=(h,m,g)=>async function(y,T,b,_){let I=T.view.ma(b);I.ns&&(I=await gE(y.localStore,T.query,!1).then(({documents:v})=>T.view.ma(v,I)));const A=_&&_.targetChanges.get(T.targetId),M=_&&_.targetMismatches.get(T.targetId)!=null,j=T.view.applyChanges(I,y.isPrimaryClient,A,M);return wE(y,T.targetId,j.wa),j.snapshot}(t,h,m,g);const i=await gE(t.localStore,e,!0),o=new mZ(e,i.Ts),a=o.ma(i.documents),c=wp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);wE(t,n,u.wa);const d=new pZ(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function wZ(t,e,n){const r=Ge(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Yx(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bd(r.remoteStore,s.targetId),zd(r,s.targetId)}).catch(wl)):(zd(r,s.targetId),await Vd(r.localStore,s.targetId,!0))}async function _Z(t,e){const n=Ge(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bd(n.remoteStore,r.targetId))}async function bZ(t,e,n){const r=wI(t);try{const s=await function(o,a){const c=Ge(o),u=Dt.now(),d=a.reduce((g,w)=>g.add(w.key),yt());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=_s(),y=yt();return c.cs.getEntries(g,d).next(T=>{w=T,w.forEach((b,_)=>{_.isValidDocument()||(y=y.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(T=>{h=T;const b=[];for(const _ of a){const I=HX(_,h.get(_.key).overlayedDocument);I!=null&&b.push(new Jo(_.key,I,QL(I.value.mapValue),En.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,a)}).next(T=>{m=T;const b=T.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(g,T.batchId,b)})}).then(()=>({batchId:m.batchId,changes:uF(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Nn(ht)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await El(r,s.changes),await vh(r.remoteStore)}catch(s){const i=dI(s,"Failed to persist write");n.reject(i)}}async function h4(t,e){const n=Ge(t);try{const r=await zJ(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?qe(o.va):s.removedDocuments.size>0&&(qe(o.va),o.va=!1))}),await El(n,r,e)}catch(r){await wl(r)}}function lP(t,e,n){const r=Ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Ge(o);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(a)&&(u=!0)}),u&&mI(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EZ(t,e,n){const r=Ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Nn(Re.comparator);o=o.insert(i,bn.newNoDocument(i,et.min()));const a=yt().add(i),c=new xp(et.min(),new Map,new Nn(ht),o,a);await h4(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),xI(r)}else await Vd(r.localStore,e,!1).then(()=>zd(r,e,n)).catch(wl)}async function SZ(t,e){const n=Ge(t),r=e.batch.batchId;try{const s=await UJ(n.localStore,e);vI(n,r,null),yI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await El(n,s)}catch(s){await wl(s)}}async function TZ(t,e,n){const r=Ge(t);try{const s=await function(o,a){const c=Ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(qe(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);vI(r,e,n),yI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await El(r,s)}catch(s){await wl(s)}}function yI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vI(t,e,n){const r=Ge(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function zd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||f4(t,r)})}function f4(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Bd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xI(t))}function wE(t,e,n){for(const r of n)r instanceof c4?(t.La.addReference(r.key,e),IZ(t,r)):r instanceof u4?(pe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||f4(t,r.key)):Le()}function IZ(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(pe("SyncEngine","New document in limbo: "+n),t.xa.add(r),xI(t))}function xI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Re(Vt.fromString(e)),r=t.qa.next();t.Na.set(r,new gZ(n)),t.Oa=t.Oa.insert(n,r),r0(t.remoteStore,new So(Ts(yp(n.path)),r,"TargetPurposeLimboResolution",os.oe))}}async function El(t,e,n){const r=Ge(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=sI.Wi(c.targetId,u);i.push(h)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const d=Ge(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>q.forEach(u,m=>q.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>q.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!_l(h))throw h;pe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.os.get(m),w=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(m,y)}}}(r.localStore,i))}async function CZ(t,e){const n=Ge(t);if(!n.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const r=await QF(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new Ee(se.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await El(n,r.hs)}}function NZ(t,e){const n=Ge(t),r=n.Na.get(e);if(r&&r.va)return yt().add(r.key);{let s=yt();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function kZ(t,e){const n=Ge(t),r=await gE(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&wE(n,e.targetId,s.wa),s}async function RZ(t,e){const n=Ge(t);return ZF(n.localStore,e).then(r=>El(n,r))}async function PZ(t,e,n,r){const s=Ge(t),i=await function(a,c){const u=Ge(a),d=Ge(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,c).next(m=>m?u.localDocuments.getDocuments(h,m):q.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await vh(s.remoteStore):n==="acknowledged"||n==="rejected"?(vI(s,e,r||null),yI(s,e),function(a,c){Ge(Ge(a).mutationQueue).On(c)}(s.localStore,e)):Le(),await El(s,i)):pe("SyncEngine","Cannot apply mutation batch with id: "+e)}async function AZ(t,e){const n=Ge(t);if(s0(n),wI(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await cP(n,r.toArray());n.Qa=!0,await vE(n.remoteStore,!0);for(const i of s)r0(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(zd(n,o),Vd(n.localStore,o,!0))),Bd(n.remoteStore,o)}),await s,await cP(n,r),function(o){const a=Ge(o);a.Na.forEach((c,u)=>{Bd(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Nn(Re.comparator)}(n),n.Qa=!1,await vE(n.remoteStore,!1)}}async function cP(t,e,n){const r=Ge(t),s=[],i=[];for(const o of e){let a;const c=r.Ma.get(o);if(c&&c.length!==0){a=await Sv(r.localStore,Ts(c[0]));for(const u of c){const d=r.Fa.get(u),h=await kZ(r,d);h.snapshot&&i.push(h.snapshot)}}else{const u=await JF(r.localStore,o);a=await Sv(r.localStore,u),await gI(r,m4(u),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function m4(t){return sF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jZ(t){return function(n){return Ge(Ge(n).persistence).Qi()}(Ge(t).localStore)}async function MZ(t,e,n,r){const s=Ge(t);if(s.Qa)return void pe("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await ZF(s.localStore,aF(i[0])),a=xp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Fn.EMPTY_BYTE_STRING);await El(s,o,a);break}case"rejected":await Vd(s.localStore,e,!0),zd(s,e,r);break;default:Le()}}async function DZ(t,e,n){const r=s0(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){pe("SyncEngine","Adding an already active target "+s);continue}const i=await JF(r.localStore,s),o=await Sv(r.localStore,i);await gI(r,m4(i),o.targetId,!1,o.resumeToken),r0(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await Vd(r.localStore,s,!1).then(()=>{Bd(r.remoteStore,s),zd(r,s)}).catch(wl)}}function s0(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=h4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EZ.bind(null,e),e.Ca.d_=hZ.bind(null,e.eventManager),e.Ca.$a=fZ.bind(null,e.eventManager),e}function wI(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TZ.bind(null,e),e}class jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=t0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return YF(this.persistence,new qF,e.initialUser,this.serializer)}Ga(e){return new HF(e0.Zr,this.serializer)}Wa(e){return new t4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jm.provider={build:()=>new jm};class p4 extends jm{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await wI(this.Ja.syncEngine),await vh(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return YF(this.persistence,new qF,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new EJ(r,e.asyncQueue,n)}Ha(e,n){const r=new rX(n,this.persistence);return new nX(e.asyncQueue,r)}Ga(e){const n=KF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new rI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,n4(),gy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new t4}}class OZ extends p4{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Bw&&(this.sharedClientState.syncEngine={no:PZ.bind(null,n),ro:MZ.bind(null,n),io:DZ.bind(null,n),Qi:jZ.bind(null,n),eo:RZ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await AZ(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=n4();if(!Bw.D(n))throw new Ee(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CZ.bind(null,this.syncEngine),await vE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dZ}()}createDatastore(e){const n=t0(e.databaseInfo.databaseId),r=function(i){return new qJ(i)}(e.databaseInfo);return function(i,o,a,c){return new XJ(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new ZJ(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lP(this.syncEngine,n,0),function(){return rP.D()?new rP:new GJ}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,d){const h=new yZ(s,i,o,a,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ge(s);pe("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await _p(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ee(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=Ge(s),a={documents:i.map(h=>Pm(o.serializer,h))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Vt.emptyPath(),a,i.length),u=new Map;c.forEach(h=>{const m=rJ(o.serializer,h);u.set(m.key.toString(),m)});const d=[];return i.forEach(h=>{const m=u.get(h.toString());qe(!!m),d.push(m)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=Re.fromPath(r);this.mutations.push(new qT(s,this.precondition(s)))}),await async function(r,s){const i=Ge(r),o={writes:s.map(a=>Am(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,Vt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Le();n=et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ee(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(et.min())?En.exists(!1):En.updateTime(n):En.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(et.min()))throw new Ee(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(n)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new oI(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new LZ(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!pp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!wF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZ{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Cr.UNAUTHENTICATED,this.clientId=ML.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{pe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(pe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zw(t,e){t.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await QF(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BZ(t);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sP(e.remoteStore,s)),t._onlineComponents=e}async function BZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await zw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;bm("Error using user provided cache. Falling back to memory cache: "+n),await zw(t,new jm)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await zw(t,new jm);return t._offlineComponents}async function bI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await uP(t,t._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await uP(t,new Mm))),t._onlineComponents}function UZ(t){return bI(t).then(e=>e.syncEngine)}function zZ(t){return bI(t).then(e=>e.datastore)}async function Nv(t){const e=await bI(t),n=e.eventManager;return n.onListen=vZ.bind(null,e.syncEngine),n.onUnlisten=wZ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xZ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_Z.bind(null,e.syncEngine),n}function $Z(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new _I({next:m=>{d.Za(),o.enqueueAndForget(()=>fI(i,h));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new Ee(se.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new Ee(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new pI(yp(a.path),d,{includeMetadataChanges:!0,_a:!0});return hI(i,h)}(await Nv(t),t.asyncQueue,e,n,r)),r.promise}function WZ(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new _I({next:m=>{d.Za(),o.enqueueAndForget(()=>fI(i,h)),m.fromCache&&c.source==="server"?u.reject(new Ee(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new pI(a,d,{includeMetadataChanges:!0,_a:!0});return hI(i,h)}(await Nv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t,e,n){if(!n)throw new Ee(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GZ(t,e,n,r){if(e===!0&&r===!0)throw new Ee(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hP(t){if(!Re.isDocumentKey(t))throw new Ee(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fP(t){if(Re.isDocumentKey(t))throw new Ee(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Le()}function Ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=i0(t);throw new Ee(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function HZ(t,e){if(e<=0)throw new Ee(se.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class o0{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mP({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mP(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HQ;switch(r.type){case"firstParty":return new YQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dP.get(n);r&&(pe("ComponentProvider","Removing Datastore"),dP.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new no(this.firestore,e,this._query)}}class vr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class Ja extends no{constructor(e,n,r){super(e,n,yp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new Re(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function pn(t,e,...n){if(t=Gt(t),EI("collection","path",e),t instanceof o0){const r=Vt.fromString(e,...n);return fP(r),new Ja(t,null,r)}{if(!(t instanceof vr||t instanceof Ja))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Vt.fromString(e,...n));return fP(r),new Ja(t.firestore,null,r)}}function $d(t,e){if(t=Ar(t,o0),EI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new no(t,null,function(r){return new Hc(Vt.emptyPath(),r)}(e))}function kt(t,e,...n){if(t=Gt(t),arguments.length===1&&(e=ML.newId()),EI("doc","path",e),t instanceof o0){const r=Vt.fromString(e,...n);return hP(r),new vr(t,null,new Re(r))}{if(!(t instanceof vr||t instanceof Ja))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Vt.fromString(e,...n));return hP(r),new vr(t.firestore,t instanceof Ja?t.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new oI(this,"async_queue_retry"),this.Vu=()=>{const r=gy();r&&pe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=gy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=gy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new yi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_l(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw On("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=uI.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gP(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Si extends o0{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new pP,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pP(e),this._firestoreClient=void 0,await e}}}function KZ(t,e,n){n||(n="(default)");const r=up(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(xm(i,e))return s;throw new Ee(se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ee(se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function wh(t){if(t._terminated)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qZ(t),t._firestoreClient}function qZ(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,d){return new SX(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,g4(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new VZ(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nc(Fn.fromBase64String(e))}catch(n){throw new Ee(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nc(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function YZ(){return new qc("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QZ=/^__.*__$/;class XZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jo(e,this.data,this.fieldMask,n,this.fieldTransforms):new gh(e,this.data,n,this.fieldTransforms)}}class y4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Jo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function v4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le()}}class II{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new II(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(v4(this.Cu)&&QZ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||t0(e)}Qu(e,n,r,s=!1){return new II({Cu:e,methodName:n,qu:r,path:Tn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _h(t){const e=t._freezeSettings(),n=t0(t._databaseId);return new JZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);PI("Data must be an object, but it was:",o,r);const a=x4(r,o);let c,u;if(i.merge)c=new as(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const m=_E(e,h,n);if(!o.contains(m))throw new Ee(se.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_4(d,m)||d.push(m)}c=new as(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new XZ(new pr(a),c,u)}class l0 extends bp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof l0}}class CI extends bp{_toFieldTransform(e){return new KT(e.path,new Md)}isEqual(e){return e instanceof CI}}class NI extends bp{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ld(e.serializer,fF(e.serializer,this.$u));return new KT(e.path,n)}isEqual(e){return e instanceof NI&&this.$u===e.$u}}function kI(t,e,n,r){const s=t.Qu(1,e,n);PI("Data must be an object, but it was:",s,r);const i=[],o=pr.empty();Gc(r,(c,u)=>{const d=AI(e,c,n);u=Gt(u);const h=s.Nu(d);if(u instanceof l0)i.push(d);else{const m=Ep(u,h);m!=null&&(i.push(d),o.set(d,m))}});const a=new as(i);return new y4(o,a,s.fieldTransforms)}function RI(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[_E(e,r,n)],c=[s];if(i.length%2!=0)throw new Ee(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(_E(e,i[m])),c.push(i[m+1]);const u=[],d=pr.empty();for(let m=a.length-1;m>=0;--m)if(!_4(u,a[m])){const g=a[m];let w=c[m];w=Gt(w);const y=o.Nu(g);if(w instanceof l0)u.push(g);else{const T=Ep(w,y);T!=null&&(u.push(g),d.set(g,T))}}const h=new as(u);return new y4(d,h,o.fieldTransforms)}function ZZ(t,e,n,r=!1){return Ep(n,t.Qu(r?4:3,e))}function Ep(t,e){if(w4(t=Gt(t)))return PI("Unsupported field value:",e,t),x4(t,e);if(t instanceof bp)return function(r,s){if(!v4(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Ep(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fF(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Dt.fromDate(r);return{timestampValue:Fd(s.serializer,i)}}if(r instanceof Dt){const i=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fd(s.serializer,i)}}if(r instanceof SI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nc)return{bytesValue:SF(s.serializer,r._byteString)};if(r instanceof vr){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ZT(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof TI)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return HT(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${i0(r)}`)}(t,e)}function x4(t,e){const n={};return HL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(t,(r,s)=>{const i=Ep(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function w4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof SI||t instanceof Nc||t instanceof vr||t instanceof bp||t instanceof TI)}function PI(t,e,n){if(!w4(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=i0(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function _E(t,e,n){if((e=Gt(e))instanceof qc)return e._internalPath;if(typeof e=="string")return AI(t,e);throw kv("Field path arguments must be of type string or ",t,!1,void 0,n)}const eee=new RegExp("[~\\*/\\[\\]]");function AI(t,e,n){if(e.search(eee)>=0)throw kv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qc(...e.split("."))._internalPath}catch{throw kv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kv(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Ee(se.INVALID_ARGUMENT,a+t+c)}function _4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(c0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tee extends Rv{data(){return super.data()}}function c0(t,e){return typeof e=="string"?AI(t,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jI{}class MI extends jI{}function Pr(t,e,...n){let r=[];e instanceof jI&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof DI).length,a=i.filter(c=>c instanceof u0).length;if(o>1||o>0&&a>0)throw new Ee(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class u0 extends MI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new u0(e,n,r)}_apply(e){const n=this._parse(e);return E4(e._query,n),new no(e.firestore,e.converter,lE(e._query,n))}_parse(e){const n=_h(e.firestore);return function(i,o,a,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){vP(h,d);const g=[];for(const w of h)g.push(yP(c,i,w));m={arrayValue:{values:g}}}else m=yP(c,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||vP(h,d),m=ZZ(a,o,h,d==="in"||d==="not-in");return Nt.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gr(t,e,n){const r=e,s=c0("where",t);return u0._create(s,r,n)}class DI extends jI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new DI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)E4(o,c),o=lE(o,c)}(e._query,n),new no(e.firestore,e.converter,lE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class OI extends MI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new OI(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rm(i,o)}(e._query,this._field,this._direction);return new no(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Hc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ts(t,e="asc"){const n=e,r=c0("orderBy",t);return OI._create(r,n)}class LI extends MI{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new LI(e,n,r)}_apply(e){return new no(e.firestore,e.converter,wv(e._query,this._limit,this._limitType))}}function kc(t){return HZ("limit",t),LI._create("limit",t,"F")}function yP(t,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new Ee(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iF(e)&&n.indexOf("/")!==-1)throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Vt.fromString(n));if(!Re.isDocumentKey(r))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nm(t,new Re(r))}if(n instanceof vr)return Nm(t,n._key);throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${i0(n)}.`)}function vP(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E4(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class S4{convertValue(e,n="none"){switch(Ec(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ol(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gc(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>wn(o.doubleValue));return new TI(i)}convertGeoPoint(e){return new SI(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$T(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Im(e));default:return null}}convertTimestamp(e){const n=Wo(e);return new Dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Vt.fromString(e);qe(MF(r));const s=new bc(r.get(1),r.get(3)),i=new Re(r.popFirst(5));return s.isEqual(n)||On(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class nee extends S4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FI extends Rv{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(c0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yy extends FI{data(e={}){return super.data(e)}}class T4{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Du(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yy(this._firestore,this._userDataWriter,r.key,r,new Du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new yy(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Du(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new yy(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Du(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:ree(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ree(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){t=Ar(t,vr);const e=Ar(t.firestore,Si);return $Z(wh(e),t._key).then(n=>N4(e,t,n))}class h0 extends S4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,n)}}function gn(t){t=Ar(t,no);const e=Ar(t.firestore,Si),n=wh(e),r=new h0(e);return b4(t._query),WZ(n,t._query).then(s=>new T4(e,r,t,s))}function Zo(t,e,n){t=Ar(t,vr);const r=Ar(t.firestore,Si),s=d0(t.converter,e,n);return Sp(r,[a0(_h(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,En.none())])}function I4(t,e,n,...r){t=Ar(t,vr);const s=Ar(t.firestore,Si),i=_h(s);let o;return o=typeof(e=Gt(e))=="string"||e instanceof qc?RI(i,"updateDoc",t._key,e,n,r):kI(i,"updateDoc",t._key,e),Sp(s,[o.toMutation(t._key,En.exists(!0))])}function f0(t){return Sp(Ar(t.firestore,Si),[new yh(t._key,En.none())])}function C4(t,e){const n=Ar(t.firestore,Si),r=kt(t),s=d0(t.converter,e);return Sp(n,[a0(_h(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function Vs(t,...e){var n,r,s;t=Gt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gP(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gP(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,u,d;if(t instanceof vr)u=Ar(t.firestore,Si),d=yp(t._key.path),c={next:h=>{e[o]&&e[o](N4(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Ar(t,no);u=Ar(h.firestore,Si),d=h._query;const m=new h0(u);c={next:g=>{e[o]&&e[o](new T4(u,m,h,g))},error:e[o+1],complete:e[o+2]},b4(t._query)}return function(m,g,w,y){const T=new _I(y),b=new pI(g,T,w);return m.asyncQueue.enqueueAndForget(async()=>hI(await Nv(m),b)),()=>{T.Za(),m.asyncQueue.enqueueAndForget(async()=>fI(await Nv(m),b))}}(wh(u),d,a,c)}function Sp(t,e){return function(r,s){const i=new yi;return r.asyncQueue.enqueueAndForget(async()=>bZ(await UZ(r),s,i)),i.promise}(wh(t),e)}function N4(t,e,n){const r=n.docs.get(e._key),s=new h0(t);return new FI(t,s,e._key,r,new Du(n.hasPendingWrites,n.fromCache),e.converter)}class see{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=lee(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function iee(t){return new see(t)}class oee{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Mm.provider,this._offlineComponentProvider={build:n=>new p4(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class aee{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Mm.provider,this._offlineComponentProvider={build:n=>new OZ(n,e==null?void 0:e.cacheSizeBytes)}}}function lee(t){return new oee(void 0)}function cee(){return new aee}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uee={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dee{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_h(e)}set(e,n,r){this._verifyNotCommitted();const s=Sa(e,this._firestore),i=d0(s.converter,n,r),o=a0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,En.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Sa(e,this._firestore);let o;return o=typeof(n=Gt(n))=="string"||n instanceof qc?RI(this._dataReader,"WriteBatch.update",i._key,n,r,s):kI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Sa(e,this._firestore);return this._mutations=this._mutations.concat(new yh(n._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sa(t,e){if((t=Gt(t)).firestore!==e)throw new Ee(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hee extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=_h(n)}get(n){const r=Sa(n,this._firestore),s=new nee(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return Le();const o=i[0];if(o.isFoundDocument())return new Rv(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new Rv(this._firestore,s,r._key,null,r.converter);throw Le()})}set(n,r,s){const i=Sa(n,this._firestore),o=d0(i.converter,r,s),a=a0(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=Sa(n,this._firestore);let a;return a=typeof(r=Gt(r))=="string"||r instanceof qc?RI(this._dataReader,"Transaction.update",o._key,r,s,i):kI(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Sa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Sa(e,this._firestore),r=new h0(this._firestore);return super.get(e).then(s=>new FI(this._firestore,r,n._key,s._document,new Du(!1,!1),n.converter))}}function ro(t,e,n){t=Ar(t,Si);const r=Object.assign(Object.assign({},uee),n);return function(i){if(i.maxAttempts<1)throw new Ee(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const c=new yi;return i.asyncQueue.enqueueAndForget(async()=>{const u=await zZ(i);new FZ(i.asyncQueue,u,a,o,c).au()}),c.promise}(wh(t),s=>e(new hee(t,s)),r)}function cl(){return new CI("serverTimestamp")}function m0(t){return new NI("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fee(t){return wh(t=Ar(t,Si)),new dee(t,e=>Sp(t,e))}(function(e,n=!0){(function(s){ph=s})(Wc),Qi(new Ei("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Si(new KQ(r.getProvider("auth-internal")),new XQ(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ee(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bc(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ss(uR,"4.7.3",e),Ss(uR,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mee="type.googleapis.com/google.protobuf.Int64Value",pee="type.googleapis.com/google.protobuf.UInt64Value";function k4(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function bE(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>bE(e));if(typeof t=="function"||typeof t=="object")return k4(t,e=>bE(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Pv(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case mee:case pee:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Pv(e)):typeof t=="function"||typeof t=="object"?k4(t,e=>Pv(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xu extends Ys{constructor(e,n,r){super(`${VI}/${e}`,n||""),this.details=r}}function gee(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function yee(t,e){let n=gee(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!xP[o])return new Xu("internal","internal");n=xP[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Pv(s))}}catch{}return n==="ok"?null:new Xu(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="us-central1";function xee(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Xu("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class wee{constructor(e,n,r,s,i=EE,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new vee(n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=EE}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _ee(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function bee(t,e,n){return r=>See(t,e,r,{})}async function Eee(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function See(t,e,n,r){const s=t._url(e);return Tee(t,s,n,r)}async function Tee(t,e,n,r){n=bE(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const a=r.timeout||7e4,c=xee(a),u=await Promise.race([Eee(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new Xu("cancelled","Firebase Functions instance was deleted.");const d=yee(u.status,u.json);if(d)throw d;if(!u.json)throw new Xu("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new Xu("internal","Response is missing data field.");return{data:Pv(h)}}const wP="@firebase/functions",_P="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iee="auth-internal",Cee="app-check-internal",Nee="messaging-internal";function kee(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(Iee),a=r.getProvider(Nee),c=r.getProvider(Cee);return new wee(i,o,a,c,s,t)};Qi(new Ei(VI,n,"PUBLIC").setMultipleInstances(!0)),Ss(wP,_P,e),Ss(wP,_P,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ree(t=CT(),e=EE){const r=up(Gt(t),VI).getImmediate({identifier:e}),s=PO("functions");return s&&Pee(r,...s),r}function Pee(t,e,n){_ee(Gt(t),e,n)}function Qs(t,e,n){return bee(Gt(t),e)}kee(fetch.bind(self));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee=new Map,jee={activated:!1,tokenObservers:[]};function Ti(t){return Aee.get(t)||Object.assign({},jee)}const bP={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ym,this.pending.promise.catch(n=>{}),await Dee(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ym,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Dee(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oee={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Av=new dh("appCheck","AppCheck",Oee);function R4(t){if(!Ti(t).activated)throw Av.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lee="firebase-app-check-database",Fee=1,SE="firebase-app-check-store";let Ng=null;function Vee(){return Ng||(Ng=new Promise((t,e)=>{try{const n=indexedDB.open(Lee,Fee);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Av.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(SE,{keyPath:"compositeKey"})}}}catch(n){e(Av.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Ng)}function Bee(t,e){return Uee(zee(t),e)}async function Uee(t,e){const r=(await Vee()).transaction(SE,"readwrite"),i=r.objectStore(SE).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=c=>{o()},r.onerror=c=>{var u;a(Av.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function zee(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new cp("@firebase/app-check");function EP(t,e){return TT()?Bee(t,e).catch(n=>{TE.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ee={error:"UNKNOWN_ERROR"};function Wee(t){return Bx.encodeString(JSON.stringify(t),!1)}async function IE(t,e=!1){const n=t.app;R4(n);const r=Ti(n);let s=r.token,i;if(s&&!yf(s)&&(r.token=void 0,s=void 0),!s){const c=await r.cachedTokenPromise;c&&(yf(c)?s=c:await EP(n,void 0))}if(!e&&s&&yf(s))return{token:s.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),s=await Ti(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?TE.warn(c.message):TE.error(c),i=c}let a;return s?i?yf(s)?a={token:s.token,internalError:i}:a=TP(i):(a={token:s.token},r.token=s,await EP(n,s)):a=TP(i),o&&qee(n,a),a}async function Gee(t){const e=t.app;R4(e);const{provider:n}=Ti(e);{const{token:r}=await n.getToken();return{token:r}}}function Hee(t,e,n,r){const{app:s}=t,i=Ti(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&yf(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),SP(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>SP(t))}function P4(t,e){const n=Ti(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function SP(t){const{app:e}=t,n=Ti(e);let r=n.tokenRefresher;r||(r=Kee(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Kee(t){const{app:e}=t;return new Mee(async()=>{const n=Ti(e);let r;if(n.token?r=await IE(t,!0):r=await IE(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ti(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},bP.RETRIAL_MIN_WAIT,bP.RETRIAL_MAX_WAIT)}function qee(t,e){const n=Ti(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function yf(t){return t.expireTimeMillis-Date.now()>0}function TP(t){return{token:Wee($ee),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yee{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ti(this.app);for(const n of e)P4(this.app,n.next);return Promise.resolve()}}function Qee(t,e){return new Yee(t,e)}function Xee(t){return{getToken:e=>IE(t,e),getLimitedUseToken:()=>Gee(t),addTokenListener:e=>Hee(t,"INTERNAL",e),removeTokenListener:e=>P4(t.app,e)}}const Jee="@firebase/app-check",Zee="0.8.8",ete="app-check",IP="app-check-internal";function tte(){Qi(new Ei(ete,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Qee(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(IP).initialize()})),Qi(new Ei(IP,t=>{const e=t.getProvider("app-check").getImmediate();return Xee(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ss(Jee,Zee)}tte();const nte={apiKey:"AIzaSyBwGop-Ddr9kf8Yej9A1brTmQHcic7UqF8",authDomain:"osm-react.firebaseapp.com",projectId:"osm-react",storageBucket:"osm-react.appspot.com",messagingSenderId:"597848278073",appId:"1:597848278073:web:ad7623a33e3417510d39e8"},jv=BO(nte),rte=Lo.isNativePlatform(),Ln=rte?lL(jv,{persistence:_L}):UQ(jv),CE=globalThis;CE.__FM_DB__||(CE.__FM_DB__=KZ(jv,{localCache:iee({tabManager:cee()})}));const Me=CE.__FM_DB__,ste="europe-west1",Xs=Ree(jv,ste),ite=(t,e)=>CY(Ln,t,e),ote=(t,e)=>NY(Ln,t,e),ate=()=>AY(Ln),vy=new vo;vy.setCustomParameters({prompt:"select_account"});const Mv=new Af("apple.com");Mv.addScope("email");Mv.addScope("name");const A4=Lo.isNativePlatform(),lte=t=>{const e=typeof t=="object"&&t!==null&&"code"in t?String(t.code??""):"";return e==="auth/popup-blocked"||e==="auth/cancelled-popup-request"},CP=async()=>{if(A4)return Xb(Ln,vy);try{return await EL(Ln,vy)}catch(t){if(lte(t))return console.warn("[auth] Popup sign-in failed, falling back to redirect",t),Xb(Ln,vy);throw t}},NP=()=>A4?Xb(Ln,Mv):EL(Ln,Mv),kP=()=>rQ(Ln),cte=["Al","Ar","Ay","Ba","Be","Bu","Ca","Ce","Da","De","El","Em","Fa","Fe","Ga","Ge","Ha","He","Il","Is","Ka","Ke","Le","Ma","Me"],ute=["Ak","Bal","Can","Dem","Er","Fer","Gul","Hak","Ilg","Kar","Lem","Mor","Naz","Oz","Pol","Quz","Ras","Sar","Tas","Uzg","Var","Yen","Zor","Bar","Cel"],j4=["a","e","i","o","u","an","en","in","on","un","ar","er","ir","or","ur","am","em","im","om","um"],RP=cte.flatMap(t=>j4.map(e=>`${t}${e}`)),PP=ute.flatMap(t=>j4.map(e=>`${t}${e}`)),Dm=()=>{const t=RP[Math.floor(Math.random()*RP.length)],e=PP[Math.floor(Math.random()*PP.length)];return`${t} ${e}`},dte={GK:["positioning","reaction","longBall","strength","jump"],CB:["strength","tackling","jump","positioning","reaction"],LB:["acceleration","topSpeed","tackling","passing","agility"],RB:["acceleration","topSpeed","tackling","passing","agility"],CM:["passing","ballControl","ballKeeping","agility","reaction"],LM:["acceleration","topSpeed","dribbleSpeed","passing","ballControl"],RM:["acceleration","topSpeed","dribbleSpeed","passing","ballControl"],CAM:["passing","ballControl","shooting","agility","reaction"],LW:["topSpeed","dribbleSpeed","shooting","ballControl","passing"],RW:["topSpeed","dribbleSpeed","shooting","ballControl","passing"],ST:["shooting","shootPower","positioning","strength","topSpeed"]};function hte(t){return dte[t]}function p0(t,e){const n=hte(t),r=n.reduce((s,i)=>s+e[i],0);return parseFloat((r/n.length).toFixed(3))}const fte={GK:["GK"],CB:["CB"],LB:["LB","LM"],RB:["RB","RM"],CM:["CM","CAM"],LM:["LM","LW"],RM:["RM","RW"],CAM:["CAM","CM"],LW:["LW","LM","ST"],RW:["RW","RM","ST"],ST:["ST","CAM"]};function Kn(t){return fte[t]||[t]}const AP=t=>!Number.isFinite(t)||t<0?0:t>1?1:t;function BI(t){const e=AP(t.condition??.75),n=AP(t.motivation??.75),r=(t.attributes.strength+t.attributes.shootPower+t.attributes.topSpeed)/3,s=(t.attributes.ballControl+t.attributes.passing+t.attributes.agility)/3,i=(t.overall+r+s+e+n)/5,o=t.injuryStatus==="injured"?.1:0,a=Math.max(0,i-o);return parseFloat(a.toFixed(3))}const mte=1.001,pte=10.001,gte=t=>Number.isFinite(t)?t<=mte?t*100:t<=pte?t*10:t:0,Ii=t=>{if(typeof t!="number")return 0;const e=Math.round(gte(t));return Math.max(0,Math.min(100,e))},Hn=t=>Ii(t).toString(),xy=t=>typeof t!="number"?null:Ii(t),Kl=[{name:"4-4-2",positions:[{position:"GK",x:50,y:90},{position:"LB",x:15,y:70},{position:"CB",x:35,y:65},{position:"CB",x:65,y:65},{position:"RB",x:85,y:70},{position:"LM",x:15,y:45},{position:"CM",x:40,y:45},{position:"CM",x:60,y:45},{position:"RM",x:85,y:45},{position:"ST",x:40,y:20},{position:"ST",x:60,y:20}]},{name:"4-3-3",positions:[{position:"GK",x:50,y:90},{position:"LB",x:15,y:70},{position:"CB",x:35,y:65},{position:"CB",x:65,y:65},{position:"RB",x:85,y:70},{position:"CM",x:30,y:45},{position:"CM",x:50,y:40},{position:"CM",x:70,y:45},{position:"LW",x:20,y:25},{position:"ST",x:50,y:15},{position:"RW",x:80,y:25}]},{name:"3-5-2",positions:[{position:"GK",x:50,y:90},{position:"CB",x:30,y:70},{position:"CB",x:50,y:65},{position:"CB",x:70,y:70},{position:"LM",x:10,y:45},{position:"CM",x:30,y:45},{position:"CAM",x:50,y:40},{position:"CM",x:70,y:45},{position:"RM",x:90,y:45},{position:"ST",x:40,y:20},{position:"ST",x:60,y:20}]},{name:"4-5-1",positions:[{position:"GK",x:50,y:90},{position:"LB",x:15,y:70},{position:"CB",x:35,y:65},{position:"CB",x:65,y:65},{position:"RB",x:85,y:70},{position:"LM",x:15,y:50},{position:"CM",x:35,y:50},{position:"CAM",x:50,y:45},{position:"CM",x:65,y:50},{position:"RM",x:85,y:50},{position:"ST",x:50,y:20}]},{name:"4-2-3-1",positions:[{position:"GK",x:50,y:90},{position:"LB",x:15,y:70},{position:"CB",x:35,y:65},{position:"CB",x:65,y:65},{position:"RB",x:85,y:70},{position:"CM",x:40,y:55},{position:"CM",x:60,y:55},{position:"LW",x:20,y:35},{position:"CAM",x:50,y:35},{position:"RW",x:80,y:35},{position:"ST",x:50,y:20}]},{name:"5-3-2",positions:[{position:"GK",x:50,y:90},{position:"LB",x:10,y:70},{position:"CB",x:30,y:65},{position:"CB",x:50,y:60},{position:"CB",x:70,y:65},{position:"RB",x:90,y:70},{position:"CM",x:35,y:45},{position:"CAM",x:50,y:40},{position:"CM",x:65,y:45},{position:"ST",x:40,y:20},{position:"ST",x:60,y:20}]},{name:"5-4-1",positions:[{position:"GK",x:50,y:90},{position:"LB",x:10,y:70},{position:"CB",x:30,y:65},{position:"CB",x:50,y:60},{position:"CB",x:70,y:65},{position:"RB",x:90,y:70},{position:"LM",x:20,y:50},{position:"CM",x:40,y:50},{position:"CM",x:60,y:50},{position:"RM",x:80,y:50},{position:"ST",x:50,y:20}]},{name:"3-4-3",positions:[{position:"GK",x:50,y:90},{position:"CB",x:30,y:70},{position:"CB",x:50,y:65},{position:"CB",x:70,y:70},{position:"LM",x:10,y:50},{position:"CM",x:40,y:50},{position:"CM",x:60,y:50},{position:"RM",x:90,y:50},{position:"LW",x:20,y:25},{position:"ST",x:50,y:15},{position:"RW",x:80,y:25}]},{name:"4-1-4-1",positions:[{position:"GK",x:50,y:90},{position:"LB",x:15,y:70},{position:"CB",x:35,y:65},{position:"CB",x:65,y:65},{position:"RB",x:85,y:70},{position:"CM",x:50,y:55},{position:"LM",x:15,y:40},{position:"CM",x:35,y:40},{position:"CAM",x:65,y:40},{position:"RM",x:85,y:40},{position:"ST",x:50,y:20}]},{name:"4-4-1-1",positions:[{position:"GK",x:50,y:90},{position:"LB",x:15,y:70},{position:"CB",x:35,y:65},{position:"CB",x:65,y:65},{position:"RB",x:85,y:70},{position:"LM",x:15,y:50},{position:"CM",x:40,y:50},{position:"CM",x:60,y:50},{position:"RM",x:85,y:50},{position:"CAM",x:50,y:35},{position:"ST",x:50,y:20}]},{name:"3-4-1-2",positions:[{position:"GK",x:50,y:90},{position:"CB",x:30,y:70},{position:"CB",x:50,y:65},{position:"CB",x:70,y:70},{position:"LM",x:10,y:50},{position:"CM",x:40,y:50},{position:"CM",x:60,y:50},{position:"RM",x:90,y:50},{position:"CAM",x:50,y:35},{position:"ST",x:40,y:20},{position:"ST",x:60,y:20}]},{name:"4-3-2-1",positions:[{position:"GK",x:50,y:90},{position:"LB",x:15,y:70},{position:"CB",x:35,y:65},{position:"CB",x:65,y:65},{position:"RB",x:85,y:70},{position:"CM",x:30,y:55},{position:"CM",x:50,y:60},{position:"CM",x:70,y:55},{position:"CAM",x:40,y:35},{position:"CAM",x:60,y:35},{position:"ST",x:50,y:20}]}],NE=["GK","CB","LB","RB","CM","LM","RM","CAM","LW","RW","ST"],jP=2,yte=4,vte=()=>{const t=new Date,e=Math.floor(Math.random()*(yte-jP+1))+jP,n=new Date(t);return n.setFullYear(n.getFullYear()+e),{expiresAt:n.toISOString(),status:"active",salary:Math.floor(1500+Math.random()*3500),extensions:0}},xte=()=>({adAvailableAt:new Date(0).toISOString(),lastMethod:void 0,lastUpdatedAt:void 0}),MP=t=>{const e=typeof t=="number"?t:Number(t);if(!Number.isFinite(e))return 0;const n=Math.max(0,Math.min(100,e));return Number(n.toFixed(4))},Or=()=>parseFloat(Math.random().toFixed(3)),DP=()=>parseFloat((.6+Math.random()*.4).toFixed(3)),OP=(t,e)=>{const n=e||NE[Math.floor(Math.random()*NE.length)],r={strength:Or(),acceleration:Or(),topSpeed:Or(),dribbleSpeed:Or(),jump:Or(),tackling:Or(),ballKeeping:Or(),passing:Or(),longBall:Or(),agility:Or(),shooting:Or(),shootPower:Or(),positioning:Or(),reaction:Or(),ballControl:Or()},s=p0(n,r),i=Math.min(1,s+Math.random()*(1-s));return{id:String(t),name:Dm(),position:n,roles:Kn(n),overall:s,potential:i,attributes:r,age:Math.floor(Math.random()*17)+18,height:180,weight:75,squadRole:"reserve",condition:DP(),motivation:DP(),injuryStatus:"healthy",contract:vte(),rename:xte()}},wte=(t,e,n)=>{const r=[],s=Kl[0].positions.map(i=>i.position);s.forEach((i,o)=>{r.push(OP(o+1,i))});for(let i=s.length;i<30;i++)r.push(OP(i+1));return r.slice(0,11).forEach(i=>i.squadRole="starting"),r.slice(11,22).forEach(i=>i.squadRole="bench"),r.slice(22).forEach(i=>i.squadRole="reserve"),{id:t,name:e,manager:n,kitHome:"home",kitAway:"away",logo:null,budget:0,transferBudget:0,players:r}},wy=async(t,e,n,r)=>{const s=wte(t,e,n),i=kt(Me,"teams",t),o={...s,ownerUid:t},a=Wd(o),c=()=>Zo(i,a);try{await c()}catch(u){const d=u;if(d.code!=="permission-denied")throw d;const h=[Ln.currentUser,r==null?void 0:r.authUser];let m=d;for(const g of h)if(!(!g||g.uid!==t)){try{await g.getIdToken(!0)}catch(w){m=w instanceof Error?w:new Error(String((w==null?void 0:w.message)??w??"token refresh failed"));continue}try{await c(),m=null;break}catch(w){m=w instanceof Error?w:new Error(String((w==null?void 0:w.message)??w??"team write retry failed"))}}if(m)throw console.error("[team.createInitialTeam] Token refresh retry failed",m),m}return s},jn=async t=>{const e=await Sl(kt(Me,"teams",t));return e.exists()?e.data():null},_te=async(t,e)=>{await Zo(kt(Me,"teams",t),{name:e},{merge:!0})},LP=async(t,e)=>{const n=Wd({logo:e??null});await Zo(kt(Me,"teams",t),n,{merge:!0})},bte=async(t,e)=>{const n=kt(Me,"teams",t);return ro(Me,async r=>{const s=await r.get(n);if(!s.exists())throw new Error("Takm bulunamad.");const i=s.data(),o=Number.isFinite(i==null?void 0:i.transferBudget)?Number(i==null?void 0:i.transferBudget):Number.isFinite(i==null?void 0:i.budget)?Number(i==null?void 0:i.budget):0,a=Math.max(0,Math.round(o+e));return r.update(n,{budget:a,transferBudget:a}),a})},Wd=t=>{if(Array.isArray(t))return t.map(e=>Wd(e));if(t&&typeof t=="object"){const e=Object.entries(t).filter(([,n])=>n!==void 0).map(([n,r])=>[n,Wd(r)]);return Object.fromEntries(e)}return t},La=async(t,e,n)=>{const r={players:Wd(e)};if(n){const{formation:s,shape:i,squads:o,tactics:a,customFormations:c}=n,u=A=>Array.from(new Set((A??[]).map(M=>String(M)))).filter(Boolean),d=typeof s=="string"&&s.trim().length>0?s.trim():"auto",h=typeof i=="string"&&i.trim().length>0?i.trim():void 0,m={starters:u(o==null?void 0:o.starters),bench:u(o==null?void 0:o.bench),reserves:u(o==null?void 0:o.reserves)},g=new Set(e.map(A=>String(A.id))),w=new Set(m.starters),y=[...m.starters,...m.bench,...m.reserves].filter(A=>!g.has(A));if(y.length>0)throw new Error("Unknown player ids: "+y.join(", "));const T=new Date().toISOString(),b=a&&typeof a=="object"?a:{},I=(A=>{if(!A||typeof A!="object")return;const M={};return Object.entries(A).forEach(([j,v])=>{if(!v||typeof v!="object")return;const E={};Object.entries(v).forEach(([C,S])=>{const P=String(C);if(!g.has(P)||!w.has(P)||!S||typeof S!="object")return;const R=MP(S.x),k=MP(S.y),W=S.position,J=typeof W=="string"&&NE.includes(W.toUpperCase())?W.toUpperCase():"CM";E[P]={x:R,y:k,position:J}}),Object.keys(E).length>0&&(M[String(j)]=E)}),Object.keys(M).length>0?M:void 0})(c);r.plan={formation:d,starters:m.starters,bench:m.bench,reserves:m.reserves,updatedAt:T,...h?{shape:h}:{},...I?{customFormations:I}:{}},r.lineup={formation:d,tactics:b,starters:m.starters,subs:m.bench,reserves:m.reserves,updatedAt:T,...h?{shape:h}:{},...I?{customFormations:I}:{}}}await Zo(kt(Me,"teams",t),Wd(r),{merge:!0})},Ete=Qs(Xs,"renameClub"),Ste=Qs(Xs,"renameStadium"),Tte=async t=>(await Ete({name:t})).data,Ite=async t=>(await Ste({name:t})).data,UI=async(t,e)=>{const n=await jn(t);if(!n)return;const r=[...n.players,{...e,injuryStatus:e.injuryStatus??"healthy",squadRole:"reserve"}];return await Zo(kt(Me,"teams",t),{players:r},{merge:!0}),r},Cte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Nte=(t,e,n)=>{let r;const s=Cte[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ju(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const kte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ate={date:Ju({formats:kte,defaultWidth:"full"}),time:Ju({formats:Rte,defaultWidth:"full"}),dateTime:Ju({formats:Pte,defaultWidth:"full"})},jte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mte=(t,e,n,r)=>jte[t];function Fi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Dte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ote={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ute=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},zte={ordinalNumber:Ute,era:Fi({values:Dte,defaultWidth:"wide"}),quarter:Fi({values:Ote,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fi({values:Lte,defaultWidth:"wide"}),day:Fi({values:Fte,defaultWidth:"wide"}),dayPeriod:Fi({values:Vte,defaultWidth:"wide",formattingValues:Bte,defaultFormattingWidth:"wide"})};function Vi(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?Wte(a,h=>h.test(o)):$te(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function $te(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Wte(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function M4(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Gte=/^(\d+)(th|st|nd|rd)?/i,Hte=/\d+/i,Kte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qte={any:[/^b/i,/^(a|c)/i]},Yte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qte={any:[/1/i,/2/i,/3/i,/4/i]},Xte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Jte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ene={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rne={ordinalNumber:M4({matchPattern:Gte,parsePattern:Hte,valueCallback:t=>parseInt(t,10)}),era:Vi({matchPatterns:Kte,defaultMatchWidth:"wide",parsePatterns:qte,defaultParseWidth:"any"}),quarter:Vi({matchPatterns:Yte,defaultMatchWidth:"wide",parsePatterns:Qte,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vi({matchPatterns:Xte,defaultMatchWidth:"wide",parsePatterns:Jte,defaultParseWidth:"any"}),day:Vi({matchPatterns:Zte,defaultMatchWidth:"wide",parsePatterns:ene,defaultParseWidth:"any"}),dayPeriod:Vi({matchPatterns:tne,defaultMatchWidth:"any",parsePatterns:nne,defaultParseWidth:"any"})},sne={code:"en-US",formatDistance:Nte,formatLong:Ate,formatRelative:Mte,localize:zte,match:rne,options:{weekStartsOn:0,firstWeekContainsDate:1}};let ine={};function Tp(){return ine}const D4=6048e5,one=864e5;function Ci(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function FP(t){const e=Ci(t);return e.setHours(0,0,0,0),e}function VP(t){const e=Ci(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ane(t,e){const n=FP(t),r=FP(e),s=+n-VP(n),i=+r-VP(r);return Math.round((s-i)/one)}function Rc(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function lne(t){const e=Ci(t),n=Rc(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function cne(t){const e=Ci(t);return ane(e,lne(e))+1}function Om(t,e){var a,c,u,d;const n=Tp(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ci(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Dv(t){return Om(t,{weekStartsOn:1})}function O4(t){const e=Ci(t),n=e.getFullYear(),r=Rc(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Dv(r),i=Rc(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Dv(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function une(t){const e=O4(t),n=Rc(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Dv(n)}function dne(t){const e=Ci(t),n=+Dv(e)-+une(e);return Math.round(n/D4)+1}function L4(t,e){var d,h,m,g;const n=Ci(t),r=n.getFullYear(),s=Tp(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Rc(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Om(o,e),c=Rc(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=Om(c,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function hne(t,e){var a,c,u,d;const n=Tp(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=L4(t,e),i=Rc(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Om(i,e)}function fne(t,e){const n=Ci(t),r=+Om(n,e)-+hne(n,e);return Math.round(r/D4)+1}function Yt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ha={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Yt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Yt(n+1,2)},d(t,e){return Yt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Yt(t.getHours()%12||12,e.length)},H(t,e){return Yt(t.getHours(),e.length)},m(t,e){return Yt(t.getMinutes(),e.length)},s(t,e){return Yt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Yt(s,e.length)}},uu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},BP={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ha.y(t,e)},Y:function(t,e,n,r){const s=L4(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Yt(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Yt(i,e.length)},R:function(t,e){const n=O4(t);return Yt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Yt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Yt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Yt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ha.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Yt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=fne(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Yt(s,e.length)},I:function(t,e,n){const r=dne(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Yt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ha.d(t,e)},D:function(t,e,n){const r=cne(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Yt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Yt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Yt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Yt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=uu.noon:r===0?s=uu.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=uu.evening:r>=12?s=uu.afternoon:r>=4?s=uu.morning:s=uu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ha.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ha.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Yt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Yt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ha.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ha.s(t,e)},S:function(t,e){return ha.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return zP(r);case"XXXX":case"XX":return Fl(r);case"XXXXX":case"XXX":default:return Fl(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return zP(r);case"xxxx":case"xx":return Fl(r);case"xxxxx":case"xxx":default:return Fl(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+UP(r,":");case"OOOO":default:return"GMT"+Fl(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+UP(r,":");case"zzzz":default:return"GMT"+Fl(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Yt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Yt(r,e.length)}};function UP(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Yt(i,2)}function zP(t,e){return t%60===0?(t>0?"-":"+")+Yt(Math.abs(t)/60,2):Fl(t,e)}function Fl(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Yt(Math.trunc(r/60),2),i=Yt(r%60,2);return n+s+e+i}const $P=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},F4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},mne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return $P(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",$P(r,e)).replace("{{time}}",F4(s,e))},pne={p:F4,P:mne},gne=/^D+$/,yne=/^Y+$/,vne=["D","DD","YY","YYYY"];function xne(t){return gne.test(t)}function wne(t){return yne.test(t)}function _ne(t,e,n){const r=bne(t,e,n);if(console.warn(r),vne.includes(t))throw new RangeError(r)}function bne(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function Ene(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Sne(t){if(!Ene(t)&&typeof t!="number")return!1;const e=Ci(t);return!isNaN(Number(e))}const Tne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ine=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cne=/^'([^]*?)'?$/,Nne=/''/g,kne=/[a-zA-Z]/;function Rne(t,e,n){var d,h,m,g,w,y,T,b;const r=Tp(),s=(n==null?void 0:n.locale)??r.locale??sne,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((y=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((b=(T=r.locale)==null?void 0:T.options)==null?void 0:b.weekStartsOn)??0,a=Ci(t);if(!Sne(a))throw new RangeError("Invalid time value");let c=e.match(Ine).map(_=>{const I=_[0];if(I==="p"||I==="P"){const A=pne[I];return A(_,s.formatLong)}return _}).join("").match(Tne).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const I=_[0];if(I==="'")return{isToken:!1,value:Pne(_)};if(BP[I])return{isToken:!0,value:_};if(I.match(kne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:_}});s.localize.preprocessor&&(c=s.localize.preprocessor(a,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(_=>{if(!_.isToken)return _.value;const I=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&wne(I)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&xne(I))&&_ne(I,e,String(t));const A=BP[I[0]];return A(a,I,s.localize,u)}).join("")}function Pne(t){const e=t.match(Cne);return e?e[1].replace(Nne,"'"):t}function Ane(){return Object.assign({},Tp())}function WP(t,e,n){const r=Ane(),s=Dne(t,n.timeZone,n.locale??r.locale);return"formatToParts"in s?jne(s,e):Mne(s,e)}function jne(t,e){const n=t.formatToParts(e);for(let r=n.length-1;r>=0;--r)if(n[r].type==="timeZoneName")return n[r].value}function Mne(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(n);return r?r[0].substr(1):""}function Dne(t,e,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:e,timeZoneName:t})}function One(t,e){const n=Une(e);return"formatToParts"in n?Fne(n,t):Vne(n,t)}const Lne={year:0,month:1,day:2,hour:3,minute:4,second:5};function Fne(t,e){try{const n=t.formatToParts(e),r=[];for(let s=0;s<n.length;s++){const i=Lne[n[s].type];i!==void 0&&(r[i]=parseInt(n[s].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function Vne(t,e){const n=t.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const $w={},GP=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Bne=GP==="06/25/2014, 00:00:00"||GP==="06/25/2014 00:00:00";function Une(t){return $w[t]||($w[t]=Bne?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),$w[t]}function V4(t,e,n,r,s,i,o){const a=new Date(0);return a.setUTCFullYear(t,e,n),a.setUTCHours(r,s,i,o),a}const HP=36e5,zne=6e4,Ww={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function zI(t,e,n){if(!t)return 0;let r=Ww.timezoneZ.exec(t);if(r)return 0;let s,i;if(r=Ww.timezoneHH.exec(t),r)return s=parseInt(r[1],10),KP(s)?-(s*HP):NaN;if(r=Ww.timezoneHHMM.exec(t),r){s=parseInt(r[2],10);const o=parseInt(r[3],10);return KP(s,o)?(i=Math.abs(s)*HP+o*zne,r[1]==="+"?-i:i):NaN}if(Gne(t)){e=new Date(e||Date.now());const o=n?e:$ne(e),a=kE(o,t);return-(n?a:Wne(e,a,t))}return NaN}function $ne(t){return V4(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function kE(t,e){const n=One(t,e),r=V4(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let s=t.getTime();const i=s%1e3;return s-=i>=0?i:1e3+i,r-s}function Wne(t,e,n){let s=t.getTime()-e;const i=kE(new Date(s),n);if(e===i)return e;s-=i-e;const o=kE(new Date(s),n);return i===o?i:Math.max(i,o)}function KP(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}const qP={};function Gne(t){if(qP[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),qP[t]=!0,!0}catch{return!1}}const Hne=60*1e3,Kne={X:function(t,e,n){const r=Gw(n.timeZone,t);if(r===0)return"Z";switch(e){case"X":return YP(r);case"XXXX":case"XX":return _u(r);case"XXXXX":case"XXX":default:return _u(r,":")}},x:function(t,e,n){const r=Gw(n.timeZone,t);switch(e){case"x":return YP(r);case"xxxx":case"xx":return _u(r);case"xxxxx":case"xxx":default:return _u(r,":")}},O:function(t,e,n){const r=Gw(n.timeZone,t);switch(e){case"O":case"OO":case"OOO":return"GMT"+qne(r,":");case"OOOO":default:return"GMT"+_u(r,":")}},z:function(t,e,n){switch(e){case"z":case"zz":case"zzz":return WP("short",t,n);case"zzzz":default:return WP("long",t,n)}}};function Gw(t,e){const n=t?zI(t,e,!0)/Hne:(e==null?void 0:e.getTimezoneOffset())??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+t);return n}function Ov(t,e){const n=t<0?"-":"";let r=Math.abs(t).toString();for(;r.length<e;)r="0"+r;return n+r}function _u(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Ov(Math.floor(r/60),2),i=Ov(Math.floor(r%60),2);return n+s+e+i}function YP(t,e){return t%60===0?(t>0?"-":"+")+Ov(Math.abs(t)/60,2):_u(t,e)}function qne(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Ov(i,2)}function QP(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+t-+e}const Yne=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Hw=36e5,XP=6e4,Qne=2,zr={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Yne};function B4(t,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);const n=e.additionalDigits==null?Qne:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(Object.prototype.toString.call(t)!=="[object String]")return new Date(NaN);const r=Xne(t),{year:s,restDateString:i}=Jne(r.date,n),o=Zne(i,s);if(o===null||isNaN(o.getTime()))return new Date(NaN);if(o){const a=o.getTime();let c=0,u;if(r.time&&(c=ere(r.time),c===null||isNaN(c)))return new Date(NaN);if(r.timeZone||e.timeZone){if(u=zI(r.timeZone||e.timeZone,new Date(a+c)),isNaN(u))return new Date(NaN)}else u=QP(new Date(a+c)),u=QP(new Date(a+c+u));return new Date(a+c+u)}else return new Date(NaN)}function Xne(t){const e={};let n=zr.dateTimePattern.exec(t),r;if(n?(e.date=n[1],r=n[3]):(n=zr.datePattern.exec(t),n?(e.date=n[1],r=n[2]):(e.date=null,r=t)),r){const s=zr.timeZone.exec(r);s?(e.time=r.replace(s[1],""),e.timeZone=s[1].trim()):e.time=r}return e}function Jne(t,e){if(t){const n=zr.YYY[e],r=zr.YYYYY[e];let s=zr.YYYY.exec(t)||r.exec(t);if(s){const i=s[1];return{year:parseInt(i,10),restDateString:t.slice(i.length)}}if(s=zr.YY.exec(t)||n.exec(t),s){const i=s[1];return{year:parseInt(i,10)*100,restDateString:t.slice(i.length)}}}return{year:null}}function Zne(t,e){if(e===null)return null;let n,r,s;if(!t||!t.length)return n=new Date(0),n.setUTCFullYear(e),n;let i=zr.MM.exec(t);if(i)return n=new Date(0),r=parseInt(i[1],10)-1,ZP(e,r)?(n.setUTCFullYear(e,r),n):new Date(NaN);if(i=zr.DDD.exec(t),i){n=new Date(0);const o=parseInt(i[1],10);return rre(e,o)?(n.setUTCFullYear(e,0,o),n):new Date(NaN)}if(i=zr.MMDD.exec(t),i){n=new Date(0),r=parseInt(i[1],10)-1;const o=parseInt(i[2],10);return ZP(e,r,o)?(n.setUTCFullYear(e,r,o),n):new Date(NaN)}if(i=zr.Www.exec(t),i)return s=parseInt(i[1],10)-1,eA(s)?JP(e,s):new Date(NaN);if(i=zr.WwwD.exec(t),i){s=parseInt(i[1],10)-1;const o=parseInt(i[2],10)-1;return eA(s,o)?JP(e,s,o):new Date(NaN)}return null}function ere(t){let e,n,r=zr.HH.exec(t);if(r)return e=parseFloat(r[1].replace(",",".")),Kw(e)?e%24*Hw:NaN;if(r=zr.HHMM.exec(t),r)return e=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),Kw(e,n)?e%24*Hw+n*XP:NaN;if(r=zr.HHMMSS.exec(t),r){e=parseInt(r[1],10),n=parseInt(r[2],10);const s=parseFloat(r[3].replace(",","."));return Kw(e,n,s)?e%24*Hw+n*XP+s*1e3:NaN}return null}function JP(t,e,n){e=e||0,n=n||0;const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=e*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const tre=[31,28,31,30,31,30,31,31,30,31,30,31],nre=[31,29,31,30,31,30,31,31,30,31,30,31];function U4(t){return t%400===0||t%4===0&&t%100!==0}function ZP(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;const r=U4(t);if(r&&n>nre[e]||!r&&n>tre[e])return!1}return!0}function rre(t,e){if(e<1)return!1;const n=U4(t);return!(n&&e>366||!n&&e>365)}function eA(t,e){return!(t<0||t>52||e!=null&&(e<0||e>6))}function Kw(t,e,n){return!(t<0||t>=25||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}const sre=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function ire(t,e,n={}){e=String(e);const r=e.match(sre);if(r){const s=B4(n.originalDate||t,n);e=r.reduce(function(i,o){if(o[0]==="'")return i;const a=i.indexOf(o),c=i[a-1]==="'",u=i.replace(o,"'"+Kne[o[0]](s,o,n)+"'");return c?u.substring(0,a-1)+u.substring(a+1):u},e)}return Rne(t,e,n)}function ore(t,e,n){t=B4(t,n);const r=zI(e,t,!0),s=new Date(t.getTime()-r),i=new Date(0);return i.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),i.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),i}function Pc(t,e,n,r){return r={...r,timeZone:e,originalDate:t},ire(ore(t,e,{timeZone:r.timeZone}),n,r)}async function are(){if((await gn(pn(Me,"leagues"))).empty)try{await Qs(Xs,"bootstrapMonthlyLeaguesOneTime")({})}catch{const n=Ln.currentUser;if(!n)return;try{const r=await n.getIdToken();await fetch("https://europe-west1-osm-react.cloudfunctions.net/bootstrapMonthlyLeaguesOneTimeHttp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({})})}catch{}}}async function lre(){try{await Qs(Xs,"bootstrapMonthlyLeaguesOneTime")({});return}catch(t){t==null||t.code;const e=Ln.currentUser;if(!e)throw t;const n=await e.getIdToken(),o=await fetch("https://europe-west1-osm-react.cloudfunctions.net/bootstrapMonthlyLeaguesOneTimeHttp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({data:{}})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(`HTTP ${o.status}: ${a||"<no body>"}`)}}}async function kg(t){if(!t)throw new Error("teamId required");try{await Qs(Xs,"assignRealTeamToFirstAvailableBotSlot")({teamId:t})}catch(e){const n=Ln.currentUser;if(!n)throw e;const r=await n.getIdToken(),a=await fetch("https://europe-west1-osm-react.cloudfunctions.net/assignRealTeamToFirstAvailableBotSlotHttp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({teamId:t})});if(!a.ok){const c=await a.text().catch(()=>"");throw new Error(`HTTP ${a.status}: ${c||"<no body>"}`)}}}async function tA(t){const e=await Sl(kt(Me,"leagues",t));if(!e.exists())return;const n=e.data();if(n.state!=="scheduled"&&n.state!=="active")return;const r=pn(Me,"leagues",t,"fixtures");if((await gn(Pr(r,kc(1)))).empty)try{await Qs(Xs,"generateRoundRobinFixturesFn")({leagueId:t})}catch(i){console.warn("[ensureFixturesForLeague] failed",i)}}async function RE(t,e){const n=t||Pc(new Date,"Europe/Istanbul","yyyy-MM-dd"),i="https://europe-west1-osm-react.cloudfunctions.net/playAllForDayHttp",o=async()=>{const u=await Qs(Xs,"playAllForDayFn")({dayKey:n,force:!0,instant:!!(e!=null&&e.instant)});return(u==null?void 0:u.data)||{ok:!0,dayKey:n}},a=async()=>{const c=Ln.currentUser,u=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${await c.getIdToken()}`}:{}},body:JSON.stringify({dayKey:n,force:!0,instant:!!(e!=null&&e.instant)}),mode:"cors"});if(!u.ok){const d=await u.text().catch(()=>"");throw new Error(`HTTP ${u.status}: ${d||"<no body>"}`)}return await u.json()};{try{return await a()}catch{}return await o()}}async function z4(){var r,s,i,o,a,c;let t;try{const u=Pr($d(Me,"fixtures"),gr("status","==","scheduled"),ts("date","asc"),kc(1));t=await gn(u)}catch{const u=await gn(pn(Me,"leagues"));let d=null;for(const m of u.docs)try{const g=await gn(Pr(pn(m.ref,"fixtures"),gr("status","==","scheduled"),ts("date","asc"),kc(1)));if(!g.empty){const w=(i=(s=(r=g.docs[0].data())==null?void 0:r.date)==null?void 0:s.toDate)==null?void 0:i.call(s);w&&(!d||w<d.date)&&(d={date:w})}}catch{}if(!d)return null;const h=Pc(d.date,"Europe/Istanbul","yyyy-MM-dd");return await RE(h,{instant:!0})}if(t.empty)return null;const e=(c=(a=(o=t.docs[0].data())==null?void 0:o.date)==null?void 0:a.toDate)==null?void 0:c.call(a);if(!e)return null;const n=Pc(e,"Europe/Istanbul","yyyy-MM-dd");return await RE(n,{instant:!0})}function cre(t,e){let n=null;const r=kt(Me,"teams",t),s=Vs(r,i=>{const o=i.exists()?i.data():null,a=o==null?void 0:o.leagueId;if(n&&(n(),n=null),a){const d=kt(Me,"leagues",a);n=Vs(d,h=>{if(!h.exists()){e(null);return}e({id:h.id,...h.data()})});return}const c=Pr($d(Me,"teams"),gr("teamId","==",t),kc(1)),u=Vs(c,d=>{if(n&&(n(),n=null),d.empty){e(null);return}const h=d.docs[0].ref.parent.parent;n=Vs(h,m=>{if(!m.exists()){e(null);return}e({id:m.id,...m.data()})})});n=()=>{u()}});return()=>{n&&n(),s()}}async function Gd(t,e){let n;if(e){const s=t,i=e,o=pn(Me,"leagues",s,"fixtures");try{const a=Pr(o,gr("participants","array-contains",i),ts("date","asc"));n=await gn(a)}catch{const a=Pr(o,gr("participants","array-contains",i));n=await gn(a)}}else{const s=t;try{const i=Pr($d(Me,"fixtures"),gr("participants","array-contains",s),ts("date","asc"));n=await gn(i)}catch{const i=Pr($d(Me,"fixtures"),gr("participants","array-contains",s));n=await gn(i)}}const r=n.docs.map(s=>{const i=s.data(),o=i.date;return{id:s.id,round:i.round,date:o.toDate(),homeTeamId:i.homeTeamId,awayTeamId:i.awayTeamId,participants:i.participants??[i.homeTeamId,i.awayTeamId],status:i.status,score:i.score??null,replayPath:i.replayPath}});return r.sort((s,i)=>s.date.getTime()-i.date.getTime()),r}async function Ac(t){var i;const e=await Sl(kt(Me,"teams",t)),n=e.exists()?(i=e.data())==null?void 0:i.leagueId:void 0;if(n)return n;const r=Pr($d(Me,"teams"),gr("teamId","==",t),kc(1)),s=await gn(r);return s.empty?null:s.docs[0].ref.parent.parent.id}async function ure(t){const e=Pr($d(Me,"fixtures"),gr(YZ(),"==",t),kc(1)),n=await gn(e);if(n.empty)return null;const r=n.docs[0],s=r.data(),i=s.date,o={id:r.id,round:s.round,date:i.toDate(),homeTeamId:s.homeTeamId,awayTeamId:s.awayTeamId,participants:s.participants??[s.homeTeamId,s.awayTeamId],status:s.status,score:s.score??null,replayPath:s.replayPath},a=r.ref.parent.parent.id;return{fixture:o,leagueId:a}}async function Lv(t,e){try{const o=await Gd(t,e);if(o.length>0)return o}catch{}const n=await gn(pn(Me,"leagues",t,"slots"));if(n.empty)return[];const r=new Map;return n.docs.forEach(o=>{const a=o.data();r.set(a.slotIndex,a.teamId||null)}),(await gn(pn(Me,"leagues",t,"fixtures"))).docs.map(o=>{const a=o.data(),c=a.date,u=a.homeTeamId||r.get(a.homeSlot)||`slot-${a.homeSlot}`,d=a.awayTeamId||r.get(a.awaySlot)||`slot-${a.awaySlot}`;return{id:o.id,round:a.round,date:c.toDate(),homeTeamId:u,awayTeamId:d,participants:[u,d],status:a.status,score:a.score??null,replayPath:a.replayPath}}).filter(o=>o.homeTeamId===e||o.awayTeamId===e).sort((o,a)=>o.date.getTime()-a.date.getTime())}async function Za(t){const e=await gn(pn(Me,"leagues",t,"standings"));if(!e.empty){const s=[];e.docs.forEach(o=>{const a=o.data(),c=a.name||a.teamId||`Slot ${a.slotIndex}`,u=`slot-${a.slotIndex}`;s.push({id:u,name:c}),a.teamId&&s.push({id:a.teamId,name:c})});const i=new Set;return s.filter(o=>i.has(o.id)?!1:(i.add(o.id),!0))}const n=await gn(pn(Me,"leagues",t,"teams"));return n.empty?(await gn(pn(Me,"leagues",t,"slots"))).docs.map(s=>{const i=s.data();return{id:i.teamId||`slot-${i.slotIndex}`,name:i.name||i.teamId||`Bot ${i.botId||i.slotIndex}`}}):n.docs.map(s=>{const i=s.data();return{id:s.id,name:i.name??s.id}})}function $4(t,e){const n=pn(Me,"leagues",t,"standings");return Vs(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));s.sort((i,o)=>o.Pts!==i.Pts?o.Pts-i.Pts:o.GD!==i.GD?o.GD-i.GD:o.GF-i.GF),e(s)})}async function nA(){const t=await gn(pn(Me,"leagues")),e=[];for(const n of t.docs){const r=n.data(),s=await gn(pn(n.ref,"standings"));let i=[],o=0;if(s.empty){const a=await gn(pn(n.ref,"slots"));if(!a.empty)i=a.docs.map(c=>{const u=c.data();return u.type==="human"&&u.teamId&&o++,{id:u.teamId||`slot-${u.slotIndex}`,name:u.teamId||`Bot ${u.botId||u.slotIndex}`}});else{const c=await gn(pn(n.ref,"teams"));o=c.size,i=c.docs.map(u=>{const d=u.data();return{id:u.id,name:d.name||u.id}})}}else{const a=s.docs.map(c=>c.data());i=a.map(c=>({id:c.teamId||`slot-${c.slotIndex}`,name:c.name||c.teamId||`Slot ${c.slotIndex}`})),o=a.filter(c=>!!c.teamId).length}e.push({id:n.id,name:r.name,season:r.season,capacity:r.capacity,timezone:r.timezone,state:r.state,startDate:r.startDate,rounds:r.rounds,teamCount:o,teams:i})}return e}async function dre(t){const e=pn(Me,"leagues",t,"standings"),r=(await gn(e)).docs.map(s=>({id:s.id,...s.data()}));return r.sort((s,i)=>i.Pts!==s.Pts?i.Pts-s.Pts:i.GD!==s.GD?i.GD-s.GD:i.GF-s.GF),r}const rA=(t,e)=>{if(typeof t!="string")return null;const n=t.trim();return n?n.slice(0,e):null},sA=t=>typeof t!="string"?null:t.trim()||null,qw=async t=>{const e=kt(Me,"users",t),n=await Sl(e);if(!n.exists())return null;const r=n.data();return{contactPhone:sA(r==null?void 0:r.contactPhone),contactCrypto:sA(r==null?void 0:r.contactCrypto)}},hre=async(t,e)=>{const n={contactUpdatedAt:cl()};e.phone!==void 0&&(n.contactPhone=rA(e.phone,32)),e.crypto!==void 0&&(n.contactCrypto=rA(e.crypto,96)),await Zo(kt(Me,"users",t),n,{merge:!0})},W4=p.createContext(void 0),Vn=()=>{const t=p.useContext(W4);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},fre=({children:t})=>{const[e,n]=p.useState(null),[r,s]=p.useState(!1),[i,o]=p.useState(!1),a="fm_pending_social_registration",c=j=>{try{window.localStorage.setItem(a,JSON.stringify(j))}catch(v){console.warn("[AuthContext] Failed to persist pending social registration",v)}},u=()=>{try{const j=window.localStorage.getItem(a);return j?(window.localStorage.removeItem(a),JSON.parse(j)):null}catch(j){return console.warn("[AuthContext] Failed to read pending social registration",j),window.localStorage.removeItem(a),null}},d=(j,v)=>{const E=new Set(j.providerData.map(C=>C.providerId));return v&&E.add(v==="google"?"google.com":"apple.com"),{google:E.has("google.com"),apple:E.has("apple.com")}},h=async(j,v,E)=>{const C=E==null?void 0:E.trim(),[S,P]=await Promise.all([jn(j.uid),qw(j.uid)]),R=(S==null?void 0:S.manager)||j.displayName||Dm(),k=C||(S==null?void 0:S.name)||j.displayName||R||"Takimim";if(C&&j.displayName!==C)try{await Jk(j,{displayName:C})}catch(J){console.warn("[AuthContext] Failed to update profile display name",J)}S?C&&S.name!==C&&await _te(j.uid,C):(await wy(j.uid,k,R,{authUser:j}),kg(j.uid).catch(J=>{console.warn("[AuthContext] League assignment after social registration failed",J)}));const W=d(j,v);n({id:j.uid,username:R,email:j.email||"",teamName:C??(S==null?void 0:S.name)??k,teamLogo:(S==null?void 0:S.logo)??null,connectedAccounts:W,contactPhone:(P==null?void 0:P.contactPhone)??null,contactCrypto:(P==null?void 0:P.contactCrypto)??null})};p.useEffect(()=>{kP().then(j=>{if(j!=null&&j.user){const v=u();v&&h(j.user,v.provider,v.teamName)}}).catch(j=>{j&&typeof j=="object"&&"code"in j?j.code!=="auth/no-auth-event"&&console.warn("[AuthContext] redirect result failed",j):console.warn("[AuthContext] redirect result failed",j)})},[]),p.useEffect(()=>{if(!Lo.isNativePlatform())return;const j=Jb.addListener("appUrlOpen",({url:v})=>{v&&v.startsWith("fhsmanager://")&&kP().then(E=>{if(E!=null&&E.user){const C=u();C&&h(E.user,C.provider,C.teamName)}}).catch(E=>{E&&typeof E=="object"&&"code"in E?E.code!=="auth/no-auth-event"&&console.warn("[AuthContext] redirect handling failed",E):console.warn("[AuthContext] redirect handling failed",E)})});return()=>{j.remove()}},[]),p.useEffect(()=>{let j=!0;const v=Zk(Ln,async E=>{var C;try{if(E){const[S,P]=await Promise.all([jn(E.uid),qw(E.uid)]),R=((C=E.email)==null?void 0:C.split("@")[0])||"Kullanici",k=(S==null?void 0:S.name)||E.displayName||R||"Takimim",W=(S==null?void 0:S.manager)||R;if(j&&n({id:E.uid,username:W,email:E.email||"",teamName:k,teamLogo:(S==null?void 0:S.logo)??null,connectedAccounts:d(E),contactPhone:(P==null?void 0:P.contactPhone)??null,contactCrypto:(P==null?void 0:P.contactCrypto)??null}),!S)await wy(E.uid,k,W,{authUser:E}),await kg(E.uid);else if(!(S!=null&&S.leagueId))try{await kg(E.uid)}catch{}}else j&&n(null)}catch(S){console.error("[AuthContext] Failed to handle auth state change",S),j&&n(null)}finally{j&&o(!0)}});return()=>{j=!1,v()}},[]);const m=async(j,v)=>{s(!0);try{await ote(j,v)}finally{s(!1)}},g=async(j,v=5e3)=>{var E;((E=Ln.currentUser)==null?void 0:E.uid)!==j&&await new Promise((C,S)=>{let P=()=>{};const R=setTimeout(()=>{P(),C()},v);P=Zk(Ln,k=>{(k==null?void 0:k.uid)===j&&(clearTimeout(R),P(),C())},k=>{clearTimeout(R),P(),S(k)})})},w=async(j,v,E)=>{s(!0);try{const S=(await ite(j,v)).user;if(S){try{await g(S.uid)}catch(R){console.warn("[AuthContext] Waiting for auth state after sign up failed",R)}try{await S.getIdToken(!0)}catch(R){console.warn("[AuthContext] Failed to refresh ID token after sign up",R)}const P=Dm();try{await Jk(S,{displayName:E}).catch(k=>{console.warn("[AuthContext] Failed to update profile after sign up",k)}),await(async k=>{for(let J=1;J<=3;J+=1)try{await wy(k.uid,E,P,{authUser:k});return}catch(Q){const le=Q instanceof Error?Q.message:"";if(!(J<3&&(/uid/i.test(le)||/permission/i.test(le))))throw Q;try{await k.getIdToken(!0)}catch(V){console.warn("[AuthContext] Retrying team creation token refresh failed",V)}await new Promise(V=>setTimeout(V,200*J))}})(S),n({id:S.uid,username:P,email:S.email||j,teamName:E,teamLogo:null,connectedAccounts:{google:!1,apple:!1},contactPhone:null,contactCrypto:null}),kg(S.uid).catch(k=>{console.warn("[AuthContext] League assignment failed after registration",k)})}catch(R){throw console.error("Post-register setup failed:",R),R}}}finally{s(!1)}},y=async()=>{await ate(),n(null)},T=async()=>{s(!0);try{await CP()}finally{s(!1)}},b=async()=>{s(!0);try{await NP()}finally{s(!1)}},_=async(j,v)=>{const E=v.trim();if(!E)throw new Error("Tak?m ad? gerekli");s(!0);try{c({provider:j,teamName:E});const C=j==="google"?await CP():await NP(),S=C==null?void 0:C.user;if(!S)return;try{await S.getIdToken(!0)}catch(P){console.warn("[AuthContext] Failed to refresh ID token after social registration",P)}u(),await h(S,j,E)}catch(C){throw Lo.isNativePlatform()||u(),C}finally{s(!1)}},I=async j=>{await _("google",j)},A=async j=>{await _("apple",j)},M=p.useCallback(async()=>{const j=Ln.currentUser;if(j)try{const[v,E]=await Promise.all([jn(j.uid),qw(j.uid)]);n(C=>C&&{...C,teamName:(v==null?void 0:v.name)??C.teamName,teamLogo:(v==null?void 0:v.logo)??C.teamLogo??null,contactPhone:(E==null?void 0:E.contactPhone)??C.contactPhone??null,contactCrypto:(E==null?void 0:E.contactCrypto)??C.contactCrypto??null})}catch(v){console.error("[AuthContext] Failed to refresh team info",v)}},[]);return l.jsx(W4.Provider,{value:{user:e,login:m,register:w,logout:y,loginWithGoogle:T,loginWithApple:b,registerWithGoogle:I,registerWithApple:A,isAuthReady:i,isLoading:r,refreshTeamInfo:M},children:t})},G4=p.createContext(void 0),H4=()=>{const t=p.useContext(G4);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},mre=({children:t})=>{const[e,n]=p.useState("dark"),r=p.useCallback(()=>{n("dark"),document.documentElement.classList.add("dark");try{localStorage.setItem("theme","dark")}catch{}},[]);p.useEffect(()=>{r()},[r]);const s=p.useCallback(()=>{r()},[r]);return l.jsx(G4.Provider,{value:{theme:e,toggleTheme:s},children:t})};async function pre(t){const e=kt(Me,"users",t);(await Sl(e)).exists()||await Zo(e,{diamondBalance:0})}function gre(t,e){const n=kt(Me,"users",t);return Vs(n,r=>{const s=r.data();e((s==null?void 0:s.diamondBalance)??0)})}async function yre(t,{packId:e,amount:n,priceFiat:r}){const s=kt(Me,"users",t),i=pn(s,"diamondPurchases");try{await ro(Me,async o=>{o.update(s,{diamondBalance:m0(n)});const a=kt(i);o.set(a,{packId:e,amount:n,priceFiat:r,paymentMethod:"mock-crypto",status:"mock_paid",createdAt:cl()})}),G.success("deme tamamland")}catch(o){throw console.warn(o),G.error("deme baarsz"),o}}async function vre(t,e){const n=kt(Me,"users",t);try{await ro(Me,async r=>{var o;const i=((o=(await r.get(n)).data())==null?void 0:o.diamondBalance)??0;if(i<e)throw new Error("Yeterli elmas yok");r.update(n,{diamondBalance:i-e})})}catch(r){throw console.warn(r),G.error("Yeterli elmas yok"),r}}const K4=p.createContext(void 0),xre=({children:t})=>{const{user:e}=Vn(),[n,r]=p.useState(0);p.useEffect(()=>{if(!e)return;pre(e.id);const o=gre(e.id,a=>r(a));return()=>o()},[e]);const s=async o=>{e&&await yre(e.id,{packId:o.id,amount:o.amount,priceFiat:o.priceFiat})},i=async o=>{e&&await vre(e.id,o)};return l.jsx(K4.Provider,{value:{balance:n,purchase:s,spend:i},children:t})},Ni=()=>{const t=p.useContext(K4);if(!t)throw new Error("useDiamonds must be used within DiamondProvider");return t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bre=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>p.createElement("svg",{ref:c,..._re,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:q4("lucide",s),...a},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(bre,{ref:i,iconNode:e,className:q4(`lucide-${wre(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=Xe("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sre=Xe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=Xe("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=Xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Xe("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nre=Xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=Xe("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=Xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=Xe("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=Xe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Xe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=Xe("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=Xe("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=Xe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dre=Xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ore=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=Xe("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=Xe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=Xe("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=Xe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=Xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=Xe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ure=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=Xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=Xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=Xe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=Xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=Xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=Xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=Xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=Xe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Xe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=Xe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=Xe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=Xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=Xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=Xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=Xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=Xe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=Xe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=Xe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),aA={sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16"},iV=({size:t="md",showText:e=!1,className:n,textClassName:r})=>{const s=aA[t]??aA.md;return l.jsxs("div",{className:ue("flex items-center gap-2 select-none",n),children:[l.jsx("img",{src:"/Logo/Logo.png",alt:"FHS Futbol Menajerlik logo",className:ue("object-contain",s),loading:"lazy"}),e?l.jsx("span",{className:ue("font-semibold tracking-tight text-foreground",r),children:"FHS Futbol Menajerlik"}):null]})},lA=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cA=G2,g0=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return cA(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=lA(d)||lA(h);return s[u][m]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(w=>{let[y,T]=w;return Array.isArray(T)?T.includes({...i,...a}[y]):{...i,...a}[y]===T})?[...u,h,m]:u},[]);return cA(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},rse=g0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),fe=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?nW:"button";return l.jsx(o,{className:ue(rse({variant:e,size:n,className:t})),ref:i,...s})});fe.displayName="Button";const sse=g0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Mt({className:t,variant:e,...n}){return l.jsx("div",{className:ue(sse({variant:e}),t),...n})}function GI(t){const e=t+"CollectionProvider",[n,r]=Ps(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:T,children:b}=y,_=Se.useRef(null),I=Se.useRef(new Map).current;return l.jsx(s,{scope:T,itemMap:I,collectionRef:_,children:b})};o.displayName=e;const a=t+"CollectionSlot",c=rl(a),u=Se.forwardRef((y,T)=>{const{scope:b,children:_}=y,I=i(a,b),A=vt(T,I.collectionRef);return l.jsx(c,{ref:A,children:_})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=rl(d),g=Se.forwardRef((y,T)=>{const{scope:b,children:_,...I}=y,A=Se.useRef(null),M=vt(T,A),j=i(d,b);return Se.useEffect(()=>(j.itemMap.set(A,{ref:A,...I}),()=>void j.itemMap.delete(A))),l.jsx(m,{[h]:"",ref:M,children:_})});g.displayName=d;function w(y){const T=i(t+"CollectionConsumer",y);return Se.useCallback(()=>{const _=T.collectionRef.current;if(!_)return[];const I=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(T.itemMap.values()).sort((j,v)=>I.indexOf(j.ref.current)-I.indexOf(v.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},w,r]}var ise=p.createContext(void 0);function Ip(t){const e=p.useContext(ise);return t||e||"ltr"}var Xw=0;function y0(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??uA()),document.body.insertAdjacentElement("beforeend",t[1]??uA()),Xw++,()=>{Xw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xw--}},[])}function uA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Jw="focusScope.autoFocusOnMount",Zw="focusScope.autoFocusOnUnmount",dA={bubbles:!1,cancelable:!0},ose="FocusScope",Cp=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,c]=p.useState(null),u=mr(s),d=mr(i),h=p.useRef(null),m=vt(e,y=>c(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(I){if(g.paused||!a)return;const A=I.target;a.contains(A)?h.current=A:pa(h.current,{select:!0})},T=function(I){if(g.paused||!a)return;const A=I.relatedTarget;A!==null&&(a.contains(A)||pa(h.current,{select:!0}))},b=function(I){if(document.activeElement===document.body)for(const M of I)M.removedNodes.length>0&&pa(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",T);const _=new MutationObserver(b);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",T),_.disconnect()}}},[r,a,g.paused]),p.useEffect(()=>{if(a){fA.add(g);const y=document.activeElement;if(!a.contains(y)){const b=new CustomEvent(Jw,dA);a.addEventListener(Jw,u),a.dispatchEvent(b),b.defaultPrevented||(ase(hse(oV(a)),{select:!0}),document.activeElement===y&&pa(a))}return()=>{a.removeEventListener(Jw,u),setTimeout(()=>{const b=new CustomEvent(Zw,dA);a.addEventListener(Zw,d),a.dispatchEvent(b),b.defaultPrevented||pa(y??document.body,{select:!0}),a.removeEventListener(Zw,d),fA.remove(g)},0)}}},[a,u,d,g]);const w=p.useCallback(y=>{if(!n&&!r||g.paused)return;const T=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(T&&b){const _=y.currentTarget,[I,A]=lse(_);I&&A?!y.shiftKey&&b===A?(y.preventDefault(),n&&pa(I,{select:!0})):y.shiftKey&&b===I&&(y.preventDefault(),n&&pa(A,{select:!0})):b===_&&y.preventDefault()}},[n,r,g.paused]);return l.jsx(rt.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});Cp.displayName=ose;function ase(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(pa(r,{select:e}),document.activeElement!==n)return}function lse(t){const e=oV(t),n=hA(e,t),r=hA(e.reverse(),t);return[n,r]}function oV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hA(t,e){for(const n of t)if(!cse(n,{upTo:e}))return n}function cse(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function use(t){return t instanceof HTMLInputElement&&"select"in t}function pa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&use(t)&&e&&t.select()}}var fA=dse();function dse(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=mA(t,e),t.unshift(e)},remove(e){var n;t=mA(t,e),(n=t[0])==null||n.resume()}}}function mA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function hse(t){return t.filter(e=>e.tagName!=="A")}var e_="rovingFocusGroup.onEntryFocus",fse={bubbles:!1,cancelable:!0},Np="RovingFocusGroup",[ME,aV,mse]=GI(Np),[pse,v0]=Ps(Np,[mse]),[gse,yse]=pse(Np),lV=p.forwardRef((t,e)=>l.jsx(ME.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(ME.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(vse,{...t,ref:e})})}));lV.displayName=Np;var vse=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=p.useRef(null),g=vt(e,m),w=Ip(i),[y,T]=Bo({prop:o,defaultProp:a??null,onChange:c,caller:Np}),[b,_]=p.useState(!1),I=mr(u),A=aV(n),M=p.useRef(!1),[j,v]=p.useState(0);return p.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(e_,I),()=>E.removeEventListener(e_,I)},[I]),l.jsx(gse,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:y,onItemFocus:p.useCallback(E=>T(E),[T]),onItemShiftTab:p.useCallback(()=>_(!0),[]),onFocusableItemAdd:p.useCallback(()=>v(E=>E+1),[]),onFocusableItemRemove:p.useCallback(()=>v(E=>E-1),[]),children:l.jsx(rt.div,{tabIndex:b||j===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:Ne(t.onMouseDown,()=>{M.current=!0}),onFocus:Ne(t.onFocus,E=>{const C=!M.current;if(E.target===E.currentTarget&&C&&!b){const S=new CustomEvent(e_,fse);if(E.currentTarget.dispatchEvent(S),!S.defaultPrevented){const P=A().filter(Q=>Q.focusable),R=P.find(Q=>Q.active),k=P.find(Q=>Q.id===y),J=[R,k,...P].filter(Boolean).map(Q=>Q.ref.current);dV(J,d)}}M.current=!1}),onBlur:Ne(t.onBlur,()=>_(!1))})})}),cV="RovingFocusGroupItem",uV=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,c=Us(),u=i||c,d=yse(cV,n),h=d.currentTabStopId===u,m=aV(n),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:y}=d;return p.useEffect(()=>{if(r)return g(),()=>w()},[r,g,w]),l.jsx(ME.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(rt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:Ne(t.onMouseDown,T=>{r?d.onItemFocus(u):T.preventDefault()}),onFocus:Ne(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ne(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){d.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const b=_se(T,d.orientation,d.dir);if(b!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let I=m().filter(A=>A.focusable).map(A=>A.ref.current);if(b==="last")I.reverse();else if(b==="prev"||b==="next"){b==="prev"&&I.reverse();const A=I.indexOf(T.currentTarget);I=d.loop?bse(I,A+1):I.slice(A+1)}setTimeout(()=>dV(I))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});uV.displayName=cV;var xse={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wse(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function _se(t,e,n){const r=wse(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return xse[r]}function dV(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function bse(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var hV=lV,fV=uV,Ese=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},du=new WeakMap,Rg=new WeakMap,Pg={},t_=0,mV=function(t){return t&&(t.host||mV(t.parentNode))},Sse=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=mV(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Tse=function(t,e,n,r){var s=Sse(e,Array.isArray(t)?t:[t]);Pg[n]||(Pg[n]=new WeakMap);var i=Pg[n],o=[],a=new Set,c=new Set(s),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))d(m);else try{var g=m.getAttribute(r),w=g!==null&&g!=="false",y=(du.get(m)||0)+1,T=(i.get(m)||0)+1;du.set(m,y),i.set(m,T),o.push(m),y===1&&w&&Rg.set(m,!0),T===1&&m.setAttribute(n,"true"),w||m.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return d(e),a.clear(),t_++,function(){o.forEach(function(h){var m=du.get(h)-1,g=i.get(h)-1;du.set(h,m),i.set(h,g),m||(Rg.has(h)||h.removeAttribute(r),Rg.delete(h)),g||h.removeAttribute(n)}),t_--,t_||(du=new WeakMap,du=new WeakMap,Rg=new WeakMap,Pg={})}},x0=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Ese(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),Tse(r,s,n,"aria-hidden")):function(){return null}},by="right-scroll-bar-position",Ey="width-before-scroll-bar",Ise="with-scroll-bars-hidden",Cse="--removed-body-scroll-bar-size";function n_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Nse(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var kse=typeof window<"u"?p.useLayoutEffect:p.useEffect,pA=new WeakMap;function Rse(t,e){var n=Nse(null,function(r){return t.forEach(function(s){return n_(s,r)})});return kse(function(){var r=pA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||n_(a,null)}),i.forEach(function(a){s.has(a)||n_(a,o)})}pA.set(n,t)},[t]),n}function Pse(t){return t}function Ase(t,e){e===void 0&&(e=Pse);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function jse(t){t===void 0&&(t={});var e=Ase(null);return e.options=Li({async:!0,ssr:!1},t),e}var pV=function(t){var e=t.sideCar,n=dp(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Li({},n))};pV.isSideCarExport=!0;function Mse(t,e){return t.useMedium(e),pV}var gV=jse(),r_=function(){},w0=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:r_,onWheelCapture:r_,onTouchMoveCapture:r_}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noRelative,w=t.noIsolation,y=t.inert,T=t.allowPinchZoom,b=t.as,_=b===void 0?"div":b,I=t.gapMode,A=dp(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=m,j=Rse([n,e]),v=Li(Li({},A),s);return p.createElement(p.Fragment,null,d&&p.createElement(M,{sideCar:gV,removeScrollBar:u,shards:h,noRelative:g,noIsolation:w,inert:y,setCallbacks:i,allowPinchZoom:!!T,lockRef:n,gapMode:I}),o?p.cloneElement(p.Children.only(a),Li(Li({},v),{ref:j})):p.createElement(_,Li({},v,{className:c,ref:j}),a))});w0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};w0.classNames={fullWidth:Ey,zeroRight:by};var Dse=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ose(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Dse();return e&&t.setAttribute("nonce",e),t}function Lse(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Fse(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Vse=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Ose())&&(Lse(e,n),Fse(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Bse=function(){var t=Vse();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},yV=function(){var t=Bse(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Use={left:0,top:0,right:0,gap:0},s_=function(t){return parseInt(t||"",10)||0},zse=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[s_(n),s_(r),s_(s)]},$se=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Use;var e=zse(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Wse=yV(),Zu="data-scroll-locked",Gse=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ise,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Zu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(by,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ey,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(by," .").concat(by,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ey," .").concat(Ey,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Zu,`] {
    `).concat(Cse,": ").concat(a,`px;
  }
`)},gA=function(){var t=parseInt(document.body.getAttribute(Zu)||"0",10);return isFinite(t)?t:0},Hse=function(){p.useEffect(function(){return document.body.setAttribute(Zu,(gA()+1).toString()),function(){var t=gA()-1;t<=0?document.body.removeAttribute(Zu):document.body.setAttribute(Zu,t.toString())}},[])},Kse=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Hse();var i=p.useMemo(function(){return $se(s)},[s]);return p.createElement(Wse,{styles:Gse(i,!e,s,n?"":"!important")})},DE=!1;if(typeof window<"u")try{var Ag=Object.defineProperty({},"passive",{get:function(){return DE=!0,!0}});window.addEventListener("test",Ag,Ag),window.removeEventListener("test",Ag,Ag)}catch{DE=!1}var hu=DE?{passive:!1}:!1,qse=function(t){return t.tagName==="TEXTAREA"},vV=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!qse(t)&&n[e]==="visible")},Yse=function(t){return vV(t,"overflowY")},Qse=function(t){return vV(t,"overflowX")},yA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=xV(t,r);if(s){var i=wV(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Xse=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Jse=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},xV=function(t,e){return t==="v"?Yse(e):Qse(e)},wV=function(t,e){return t==="v"?Xse(e):Jse(e)},Zse=function(t,e){return t==="h"&&e==="rtl"?-1:1},eie=function(t,e,n,r,s){var i=Zse(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,c=e.contains(a),u=!1,d=o>0,h=0,m=0;do{if(!a)break;var g=wV(t,a),w=g[0],y=g[1],T=g[2],b=y-T-i*w;(w||b)&&xV(t,a)&&(h+=b,m+=w);var _=a.parentNode;a=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(u=!0),u},jg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vA=function(t){return[t.deltaX,t.deltaY]},xA=function(t){return t&&"current"in t?t.current:t},tie=function(t,e){return t[0]===e[0]&&t[1]===e[1]},nie=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},rie=0,fu=[];function sie(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(rie++)[0],i=p.useState(yV)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Aq([t.lockRef.current],(t.shards||[]).map(xA),!0).filter(Boolean);return y.forEach(function(T){return T.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(y,T){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=jg(y),_=n.current,I="deltaX"in y?y.deltaX:_[0]-b[0],A="deltaY"in y?y.deltaY:_[1]-b[1],M,j=y.target,v=Math.abs(I)>Math.abs(A)?"h":"v";if("touches"in y&&v==="h"&&j.type==="range")return!1;var E=yA(v,j);if(!E)return!0;if(E?M=v:(M=v==="v"?"h":"v",E=yA(v,j)),!E)return!1;if(!r.current&&"changedTouches"in y&&(I||A)&&(r.current=M),!M)return!0;var C=r.current||M;return eie(C,T,y,C==="h"?I:A)},[]),c=p.useCallback(function(y){var T=y;if(!(!fu.length||fu[fu.length-1]!==i)){var b="deltaY"in T?vA(T):jg(T),_=e.current.filter(function(M){return M.name===T.type&&(M.target===T.target||T.target===M.shadowParent)&&tie(M.delta,b)})[0];if(_&&_.should){T.cancelable&&T.preventDefault();return}if(!_){var I=(o.current.shards||[]).map(xA).filter(Boolean).filter(function(M){return M.contains(T.target)}),A=I.length>0?a(T,I[0]):!o.current.noIsolation;A&&T.cancelable&&T.preventDefault()}}},[]),u=p.useCallback(function(y,T,b,_){var I={name:y,delta:T,target:b,should:_,shadowParent:iie(b)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(A){return A!==I})},1)},[]),d=p.useCallback(function(y){n.current=jg(y),r.current=void 0},[]),h=p.useCallback(function(y){u(y.type,vA(y),y.target,a(y,t.lockRef.current))},[]),m=p.useCallback(function(y){u(y.type,jg(y),y.target,a(y,t.lockRef.current))},[]);p.useEffect(function(){return fu.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,hu),document.addEventListener("touchmove",c,hu),document.addEventListener("touchstart",d,hu),function(){fu=fu.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,hu),document.removeEventListener("touchmove",c,hu),document.removeEventListener("touchstart",d,hu)}},[]);var g=t.removeScrollBar,w=t.inert;return p.createElement(p.Fragment,null,w?p.createElement(i,{styles:nie(s)}):null,g?p.createElement(Kse,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function iie(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const oie=Mse(gV,sie);var kp=p.forwardRef(function(t,e){return p.createElement(w0,Li({},t,{ref:e,sideCar:oie}))});kp.classNames=w0.classNames;var OE=["Enter"," "],aie=["ArrowDown","PageUp","Home"],_V=["ArrowUp","PageDown","End"],lie=[...aie,..._V],cie={ltr:[...OE,"ArrowRight"],rtl:[...OE,"ArrowLeft"]},uie={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rp="Menu",[Lm,die,hie]=GI(Rp),[Yc,bV]=Ps(Rp,[hie,gl,v0]),_0=gl(),EV=v0(),[fie,Qc]=Yc(Rp),[mie,Pp]=Yc(Rp),SV=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=_0(e),[c,u]=p.useState(null),d=p.useRef(!1),h=mr(i),m=Ip(s);return p.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),l.jsx(Ax,{...a,children:l.jsx(fie,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:l.jsx(mie,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};SV.displayName=Rp;var pie="MenuAnchor",HI=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=_0(n);return l.jsx(rp,{...s,...r,ref:e})});HI.displayName=pie;var KI="MenuPortal",[gie,TV]=Yc(KI,{forceMount:void 0}),IV=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Qc(KI,e);return l.jsx(gie,{scope:e,forceMount:n,children:l.jsx(_r,{present:n||i.open,children:l.jsx(oh,{asChild:!0,container:s,children:r})})})};IV.displayName=KI;var zs="MenuContent",[yie,qI]=Yc(zs),CV=p.forwardRef((t,e)=>{const n=TV(zs,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Qc(zs,t.__scopeMenu),o=Pp(zs,t.__scopeMenu);return l.jsx(Lm.Provider,{scope:t.__scopeMenu,children:l.jsx(_r,{present:r||i.open,children:l.jsx(Lm.Slot,{scope:t.__scopeMenu,children:o.modal?l.jsx(vie,{...s,ref:e}):l.jsx(xie,{...s,ref:e})})})})}),vie=p.forwardRef((t,e)=>{const n=Qc(zs,t.__scopeMenu),r=p.useRef(null),s=vt(e,r);return p.useEffect(()=>{const i=r.current;if(i)return x0(i)},[]),l.jsx(YI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ne(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),xie=p.forwardRef((t,e)=>{const n=Qc(zs,t.__scopeMenu);return l.jsx(YI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),wie=rl("MenuContent.ScrollLock"),YI=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:w,...y}=t,T=Qc(zs,n),b=Pp(zs,n),_=_0(n),I=EV(n),A=die(n),[M,j]=p.useState(null),v=p.useRef(null),E=vt(e,v,T.onContentChange),C=p.useRef(0),S=p.useRef(""),P=p.useRef(0),R=p.useRef(null),k=p.useRef("right"),W=p.useRef(0),J=w?kp:p.Fragment,Q=w?{as:wie,allowPinchZoom:!0}:void 0,le=V=>{var re,Pe;const Z=S.current+V,ye=A().filter(Ze=>!Ze.disabled),ae=document.activeElement,ve=(re=ye.find(Ze=>Ze.ref.current===ae))==null?void 0:re.textValue,_e=ye.map(Ze=>Ze.textValue),de=Aie(_e,Z,ve),ze=(Pe=ye.find(Ze=>Ze.textValue===de))==null?void 0:Pe.ref.current;(function Ze(De){S.current=De,window.clearTimeout(C.current),De!==""&&(C.current=window.setTimeout(()=>Ze(""),1e3))})(Z),ze&&setTimeout(()=>ze.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),y0();const O=p.useCallback(V=>{var ye,ae;return k.current===((ye=R.current)==null?void 0:ye.side)&&Mie(V,(ae=R.current)==null?void 0:ae.area)},[]);return l.jsx(yie,{scope:n,searchRef:S,onItemEnter:p.useCallback(V=>{O(V)&&V.preventDefault()},[O]),onItemLeave:p.useCallback(V=>{var Z;O(V)||((Z=v.current)==null||Z.focus(),j(null))},[O]),onTriggerLeave:p.useCallback(V=>{O(V)&&V.preventDefault()},[O]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback(V=>{R.current=V},[]),children:l.jsx(J,{...Q,children:l.jsx(Cp,{asChild:!0,trapped:s,onMountAutoFocus:Ne(i,V=>{var Z;V.preventDefault(),(Z=v.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:l.jsx(rh,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:l.jsx(hV,{asChild:!0,...I,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:j,onEntryFocus:Ne(c,V=>{b.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(jx,{role:"menu","aria-orientation":"vertical","data-state":$V(T.open),"data-radix-menu-content":"",dir:b.dir,..._,...y,ref:E,style:{outline:"none",...y.style},onKeyDown:Ne(y.onKeyDown,V=>{const ye=V.target.closest("[data-radix-menu-content]")===V.currentTarget,ae=V.ctrlKey||V.altKey||V.metaKey,ve=V.key.length===1;ye&&(V.key==="Tab"&&V.preventDefault(),!ae&&ve&&le(V.key));const _e=v.current;if(V.target!==_e||!lie.includes(V.key))return;V.preventDefault();const ze=A().filter(re=>!re.disabled).map(re=>re.ref.current);_V.includes(V.key)&&ze.reverse(),Rie(ze)}),onBlur:Ne(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(C.current),S.current="")}),onPointerMove:Ne(t.onPointerMove,Fm(V=>{const Z=V.target,ye=W.current!==V.clientX;if(V.currentTarget.contains(Z)&&ye){const ae=V.clientX>W.current?"right":"left";k.current=ae,W.current=V.clientX}}))})})})})})})});CV.displayName=zs;var _ie="MenuGroup",QI=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(rt.div,{role:"group",...r,ref:e})});QI.displayName=_ie;var bie="MenuLabel",NV=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(rt.div,{...r,ref:e})});NV.displayName=bie;var Uv="MenuItem",wA="menu.itemSelect",b0=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=p.useRef(null),o=Pp(Uv,t.__scopeMenu),a=qI(Uv,t.__scopeMenu),c=vt(e,i),u=p.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(wA,{bubbles:!0,cancelable:!0});h.addEventListener(wA,g=>r==null?void 0:r(g),{once:!0}),l2(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return l.jsx(kV,{...s,ref:c,disabled:n,onClick:Ne(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:Ne(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Ne(t.onKeyDown,h=>{const m=a.searchRef.current!=="";n||m&&h.key===" "||OE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});b0.displayName=Uv;var kV=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=qI(Uv,n),a=EV(n),c=p.useRef(null),u=vt(e,c),[d,h]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const w=c.current;w&&g((w.textContent??"").trim())},[i.children]),l.jsx(Lm.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:l.jsx(fV,{asChild:!0,...a,focusable:!r,children:l.jsx(rt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Ne(t.onPointerMove,Fm(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ne(t.onPointerLeave,Fm(w=>o.onItemLeave(w))),onFocus:Ne(t.onFocus,()=>h(!0)),onBlur:Ne(t.onBlur,()=>h(!1))})})})}),Eie="MenuCheckboxItem",RV=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return l.jsx(DV,{scope:t.__scopeMenu,checked:n,children:l.jsx(b0,{role:"menuitemcheckbox","aria-checked":zv(n)?"mixed":n,...s,ref:e,"data-state":JI(n),onSelect:Ne(s.onSelect,()=>r==null?void 0:r(zv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});RV.displayName=Eie;var PV="MenuRadioGroup",[Sie,Tie]=Yc(PV,{value:void 0,onValueChange:()=>{}}),AV=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=mr(r);return l.jsx(Sie,{scope:t.__scopeMenu,value:n,onValueChange:i,children:l.jsx(QI,{...s,ref:e})})});AV.displayName=PV;var jV="MenuRadioItem",MV=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=Tie(jV,t.__scopeMenu),i=n===s.value;return l.jsx(DV,{scope:t.__scopeMenu,checked:i,children:l.jsx(b0,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":JI(i),onSelect:Ne(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});MV.displayName=jV;var XI="MenuItemIndicator",[DV,Iie]=Yc(XI,{checked:!1}),OV=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=Iie(XI,n);return l.jsx(_r,{present:r||zv(i.checked)||i.checked===!0,children:l.jsx(rt.span,{...s,ref:e,"data-state":JI(i.checked)})})});OV.displayName=XI;var Cie="MenuSeparator",LV=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(rt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});LV.displayName=Cie;var Nie="MenuArrow",FV=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=_0(n);return l.jsx(Mx,{...s,...r,ref:e})});FV.displayName=Nie;var kie="MenuSub",[Vme,VV]=Yc(kie),vf="MenuSubTrigger",BV=p.forwardRef((t,e)=>{const n=Qc(vf,t.__scopeMenu),r=Pp(vf,t.__scopeMenu),s=VV(vf,t.__scopeMenu),i=qI(vf,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),c(null)}},[a,c]),l.jsx(HI,{asChild:!0,...u,children:l.jsx(kV,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":$V(n.open),...t,ref:Nx(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ne(t.onPointerMove,Fm(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Ne(t.onPointerLeave,Fm(h=>{var g,w;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const y=(w=n.content)==null?void 0:w.dataset.side,T=y==="right",b=T?-5:5,_=m[T?"left":"right"],I=m[T?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:_,y:m.top},{x:I,y:m.top},{x:I,y:m.bottom},{x:_,y:m.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ne(t.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";t.disabled||m&&h.key===" "||cie[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});BV.displayName=vf;var UV="MenuSubContent",zV=p.forwardRef((t,e)=>{const n=TV(zs,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Qc(zs,t.__scopeMenu),o=Pp(zs,t.__scopeMenu),a=VV(UV,t.__scopeMenu),c=p.useRef(null),u=vt(e,c);return l.jsx(Lm.Provider,{scope:t.__scopeMenu,children:l.jsx(_r,{present:r||i.open,children:l.jsx(Lm.Slot,{scope:t.__scopeMenu,children:l.jsx(YI,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ne(t.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ne(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Ne(t.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=uie[o.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),d.preventDefault())})})})})})});zV.displayName=UV;function $V(t){return t?"open":"closed"}function zv(t){return t==="indeterminate"}function JI(t){return zv(t)?"indeterminate":t?"checked":"unchecked"}function Rie(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Pie(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Aie(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Pie(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function jie(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,d=a.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function Mie(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return jie(n,e)}function Fm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Die=SV,Oie=HI,Lie=IV,Fie=CV,Vie=QI,Bie=NV,Uie=b0,zie=RV,$ie=AV,Wie=MV,Gie=OV,Hie=LV,Kie=FV,qie=BV,Yie=zV,E0="DropdownMenu",[Qie,Bme]=Ps(E0,[bV]),Kr=bV(),[Xie,WV]=Qie(E0),GV=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,c=Kr(e),u=p.useRef(null),[d,h]=Bo({prop:s,defaultProp:i??!1,onChange:o,caller:E0});return l.jsx(Xie,{scope:e,triggerId:Us(),triggerRef:u,contentId:Us(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:a,children:l.jsx(Die,{...c,open:d,onOpenChange:h,dir:r,modal:a,children:n})})};GV.displayName=E0;var HV="DropdownMenuTrigger",KV=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=WV(HV,n),o=Kr(n);return l.jsx(Oie,{asChild:!0,...o,children:l.jsx(rt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Nx(e,i.triggerRef),onPointerDown:Ne(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Ne(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});KV.displayName=HV;var Jie="DropdownMenuPortal",qV=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Kr(e);return l.jsx(Lie,{...r,...n})};qV.displayName=Jie;var YV="DropdownMenuContent",QV=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=WV(YV,n),i=Kr(n),o=p.useRef(!1);return l.jsx(Fie,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Ne(t.onCloseAutoFocus,a=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ne(t.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QV.displayName=YV;var Zie="DropdownMenuGroup",eoe=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Vie,{...s,...r,ref:e})});eoe.displayName=Zie;var toe="DropdownMenuLabel",XV=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Bie,{...s,...r,ref:e})});XV.displayName=toe;var noe="DropdownMenuItem",JV=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Uie,{...s,...r,ref:e})});JV.displayName=noe;var roe="DropdownMenuCheckboxItem",ZV=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(zie,{...s,...r,ref:e})});ZV.displayName=roe;var soe="DropdownMenuRadioGroup",ioe=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx($ie,{...s,...r,ref:e})});ioe.displayName=soe;var ooe="DropdownMenuRadioItem",e5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Wie,{...s,...r,ref:e})});e5.displayName=ooe;var aoe="DropdownMenuItemIndicator",t5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Gie,{...s,...r,ref:e})});t5.displayName=aoe;var loe="DropdownMenuSeparator",n5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Hie,{...s,...r,ref:e})});n5.displayName=loe;var coe="DropdownMenuArrow",uoe=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Kie,{...s,...r,ref:e})});uoe.displayName=coe;var doe="DropdownMenuSubTrigger",r5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(qie,{...s,...r,ref:e})});r5.displayName=doe;var hoe="DropdownMenuSubContent",s5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Kr(n);return l.jsx(Yie,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});s5.displayName=hoe;var foe=GV,moe=KV,poe=qV,i5=QV,o5=XV,a5=JV,l5=ZV,c5=e5,u5=t5,d5=n5,h5=r5,f5=s5;const m5=foe,p5=moe,goe=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>l.jsxs(h5,{ref:s,className:ue("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,l.jsx(Ire,{className:"ml-auto h-4 w-4"})]}));goe.displayName=h5.displayName;const yoe=p.forwardRef(({className:t,...e},n)=>l.jsx(f5,{ref:n,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));yoe.displayName=f5.displayName;const ZI=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(poe,{children:l.jsx(i5,{ref:r,sideOffset:e,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));ZI.displayName=i5.displayName;const gs=p.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(a5,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));gs.displayName=a5.displayName;const voe=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>l.jsxs(l5,{ref:s,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(u5,{children:l.jsx(Q4,{className:"h-4 w-4"})})}),e]}));voe.displayName=l5.displayName;const xoe=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(c5,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(u5,{children:l.jsx(Rre,{className:"h-2 w-2 fill-current"})})}),e]}));xoe.displayName=c5.displayName;const g5=p.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(o5,{ref:r,className:ue("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));g5.displayName=o5.displayName;const eC=p.forwardRef(({className:t,...e},n)=>l.jsx(d5,{ref:n,className:ue("-mx-1 my-1 h-px bg-muted",t),...e}));eC.displayName=d5.displayName;var S0="Popover",[y5,Ume]=Ps(S0,[gl]),Ap=gl(),[woe,Tl]=y5(S0),v5=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=Ap(e),c=p.useRef(null),[u,d]=p.useState(!1),[h,m]=Bo({prop:r,defaultProp:s??!1,onChange:i,caller:S0});return l.jsx(Ax,{...a,children:l.jsx(woe,{scope:e,contentId:Us(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:n})})};v5.displayName=S0;var x5="PopoverAnchor",_oe=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Tl(x5,n),i=Ap(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return p.useEffect(()=>(o(),()=>a()),[o,a]),l.jsx(rp,{...i,...r,ref:e})});_oe.displayName=x5;var w5="PopoverTrigger",_5=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Tl(w5,n),i=Ap(n),o=vt(e,s.triggerRef),a=l.jsx(rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":I5(s.open),...r,ref:o,onClick:Ne(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:l.jsx(rp,{asChild:!0,...i,children:a})});_5.displayName=w5;var tC="PopoverPortal",[boe,Eoe]=y5(tC,{forceMount:void 0}),b5=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=Tl(tC,e);return l.jsx(boe,{scope:e,forceMount:n,children:l.jsx(_r,{present:n||i.open,children:l.jsx(oh,{asChild:!0,container:s,children:r})})})};b5.displayName=tC;var Kd="PopoverContent",E5=p.forwardRef((t,e)=>{const n=Eoe(Kd,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=Tl(Kd,t.__scopePopover);return l.jsx(_r,{present:r||i.open,children:i.modal?l.jsx(Toe,{...s,ref:e}):l.jsx(Ioe,{...s,ref:e})})});E5.displayName=Kd;var Soe=rl("PopoverContent.RemoveScroll"),Toe=p.forwardRef((t,e)=>{const n=Tl(Kd,t.__scopePopover),r=p.useRef(null),s=vt(e,r),i=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return x0(o)},[]),l.jsx(kp,{as:Soe,allowPinchZoom:!0,children:l.jsx(S5,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ne(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ne(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,u=a.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ne(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ioe=p.forwardRef((t,e)=>{const n=Tl(Kd,t.__scopePopover),r=p.useRef(!1),s=p.useRef(!1);return l.jsx(S5,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),S5=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=Tl(Kd,n),g=Ap(n);return y0(),l.jsx(Cp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(rh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:l.jsx(jx,{"data-state":I5(m.open),role:"dialog",id:m.contentId,...g,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),T5="PopoverClose",Coe=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Tl(T5,n);return l.jsx(rt.button,{type:"button",...r,ref:e,onClick:Ne(t.onClick,()=>s.onOpenChange(!1))})});Coe.displayName=T5;var Noe="PopoverArrow",koe=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ap(n);return l.jsx(Mx,{...s,...r,ref:e})});koe.displayName=Noe;function I5(t){return t?"open":"closed"}var Roe=v5,Poe=_5,Aoe=b5,C5=E5;const N5=Roe,k5=Poe,nC=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>l.jsx(Aoe,{children:l.jsx(C5,{ref:s,align:e,sideOffset:n,className:ue("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));nC.displayName=C5.displayName;const ed={energy:{label:"Enerji Kiti",description:"Seilen oyuncunun kondisyonunu hzla yeniler ve hafif moral destei salar.",diamondCost:55,adReward:1,conditionDelta:.2,motivationDelta:.05,healsInjury:!1},morale:{label:"Moral Kiti",description:"Oyuncunun moralini ykseltir, kondisyonuna kk bir takviye verir.",diamondCost:50,adReward:1,conditionDelta:.05,motivationDelta:.2,healsInjury:!1},health:{label:"Salk Kiti",description:"Sakatlklar tedavi eder, kondisyon ve moral deerlerini dengeli ekilde artrr.",diamondCost:95,adReward:1,conditionDelta:.15,motivationDelta:.1,healsInjury:!0}},R5=t=>{const e=ed[t],n=Math.round(e.conditionDelta*100),r=Math.round(e.motivationDelta*100),s=[n?`+%${n} kondisyon`:null,r?`+%${r} motivasyon`:null,e.healsInjury?"Sakatl tamamen iyiletirir":null].filter(Boolean);return s.length>0?s.join("  "):""},i_={weekly:{label:"Haftalik VIP",description:"Kisa sureli avantajlar icin ideal.",durationDays:7,diamondCost:900,perks:["Gunluk +1 enerji, moral ve saglik kiti","%5 sure kisalmasi","Aylik 1 yildiz oyuncu karti"]},monthly:{label:"Aylik VIP",description:"Daha uzun sureli premium destek.",durationDays:30,diamondCost:2800,perks:["Gunluk +1 enerji, moral ve saglik kiti","%5 sure kisalmasi","Her ay 1 yildiz oyuncu karti"]},yearly:{label:"Yillik VIP",description:"En iyi fiyat/performans paketi.",durationDays:365,diamondCost:28e3,perks:["Gunluk +1 enerji, moral ve saglik kiti","%5 sure kisalmasi","Her ay 1 yildiz oyuncu karti","Ozel sezon ici kampanyalar"]}},Xh=["energy","morale","health"],joe={energy:{label:"Enerji Kiti",icon:Y4,accent:"text-emerald-300"},morale:{label:"Moral Kiti",icon:rV,accent:"text-amber-300"},health:{label:"Saglik Kiti",icon:tV,accent:"text-rose-300"}},_A=t=>{typeof window>"u"||G.custom(()=>l.jsxs("div",{className:"w-80 rounded-2xl border border-emerald-300/40 bg-slate-950/95 p-4 shadow-xl shadow-emerald-500/20",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-500/15 text-emerald-200",children:l.jsx(eV,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-emerald-100",children:t.title}),l.jsx("p",{className:"text-xs text-slate-300",children:t.subtitle})]})]}),l.jsx("div",{className:"mt-4 grid gap-2 sm:grid-cols-2",children:t.kits.map(({type:e,amount:n},r)=>{const s=joe[e],i=s.icon;return l.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2",children:[l.jsx(i,{className:`h-4 w-4 ${s.accent}`}),l.jsx("div",{children:l.jsxs("p",{className:"text-xs font-semibold text-white",children:["+",n," ",s.label]})})]},`${e}-${r}`)})})]}),{duration:6e3,position:"top-center",className:"bg-transparent shadow-none"})},LE={energy:0,morale:0,health:0},$v={isActive:!1,activatedAt:null,expiresAt:null,durationReductionPercent:.05,lastMonthlyStarCardDate:null,starCardCredits:0,plan:null,nostalgiaFreeAvailable:!1,nostalgiaFreeClaimedAt:null},Mg=()=>({kits:{...LE},lastDailyRewardDate:null,vip:{...$v}}),P5=.75,Moe=t=>t.toISOString().split("T")[0]??"",FE=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,bA=t=>{if(!t)return null;const e=new Date(t);return Number.isNaN(e.getTime())?null:FE(e)},Doe=t=>t==="weekly"||t==="monthly"||t==="yearly",Sy=t=>{if(!t.isActive)return!1;if(!t.expiresAt)return!0;const e=new Date(t.expiresAt);return Number.isNaN(e.getTime())?!1:e.getTime()>Date.now()},Pl=t=>{const e=typeof(t==null?void 0:t.activatedAt)=="string"?t==null?void 0:t.activatedAt:null,n=typeof(t==null?void 0:t.expiresAt)=="string"?t.expiresAt:null,r=Doe(t==null?void 0:t.plan)?t==null?void 0:t.plan:null,s=typeof(t==null?void 0:t.durationReductionPercent)=="number"?t.durationReductionPercent:$v.durationReductionPercent,i=typeof(t==null?void 0:t.lastMonthlyStarCardDate)=="string"?t.lastMonthlyStarCardDate:null,o=typeof(t==null?void 0:t.starCardCredits)=="number"&&Number.isFinite(t.starCardCredits)?t.starCardCredits:$v.starCardCredits,a=typeof(t==null?void 0:t.nostalgiaFreeClaimedAt)=="string"?t.nostalgiaFreeClaimedAt:null,c=!!(t!=null&&t.nostalgiaFreeAvailable),u={isActive:!!(t!=null&&t.isActive),activatedAt:e,expiresAt:n,durationReductionPercent:s,lastMonthlyStarCardDate:i,starCardCredits:o,plan:r,nostalgiaFreeAvailable:c,nostalgiaFreeClaimedAt:a},d=Sy(u);return{...u,isActive:d,nostalgiaFreeAvailable:d&&c}},EA=t=>{if(!Number.isFinite(t))return P5;const e=Number(t.toFixed(3));return e<0?0:e>1?1:e},SA=t=>typeof t=="number"&&Number.isFinite(t)?t:P5,A5=p.createContext(void 0),Ooe=({children:t})=>{const{user:e}=Vn(),{spend:n}=Ni(),[r,s]=p.useState(Mg()),[i,o]=p.useState(!1),[a,c]=p.useState(!1),u=r.kits,d=e?`kits:${e.id}`:null;p.useEffect(()=>{if(typeof window>"u"){c(!0);return}if(!d){s(Mg()),c(!0);return}c(!1);try{const S=window.localStorage.getItem(d);if(!S)s(Mg());else{const P=JSON.parse(S);if(P&&typeof P=="object"&&"kits"in P){const R=P,k=R.kits&&typeof R.kits=="object"?R.kits:void 0;s({kits:{...LE,...k??{}},lastDailyRewardDate:typeof R.lastDailyRewardDate=="string"?R.lastDailyRewardDate:null,vip:Pl(R.vip)})}else s({kits:{...LE,...P??{}},lastDailyRewardDate:null,vip:{...$v}})}}catch(S){console.warn("[InventoryProvider] failed to read inventory",S),s(Mg())}finally{c(!0)}},[d]),p.useEffect(()=>{if(!(!a||!d||typeof window>"u"))try{window.localStorage.setItem(d,JSON.stringify(r))}catch(S){console.warn("[InventoryProvider] failed to persist inventory",S)}},[a,r,d]);const h=p.useCallback(async(S,P)=>{if(!e)throw G.error("Kit satn almak iin giri yapmalsn."),new Error("auth-required");const R=ed[S];o(!0);try{const k=P==="diamonds"?1:R.adReward;P==="diamonds"?(await n(R.diamondCost),G.success(`${R.label} satn alnd.`)):G.success(`Reklam dl: +${k} ${R.label}.`),s(W=>({...W,kits:{...W.kits,[S]:(W.kits[S]??0)+k}}))}catch(k){throw P==="diamonds"&&console.warn("[InventoryProvider] diamond purchase failed",k),k instanceof Error&&k.message!=="auth-required"&&G.error(k.message||"Kit satn alnamad."),k}finally{o(!1)}},[n,e]),m=p.useCallback(async(S,P)=>{if(!e)throw G.error("Kit kullanmak iin giri yapmalsn."),new Error("auth-required");if((u[S]??0)<=0){G.error("Bu kitten stounuz kalmad.");return}o(!0);try{const k=await jn(e.id);if(!k||!Array.isArray(k.players))throw new Error("Takm bulunamad.");const W=k.players.findIndex(V=>String(V.id)===String(P));if(W===-1)throw new Error("Oyuncu bulunamad.");const J=k.players[W],Q=ed[S],le={...J,condition:EA(SA(J.condition)+Q.conditionDelta),motivation:EA(SA(J.motivation)+Q.motivationDelta),injuryStatus:Q.healsInjury?"healthy":J.injuryStatus??"healthy"},O=[...k.players];O[W]=le,await La(e.id,O),s(V=>({...V,kits:{...V.kits,[S]:Math.max(0,(V.kits[S]??0)-1)}})),G.success(`${Q.label} ${J.name} iin uyguland.`)}catch(k){throw console.warn("[InventoryProvider] apply kit failed",k),k instanceof Error&&k.message!=="auth-required"&&G.error(k.message||"Kit kullanlamad."),k}finally{o(!1)}},[u,e]),g=p.useCallback(()=>{if(!e)return;const S=Moe(new Date);let P=null;s(R=>{if(R.lastDailyRewardDate===S)return R;const k={...R.kits},W=Pl(R.vip);if(Sy(W))Xh.forEach(Q=>{k[Q]=(k[Q]??0)+1}),P={title:"VIP gunluk bonusu",subtitle:"Enerji, moral ve saglik kitlerinden birer adet eklendi.",kits:Xh.map(Q=>({type:Q,amount:1}))};else{const Q=Xh[Math.floor(Math.random()*Xh.length)];k[Q]=(k[Q]??0)+1,P={title:"Gunluk giris odulu",subtitle:`${ed[Q].label} envanterine eklendi.`,kits:[{type:Q,amount:1}]}}return{...R,kits:k,lastDailyRewardDate:S,vip:W}}),P&&_A(P)},[e]);p.useEffect(()=>{!a||!e||g()},[a,g,e==null?void 0:e.id]);const w=p.useCallback(async(S="monthly")=>{if(!e){G.error("VIP ozelligini acmak icin giris yapmalisin.");return}const P=i_[S]??i_.monthly,R=P.durationDays*24*60*60*1e3;o(!0);try{await n(P.diamondCost);const k=new Date,W=k.toISOString();let J=!1,Q=!1;s(le=>{const O=Pl(le.vip),V=O.isActive,Z=O.expiresAt?new Date(O.expiresAt).getTime():0,ye=k.getTime(),ae=Z>ye?Z:ye,ve=new Date(ae+R).toISOString(),_e=!O.nostalgiaFreeClaimedAt,de={...O,isActive:!0,plan:S,activatedAt:W,expiresAt:ve,nostalgiaFreeAvailable:_e},ze=V?le.kits:{...le.kits,energy:(le.kits.energy??0)+1,morale:(le.kits.morale??0)+1,health:(le.kits.health??0)+1};return J=!V,Q=_e,{...le,kits:ze,vip:de}}),G.success(`${P.label} aktif edildi.`,{description:`VIP avantajlarin ${P.durationDays} gun boyunca acik.`}),J&&_A({title:"VIP hosgeldin bonusu",subtitle:"Enerji, moral ve saglik kitlerinden birer adet kazandin.",kits:Xh.map(le=>({type:le,amount:1}))}),Q&&G.success("VIP nostalji hediyesi",{description:"Nostalji paketini bir kere ucretsiz acabilirsin."}),g()}catch(k){const W=k instanceof Error?k.message:"VIP satin alinamadi.";G.error(W||"VIP satin alinamadi.")}finally{o(!1)}},[g,n,e]),y=p.useCallback(()=>{if(!e){G.error("VIP uyeligini kapatmak icin giris yapmalisin.");return}let S="already";s(P=>{const R=Pl(P.vip);return R.isActive?(S="deactivated",{...P,vip:{...R,isActive:!1,expiresAt:null,plan:null,nostalgiaFreeAvailable:!1}}):(S="already",P)}),S==="deactivated"?G.success("VIP uyeligi devre disi birakildi."):G("VIP uyeligin zaten devre disi.")},[e]),T=p.useCallback(()=>{if(!e){G.error("Yildiz oyuncu kartini almak icin giris yapmalisin.");return}let S="already";s(P=>{const R=Pl(P.vip);if(!Sy(R))return S="notVip",P;const k=FE(new Date);return bA(R.lastMonthlyStarCardDate)===k?(S="already",P):(S="success",{...P,vip:{...R,lastMonthlyStarCardDate:new Date().toISOString(),starCardCredits:(R.starCardCredits??0)+1}})}),S==="success"?G.success("VIP yildiz oyuncu karti hesabina eklendi."):S==="notVip"?G.error("Bu ozellik sadece VIP uyeler icin."):G.error("Bu ayki yildiz oyuncu kartini zaten aldin.")},[e]),b=p.useCallback(()=>{s(S=>{const P=Pl(S.vip);return P.nostalgiaFreeAvailable?{...S,vip:{...P,nostalgiaFreeAvailable:!1,nostalgiaFreeClaimedAt:new Date().toISOString()}}:S})},[]),{lastDailyRewardDate:_}=r,I=p.useMemo(()=>Pl(r.vip),[r.vip]),A=Sy(I),M=A?Math.max(.1,1-I.durationReductionPercent):1,j=I.nostalgiaFreeAvailable&&A,v=FE(new Date),E=a&&A&&bA(I.lastMonthlyStarCardDate)!==v,C=p.useMemo(()=>({kits:u,purchaseKit:h,applyKitToPlayer:m,isProcessing:i,lastDailyRewardDate:_,processDailyReward:g,vipStatus:I,vipActive:A,vipPlans:i_,vipDurationMultiplier:M,vipNostalgiaFreeAvailable:j,activateVip:w,deactivateVip:y,claimMonthlyStarCard:T,canClaimMonthlyStarCard:E,consumeVipNostalgiaReward:b,isHydrated:a}),[u,h,m,i,_,g,I,A,M,j,w,y,T,E,b,a]);return l.jsx(A5.Provider,{value:C,children:t})},Xc=()=>{const t=p.useContext(A5);if(!t)throw new Error("useInventory must be used within InventoryProvider");return t},Yr=t=>({strength:.5,acceleration:.5,topSpeed:.5,dribbleSpeed:.5,jump:.5,tackling:.5,ballKeeping:.5,passing:.5,longBall:.5,agility:.5,shooting:.5,shootPower:.5,positioning:.5,reaction:.5,ballControl:.5,...t}),Qr={height:180,weight:75},Xr={condition:.82,motivation:.78,injuryStatus:"healthy"},Loe=[{id:"1",name:"Mehmet zkan",position:"GK",roles:Kn("GK"),overall:.852,attributes:Yr({topSpeed:.432,acceleration:.5,agility:.5,shooting:.123,passing:.765,tackling:.891,ballControl:.234,strength:.789}),age:28,squadRole:"starting",...Qr,...Xr},{id:"2",name:"Ali Ylmaz",position:"CB",roles:Kn("CB"),overall:.789,attributes:Yr({topSpeed:.567,acceleration:.5,agility:.5,shooting:.234,passing:.678,tackling:.912,ballControl:.345,strength:.823}),age:26,squadRole:"starting",...Qr,...Xr},{id:"3",name:"Can Demir",position:"CB",roles:Kn("CB"),overall:.776,attributes:Yr({topSpeed:.534,acceleration:.5,agility:.5,shooting:.267,passing:.689,tackling:.898,ballControl:.312,strength:.834}),age:24,squadRole:"starting",...Qr,...Xr},{id:"4",name:"Emre Kara",position:"LB",roles:Kn("LB"),overall:.723,attributes:Yr({topSpeed:.789,acceleration:.5,agility:.5,shooting:.345,passing:.712,tackling:.678,ballControl:.567,strength:.654}),age:25,squadRole:"starting",...Qr,...Xr},{id:"5",name:"Burak en",position:"RB",roles:Kn("RB"),overall:.734,attributes:Yr({topSpeed:.798,acceleration:.5,agility:.5,shooting:.356,passing:.723,tackling:.689,ballControl:.578,strength:.665}),age:27,squadRole:"starting",...Qr,...Xr},{id:"6",name:"Ouz elik",position:"CM",roles:Kn("CM"),overall:.812,attributes:Yr({topSpeed:.656,acceleration:.5,agility:.5,shooting:.534,passing:.887,tackling:.567,ballControl:.723,strength:.678}),age:24,squadRole:"starting",...Qr,...Xr},{id:"7",name:"Serkan Aydn",position:"CM",roles:Kn("CM"),overall:.798,attributes:Yr({topSpeed:.645,acceleration:.5,agility:.5,shooting:.523,passing:.876,tackling:.556,ballControl:.712,strength:.667}),age:26,squadRole:"starting",...Qr,...Xr},{id:"8",name:"Kemal Arslan",position:"LW",roles:Kn("LW"),overall:.845,attributes:Yr({topSpeed:.923,acceleration:.5,agility:.5,shooting:.678,passing:.734,tackling:.234,ballControl:.889,strength:.567}),age:23,squadRole:"starting",...Qr,...Xr},{id:"9",name:"Hakan Polat",position:"RW",roles:Kn("RW"),overall:.834,attributes:Yr({topSpeed:.912,acceleration:.5,agility:.5,shooting:.667,passing:.723,tackling:.223,ballControl:.878,strength:.556}),age:25,squadRole:"starting",...Qr,...Xr},{id:"10",name:"Murat Ko",position:"CAM",roles:Kn("CAM"),overall:.867,attributes:Yr({topSpeed:.734,acceleration:.5,agility:.5,shooting:.789,passing:.923,tackling:.345,ballControl:.845,strength:.623}),age:27,squadRole:"starting",...Qr,...Xr},{id:"11",name:"Volkan Tekin",position:"ST",roles:Kn("ST"),overall:.889,attributes:Yr({topSpeed:.823,acceleration:.5,agility:.5,shooting:.945,passing:.678,tackling:.234,ballControl:.787,strength:.756}),age:29,squadRole:"starting",...Qr,...Xr},{id:"12",name:"Yusuf Balk",position:"GK",roles:Kn("GK"),overall:.678,attributes:Yr({topSpeed:.345,acceleration:.5,agility:.5,shooting:.089,passing:.567,tackling:.723,ballControl:.123,strength:.634}),age:31,squadRole:"bench",...Qr,...Xr},{id:"13",name:"Fatih Gven",position:"CB",roles:Kn("CB"),overall:.634,attributes:Yr({topSpeed:.456,acceleration:.5,agility:.5,shooting:.167,passing:.523,tackling:.789,ballControl:.234,strength:.678}),age:30,squadRole:"bench",...Qr,...Xr},{id:"14",name:"Deniz Akn",position:"CM",roles:Kn("CM"),overall:.687,attributes:Yr({topSpeed:.567,acceleration:.5,agility:.5,shooting:.445,passing:.734,tackling:.456,ballControl:.612,strength:.578}),age:28,squadRole:"bench",...Qr,...Xr}];Loe.map(t=>({...t,potential:Math.min(1,t.overall+Math.random()*(1-t.overall))}));const Ou=[{id:"1",opponent:"Galatasaray",opponentLogo:"",opponentLogoUrl:"/Logo/galatasaray.svg",date:"2025-08-20",time:"20:00",venue:"home",status:"scheduled",competition:"Sper Lig",venueName:"Rams Park",opponentStats:{overall:.912,form:["W","W","D","W","W"],keyPlayers:[{name:"Mauro Icardi",position:"ST",highlight:"15 gol",stats:{matches:18,goals:15,assists:4,rating:7.9,minutes:1520}},{name:"Kerem Aktrkolu",position:"LW",highlight:"11 asist",stats:{matches:20,goals:6,assists:11,rating:7.6,minutes:1685}},{name:"Lucas Torreira",position:"CM",highlight:"%90 pas isabeti",stats:{matches:21,goals:2,assists:5,rating:7.4,minutes:1810}},{name:"Dries Mertens",position:"CAM",highlight:"8 gol katks",stats:{matches:19,goals:5,assists:3,rating:7.2,minutes:1405}},{name:"Bar Alper Ylmaz",position:"RW",highlight:"3 kritik gol",stats:{matches:17,goals:4,assists:4,rating:7.1,minutes:1320}},{name:"Davinson Snchez",position:"CB",highlight:"%72 ikili mcadele",stats:{matches:16,goals:1,assists:0,rating:7.3,minutes:1440,cleanSheets:9}},{name:"Fernando Muslera",position:"GK",highlight:"9 clean sheet",stats:{matches:18,goals:0,assists:0,rating:7.5,minutes:1620,cleanSheets:9}},{name:"Sacha Boey",position:"RB",highlight:"7 top alma",stats:{matches:15,goals:1,assists:2,rating:7,minutes:1280}}]}},{id:"2",opponent:"Fenerbahe",opponentLogo:"",date:"2025-08-25",time:"19:00",venue:"away",status:"scheduled",competition:"Sper Lig"}],bu=[{id:"strength",name:"G Antrenman",type:"strength",description:"Fiziksel gc artrr",duration:5},{id:"acceleration",name:"Hzlanma Antrenman",type:"acceleration",description:"Hzlanmay gelitirir",duration:5},{id:"topSpeed",name:"Maksimum Hz Antrenman",type:"topSpeed",description:"Maksimum hz artrr",duration:5},{id:"dribbleSpeed",name:"Dribling Hz Antrenman",type:"dribbleSpeed",description:"Dribling hzn gelitirir",duration:5},{id:"jump",name:"Srama Antrenman",type:"jump",description:"Srama yeteneini gelitirir",duration:5},{id:"tackling",name:"Mcadele Antrenman",type:"tackling",description:"Mcadele yeteneklerini gelitirir",duration:5},{id:"ballKeeping",name:"Top Saklama Antrenman",type:"ballKeeping",description:"Top saklama becerisini gelitirir",duration:5},{id:"passing",name:"Pas Antrenman",type:"passing",description:"Pas doruluunu artrr",duration:5},{id:"longBall",name:"Uzun Top Antrenman",type:"longBall",description:"Uzun top becerisini gelitirir",duration:5},{id:"agility",name:"eviklik Antrenman",type:"agility",description:"eviklii artrr",duration:5},{id:"shooting",name:"ut Antrenman",type:"shooting",description:"ut isabetini gelitirir",duration:5},{id:"shootPower",name:"ut Gc Antrenman",type:"shootPower",description:"ut gcn artrr",duration:5},{id:"positioning",name:"Pozisyon Alma Antrenman",type:"positioning",description:"Pozisyon alma becerisini gelitirir",duration:5},{id:"reaction",name:"Refleks Antrenman",type:"reaction",description:"Refleksleri gelitirir",duration:5},{id:"ballControl",name:"Top Kontrol Antrenman",type:"ballControl",description:"Top kontroln gelitirir",duration:5}],Jh=[{id:"1",type:"income",category:"Ma Geliri",amount:15e4,date:"2025-08-15",description:"Galatasaray ma bilet gelirleri"},{id:"2",type:"income",category:"Sponsorluk",amount:5e5,date:"2025-08-10",description:"Aylk sponsorluk demesi"},{id:"3",type:"expense",category:"Maalar",amount:8e5,date:"2025-08-01",description:"Oyuncu ve teknik kadro maalar"},{id:"4",type:"expense",category:"Antrenman",amount:25e3,date:"2025-08-12",description:"Antrenman ekipmanlar"}];function j5(t,e,n=Math.random){const r=[],s=[];for(const i of t){let o={...i,attributes:{...i.attributes}};for(const a of e){const c=a.type,u=o.attributes[c];let d=0,h="fail";if(u<1){const m=.005+n()*.03,g=n()*100;if(g>75?(d=m,h="success"):g>45?(d=m*.5,h="average"):h="fail",d>0){const w=Math.min(u+d,1),y={...o.attributes,[c]:w};o={...o,attributes:y,overall:Math.min(p0(o.position,y),o.potential)}}}r.push({playerId:o.id,playerName:o.name,trainingId:a.id,trainingName:a.name,result:h,gain:d})}s.push(o)}return{updatedPlayers:s,records:r}}const Foe=t=>typeof t=="object"&&t!==null&&"code"in t&&t.code==="permission-denied",jp=t=>kt(Me,"users",t,"training","active"),rC=t=>pn(Me,"users",t,"trainingHistory"),Voe=(t,e)=>kt(Me,"users",t,"trainingHistory",e);async function M5(t){const e=await Sl(jp(t));return e.exists()?e.data():null}async function Boe(t,e){await Zo(jp(t),e)}async function Ty(t){await f0(jp(t))}async function D5(t,e){return(await C4(rC(t),e)).id}async function Uoe(t){return(await gn(rC(t))).docs.map(n=>{const r=n.data();return{id:n.id,...r,viewed:r.viewed??!1}})}const TA=80;async function zoe(t,e){const n=kt(Me,"users",t),r=jp(t);try{return await ro(Me,async i=>{const[o,a]=await Promise.all([i.get(n),i.get(r)]);if(!a.exists())throw new Error("Aktif antrenman yok");if((o.data().diamondBalance??0)<e)throw new Error("Yetersiz elmas");return i.update(n,{diamondBalance:m0(-e)}),i.delete(r),a.data()})}catch(s){throw console.warn(s),G.error(s.message||"lem baarsz"),s}}async function $oe(t,e){if(!e.length)return;const n=fee(Me);for(const r of e)n.update(Voe(t,r),{viewed:!0});await n.commit()}async function Woe(t){try{const e=Pr(rC(t),gr("viewed","==",!1));return(await gn(e)).size}catch(e){if(Foe(e))return console.warn("[training.getUnviewedTrainingCount] Permission denied",e),0;throw e}}async function Goe(t){const e=jp(t);try{return await ro(Me,async r=>{const s=await r.get(e);if(!s.exists())throw new Error("Aktif antrenman yok");const i=s.data(),o=i.startAt.toDate(),a=Math.max(0,Math.floor((Date.now()-o.getTime())/1e3)),c=Math.max(i.durationSeconds-a,0);if(c<=0)throw new Error("Antrenman zaten tamamlanm");const u=Math.max(1,Math.floor(c*.25)),d=Math.max(a,i.durationSeconds-u);return r.update(e,{durationSeconds:d}),{...i,durationSeconds:d}})}catch(n){throw console.warn(n),G.error(n.message||"lem baarsz"),n}}async function Hoe(t){const e=await M5(t);if(!e)return!1;const n=e.startAt.toDate();if(Math.max(0,Math.floor((Date.now()-n.getTime())/1e3))<e.durationSeconds)return!1;try{const s=await jn(t);if(!s)return await Ty(t),!0;const i=e.playerIds.map(h=>s.players.find(m=>m.id===h)).filter(h=>!!h),o=e.trainingIds.map(h=>bu.find(m=>m.id===h)).filter(h=>!!h);if(i.length===0||o.length===0)return await Ty(t),!0;const{updatedPlayers:a,records:c}=j5(i,o),u=s.players.map(h=>a.find(g=>g.id===h.id)??h);try{await La(t,u)}catch(h){console.warn("[training.finalizeExpiredTrainingSession] save players failed",h)}const d=Dt.now();for(const h of c)try{await D5(t,{...h,completedAt:d,viewed:!1})}catch(m){console.warn("[training.finalizeExpiredTrainingSession] record persist failed",m)}try{await Ty(t)}catch(h){console.warn("[training.finalizeExpiredTrainingSession] clear active failed",h)}return!0}catch(s){return console.warn("[training.finalizeExpiredTrainingSession] failed",s),!1}}const O5=t=>typeof t=="object"&&t!==null&&"code"in t&&t.code==="permission-denied",L5=7*24*60*60*1e3,Wv=160,sC=12*60*60*1e3;async function F5(t){const e=pn(Me,"users",t,"youthCandidates"),n=r=>r.docs.map(s=>({id:s.id,...s.data()})).filter(s=>s.status==="pending").sort((s,i)=>{const o=a=>{var c;return((c=a==null?void 0:a.toMillis)==null?void 0:c.call(a))??0};return o(i.createdAt)-o(s.createdAt)});try{const r=Pr(e,gr("status","==","pending")),s=await gn(r);return n(s)}catch(r){if(O5(r))return console.warn("[youth.getYouthCandidates] Permission denied",r),[];throw r}}function Koe(t,e){const n=pn(Me,"users",t,"youthCandidates"),r=i=>i.map(o=>({id:o.id,...o.data()})).filter(o=>o.status==="pending").sort((o,a)=>{const c=u=>{var d;return((d=u==null?void 0:u.toMillis)==null?void 0:d.call(u))??0};return c(a.createdAt)-c(o.createdAt)}),s=Vs(Pr(n,gr("status","==","pending")),i=>{e(r(i.docs))},i=>{if(O5(i)){console.warn("[youth.listenYouthCandidates] Permission denied",i),e([]);return}console.error("[youth.listenYouthCandidates] Snapshot failed",i)});return()=>{s()}}async function qoe(t,e,n){const r=kt(Me,"users",t),s=pn(r,"youthCandidates"),i=new Date,o=(n==null?void 0:n.durationMultiplier)??1,a=Number.isFinite(o)?Math.max(.1,Math.min(1,o)):1,c=new Date(i.getTime()+L5*a);return await ro(Me,async d=>{var w,y;const m=(await d.get(r)).data(),g=(y=(w=m==null?void 0:m.youth)==null?void 0:w.nextGenerateAt)==null?void 0:y.toDate();if(g&&g>i)throw new Error("1 hafta beklemelisin");d.set(r,{youth:{lastGenerateAt:cl(),nextGenerateAt:Dt.fromDate(c)}},{merge:!0})}),{id:(await C4(s,{status:"pending",createdAt:cl(),player:e})).id,status:"pending",createdAt:Dt.fromDate(i),player:e}}async function Yoe(t,e){const n=kt(Me,"users",t,"youthCandidates",e),r=await Sl(n);if(!r.exists())return;const s=r.data();await UI(t,s.player),await f0(n)}async function Qoe(t,e){const n=kt(Me,"users",t,"youthCandidates",e);await f0(n)}async function Xoe(t){const e=kt(Me,"users",t),n=new Date;await ro(Me,async r=>{const i=(await r.get(e)).data();if(((i==null?void 0:i.diamondBalance)??0)<Wv)throw new Error("Yetersiz elmas");r.update(e,{diamondBalance:m0(-Wv),"youth.lastGenerateAt":cl(),"youth.nextGenerateAt":Dt.fromDate(n)})})}async function Joe(t){const e=kt(Me,"users",t),n=new Date;await ro(Me,async r=>{var c,u;const i=(await r.get(e)).data(),o=(u=(c=i==null?void 0:i.youth)==null?void 0:c.nextGenerateAt)==null?void 0:u.toDate(),a=(()=>{if(!o||o<=n)return n;const d=new Date(o.getTime()-sC);return d<=n?n:d})();r.set(e,{youth:{...(i==null?void 0:i.youth)??{},nextGenerateAt:Dt.fromDate(a)}},{merge:!0})})}var T0="Dialog",[V5,zme]=Ps(T0),[Zoe,ki]=V5(T0),B5=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),c=p.useRef(null),[u,d]=Bo({prop:r,defaultProp:s??!1,onChange:i,caller:T0});return l.jsx(Zoe,{scope:e,triggerRef:a,contentRef:c,contentId:Us(),titleId:Us(),descriptionId:Us(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};B5.displayName=T0;var U5="DialogTrigger",z5=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(U5,n),i=vt(e,s.triggerRef);return l.jsx(rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":aC(s.open),...r,ref:i,onClick:Ne(t.onClick,s.onOpenToggle)})});z5.displayName=U5;var iC="DialogPortal",[eae,$5]=V5(iC,{forceMount:void 0}),W5=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ki(iC,e);return l.jsx(eae,{scope:e,forceMount:n,children:p.Children.map(r,o=>l.jsx(_r,{present:n||i.open,children:l.jsx(oh,{asChild:!0,container:s,children:o})}))})};W5.displayName=iC;var Gv="DialogOverlay",G5=p.forwardRef((t,e)=>{const n=$5(Gv,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ki(Gv,t.__scopeDialog);return i.modal?l.jsx(_r,{present:r||i.open,children:l.jsx(nae,{...s,ref:e})}):null});G5.displayName=Gv;var tae=rl("DialogOverlay.RemoveScroll"),nae=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(Gv,n);return l.jsx(kp,{as:tae,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(rt.div,{"data-state":aC(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),jc="DialogContent",H5=p.forwardRef((t,e)=>{const n=$5(jc,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ki(jc,t.__scopeDialog);return l.jsx(_r,{present:r||i.open,children:i.modal?l.jsx(rae,{...s,ref:e}):l.jsx(sae,{...s,ref:e})})});H5.displayName=jc;var rae=p.forwardRef((t,e)=>{const n=ki(jc,t.__scopeDialog),r=p.useRef(null),s=vt(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return x0(i)},[]),l.jsx(K5,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ne(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ne(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ne(t.onFocusOutside,i=>i.preventDefault())})}),sae=p.forwardRef((t,e)=>{const n=ki(jc,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return l.jsx(K5,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),K5=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ki(jc,n),c=p.useRef(null),u=vt(e,c);return y0(),l.jsxs(l.Fragment,{children:[l.jsx(Cp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(rh,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":aC(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(iae,{titleId:a.titleId}),l.jsx(aae,{contentRef:c,descriptionId:a.descriptionId})]})]})}),oC="DialogTitle",q5=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(oC,n);return l.jsx(rt.h2,{id:s.titleId,...r,ref:e})});q5.displayName=oC;var Y5="DialogDescription",Q5=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(Y5,n);return l.jsx(rt.p,{id:s.descriptionId,...r,ref:e})});Q5.displayName=Y5;var X5="DialogClose",J5=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(X5,n);return l.jsx(rt.button,{type:"button",...r,ref:e,onClick:Ne(t.onClick,()=>s.onOpenChange(!1))})});J5.displayName=X5;function aC(t){return t?"open":"closed"}var Z5="DialogTitleWarning",[$me,e3]=eW(Z5,{contentName:jc,titleName:oC,docsSlug:"dialog"}),iae=({titleId:t})=>{const e=e3(Z5),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},oae="DialogDescriptionWarning",aae=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${e3(oae).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},t3=B5,n3=z5,r3=W5,I0=G5,C0=H5,N0=q5,k0=Q5,s3=J5;const Go=t3,lae=n3,cae=r3,i3=p.forwardRef(({className:t,...e},n)=>l.jsx(I0,{ref:n,className:ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));i3.displayName=I0.displayName;const Ji=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(cae,{children:[l.jsx(i3,{}),l.jsxs(C0,{ref:r,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(s3,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(Bv,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ji.displayName=C0.displayName;const Ho=({className:t,...e})=>l.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ho.displayName="DialogHeader";const Vm=({className:t,...e})=>l.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Vm.displayName="DialogFooter";const Ko=p.forwardRef(({className:t,...e},n)=>l.jsx(N0,{ref:n,className:ue("text-lg font-semibold leading-none tracking-tight",t),...e}));Ko.displayName=N0.displayName;const ul=p.forwardRef(({className:t,...e},n)=>l.jsx(k0,{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));ul.displayName=k0.displayName;const Xn=p.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Xn.displayName="Input";function VE(t,[e,n]){return Math.min(n,Math.max(e,t))}function uae(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var lC="ScrollArea",[o3,Wme]=Ps(lC),[dae,Js]=o3(lC),a3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,c]=p.useState(null),[u,d]=p.useState(null),[h,m]=p.useState(null),[g,w]=p.useState(null),[y,T]=p.useState(null),[b,_]=p.useState(0),[I,A]=p.useState(0),[M,j]=p.useState(!1),[v,E]=p.useState(!1),C=vt(e,P=>c(P)),S=Ip(s);return l.jsx(dae,{scope:n,type:r,dir:S,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:M,onScrollbarXEnabledChange:j,scrollbarY:y,onScrollbarYChange:T,scrollbarYEnabled:v,onScrollbarYEnabledChange:E,onCornerWidthChange:_,onCornerHeightChange:A,children:l.jsx(rt.div,{dir:S,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":I+"px",...t.style}})})});a3.displayName=lC;var l3="ScrollAreaViewport",c3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Js(l3,n),a=p.useRef(null),c=vt(e,a,o.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(rt.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:l.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});c3.displayName=l3;var so="ScrollAreaScrollbar",cC=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Js(so,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return p.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?l.jsx(hae,{...r,ref:e,forceMount:n}):s.type==="scroll"?l.jsx(fae,{...r,ref:e,forceMount:n}):s.type==="auto"?l.jsx(u3,{...r,ref:e,forceMount:n}):s.type==="always"?l.jsx(uC,{...r,ref:e}):null});cC.displayName=so;var hae=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Js(so,t.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(_r,{present:n||i,children:l.jsx(u3,{"data-state":i?"visible":"hidden",...r,ref:e})})}),fae=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Js(so,t.__scopeScrollArea),i=t.orientation==="horizontal",o=P0(()=>c("SCROLL_END"),100),[a,c]=uae("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(c("SCROLL"),o()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,i,c,o]),l.jsx(_r,{present:n||a!=="hidden",children:l.jsx(uC,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ne(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ne(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),u3=p.forwardRef((t,e)=>{const n=Js(so,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=p.useState(!1),a=t.orientation==="horizontal",c=P0(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:d)}},10);return qd(n.viewport,c),qd(n.content,c),l.jsx(_r,{present:r||i,children:l.jsx(uC,{"data-state":i?"visible":"hidden",...s,ref:e})})}),uC=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Js(so,t.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[a,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=p3(a.viewport,a.content),d={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return xae(m,o.current,a,g)}return n==="horizontal"?l.jsx(mae,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollLeft,g=IA(m,a,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?l.jsx(pae,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollTop,g=IA(m,a);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),mae=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Js(so,t.__scopeScrollArea),[o,a]=p.useState(),c=p.useRef(null),u=vt(e,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(h3,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":R0(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),y3(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Kv(o.paddingLeft),paddingEnd:Kv(o.paddingRight)}})}})}),pae=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Js(so,t.__scopeScrollArea),[o,a]=p.useState(),c=p.useRef(null),u=vt(e,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(h3,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":R0(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),y3(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Kv(o.paddingTop),paddingEnd:Kv(o.paddingBottom)}})}})}),[gae,d3]=o3(so),h3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,g=Js(so,n),[w,y]=p.useState(null),T=vt(e,C=>y(C)),b=p.useRef(null),_=p.useRef(""),I=g.viewport,A=r.content-r.viewport,M=mr(d),j=mr(c),v=P0(h,10);function E(C){if(b.current){const S=C.clientX-b.current.left,P=C.clientY-b.current.top;u({x:S,y:P})}}return p.useEffect(()=>{const C=S=>{const P=S.target;(w==null?void 0:w.contains(P))&&M(S,A)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[I,w,A,M]),p.useEffect(j,[r,j]),qd(w,v),qd(g.content,v),l.jsx(gae,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:mr(i),onThumbPointerUp:mr(o),onThumbPositionChange:j,onThumbPointerDown:mr(a),children:l.jsx(rt.div,{...m,ref:T,style:{position:"absolute",...m.style},onPointerDown:Ne(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),b.current=w.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:Ne(t.onPointerMove,E),onPointerUp:Ne(t.onPointerUp,C=>{const S=C.target;S.hasPointerCapture(C.pointerId)&&S.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})})})}),Hv="ScrollAreaThumb",f3=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=d3(Hv,t.__scopeScrollArea);return l.jsx(_r,{present:n||s.hasThumb,children:l.jsx(yae,{ref:e,...r})})}),yae=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Js(Hv,n),o=d3(Hv,n),{onThumbPositionChange:a}=o,c=vt(e,h=>o.onThumbChange(h)),u=p.useRef(void 0),d=P0(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const g=wae(h,a);u.current=g,a()}};return a(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,a]),l.jsx(rt.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ne(t.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),w=h.clientX-g.left,y=h.clientY-g.top;o.onThumbPointerDown({x:w,y})}),onPointerUp:Ne(t.onPointerUp,o.onThumbPointerUp)})});f3.displayName=Hv;var dC="ScrollAreaCorner",m3=p.forwardRef((t,e)=>{const n=Js(dC,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(vae,{...t,ref:e}):null});m3.displayName=dC;var vae=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Js(dC,n),[i,o]=p.useState(0),[a,c]=p.useState(0),u=!!(i&&a);return qd(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),qd(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?l.jsx(rt.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Kv(t){return t?parseInt(t,10):0}function p3(t,e){const n=t/e;return isNaN(n)?0:n}function R0(t){const e=p3(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function xae(t,e,n,r="ltr"){const s=R0(n),i=s/2,o=e||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return g3([c,u],h)(t)}function IA(t,e,n="ltr"){const r=R0(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=VE(t,c);return g3([0,o],[0,a])(u)}function g3(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function y3(t,e){return t>0&&t<e}var wae=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function P0(t,e){const n=mr(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function qd(t,e){const n=mr(e);wr(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var v3=a3,_ae=c3,bae=m3;const x3=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(v3,{ref:r,className:ue("relative overflow-hidden",t),...n,children:[l.jsx(_ae,{className:"h-full w-full rounded-[inherit]",children:e}),l.jsx(w3,{}),l.jsx(bae,{})]}));x3.displayName=v3.displayName;const w3=p.forwardRef(({className:t,orientation:e="vertical",...n},r)=>l.jsx(cC,{ref:r,orientation:e,className:ue("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:l.jsx(f3,{className:"relative flex-1 rounded-full bg-border"})}));w3.displayName=cC.displayName;var hC="Progress",fC=100,[Eae,Gme]=Ps(hC),[Sae,Tae]=Eae(hC),_3=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=Iae,...o}=t;(s||s===0)&&!CA(s)&&console.error(Cae(`${s}`,"Progress"));const a=CA(s)?s:fC;r!==null&&!NA(r,a)&&console.error(Nae(`${r}`,"Progress"));const c=NA(r,a)?r:null,u=qv(c)?i(c,a):void 0;return l.jsx(Sae,{scope:n,value:c,max:a,children:l.jsx(rt.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":qv(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":S3(c,a),"data-value":c??void 0,"data-max":a,...o,ref:e})})});_3.displayName=hC;var b3="ProgressIndicator",E3=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Tae(b3,n);return l.jsx(rt.div,{"data-state":S3(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});E3.displayName=b3;function Iae(t,e){return`${Math.round(t/e*100)}%`}function S3(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function qv(t){return typeof t=="number"}function CA(t){return qv(t)&&!isNaN(t)&&t>0}function NA(t,e){return qv(t)&&!isNaN(t)&&t<=e&&t>=0}function Cae(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fC}\`.`}function Nae(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var T3=_3,kae=E3;const Yd=p.forwardRef(({className:t,value:e,indicatorClassName:n,...r},s)=>l.jsx(T3,{ref:s,className:ue("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:l.jsx(kae,{className:ue("h-full w-full flex-1 bg-primary transition-all",n),style:{transform:`translateX(-${100-(e||0)}%)`}})}));Yd.displayName=T3.displayName;const Dg=t=>typeof t=="number"&&Number.isFinite(t)?Math.round(Math.min(1,Math.max(0,t))*100):75,Rae=t=>t.map(e=>({...e,injuryStatus:e.injuryStatus??"healthy"})),Pae=({open:t,kitType:e,onOpenChange:n})=>{const{user:r}=Vn(),{kits:s,applyKitToPlayer:i,isProcessing:o}=Xc(),[a,c]=p.useState(""),[u,d]=p.useState(null),{data:h=[],isLoading:m,refetch:g}=T7({queryKey:["team-players",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const _=await jn(r.id);return _!=null&&_.players?Rae(_.players):[]},enabled:t&&!!r&&!!e,staleTime:1e4});p.useEffect(()=>{t||(c(""),d(null))},[t]);const w=p.useMemo(()=>{if(!e)return[];const _=a.trim().toLowerCase(),I=h.filter(j=>_.length===0?!0:j.name.toLowerCase().includes(_)),A=j=>Dg(j.condition),M=j=>Dg(j.motivation);return I.sort((j,v)=>{if(e==="health"){const E=j.injuryStatus==="injured"?0:1,C=v.injuryStatus==="injured"?0:1;return E!==C?E-C:A(j)-A(v)}return e==="energy"?A(j)-A(v):M(j)-M(v)})},[h,a,e]),y=async _=>{if(e){d(_);try{await i(e,_),await g(),n(!1)}catch(I){console.warn("[KitUsageDialog] apply kit failed",I)}finally{d(null)}}},T=e?ed[e]:null,b=e?s[e]??0:0;return l.jsx(Go,{open:t,onOpenChange:n,children:l.jsxs(Ji,{className:"sm:max-w-xl",children:[l.jsxs(Ho,{children:[l.jsx(Ko,{children:e?`${T==null?void 0:T.label} Kullan`:"Kit Se"}),e&&l.jsxs(ul,{className:"space-y-1",children:[l.jsx("span",{children:T==null?void 0:T.description}),e&&l.jsx("div",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:R5(e)})]})]}),!e&&l.jsx("p",{className:"py-6 text-sm text-muted-foreground",children:"Ltfen nce kullanmak istediiniz kiti sein."}),e&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:"Kalan stok:"}),l.jsx(Mt,{variant:b>0?"secondary":"outline",children:b})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Vv,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l.jsx(Xn,{placeholder:"Oyuncu ara",value:a,onChange:_=>c(_.target.value),className:"pl-9"})]}),l.jsx(x3,{className:"max-h-80 pr-2",children:m?l.jsxs("div",{className:"flex items-center justify-center py-10 text-sm text-muted-foreground",children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"})," Oyuncular ykleniyor..."]}):w.length===0?l.jsx("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"Uygun oyuncu bulunamad."}):l.jsx("div",{className:"space-y-3",children:w.map(_=>{const I=Dg(_.condition),A=Dg(_.motivation),M=u===_.id&&o;return l.jsxs("div",{className:"rounded-lg border bg-card p-3 shadow-sm transition hover:border-primary/40",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-sm font-semibold",children:_.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[_.position,"  Kondisyon %",I,"  Motivasyon %",A]}),l.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[l.jsxs(Mt,{variant:"outline",children:["G ",Hn(_.overall)]}),_.injuryStatus==="injured"&&l.jsx(Mt,{variant:"destructive",children:"Sakat"})]})]}),l.jsxs(fe,{size:"sm",disabled:b===0||o,onClick:()=>y(_.id),children:[M&&l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Kiti Kullan"]})]}),l.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 text-xs font-medium text-muted-foreground",children:["Kondisyon %",I]}),l.jsx(Yd,{value:I,className:"h-2"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 text-xs font-medium text-muted-foreground",children:["Motivasyon %",A]}),l.jsx(Yd,{value:A,className:"h-2"})]})]})]},_.id)})})})]})]})})},kA={energy:{icon:Y4,color:"text-emerald-500"},morale:{icon:rV,color:"text-amber-500"},health:{icon:tV,color:"text-rose-500"}},Aae=({isVisible:t,onDismiss:e})=>{const n=qs(),{user:r,logout:s}=Vn(),{theme:i,toggleTheme:o}=H4(),{balance:a}=Ni(),{kits:c,purchaseKit:u,isProcessing:d,vipActive:h,vipStatus:m}=Xc(),[g,w]=p.useState(null),[y,T]=p.useState(!1),[b,_]=p.useState(null),[I,A]=p.useState(null),[M,j]=p.useState(!1),[v,E]=p.useState(!1),C=p.useRef(null),S=h?"text-amber-300 drop-shadow":"text-slate-400",P=h?"bg-amber-500/10 text-amber-200 hover:bg-amber-500/20 hover:text-amber-100":"text-slate-300 hover:text-white hover:bg-white/10",R=m.plan?m.plan.toUpperCase():null,k=h?`VIP aktif${R?` (${R})`:""}`:"VIP paketlerini kesfet";p.useEffect(()=>{if(!r){_(null),A(null);return}let O=!1;return(async()=>{try{const[Z,ye]=await Promise.all([jn(r.id),Ac(r.id)]);if(O)return;if(Z){const de=Z.players.filter(ze=>ze.squadRole==="starting");if(de.length){const ze=de.reduce((re,Pe)=>re+Pe.overall,0)/de.length;_(Ii(ze))}else _(null)}else _(null);if(!ye){A(null);return}const ae=await Gd(ye,r.id);if(O)return;const _e=ae.filter(de=>de.status==="played"&&de.score).slice(-5).map(de=>{const ze=de.homeTeamId===r.id,{home:re,away:Pe}=de.score;return re===Pe?"D":ze&&re>Pe||!ze&&Pe>re?"W":"L"}).join("");A(_e||null)}catch(Z){console.warn("[TopBar] takim ozeti yuklenemedi",Z),O||(_(null),A(null))}})(),()=>{O=!0}},[r]),p.useEffect(()=>{if(!r){j(!1),E(!1);return}let O=!1;return(async()=>{try{await Hoe(r.id)}catch(Z){console.warn("[TopBar] antrenman yenileme basarisiz",Z)}try{const Z=await Woe(r.id);O||j(Z>0)}catch(Z){console.warn("[TopBar] antrenman bildirimi yuklenemedi",Z),O||j(!1)}try{const Z=await F5(r.id);O||E(Z.length>0)}catch(Z){console.warn("[TopBar] altyapi bildirimi yuklenemedi",Z),O||E(!1)}})(),()=>{O=!0}},[r]);const W=p.useMemo(()=>{const O=[];return M&&O.push({id:"training",message:"Gormediginiz antrenman sonuclari hazir.",icon:Fv}),v&&O.push({id:"youth",message:"Altyapidan takima katilabilecek oyuncular var.",icon:sV}),O},[M,v]);p.useEffect(()=>{if(!t)return;const O=V=>{const Z=C.current;Z&&(Z.contains(V.target)||e())};return document.addEventListener("pointerdown",O),()=>{document.removeEventListener("pointerdown",O)}},[t,e]);const J=async(O,V)=>{try{await u(O,V)}catch(Z){console.warn("[TopBar] purchase kit failed",Z)}},Q=O=>{if((c[O]??0)<=0){G.error("Stokta yeterli kit bulunmuyor.");return}w(O),T(!0)},le=O=>{T(O),O||w(null)};return l.jsxs("header",{ref:C,className:"nostalgia-topbar px-3 py-3 sm:px-4","data-visible":t?"true":"false",children:[l.jsx("div",{className:"nostalgia-topbar__inner flex flex-col gap-4",children:l.jsxs("div",{className:"flex w-full flex-nowrap items-center gap-4 overflow-x-auto lg:grid lg:grid-cols-[auto_1fr_auto] lg:items-center lg:gap-6 lg:overflow-visible",children:[l.jsxs("div",{className:"flex min-w-0 flex-nowrap items-center gap-3 overflow-hidden text-sm text-slate-200 sm:gap-4",children:[l.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex shrink-0 items-center rounded-xl border border-white/10 bg-white/5 p-1 transition hover:border-cyan-300/40 hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300/40","aria-label":"Ana menuye don",children:l.jsx(iV,{size:"sm",showText:!0,textClassName:"hidden xl:inline"})}),r?l.jsxs("div",{className:"flex min-w-0 flex-nowrap items-center gap-3 sm:gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-full border border-emerald-300/30 bg-slate-900/70",children:r.teamLogo&&/^(data:image|https?:\/\/)/.test(r.teamLogo)?l.jsx("img",{src:r.teamLogo,alt:"Takm logosu",className:"h-full w-full object-cover"}):l.jsx("span",{className:"text-2xl leading-none",children:r.teamLogo??""})}),l.jsx("span",{className:"truncate text-base font-semibold text-foreground sm:text-lg",children:r.teamName})]}),l.jsxs("div",{className:"flex flex-nowrap items-center gap-2",children:[l.jsxs(Mt,{variant:"secondary",className:"border border-white/20 bg-white/10 px-2 py-0.5 text-[11px] text-slate-100 shadow-sm backdrop-blur-sm sm:text-xs",children:["Overall: ",b??"-"]}),l.jsxs(Mt,{variant:"outline",className:"border border-white/20 bg-white/5 px-2 py-0.5 text-[11px] text-slate-100 sm:text-xs",children:["Form: ",I??"-"]})]})]}):null]}),l.jsx("div",{className:"flex w-full items-stretch justify-center gap-2 overflow-x-auto pb-1 lg:w-full lg:justify-center lg:overflow-visible lg:justify-self-center",children:Object.keys(kA).map(O=>{const{icon:V,color:Z}=kA[O],ye=c[O]??0,ae=ed[O],ve=R5(O);return l.jsxs(m5,{children:[l.jsx(p5,{asChild:!0,children:l.jsxs(fe,{variant:"ghost",size:"sm",className:"flex items-center gap-2 whitespace-nowrap text-slate-200 hover:bg-white/10 hover:text-white",children:[l.jsx(V,{className:`h-4 w-4 ${Z}`}),l.jsx("span",{className:"text-sm font-medium",children:ae.label}),l.jsx(Mt,{variant:ye>0?"secondary":"outline",className:"border border-white/20 bg-white/10 px-1.5 py-0 text-[11px] text-slate-100",children:ye})]})}),l.jsxs(ZI,{align:"start",className:"w-64",children:[l.jsx(g5,{children:ae.label}),l.jsx("p",{className:"px-2 text-xs text-muted-foreground",children:ae.description}),ve&&l.jsx("p",{className:"px-2 pb-2 text-xs font-medium text-emerald-600 dark:text-emerald-400",children:ve}),l.jsxs(gs,{disabled:d,onClick:()=>J(O,"ad"),children:["Reklam izle (+",ae.adReward,")"]}),l.jsxs(gs,{disabled:d,onClick:()=>J(O,"diamonds"),children:[ae.diamondCost," Elmas ile Satin Al"]}),l.jsx(eC,{}),l.jsx(gs,{disabled:ye===0||d,onClick:()=>Q(O),children:ye===0?"Stok Yok":"Kiti Kullan"})]})]},O)})}),l.jsxs("div",{className:"flex flex-nowrap items-center justify-end gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fe,{variant:"ghost",size:"sm",onClick:o,className:"text-slate-200 hover:bg-white/10 hover:text-white",children:i==="light"?l.jsx(PE,{className:"h-4 w-4"}):l.jsx(Xre,{className:"h-4 w-4"})}),l.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>n("/contact"),className:"text-slate-200 hover:bg-white/10 hover:text-white",children:[l.jsx(zre,{className:"mr-2 h-4 w-4"}),"Iletisim"]}),l.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>n("/store/vip"),className:P,title:k,children:[l.jsxs("div",{className:"relative flex items-center gap-1",children:[l.jsx(WI,{className:`h-4 w-4 ${S}`}),h?l.jsx("span",{className:"text-xs font-semibold text-amber-200",children:"VIP"}):l.jsx("span",{className:"text-xs font-semibold text-slate-300",children:"VIP"}),h&&l.jsx("span",{className:"absolute -right-1 -top-1 h-2 w-2 rounded-full bg-emerald-400 shadow"})]}),l.jsx("span",{className:"sr-only",children:"VIP magazasi"})]}),l.jsxs(N5,{children:[l.jsx(k5,{asChild:!0,children:l.jsx(fe,{variant:"ghost",size:"sm",className:"text-slate-200 hover:bg-white/10 hover:text-white",children:l.jsxs("div",{className:"relative",children:[l.jsx(Tre,{className:"h-4 w-4"}),W.length>0&&l.jsx("span",{className:"absolute -right-1 -top-1 h-2 w-2 rounded-full bg-red-500"})]})})}),l.jsx(nC,{align:"end",className:"w-64 p-2",children:W.length>0?l.jsx("ul",{className:"space-y-2",children:W.map(({id:O,message:V,icon:Z})=>l.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[l.jsx(Z,{className:"mt-0.5 h-4 w-4 text-primary"}),l.jsx("span",{className:"text-muted-foreground",children:V})]},O))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"Yeni bildiriminiz bulunmuyor."})})]}),l.jsx(fe,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-200 hover:bg-white/10 hover:text-white",children:l.jsx(Ure,{className:"h-4 w-4"})})]}),d&&l.jsx(Qn,{className:"h-4 w-4 animate-spin text-slate-300"}),l.jsxs("div",{className:"flex items-center gap-1","data-testid":"topbar-diamond-balance",children:[l.jsx(Vf,{className:"h-5 w-5 text-sky-300 drop-shadow"}),l.jsx("span",{className:"text-slate-100",children:a})]}),l.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>n("/store/diamonds"),"data-testid":"topbar-diamond-plus",className:"text-slate-200 hover:bg-white/10 hover:text-white",children:l.jsx(Hre,{className:"h-4 w-4"})})]})]})}),l.jsx(Pae,{open:y,kitType:g,onOpenChange:le})]})},Ue=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ue.displayName="Card";const It=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("flex flex-col space-y-1.5 p-6",t),...e}));It.displayName="CardHeader";const Ct=p.forwardRef(({className:t,...e},n)=>l.jsx("h3",{ref:n,className:ue("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ct.displayName="CardTitle";const I3=p.forwardRef(({className:t,...e},n)=>l.jsx("p",{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));I3.displayName="CardDescription";const Je=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("p-6 pt-0",t),...e}));Je.displayName="CardContent";const C3=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("flex items-center p-6 pt-0",t),...e}));C3.displayName="CardFooter";var A0="Tabs",[jae,Hme]=Ps(A0,[v0]),N3=v0(),[Mae,mC]=jae(A0),k3=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:c="automatic",...u}=t,d=Ip(a),[h,m]=Bo({prop:r,onChange:s,defaultProp:i??"",caller:A0});return l.jsx(Mae,{scope:n,baseId:Us(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:l.jsx(rt.div,{dir:d,"data-orientation":o,...u,ref:e})})});k3.displayName=A0;var R3="TabsList",P3=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=mC(R3,n),o=N3(n);return l.jsx(hV,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:l.jsx(rt.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});P3.displayName=R3;var A3="TabsTrigger",j3=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=mC(A3,n),a=N3(n),c=O3(o.baseId,r),u=L3(o.baseId,r),d=r===o.value;return l.jsx(fV,{asChild:!0,...a,focusable:!s,active:d,children:l.jsx(rt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Ne(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Ne(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Ne(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});j3.displayName=A3;var M3="TabsContent",D3=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=mC(M3,n),c=O3(a.baseId,r),u=L3(a.baseId,r),d=r===a.value,h=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),l.jsx(_r,{present:s||d,children:({present:m})=>l.jsx(rt.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});D3.displayName=M3;function O3(t,e){return`${t}-trigger-${e}`}function L3(t,e){return`${t}-content-${e}`}var Dae=k3,F3=P3,V3=j3,B3=D3;const pC=Dae,j0=p.forwardRef(({className:t,...e},n)=>l.jsx(F3,{ref:n,className:ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));j0.displayName=F3.displayName;const ko=p.forwardRef(({className:t,...e},n)=>l.jsx(V3,{ref:n,className:ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));ko.displayName=V3.displayName;const Ro=p.forwardRef(({className:t,...e},n)=>l.jsx(B3,{ref:n,className:ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ro.displayName=B3.displayName;var Oae="Label",U3=p.forwardRef((t,e)=>l.jsx(rt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));U3.displayName=Oae;var z3=U3;const Lae=g0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qn=p.forwardRef(({className:t,...e},n)=>l.jsx(z3,{ref:n,className:ue(Lae(),t),...e}));qn.displayName=z3.displayName;var Fae="Separator",RA="horizontal",Vae=["horizontal","vertical"],$3=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=RA,...s}=t,i=Bae(r)?r:RA,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return l.jsx(rt.div,{"data-orientation":i,...a,...s,ref:e})});$3.displayName=Fae;function Bae(t){return Vae.includes(t)}var W3=$3;const BE=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>l.jsx(W3,{ref:s,decorative:n,orientation:e,className:ue("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));BE.displayName=W3.displayName;const Uae=t=>{if(t instanceof Ys){const n={"auth/email-already-in-use":"Bu e-posta adresi zaten kullanmda.","auth/invalid-email":"Geerli bir e-posta adresi girin.","auth/weak-password":"ifreniz en az 6 karakter olmal.","auth/operation-not-allowed":"Kayt ilemi devre d. Ltfen daha sonra tekrar deneyin.","permission-denied":"Takm oluturulamad. Ltfen tekrar deneyin."}[t.code];if(n)return n;if(t.message)return t.message}return t instanceof Error&&t.message?t.message:"Kayt baarsz"},PA=(t,e)=>{if(e instanceof Ys){const r={"auth/popup-blocked":"Tarayici acilir pencere engellemesini kaldirin ve tekrar deneyin.","auth/popup-closed-by-user":"Oturum penceresini kapattiniz. Lutfen tekrar deneyin.","auth/cancelled-popup-request":"Baska bir oturum istegi zaten isleniyor. Lutfen tekrar deneyin.","auth/unauthorized-domain":"Bu alan Google girisi icin yetkilendirilmemis. Lutfen yonetici ile iletisime gecin."}[e.code];if(r)return r;if(e.message)return e.message}return e instanceof Error&&e.message?e.message:t==="google"?"Google ile giris basarisiz":"Apple ile giris basarisiz"};function zae(){const{login:t,register:e,loginWithGoogle:n,loginWithApple:r,registerWithGoogle:s,registerWithApple:i,isLoading:o}=Vn(),[a,c]=p.useState({email:"",password:""}),[u,d]=p.useState({email:"",password:"",teamName:""}),[h,m]=p.useState(""),[g,w]=p.useState(null),[y,T]=p.useState(!1),b=async v=>{if(v.preventDefault(),!a.email||!a.password){G.error("Ltfen tm alanlar doldurun");return}try{await t(a.email,a.password),G.success("Baaryla giri yapld!"),console.log("login ok:",a.email)}catch(E){G.error("Giri baarsz"),console.error("login error:",E)}},_=async v=>{v.preventDefault();const E=u.teamName.trim();if(!u.email||!u.password||!E){G.error("Ltfen tm alanlar doldurun");return}try{await e(u.email,u.password,E),G.success("Hesap baaryla oluturuldu!")}catch(C){console.error("register error:",C),G.error(Uae(C))}},I=async()=>{try{await n(),G.success("Baaryla giri yapld!")}catch(v){G.error(PA("google",v)),console.error("google login error:",v)}},A=async()=>{try{await r(),G.success("Baaryla giri yapld!")}catch(v){G.error(PA("apple",v)),console.error("apple login error:",v)}},M=v=>{w(v),m(""),T(!0)},j=async v=>{if(v.preventDefault(),!g)return;const E=h.trim();if(!E){G.error("Ltfen takm adnz girin");return}try{g==="google"?await s(E):await i(E),G.success("Hesap baaryla oluturuldu!"),T(!1),w(null),m("")}catch(C){G.error("Sosyal kayt baarsz"),console.error("social register error:",C)}};return l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-950 dark:via-emerald-950 dark:to-teal-950 p-4",children:[l.jsxs(Ue,{className:"w-full max-w-md",children:[l.jsxs(It,{className:"space-y-3 text-center",children:[l.jsx(iV,{size:"md",className:"mx-auto"}),l.jsx(Ct,{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"FHS FUTBOL MENEJERLK"}),l.jsx(I3,{children:"Takmnz ynetin ve ampiyonlua ulan"})]}),l.jsxs(Je,{children:[l.jsxs(pC,{defaultValue:"login",className:"space-y-4",children:[l.jsxs(j0,{className:"grid w-full grid-cols-2",children:[l.jsx(ko,{value:"login",children:"Giri Yap"}),l.jsx(ko,{value:"register",children:"Kayt Ol"})]}),l.jsxs(Ro,{value:"login",className:"space-y-4",children:[l.jsxs("form",{onSubmit:b,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"login-email",children:"E-posta"}),l.jsx(Xn,{id:"login-email",type:"email",placeholder:"ornek@email.com",value:a.email,onChange:v=>c(E=>({...E,email:v.target.value})),disabled:o})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"login-password",children:"ifre"}),l.jsx(Xn,{id:"login-password",type:"password",placeholder:"",value:a.password,onChange:v=>c(E=>({...E,password:v.target.value})),disabled:o})]}),l.jsxs(fe,{type:"submit",className:"w-full",disabled:o,children:[o?l.jsx(Qn,{className:"w-4 h-4 animate-spin mr-2"}):null,"Giri Yap"]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx(BE,{})}),l.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:l.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"veya"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(fe,{variant:"outline",className:"w-full",onClick:I,disabled:o,children:[l.jsx(oA,{className:"w-4 h-4 mr-2"}),"Google ile Giri"]}),l.jsxs(fe,{variant:"outline",className:"w-full",onClick:A,disabled:o,children:[l.jsx(iA,{className:"w-4 h-4 mr-2"}),"Apple ile Giri"]})]})]}),l.jsxs(Ro,{value:"register",className:"space-y-4",children:[l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"register-email",children:"E-posta"}),l.jsx(Xn,{id:"register-email",type:"email",placeholder:"ornek@email.com",value:u.email,onChange:v=>d(E=>({...E,email:v.target.value})),disabled:o})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"register-password",children:"ifre"}),l.jsx(Xn,{id:"register-password",type:"password",placeholder:"",value:u.password,onChange:v=>d(E=>({...E,password:v.target.value})),disabled:o})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"team-name",children:"Takm Ad"}),l.jsx(Xn,{id:"team-name",placeholder:"Takm adnz girin",value:u.teamName,onChange:v=>d(E=>({...E,teamName:v.target.value})),disabled:o})]}),l.jsxs(fe,{type:"submit",className:"w-full",disabled:o,children:[o?l.jsx(Qn,{className:"w-4 h-4 animate-spin mr-2"}):null,"Hesap Olutur"]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx(BE,{})}),l.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:l.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"veya"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(fe,{variant:"outline",className:"w-full",onClick:()=>M("google"),disabled:o,children:[l.jsx(oA,{className:"w-4 h-4 mr-2"}),"Google ile Kayt"]}),l.jsxs(fe,{variant:"outline",className:"w-full",onClick:()=>M("apple"),disabled:o,children:[l.jsx(iA,{className:"w-4 h-4 mr-2"}),"Apple ile Kayt"]})]})]})]}),l.jsxs("div",{className:"mt-6 text-center text-xs text-muted-foreground",children:["Kayt olarak"," ",l.jsx("a",{href:"#",className:"underline underline-offset-4 hover:text-primary",children:"Gizlilik Politikas"})," ","ve"," ",l.jsx("a",{href:"#",className:"underline underline-offset-4 hover:text-primary",children:"Kullanm artlar"}),"'n kabul etmi olursunuz."]})]})]}),l.jsx(Go,{open:y,onOpenChange:v=>{T(v),v||(w(null),m(""))},children:l.jsx(Ji,{children:l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[l.jsxs(Ho,{children:[l.jsx(Ko,{children:g==="google"?"Google ile Kayt":g==="apple"?"Apple ile Kayt":"Sosyal Kayt"}),l.jsx(ul,{children:"Takmnz iin zel bir isim belirleyin."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"social-team-name",children:"Takm Ad"}),l.jsx(Xn,{id:"social-team-name",value:h,onChange:v=>m(v.target.value),placeholder:"Takm adnz girin",disabled:o})]}),l.jsxs(Vm,{className:"gap-2 sm:gap-0",children:[l.jsx(fe,{type:"button",variant:"outline",onClick:()=>{T(!1),w(null),m("")},children:"Vazge"}),l.jsxs(fe,{type:"submit",disabled:o,children:[o?l.jsx(Qn,{className:"w-4 h-4 animate-spin mr-2"}):null,"Kayt Ol"]})]})]})})})]})}const $ae=1500,AA=()=>{const t=qs(),e=lp(),n=p.useRef(0);return p.useEffect(()=>{if(!Lo.isNativePlatform())return;n.current=0;const r=Jb.addListener("backButton",({canGoBack:s})=>{const i=window.history.length>1;if(s||i){t(-1);return}const o=Date.now();o-n.current<=$ae?Jb.exitApp().catch(()=>{n.current=0}):(n.current=o,G.info("kmak iin geri tuuna tekrar basn"))});return()=>{r.remove()}},[t,e]),null},Wae=()=>{const{user:t,isAuthReady:e}=Vn(),[n,r]=p.useState(!1),s=p.useRef(null),i=p.useRef(0);p.useEffect(()=>{const a=s.current;if(!a)return;let c=0;const u=()=>{c||(c=requestAnimationFrame(()=>{const d=a.scrollTop,h=i.current,m=d-h;(m<-3||m>3||d>12)&&r(!0),i.current=d,c=0}))};return a.addEventListener("scroll",u,{passive:!0}),()=>{c&&cancelAnimationFrame(c),a.removeEventListener("scroll",u)}},[]);const o=()=>{r(!1)};return e?t?l.jsxs("div",{className:"app-safe-area bg-background text-foreground",children:[l.jsx(AA,{}),l.jsxs("div",{className:"flex min-h-full flex-col bg-background",children:[l.jsx(Aae,{isVisible:n,onDismiss:o}),l.jsx("main",{ref:s,className:"app-scroll-region flex-1 min-h-0 overflow-y-auto",children:l.jsx(FH,{})})]})]}):l.jsxs("div",{className:"app-safe-area bg-background text-foreground",children:[l.jsx(AA,{}),l.jsx(zae,{})]}):l.jsx("div",{className:"flex h-screen items-center justify-center text-muted-foreground",children:"Oturum yukleniyor..."})},Gae=.55;function gC(t,e={}){const{minScale:n=Gae,maxScale:r=1}=e,s=p.useRef(null),[i,o]=p.useState(1);return p.useLayoutEffect(()=>{if(!t){o(1);return}if(typeof window>"u")return;const a=w=>{const y=Math.min(r,Math.max(n,w));return Number.isFinite(y)?y:1};let c=0;const u=()=>{var I;const w=s.current;if(!w)return;const y=((I=window.visualViewport)==null?void 0:I.height)??window.innerHeight;if(!y){o(1);return}const T=w.offsetHeight;if(!T){o(1);return}const b=y/T,_=a(Number(b.toFixed(3)));o(A=>Math.abs(A-_)<.005?A:_)},d=()=>{c&&cancelAnimationFrame(c),c=requestAnimationFrame(u)};d();const h=s.current,m=typeof ResizeObserver<"u"?new ResizeObserver(()=>{d()}):void 0;m&&h&&m.observe(h);const g=()=>{d()};return window.addEventListener("resize",g),window.addEventListener("orientationchange",g),()=>{c&&cancelAnimationFrame(c),window.removeEventListener("resize",g),window.removeEventListener("orientationchange",g),m&&m.disconnect()}},[t,r,n]),{contentRef:s,scale:i}}const Og=[{id:"team-planning",label:"Takim Plani",icon:Hd,accent:"sky"},{id:"youth",label:"Altyapi",icon:sV,accent:"emerald"},{id:"transfer-market",label:"Transfer Pazari",icon:nV,accent:"teal"},{id:"fixtures",label:"Fikstur",icon:$I,accent:"violet"},{id:"leagues",label:"Ligler",icon:Zre,accent:"gold"},{id:"training",label:"Antrenman",icon:Fv,accent:"orange"},{id:"match-preview",label:"Mac Onizleme",icon:AE,accent:"rose"},{id:"match-simulation",label:"Mac Simulasyonu",icon:AE,accent:"purple"},{id:"match-history",label:"Gecmis Maclar",icon:Fre,accent:"slate"},{id:"finance",label:"Finans",icon:Z4,accent:"cyan"},{id:"settings",label:"Ayarlar",icon:jE,accent:"teal"},{id:"legend-pack",label:"Nostalji Paket",icon:Qre,accent:"pink"}],jA=(t,e)=>t.filter(r=>r.status==="played"&&r.score).sort((r,s)=>r.date.getTime()-s.date.getTime()).slice(-5).map(r=>{const s=r.homeTeamId===e,{home:i,away:o}=r.score;return i===o?"D":s&&i>o||!s&&o>i?"W":"L"}),MA=t=>{if(!(t!=null&&t.length))return null;const e=t.filter(s=>s.squadRole==="starting"),n=e.length?e:t;if(!n.length)return null;const r=n.reduce((s,i)=>s+i.overall,0)/n.length;return Ii(r)},Hae=t=>{if(!t)return null;const e=t.trim();if(!e)return null;const n=/^(https?:\/\/|\/|\.\/|\.\.\/|data:image\/)/.test(e),r=/\.(svg|png|jpe?g|webp|gif)$/i.test(e);return n||r||e.includes("/")?e:null};function Kae(){const{user:t}=Vn(),e=qs(),n=Math.ceil(Og.length/2),r=Og.slice(0,n),s=Og.slice(n),[i,o]=p.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 768px)").matches),[a,c]=p.useState(null),[u,d]=p.useState(null),[h,m]=p.useState(null),[g,w]=p.useState(null),{contentRef:y,scale:T}=gC(i),b=i?{"--nostalgia-scale":T}:void 0,_=i&&T<.999;p.useEffect(()=>{if(typeof window>"u")return;const S=window.matchMedia("(max-width: 768px)"),P=R=>o(R.matches);return o(S.matches),typeof S.addEventListener=="function"?(S.addEventListener("change",P),()=>S.removeEventListener("change",P)):(S.addListener(P),()=>S.removeListener(P))},[]),p.useEffect(()=>{(async()=>{var P,R,k,W,J,Q,le;if(!t){c(null),d(null),m(null);const O=Ou[0];if(O){const V=new Date(`${O.date}T${O.time??"00:00"}`),Z=!Number.isNaN(V.getTime());w({competition:O.competition??"Lig Maci",dateText:Z?V.toLocaleDateString("tr-TR"):O.date,timeText:O.time??(Z?V.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):""),venue:O.venue??"home",venueName:O.venueName,team:{name:"Takimim",logo:null,form:[],overall:null},opponent:{name:O.opponent,logo:O.opponentLogo,logoUrl:O.opponentLogoUrl,form:((P=O.opponentStats)==null?void 0:P.form)??[],overall:xy((R=O.opponentStats)==null?void 0:R.overall)}})}else w(null);return}try{const O=await Ac(t.id);if(!O){c(null),d(null),m(null),w(null);return}const[V,Z,ye,ae]=await Promise.all([dre(O),Gd(O,t.id),Za(O).catch(()=>[]),jn(t.id).catch(()=>null)]),ve=V.findIndex(me=>me.id===t.id);ve>=0?(c(ve+1),d(V[ve].Pts)):(c(null),d(null));const de=Z.filter(me=>me.status!=="played").sort((me,nt)=>me.date.getTime()-nt.date.getTime())[0];if(de&&de.date){const me=de.date.getTime(),nt=Date.now(),He=Math.max(0,me-nt),te=Math.ceil(He/36e5);m(te)}else m(null);const ze=MA((ae==null?void 0:ae.players)??null),re=jA(Z,t.id),Pe=(ae==null?void 0:ae.name)??t.teamName??"Takimim",Ze=(ae==null?void 0:ae.logo)??t.teamLogo??null,De=()=>{var Zt,_t;const me=Ou[0];if(!me){w(null);return}const nt=new Date(`${me.date}T${me.time??"00:00"}`),He=!Number.isNaN(nt.getTime()),te=He?nt.toLocaleDateString("tr-TR"):me.date,ut=me.time??(He?nt.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):"");w({competition:me.competition??"Lig Maci",dateText:te,timeText:ut,venue:me.venue??"home",venueName:me.venueName,team:{name:Pe,logo:Ze,form:re,overall:ze},opponent:{name:me.opponent,logo:me.opponentLogo,logoUrl:me.opponentLogoUrl,form:((Zt=me.opponentStats)==null?void 0:Zt.form)??[],overall:xy((_t=me.opponentStats)==null?void 0:_t.overall)}})};if(!de){De();return}const ce=de.homeTeamId===t.id,L=ce?de.awayTeamId:de.homeTeamId,K=new Map(ye.map(me=>[me.id,me.name])),ie=L?K.get(L)??L:"Rakip";let Ae=null,Ie=[],$e=null,je=null;if(L)try{const[me,nt]=await Promise.all([jn(L).catch(()=>null),Gd(O,L).catch(()=>[])]);Ae=MA((me==null?void 0:me.players)??null),Ie=nt.length?jA(nt,L):[],$e=(me==null?void 0:me.logo)??null}catch(me){console.warn("[MainMenu] opponent info load failed",me)}const ee=Ou.find(me=>me.opponent.toLowerCase()===ie.toLowerCase());!$e&&(ee!=null&&ee.opponentLogo)&&($e=ee.opponentLogo),ee!=null&&ee.opponentLogoUrl&&(je=ee.opponentLogoUrl),!Ie.length&&((W=(k=ee==null?void 0:ee.opponentStats)==null?void 0:k.form)!=null&&W.length)&&(Ie=ee.opponentStats.form),Ae==null&&((J=ee==null?void 0:ee.opponentStats)==null?void 0:J.overall)!=null&&(Ae=Ii(ee.opponentStats.overall));const be=de.date,Ke=be.toLocaleDateString("tr-TR"),tt=be.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});w({competition:(ee==null?void 0:ee.competition)??"Lig Maci",dateText:Ke,timeText:tt,venue:ce?"home":"away",venueName:ee==null?void 0:ee.venueName,team:{name:Pe,logo:Ze,form:re,overall:ze},opponent:{name:ie,logo:$e,logoUrl:je,form:Ie,overall:Ae}})}catch(O){console.warn("[MainMenu] quick stats load failed",O);const V=Ou[0];if(t&&V){const Z=new Date(`${V.date}T${V.time??"00:00"}`),ye=!Number.isNaN(Z.getTime());w({competition:V.competition??"Lig Maci",dateText:ye?Z.toLocaleDateString("tr-TR"):V.date,timeText:V.time??(ye?Z.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):""),venue:V.venue??"home",venueName:V.venueName,team:{name:t.teamName??"Takimim",logo:t.teamLogo??null,form:[],overall:null},opponent:{name:V.opponent,logo:V.opponentLogo,logoUrl:V.opponentLogoUrl,form:((Q=V.opponentStats)==null?void 0:Q.form)??[],overall:xy((le=V.opponentStats)==null?void 0:le.overall)}})}else w(null)}})()},[t]);const I=S=>{e(`/${S}`)},A=S=>l.jsxs(Ue,{className:`nostalgia-card nostalgia-card--${S.accent} cursor-pointer`,onClick:()=>I(S.id),children:[l.jsx("span",{className:"nostalgia-card__halo","aria-hidden":!0}),l.jsxs(Je,{className:"nostalgia-card__content",children:[l.jsx("div",{className:`nostalgia-menu-icon nostalgia-menu-icon--${S.accent}`,children:l.jsx(S.icon,{})}),l.jsx("h3",{className:"nostalgia-card__label",children:S.label})]})]},S.id),M=(S,P,R)=>{const k=Hae(S);if(k)return l.jsx("img",{src:k,alt:R??"Takim logosu",className:"nostalgia-match-team__emblem-image"});const W=S&&S.trim()?S:P;return l.jsx("div",{className:"nostalgia-match-team__emblem-fallback","aria-hidden":!0,children:W})},j=S=>typeof S=="number"&&Number.isFinite(S)?Hn(S):"-",v=S=>S.length?S.join(""):"-",E=S=>l.jsxs("section",{className:`nostalgia-quick-panel${S?` ${S}`:""}`,children:[l.jsx("h2",{className:"nostalgia-quick-panel__title",children:"Hizli Bakis"}),l.jsxs("div",{className:"nostalgia-quick-grid",children:[l.jsxs("div",{className:"nostalgia-quick-card",children:[l.jsxs("span",{className:"nostalgia-quick-card__value text-emerald-300",children:[a??"-",a?".":""]}),l.jsx("span",{className:"nostalgia-quick-card__label",children:"Lig Sirasi"})]}),l.jsxs("div",{className:"nostalgia-quick-card",children:[l.jsx("span",{className:"nostalgia-quick-card__value text-sky-300",children:u??"-"}),l.jsx("span",{className:"nostalgia-quick-card__label",children:"Puan"})]}),l.jsxs("div",{className:"nostalgia-quick-card",children:[l.jsx("span",{className:"nostalgia-quick-card__value text-fuchsia-300",children:h??"-"}),l.jsx("span",{className:"nostalgia-quick-card__label",children:"Saat Sonra"})]})]})]}),C=g?l.jsxs("section",{className:"nostalgia-match-highlight",children:[l.jsx("div",{className:"nostalgia-match-highlight__overlay","aria-hidden":!0}),l.jsxs("div",{className:"nostalgia-match-highlight__header",children:[l.jsx("span",{className:"nostalgia-match-highlight__badge",children:g.competition}),l.jsxs("div",{className:"nostalgia-match-highlight__datetime",children:[g.dateText,g.timeText?` - ${g.timeText}`:""]})]}),l.jsxs("div",{className:"nostalgia-match-highlight__body",children:[l.jsxs("div",{className:"nostalgia-match-team",children:[l.jsx("div",{className:"nostalgia-match-team__emblem",children:M(g.team.logoUrl??g.team.logo,"TM",`${g.team.name} logosu`)}),l.jsx("div",{className:"nostalgia-match-team__name",children:g.team.name}),l.jsxs("div",{className:"nostalgia-match-team__meta",children:["Overall: ",j(g.team.overall)]}),l.jsxs("div",{className:"nostalgia-match-team__meta",children:["Form: ",v(g.team.form)]})]}),l.jsx("div",{className:"nostalgia-match-highlight__vs",children:"VS"}),l.jsxs("div",{className:"nostalgia-match-team",children:[l.jsx("div",{className:"nostalgia-match-team__emblem",children:M(g.opponent.logoUrl??g.opponent.logo,"TM",`${g.opponent.name} logosu`)}),l.jsx("div",{className:"nostalgia-match-team__name",children:g.opponent.name}),l.jsxs("div",{className:"nostalgia-match-team__meta",children:["Overall: ",j(g.opponent.overall)]}),l.jsxs("div",{className:"nostalgia-match-team__meta",children:["Form: ",v(g.opponent.form)]})]})]}),l.jsxs("div",{className:"nostalgia-match-highlight__footer",children:[l.jsx("span",{children:g.venue==="home"?"Ev Sahipligi":"Deplasman"}),l.jsxs("span",{children:["Stadyum: ",g.venueName??"Belirlenecek"]})]})]}):null;return l.jsxs("div",{className:"nostalgia-screen nostalgia-main-menu",children:[l.jsx("div",{className:"nostalgia-screen__gradient","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__orb nostalgia-screen__orb--left","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__orb nostalgia-screen__orb--right","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__noise","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__content-shell","data-scale-active":_?"true":"false",style:b,children:l.jsxs("div",{className:"nostalgia-screen__content",ref:y,children:[l.jsx("div",{className:`nostalgia-main-menu__stage${i?" nostalgia-main-menu__stage--mobile":""}`,children:i?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"nostalgia-main-menu__slide nostalgia-main-menu__slide--highlight",children:l.jsx("div",{className:"nostalgia-main-menu__slide-inner nostalgia-main-menu__slide-inner--highlight",children:l.jsx("div",{className:"nostalgia-main-menu__highlight-wrapper",children:C})})}),l.jsx("div",{className:"nostalgia-main-menu__slide nostalgia-main-menu__slide--actions",children:l.jsxs("div",{className:"nostalgia-main-menu__slide-inner nostalgia-main-menu__slide-inner--actions",children:[l.jsx("div",{className:"nostalgia-main-menu__mobile-actions",children:Og.map(A)}),E("nostalgia-quick-panel--mobile")]})})]}):l.jsxs(l.Fragment,{children:[l.jsx("nav",{className:"nostalgia-main-menu__column nostalgia-main-menu__column--left","aria-label":"Sol kisayollar",children:r.map(A)}),l.jsx("div",{className:"nostalgia-main-menu__highlight-wrapper",children:C}),l.jsx("nav",{className:"nostalgia-main-menu__column nostalgia-main-menu__column--right","aria-label":"Sag kisayollar",children:s.map(A)})]})}),i?null:E()]})})]})}const qae=t=>t.normalize("NFD").replace(/[^\w\s]/g,"").toLowerCase().replace(/\s+/g,""),Yae={strength:"bg-amber-500",g:"bg-amber-500",guc:"bg-amber-500",shootpower:"bg-orange-500",utgc:"bg-orange-500",shooting:"bg-orange-500",ut:"bg-orange-500",acceleration:"bg-sky-500",hzlanma:"bg-sky-500",topspeed:"bg-sky-500",makshz:"bg-sky-500",dribblespeed:"bg-sky-500",driblinghz:"bg-sky-500",agility:"bg-teal-500",eviklik:"bg-teal-500",jump:"bg-lime-500",srama:"bg-lime-500",tackling:"bg-emerald-500",mcadele:"bg-emerald-500",ballkeeping:"bg-cyan-500",topsaklama:"bg-cyan-500",passing:"bg-blue-500",pas:"bg-blue-500",longball:"bg-indigo-500",uzuntop:"bg-indigo-500",positioning:"bg-purple-500",pozisyonalma:"bg-purple-500",reaction:"bg-pink-500",refleks:"bg-pink-500",ballcontrol:"bg-rose-500",topkontrol:"bg-rose-500"},Qae="bg-slate-200/80 dark:bg-slate-700/70",$n=({label:t,value:e,max:n=1,className:r="",condensed:s=!1})=>{const i=Math.min(e/n*100,100),o=qae(t),a=Yae[o]??"bg-slate-500";return l.jsxs(lh,{children:[l.jsx(ch,{asChild:!0,children:l.jsxs("div",{className:ue("space-y-1",r),"data-condensed":s,children:[l.jsxs("div",{className:ue("flex items-center justify-between text-xs",s&&"text-[11px]"),children:[l.jsx("span",{className:"text-muted-foreground font-medium",children:t}),l.jsx("span",{className:"text-foreground font-semibold",children:i.toFixed(0)})]}),l.jsx(Yd,{value:i,className:ue(s?"h-1.5":"h-2",Qae),indicatorClassName:a})]})}),l.jsxs($c,{children:["Maks: ",Math.round(n*100)]})]})},Xae=.75;function Zi(t,e=Xae){return typeof t=="number"&&Number.isFinite(t)?Math.min(1,Math.max(0,t)):e}function Jae(t){const e=Zi(t);return e>=.9?"bg-emerald-500":e>=.75?"bg-lime-500":e>=.6?"bg-amber-500":"bg-red-500"}function Po({label:t,value:e,variant:n="light",className:r}){const s=Zi(e),i=Math.round(s*100),o=n==="dark"?"text-white/70":"text-muted-foreground",a=n==="dark"?"text-white font-semibold":"text-foreground font-semibold",c=n==="dark"?"bg-white/20":"bg-muted";return l.jsxs("div",{className:ue("space-y-1",r),children:[l.jsxs("div",{className:ue("flex items-center justify-between text-xs",o),children:[l.jsx("span",{children:t}),l.jsx("span",{className:a,children:i})]}),l.jsx("div",{className:ue("h-2 rounded-full overflow-hidden",c),children:l.jsx("div",{className:ue("h-full rounded-full transition-all",Jae(s)),style:{width:`${i}%`}})})]})}const Zae={GK:"bg-yellow-500",CB:"bg-blue-500",LB:"bg-blue-400",RB:"bg-blue-400",CM:"bg-green-500",LM:"bg-green-400",RM:"bg-green-400",CAM:"bg-purple-500",LW:"bg-orange-400",RW:"bg-orange-400",ST:"bg-red-500"},o_=({player:t,onMoveToStarting:e,onMoveToBench:n,onMoveToReserve:r,onPromoteToTeam:s,onListForTransfer:i,onReleasePlayer:o,onRenamePlayer:a,onFirePlayer:c,showActions:u=!0,compact:d=!1,defaultCollapsed:h=!1,condensedStats:m=!1,draggable:g=!1,onDragStart:w,onDragEnd:y})=>{var W,J;const[T,b]=p.useState(h),_=p.useRef(null),I=Q=>{if(!T)return;const le=Q.target;le!=null&&le.closest("[data-player-card-ignore-click]")||b(!1)};p.useEffect(()=>{if(T)return;const Q=le=>{var V;const O=le.target;O&&((V=_.current)!=null&&V.contains(O)||O.closest("[data-radix-popper-content-wrapper]")||b(!0))};return document.addEventListener("pointerdown",Q),()=>{document.removeEventListener("pointerdown",Q)}},[T]);const A=Zae[t.position]??"bg-gray-500",M=Zi(t.condition),j=Zi(t.motivation),v=(W=t.contract)!=null&&W.expiresAt?new Date(t.contract.expiresAt):null,E=((J=t.contract)==null?void 0:J.status)??"active",C=v!==null&&v.getTime()<=Date.now(),S=E==="released"?"secondary":C?"destructive":"outline",P=E==="released"?"Serbest":v?`Sz.: ${v.toLocaleDateString("tr-TR")}`:"Sz.: -",R=p.useMemo(()=>BI({...t,condition:M,motivation:j}),[t,M,j]),k=l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:ue("mb-3 grid grid-cols-3 gap-2",(d||m)&&"gap-1"),children:[l.jsx(Po,{label:"G",value:R,className:d?"space-y-0.5":""}),l.jsx(Po,{label:"Kondisyon",value:M,className:d?"space-y-0.5":""}),l.jsx(Po,{label:"Motivasyon",value:j,className:d?"space-y-0.5":""})]}),l.jsxs("div",{className:ue("grid grid-cols-2 gap-1",(d||m)&&"gap-0.5"),children:[l.jsx($n,{label:"G",value:t.attributes.strength,condensed:d||m}),l.jsx($n,{label:"Hzlanma",value:t.attributes.acceleration,condensed:d||m}),l.jsx($n,{label:"Maks Hz",value:t.attributes.topSpeed,condensed:d||m}),l.jsx($n,{label:"Dribling Hz",value:t.attributes.dribbleSpeed,condensed:d||m}),l.jsx($n,{label:"Srama",value:t.attributes.jump,condensed:d||m}),l.jsx($n,{label:"Mcadele",value:t.attributes.tackling,condensed:d||m}),l.jsx($n,{label:"Top Saklama",value:t.attributes.ballKeeping,condensed:d||m}),l.jsx($n,{label:"Pas",value:t.attributes.passing,condensed:d||m}),l.jsx($n,{label:"Uzun Top",value:t.attributes.longBall,condensed:d||m}),l.jsx($n,{label:"eviklik",value:t.attributes.agility,condensed:d||m}),l.jsx($n,{label:"ut",value:t.attributes.shooting,condensed:d||m}),l.jsx($n,{label:"ut Gc",value:t.attributes.shootPower,condensed:d||m}),l.jsx($n,{label:"Pozisyon Alma",value:t.attributes.positioning,condensed:d||m}),l.jsx($n,{label:"Refleks",value:t.attributes.reaction,condensed:d||m}),l.jsx($n,{label:"Top Kontrol",value:t.attributes.ballControl,condensed:d||m})]})]});return l.jsx(Ue,{ref:_,className:ue("p-4 transition-shadow hover:shadow-md",d&&"p-2",T&&"cursor-pointer"),draggable:g,onDragStart:w,onDragEnd:y,onClick:I,onDoubleClick:()=>b(Q=>!Q),children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:ue("flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 px-2 text-center text-[10px] font-semibold leading-tight overflow-hidden dark:from-gray-700 dark:to-gray-800",d&&"h-8 w-8 px-1 text-[8px]"),children:l.jsx("span",{className:"block w-full truncate whitespace-nowrap",children:t.name})}),l.jsx("div",{className:ue("absolute -bottom-1 -right-1 flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold text-white",A,d&&"h-4 w-4 text-[10px]"),children:t.position})]}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:ue("mb-2 flex items-center justify-between",d&&"mb-1"),children:[l.jsxs("div",{children:[l.jsx("h3",{className:ue("truncate font-semibold text-sm",d&&"text-xs"),children:t.name}),l.jsxs("div",{className:ue("mt-1 flex items-center gap-2 text-xs",d&&"mt-0 gap-1 text-[10px]"),children:[l.jsxs(Mt,{variant:"secondary",className:ue("text-xs",d&&"text-[10px]"),children:[t.age," ya"]}),t.contract&&l.jsx(Mt,{variant:S,className:ue("text-xs",d&&"text-[10px]"),children:P}),t.injuryStatus==="injured"&&l.jsx(Mt,{variant:"destructive",className:ue("text-xs",d&&"text-[10px]"),children:"Sakat"}),l.jsxs("div",{className:ue("flex items-center gap-1 text-muted-foreground",d&&"gap-0.5"),children:[l.jsx(hc,{className:ue("h-3 w-3",d&&"h-2.5 w-2.5")}),l.jsxs(lh,{children:[l.jsx(ch,{asChild:!0,children:l.jsx("span",{className:"font-semibold",children:Hn(t.overall)})}),l.jsxs($c,{children:["Maks. Potansiyel: ",Hn(t.potential)]})]})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:(t.roles??[]).map(Q=>l.jsx(Mt,{variant:"outline",className:ue("text-xs",d&&"text-[10px]"),children:Q},Q))})]})]}),u&&l.jsxs(m5,{children:[l.jsx(p5,{asChild:!0,children:l.jsx(fe,{variant:"ghost",size:"sm",className:ue("h-8 w-8 p-0",d&&"h-6 w-6"),"data-player-card-ignore-click":!0,children:l.jsx(Mre,{className:ue("h-4 w-4",d&&"h-3 w-3")})})}),l.jsxs(ZI,{align:"end",children:[l.jsx(gs,{onClick:()=>b(Q=>!Q),children:T?"Kart Genilet":"Kart Klt"}),t.squadRole!=="starting"&&e&&l.jsx(gs,{onClick:e,children:"lk 11'e Al"}),t.squadRole!=="bench"&&n&&l.jsx(gs,{onClick:n,children:"Yedek Kulbesine Al"}),t.squadRole!=="reserve"&&r&&l.jsx(gs,{onClick:r,children:"Rezerve Al"}),(a||i||o||c)&&l.jsx(eC,{}),a&&l.jsx(gs,{onClick:a,children:"sim zelletir"}),i&&l.jsx(gs,{onClick:i,children:"Oyuncuyu Sat"}),o&&l.jsx(gs,{onClick:o,children:"Serbest Brak"}),c&&l.jsx(gs,{className:"text-destructive",onClick:c,children:"Oyuncuyu Kov"}),t.squadRole==="youth"&&s&&l.jsx(gs,{onClick:s,children:"Takma Al"})]})]})]}),!T&&k]})]})})};function ele(t,e){const n=e.rating/100,r={strength:n,acceleration:n,topSpeed:n,dribbleSpeed:n,jump:n,tackling:n,ballKeeping:n,passing:n,longBall:n,agility:n,shooting:n,shootPower:n,positioning:n,reaction:n,ballControl:n};return{id:t,name:e.name,position:e.position,roles:Kn(e.position),overall:n,potential:n,attributes:r,age:35,height:180,weight:75,squadRole:"reserve",condition:.96,motivation:.98,injuryStatus:"healthy",avatar:e.image,uniqueId:`legend-${e.id}`,market:{active:!1,listingId:null,locked:!0,lockReason:"legend-pack"}}}function To(t){var r;const e=(r=t.uniqueId)==null?void 0:r.match(/^legend-(\d+)$/);if(e)return Number(e[1]);const n=String(t.id).match(/^legend-(\d+)-/);return n?Number(n[1]):null}async function tle(t,e,n){const r=`legend-${e.id}-${Date.now()}`,s=ele(r,e),i=n.toISOString(),o={...s,contract:{expiresAt:i,status:"active",salary:0,extensions:0},market:{...s.market??{active:!1,listingId:null},active:!1,listingId:null,locked:!0,lockReason:"legend-pack"}},a=await jn(t);if(!a)throw new Error("Takm bulunamad");if(Array.isArray(a.players)?a.players.some(u=>To(u)===e.id):!1)throw new Error("Bu yldz oyuncu zaten takmnda");return await UI(t,o),await Zo(kt(Me,"users",t,"rentedLegends",r),{legendId:e.id,playerId:r,expiresAt:Dt.fromDate(n)}),o}async function nle(t){const e=await gn(pn(Me,"users",t,"rentedLegends")),n=[],r=[];let s;const i=Date.now();if(e.forEach(o=>{const a=o.data();if(typeof a.legendId!="number")return;let c=null;const u=a.expiresAt;if(u instanceof Dt)c=u.toDate();else if(typeof u=="string"||typeof u=="number"){const h=new Date(u);Number.isNaN(h.getTime())||(c=h)}if(!c)return;const d=o.id;if(c.getTime()<=i){r.push(d);return}n.push({legendId:a.legendId,playerId:d,expiresAt:c})}),r.length>0){const o=await jn(t);s=(o==null?void 0:o.players)??[];for(const a of r)s=await G3(t,a,{players:s})}return n.sort((o,a)=>o.expiresAt.getTime()-a.expiresAt.getTime())}async function G3(t,e,n){let r=n==null?void 0:n.players;if(!r){const i=await jn(t);r=(i==null?void 0:i.players)??[]}const s=r.filter(i=>i.id!==e);s.length!==r.length&&await La(t,s);try{await f0(kt(Me,"users",t,"rentedLegends",e))}catch(i){console.warn("[legends.completeLegendRental] failed to delete rental record",i)}return s}function H3(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var rle=[" ","Enter","ArrowUp","ArrowDown"],sle=[" ","Enter"],Mc="Select",[M0,D0,ile]=GI(Mc),[bh,Kme]=Ps(Mc,[ile,gl]),O0=gl(),[ole,Il]=bh(Mc),[ale,lle]=bh(Mc),K3=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:w}=t,y=O0(e),[T,b]=p.useState(null),[_,I]=p.useState(null),[A,M]=p.useState(!1),j=Ip(u),[v,E]=Bo({prop:r,defaultProp:s??!1,onChange:i,caller:Mc}),[C,S]=Bo({prop:o,defaultProp:a,onChange:c,caller:Mc}),P=p.useRef(null),R=T?w||!!T.closest("form"):!0,[k,W]=p.useState(new Set),J=Array.from(k).map(Q=>Q.props.value).join(";");return l.jsx(Ax,{...y,children:l.jsxs(ole,{required:g,scope:e,trigger:T,onTriggerChange:b,valueNode:_,onValueNodeChange:I,valueNodeHasChildren:A,onValueNodeHasChildrenChange:M,contentId:Us(),value:C,onValueChange:S,open:v,onOpenChange:E,dir:j,triggerPointerDownPosRef:P,disabled:m,children:[l.jsx(M0.Provider,{scope:e,children:l.jsx(ale,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(Q=>{W(le=>new Set(le).add(Q))},[]),onNativeOptionRemove:p.useCallback(Q=>{W(le=>{const O=new Set(le);return O.delete(Q),O})},[]),children:n})}),R?l.jsxs(yB,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:C,onChange:Q=>S(Q.target.value),disabled:m,form:w,children:[C===void 0?l.jsx("option",{value:""}):null,Array.from(k)]},J):null]})})};K3.displayName=Mc;var q3="SelectTrigger",Y3=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=O0(n),o=Il(q3,n),a=o.disabled||r,c=vt(e,o.onTriggerChange),u=D0(n),d=p.useRef("touch"),[h,m,g]=xB(y=>{const T=u().filter(I=>!I.disabled),b=T.find(I=>I.value===o.value),_=wB(T,y,b);_!==void 0&&o.onValueChange(_.value)}),w=y=>{a||(o.onOpenChange(!0),g()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return l.jsx(rp,{asChild:!0,...i,children:l.jsx(rt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":vB(o.value)?"":void 0,...s,ref:c,onClick:Ne(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&w(y)}),onPointerDown:Ne(s.onPointerDown,y=>{d.current=y.pointerType;const T=y.target;T.hasPointerCapture(y.pointerId)&&T.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(w(y),y.preventDefault())}),onKeyDown:Ne(s.onKeyDown,y=>{const T=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(T&&y.key===" ")&&rle.includes(y.key)&&(w(),y.preventDefault())})})})});Y3.displayName=q3;var Q3="SelectValue",X3=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,c=Il(Q3,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=vt(e,c.onValueNodeChange);return wr(()=>{u(d)},[u,d]),l.jsx(rt.span,{...a,ref:h,style:{pointerEvents:"none"},children:vB(c.value)?l.jsx(l.Fragment,{children:o}):i})});X3.displayName=Q3;var cle="SelectIcon",J3=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(rt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});J3.displayName=cle;var ule="SelectPortal",Z3=t=>l.jsx(oh,{asChild:!0,...t});Z3.displayName=ule;var Dc="SelectContent",eB=p.forwardRef((t,e)=>{const n=Il(Dc,t.__scopeSelect),[r,s]=p.useState();if(wr(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?zc.createPortal(l.jsx(tB,{scope:t.__scopeSelect,children:l.jsx(M0.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),i):null}return l.jsx(nB,{...t,ref:e})});eB.displayName=Dc;var ri=10,[tB,Cl]=bh(Dc),dle="SelectContentImpl",hle=rl("SelectContent.RemoveScroll"),nB=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:y,avoidCollisions:T,...b}=t,_=Il(Dc,n),[I,A]=p.useState(null),[M,j]=p.useState(null),v=vt(e,re=>A(re)),[E,C]=p.useState(null),[S,P]=p.useState(null),R=D0(n),[k,W]=p.useState(!1),J=p.useRef(!1);p.useEffect(()=>{if(I)return x0(I)},[I]),y0();const Q=p.useCallback(re=>{const[Pe,...Ze]=R().map(L=>L.ref.current),[De]=Ze.slice(-1),ce=document.activeElement;for(const L of re)if(L===ce||(L==null||L.scrollIntoView({block:"nearest"}),L===Pe&&M&&(M.scrollTop=0),L===De&&M&&(M.scrollTop=M.scrollHeight),L==null||L.focus(),document.activeElement!==ce))return},[R,M]),le=p.useCallback(()=>Q([E,I]),[Q,E,I]);p.useEffect(()=>{k&&le()},[k,le]);const{onOpenChange:O,triggerPointerDownPosRef:V}=_;p.useEffect(()=>{if(I){let re={x:0,y:0};const Pe=De=>{var ce,L;re={x:Math.abs(Math.round(De.pageX)-(((ce=V.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(De.pageY)-(((L=V.current)==null?void 0:L.y)??0))}},Ze=De=>{re.x<=10&&re.y<=10?De.preventDefault():I.contains(De.target)||O(!1),document.removeEventListener("pointermove",Pe),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",Pe),document.addEventListener("pointerup",Ze,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Pe),document.removeEventListener("pointerup",Ze,{capture:!0})}}},[I,O,V]),p.useEffect(()=>{const re=()=>O(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[O]);const[Z,ye]=xB(re=>{const Pe=R().filter(ce=>!ce.disabled),Ze=Pe.find(ce=>ce.ref.current===document.activeElement),De=wB(Pe,re,Ze);De&&setTimeout(()=>De.ref.current.focus())}),ae=p.useCallback((re,Pe,Ze)=>{const De=!J.current&&!Ze;(_.value!==void 0&&_.value===Pe||De)&&(C(re),De&&(J.current=!0))},[_.value]),ve=p.useCallback(()=>I==null?void 0:I.focus(),[I]),_e=p.useCallback((re,Pe,Ze)=>{const De=!J.current&&!Ze;(_.value!==void 0&&_.value===Pe||De)&&P(re)},[_.value]),de=r==="popper"?UE:rB,ze=de===UE?{side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:y,avoidCollisions:T}:{};return l.jsx(tB,{scope:n,content:I,viewport:M,onViewportChange:j,itemRefCallback:ae,selectedItem:E,onItemLeave:ve,itemTextRefCallback:_e,focusSelectedItem:le,selectedItemText:S,position:r,isPositioned:k,searchRef:Z,children:l.jsx(kp,{as:hle,allowPinchZoom:!0,children:l.jsx(Cp,{asChild:!0,trapped:_.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:Ne(s,re=>{var Pe;(Pe=_.trigger)==null||Pe.focus({preventScroll:!0}),re.preventDefault()}),children:l.jsx(rh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:l.jsx(de,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:re=>re.preventDefault(),...b,...ze,onPlaced:()=>W(!0),ref:v,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Ne(b.onKeyDown,re=>{const Pe=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!Pe&&re.key.length===1&&ye(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let De=R().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(re.key)&&(De=De.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const ce=re.target,L=De.indexOf(ce);De=De.slice(L+1)}setTimeout(()=>Q(De)),re.preventDefault()}})})})})})})});nB.displayName=dle;var fle="SelectItemAlignedPosition",rB=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Il(Dc,n),o=Cl(Dc,n),[a,c]=p.useState(null),[u,d]=p.useState(null),h=vt(e,v=>d(v)),m=D0(n),g=p.useRef(!1),w=p.useRef(!0),{viewport:y,selectedItem:T,selectedItemText:b,focusSelectedItem:_}=o,I=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&y&&T&&b){const v=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),S=b.getBoundingClientRect();if(i.dir!=="rtl"){const ce=S.left-E.left,L=C.left-ce,K=v.left-L,ie=v.width+K,Ae=Math.max(ie,E.width),Ie=window.innerWidth-ri,$e=VE(L,[ri,Math.max(ri,Ie-Ae)]);a.style.minWidth=ie+"px",a.style.left=$e+"px"}else{const ce=E.right-S.right,L=window.innerWidth-C.right-ce,K=window.innerWidth-v.right-L,ie=v.width+K,Ae=Math.max(ie,E.width),Ie=window.innerWidth-ri,$e=VE(L,[ri,Math.max(ri,Ie-Ae)]);a.style.minWidth=ie+"px",a.style.right=$e+"px"}const P=m(),R=window.innerHeight-ri*2,k=y.scrollHeight,W=window.getComputedStyle(u),J=parseInt(W.borderTopWidth,10),Q=parseInt(W.paddingTop,10),le=parseInt(W.borderBottomWidth,10),O=parseInt(W.paddingBottom,10),V=J+Q+k+O+le,Z=Math.min(T.offsetHeight*5,V),ye=window.getComputedStyle(y),ae=parseInt(ye.paddingTop,10),ve=parseInt(ye.paddingBottom,10),_e=v.top+v.height/2-ri,de=R-_e,ze=T.offsetHeight/2,re=T.offsetTop+ze,Pe=J+Q+re,Ze=V-Pe;if(Pe<=_e){const ce=P.length>0&&T===P[P.length-1].ref.current;a.style.bottom="0px";const L=u.clientHeight-y.offsetTop-y.offsetHeight,K=Math.max(de,ze+(ce?ve:0)+L+le),ie=Pe+K;a.style.height=ie+"px"}else{const ce=P.length>0&&T===P[0].ref.current;a.style.top="0px";const K=Math.max(_e,J+y.offsetTop+(ce?ae:0)+ze)+Ze;a.style.height=K+"px",y.scrollTop=Pe-_e+y.offsetTop}a.style.margin=`${ri}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,a,u,y,T,b,i.dir,r]);wr(()=>I(),[I]);const[A,M]=p.useState();wr(()=>{u&&M(window.getComputedStyle(u).zIndex)},[u]);const j=p.useCallback(v=>{v&&w.current===!0&&(I(),_==null||_(),w.current=!1)},[I,_]);return l.jsx(ple,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:j,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:l.jsx(rt.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});rB.displayName=fle;var mle="SelectPopperPosition",UE=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ri,...i}=t,o=O0(n);return l.jsx(jx,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});UE.displayName=mle;var[ple,yC]=bh(Dc,{}),zE="SelectViewport",sB=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Cl(zE,n),o=yC(zE,n),a=vt(e,i.onViewportChange),c=p.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(M0.Slot,{scope:n,children:l.jsx(rt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ne(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const w=window.innerHeight-ri*2,y=parseFloat(h.style.minHeight),T=parseFloat(h.style.height),b=Math.max(y,T);if(b<w){const _=b+g,I=Math.min(w,_),A=_-I;h.style.height=I+"px",h.style.bottom==="0px"&&(d.scrollTop=A>0?A:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});sB.displayName=zE;var iB="SelectGroup",[gle,yle]=bh(iB),vle=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Us();return l.jsx(gle,{scope:n,id:s,children:l.jsx(rt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});vle.displayName=iB;var oB="SelectLabel",aB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=yle(oB,n);return l.jsx(rt.div,{id:s.id,...r,ref:e})});aB.displayName=oB;var Yv="SelectItem",[xle,lB]=bh(Yv),cB=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Il(Yv,n),c=Cl(Yv,n),u=a.value===r,[d,h]=p.useState(i??""),[m,g]=p.useState(!1),w=vt(e,_=>{var I;return(I=c.itemRefCallback)==null?void 0:I.call(c,_,r,s)}),y=Us(),T=p.useRef("touch"),b=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(xle,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:p.useCallback(_=>{h(I=>I||((_==null?void 0:_.textContent)??"").trim())},[]),children:l.jsx(M0.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:l.jsx(rt.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:Ne(o.onFocus,()=>g(!0)),onBlur:Ne(o.onBlur,()=>g(!1)),onClick:Ne(o.onClick,()=>{T.current!=="mouse"&&b()}),onPointerUp:Ne(o.onPointerUp,()=>{T.current==="mouse"&&b()}),onPointerDown:Ne(o.onPointerDown,_=>{T.current=_.pointerType}),onPointerMove:Ne(o.onPointerMove,_=>{var I;T.current=_.pointerType,s?(I=c.onItemLeave)==null||I.call(c):T.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ne(o.onPointerLeave,_=>{var I;_.currentTarget===document.activeElement&&((I=c.onItemLeave)==null||I.call(c))}),onKeyDown:Ne(o.onKeyDown,_=>{var A;((A=c.searchRef)==null?void 0:A.current)!==""&&_.key===" "||(sle.includes(_.key)&&b(),_.key===" "&&_.preventDefault())})})})})});cB.displayName=Yv;var xf="SelectItemText",uB=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Il(xf,n),a=Cl(xf,n),c=lB(xf,n),u=lle(xf,n),[d,h]=p.useState(null),m=vt(e,b=>h(b),c.onItemTextChange,b=>{var _;return(_=a.itemTextRefCallback)==null?void 0:_.call(a,b,c.value,c.disabled)}),g=d==null?void 0:d.textContent,w=p.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:T}=u;return wr(()=>(y(w),()=>T(w)),[y,T,w]),l.jsxs(l.Fragment,{children:[l.jsx(rt.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zc.createPortal(i.children,o.valueNode):null]})});uB.displayName=xf;var dB="SelectItemIndicator",hB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return lB(dB,n).isSelected?l.jsx(rt.span,{"aria-hidden":!0,...r,ref:e}):null});hB.displayName=dB;var $E="SelectScrollUpButton",fB=p.forwardRef((t,e)=>{const n=Cl($E,t.__scopeSelect),r=yC($E,t.__scopeSelect),[s,i]=p.useState(!1),o=vt(e,r.onScrollButtonChange);return wr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(pB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});fB.displayName=$E;var WE="SelectScrollDownButton",mB=p.forwardRef((t,e)=>{const n=Cl(WE,t.__scopeSelect),r=yC(WE,t.__scopeSelect),[s,i]=p.useState(!1),o=vt(e,r.onScrollButtonChange);return wr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(pB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});mB.displayName=WE;var pB=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Cl("SelectScrollButton",n),o=p.useRef(null),a=D0(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),wr(()=>{var d;const u=a().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),l.jsx(rt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ne(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ne(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ne(s.onPointerLeave,()=>{c()})})}),wle="SelectSeparator",gB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(rt.div,{"aria-hidden":!0,...r,ref:e})});gB.displayName=wle;var GE="SelectArrow",_le=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=O0(n),i=Il(GE,n),o=Cl(GE,n);return i.open&&o.position==="popper"?l.jsx(Mx,{...s,...r,ref:e}):null});_le.displayName=GE;var ble="SelectBubbleInput",yB=p.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=p.useRef(null),i=vt(r,s),o=H3(e);return p.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),l.jsx(rt.select,{...n,style:{...j2,...n.style},ref:i,defaultValue:e})});yB.displayName=ble;function vB(t){return t===""||t===void 0}function xB(t){const e=mr(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=n.current+o;e(a),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function wB(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Ele(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Ele(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Sle=K3,_B=Y3,Tle=X3,Ile=J3,Cle=Z3,bB=eB,Nle=sB,EB=aB,SB=cB,kle=uB,Rle=hB,TB=fB,IB=mB,CB=gB;const vi=Sle,qi=Tle,$s=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(_B,{ref:r,className:ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(Ile,{asChild:!0,children:l.jsx(X4,{className:"h-4 w-4 opacity-50"})})]}));$s.displayName=_B.displayName;const NB=p.forwardRef(({className:t,...e},n)=>l.jsx(TB,{ref:n,className:ue("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(Cre,{className:"h-4 w-4"})}));NB.displayName=TB.displayName;const kB=p.forwardRef(({className:t,...e},n)=>l.jsx(IB,{ref:n,className:ue("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(X4,{className:"h-4 w-4"})}));kB.displayName=IB.displayName;const Ws=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(Cle,{children:l.jsxs(bB,{ref:s,className:ue("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(NB,{}),l.jsx(Nle,{className:ue("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(kB,{})]})}));Ws.displayName=bB.displayName;const Ple=p.forwardRef(({className:t,...e},n)=>l.jsx(EB,{ref:n,className:ue("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Ple.displayName=EB.displayName;const zt=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(SB,{ref:r,className:ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Rle,{children:l.jsx(Q4,{className:"h-4 w-4"})})}),l.jsx(kle,{children:e})]}));zt.displayName=SB.displayName;const Ale=p.forwardRef(({className:t,...e},n)=>l.jsx(CB,{ref:n,className:ue("-mx-1 my-1 h-px bg-muted",t),...e}));Ale.displayName=CB.displayName;function qr({fallbackPath:t="/"}){const e=qs(),n=()=>{window.history.length>1?e(-1):e(t)};return l.jsx(fe,{variant:"ghost",onClick:n,children:l.jsx(Ere,{className:"h-4 w-4"})})}const a_=768;function RB(){const[t,e]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${a_-1}px)`),r=()=>{e(window.innerWidth<a_)};return n.addEventListener("change",r),e(window.innerWidth<a_),()=>n.removeEventListener("change",r)},[]),!!t}const Qv=.75,l_=45,DA=24,PB=18,jle=60*60*1e3,Mle=["GK","CB","LB","RB","CM","LM","RM","CAM","LW","RW","ST"],OA={CF:"ST",FW:"ST",FWD:"ST",FOR:"ST",FORWARD:"ST",STRIKER:"ST",ATT:"ST",SS:"ST",HU:"ST",FO:"ST",STP:"ST",AM:"CAM",AMF:"CAM",IM:"CAM",CMF:"CM",CMID:"CM",MID:"CM",DM:"CM",DMF:"CM",CDM:"CM",RMF:"RM",RWF:"RW",RWB:"RB",LWF:"LW",LMF:"LM",LWB:"LB",RCB:"CB",LCB:"CB",CBK:"CB",BL:"CB",DR:"RB",EB:"RW",IR:"RM",LY:"LB"},AB=t=>Number.isFinite(t)?Math.min(100,Math.max(0,t)):0,LA=t=>{switch(t){case"starting":return 0;case"bench":return 1;case"reserve":return 2;case"youth":return 3;default:return 4}},di=t=>{if(!t)return"CM";const e=t.toUpperCase().replace(/[^A-Z]/g,"");return Mle.includes(e)?e:OA[e]?OA[e]:"CM"},FA=t=>{const e=typeof t=="number"?t:Number(t);return Number.isFinite(e)?AB(e):0},Dle=t=>{if(!t||typeof t!="object")return{};const e={};return Object.entries(t).forEach(([n,r])=>{if(!r||typeof r!="object")return;const s={};Object.entries(r).forEach(([i,o])=>{if(!o||typeof o!="object")return;const a=FA(o.x),c=FA(o.y),u=o.position,d=typeof u=="string"?di(u):"CM";s[String(i)]={x:a,y:c,position:d}}),Object.keys(s).length>0&&(e[String(n)]=s)}),e},jB=(t,e)=>{const n=new Date(t),r=n.getMonth()+e;return n.setMonth(r),n},HE=t=>{var n;if(!((n=t.contract)!=null&&n.expiresAt))return null;const e=new Date(t.contract.expiresAt);return Number.isNaN(e.getTime())?null:e},Ole=t=>{if(!t.contract||t.contract.status==="released")return!1;const e=HE(t);return e?e.getTime()<=Date.now():!1},MB=t=>{var n;if(!((n=t.rename)!=null&&n.adAvailableAt))return null;const e=new Date(t.rename.adAvailableAt);return Number.isNaN(e.getTime())?null:e},Lle=t=>{const e=MB(t);return e?e.getTime()<=Date.now():!0};function Bf(t){const e=()=>{var r,s;return{expiresAt:jB(new Date,PB).toISOString(),status:"active",salary:((r=t.contract)==null?void 0:r.salary)??0,extensions:((s=t.contract)==null?void 0:s.extensions)??0}},n=()=>{var s,i,o;const r={adAvailableAt:new Date(0).toISOString()};return(s=t.rename)!=null&&s.lastUpdatedAt&&(r.lastUpdatedAt=t.rename.lastUpdatedAt),(((i=t.rename)==null?void 0:i.lastMethod)==="ad"||((o=t.rename)==null?void 0:o.lastMethod)==="purchase")&&(r.lastMethod=t.rename.lastMethod),r};return{...t,condition:Zi(t.condition,Qv),motivation:Zi(t.motivation,Qv),injuryStatus:t.injuryStatus??"healthy",contract:t.contract??e(),rename:t.rename??n()}}const wf=t=>t.map(Bf),Uf=t=>BI(Bf(t)),Fle=t=>Zi(t.condition,Qv),Vle=t=>Zi(t.motivation,Qv),Lg=(t,e,n)=>{const r=t.findIndex(g=>g.id===e);if(r===-1)return{players:t,error:"Oyuncu bulunamad.",updated:!1};const s=t[r],i=s.squadRole,o=n??s.position,a=di(o);if(i==="starting"&&di(s.position)===a&&(!n||s.position===n))return{players:t,updated:!1,targetPosition:a};const u=t.filter(g=>g.squadRole==="starting").length,d=t.findIndex(g=>g.id!==e&&g.squadRole==="starting"&&di(g.position)===a);if(i!=="starting"&&u>=11&&d===-1)return{players:t,error:"lk 11 dolu. Ayn mevkideki bir oyuncuyu karmadan yeni oyuncu ekleyemezsin.",updated:!1};const h=[...t];let m=null;return h[r]={...s,position:o,squadRole:"starting"},d!==-1&&i!=="starting"&&(m=t[d].id,h[d]={...t[d],squadRole:i}),{players:wf(h),updated:!0,swappedPlayerId:m,targetPosition:a}},Ble=10,Ule=t=>{const e=t.filter(i=>i.player&&di(i.player.position)!=="GK").map(i=>AB(i.y)).sort((i,o)=>o-i);if(e.length===0)return null;const n=[];e.forEach(i=>{const o=n[n.length-1];if(o&&Math.abs(o.average-i)<=Ble){const a=o.count+1;o.average=(o.average*o.count+i)/a,o.count=a;return}n.push({count:1,average:i})});const r=n.map(i=>i.count).filter(i=>i>0);return r.length===0||r.reduce((i,o)=>i+o,0)===0?null:r.join("-")},zle=({player:t,isFocused:e,onSelect:n,onDragStart:r,onDragEnd:s})=>l.jsxs("div",{role:"button",tabIndex:0,className:ue("group relative flex h-14 w-14 cursor-pointer flex-col items-center justify-center rounded-full border border-white/40 bg-white/10 text-center text-xs text-white shadow-lg transition-all hover:border-white/80 hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 sm:h-16 sm:w-16",e&&"border-white bg-white/30 text-emerald-900"),onClick:n,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),n())},draggable:!0,onDragStart:r,onDragEnd:s,children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:di(t.position)}),l.jsx("span",{className:"text-[10px] font-medium opacity-80 line-clamp-1",children:t.name}),l.jsx("span",{className:"text-[11px] font-semibold",children:Hn(t.overall)})]}),$le=.1,Wle=({player:t,onSelect:e,variant:n="pitch",compareToPlayer:r})=>{const s=r?Uf(r):null,i=Uf(t),o=s===null?0:i-s,a=s!==null&&Math.abs(o)>$le,c=a&&o>0,u=di(t.position),d=n==="panel"?"border-white/20 bg-white/10 text-white hover:border-white/50 hover:bg-white/15":"border-white/25 bg-white/5 text-white/95 hover:border-white/50 hover:bg-white/10 backdrop-blur-sm";return l.jsxs("button",{type:"button",onClick:()=>e(t.id),className:ue("flex w-full items-center justify-between rounded-full border px-3 py-2 text-left text-xs transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/80",d),children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-semibold uppercase tracking-wide",children:u}),l.jsx("span",{className:"text-[11px] opacity-80 line-clamp-1",children:t.name})]}),l.jsxs("div",{className:"text-right text-[11px] font-semibold",children:[l.jsx("div",{children:Hn(t.overall)}),a?l.jsxs("div",{className:ue("text-[10px]",c?"text-emerald-300":"text-red-300"),children:[c?"+":"-",Math.abs(o).toFixed(2)]}):null]})]})},Gle=()=>{var ln,xt,X;const{user:t}=Vn(),{balance:e,spend:n}=Ni(),[r,s]=p.useState([]),[i,o]=p.useState(((ln=Kl[0])==null?void 0:ln.name)??"4-4-2"),[a,c]=p.useState(null),[u,d]=p.useState({}),[h,m]=p.useState("starting"),[g,w]=p.useState("role"),[y,T]=p.useState(""),[b,_]=p.useState(null),[I,A]=p.useState(null),[M,j]=p.useState(null),[v,E]=p.useState(""),[C,S]=p.useState(!1),[P,R]=p.useState(!1),[k,W]=p.useState(!0),[J,Q]=p.useState(null),[le,O]=p.useState(!1),V=RB(),{contentRef:Z,scale:ye}=gC(V),ae=V?{"--nostalgia-scale":ye}:void 0,ve=V&&ye<.999,_e=p.useRef(null);p.useEffect(()=>{let F=!0;return(async()=>{var oe,he,xe,ot,Ht,ur;if(!t){s([]),W(!1);return}try{const gt=await jn(t.id);let Mr=(gt==null?void 0:gt.players)??[];if(gt||(Mr=(await wy(t.id,t.teamName??"Takmm",t.username??"Menajer")).players),!F)return;const st=wf(Mr);s(st);const pt=((oe=gt==null?void 0:gt.plan)==null?void 0:oe.formation)??((he=gt==null?void 0:gt.lineup)==null?void 0:he.formation),Ot=((xe=gt==null?void 0:gt.plan)==null?void 0:xe.shape)??((ot=gt==null?void 0:gt.lineup)==null?void 0:ot.shape)??null,yn=Dle(((Ht=gt==null?void 0:gt.plan)==null?void 0:Ht.customFormations)??((ur=gt==null?void 0:gt.lineup)==null?void 0:ur.customFormations)??null);pt&&pt.length>0&&o(pt),c(Ot),d(yn);const Bn=st.find(Kt=>Kt.squadRole==="starting");_((Bn==null?void 0:Bn.id)??null)}catch(gt){console.error("[TeamPlanning] failed to load roster",gt),G.error("Takm bilgisi yklenemedi.")}finally{F&&W(!1)}})(),()=>{F=!1}},[t]);const de=p.useMemo(()=>r.find(F=>F.id===M)??null,[r,M]);p.useEffect(()=>{E(de?de.name:"")},[de]);const ze=p.useMemo(()=>de?MB(de):null,[de]),re=p.useMemo(()=>de?Lle(de):!1,[de]),Pe=p.useMemo(()=>r.filter(F=>F.squadRole==="starting"),[r]),Ze=p.useMemo(()=>r.filter(F=>F.squadRole==="bench"),[r]),De=p.useMemo(()=>r.filter(F=>F.squadRole==="reserve"),[r]),ce=p.useMemo(()=>({starting:Pe,bench:Ze,reserve:De}),[Pe,Ze,De]),L=p.useMemo(()=>i==="auto"?Kl[0]:Kl.find(F=>F.name===i)??Kl[0],[i]),K=p.useMemo(()=>{const z=[...[...Pe]];return L.positions.map((oe,he)=>{const xe=z.findIndex(Ht=>di(Ht.position)===oe.position),ot=xe!==-1?z.splice(xe,1)[0]:z.shift()??null;return{slotIndex:he,position:oe.position,x:oe.x,y:oe.y,player:ot}})},[L,Pe]),ie=p.useMemo(()=>Ule(K.map(F=>({player:F.player,x:F.x,y:F.y}))),[K]),Ae=p.useMemo(()=>i==="auto"?ie??L.name:i,[i,ie,L]),Ie=p.useMemo(()=>!a||!ie?!1:a!==ie,[a,ie]),$e=p.useMemo(()=>{var F;return b?r.find(z=>z.id===b)??null:((F=K.find(z=>z.player))==null?void 0:F.player)??null},[b,r,K]),je=p.useMemo(()=>{if(!$e)return[];const F=di($e.position);return r.filter(z=>z.id!==$e.id&&z.squadRole!=="starting"&&di(z.position)===F)},[r,$e]),ee=p.useMemo(()=>{const F=ce[h],z=y.trim().toLowerCase(),he=[...z.length?F.filter(xe=>xe.name.toLowerCase().includes(z)):F];return he.sort((xe,ot)=>{switch(g){case"overall":return Uf(ot)-Uf(xe);case"potential":return(ot.potential??0)-(xe.potential??0);case"role":default:return LA(xe.squadRole)-LA(ot.squadRole)}}),he},[ce,h,y,g]),be=p.useMemo(()=>r.find(F=>F.id===J)??null,[r,J]),Ke=(F,z)=>{s(oe=>{if(z==="starting"){const he=Lg(oe,F);return he.error?(G.error(he.error),oe):(he.updated&&_(F),he.players)}return wf(oe.map(he=>he.id===F?{...he,squadRole:z}:he))})},tt=F=>{s(z=>{const oe=Lg(z,F,$e==null?void 0:$e.position);return oe.error?(G.error(oe.error),z):(_(F),oe.players)})},me=F=>{F.preventDefault();const z=F.dataTransfer.getData("text/plain")||I;z&&(s(oe=>{const he=Lg(oe,z);return he.error?(G.error(he.error),oe):(_(z),he.players)}),A(null))},nt=(F,z)=>{F.preventDefault();const oe=F.dataTransfer.getData("text/plain")||I;oe&&(s(he=>{const xe=Lg(he,oe,z.position);return xe.error?(G.error(xe.error),he):(_(oe),xe.players)}),A(null))},He=()=>{A(null)},te=()=>{G.info("Transfer listesine ekleme zellii yaknda.")},ut=F=>{Q(F)},Zt=async()=>{if(!t){G.error("Kaydetmek iin giri yapmalsn.");return}R(!0);try{const F=ie??void 0,z={formation:i,shape:F,squads:{starters:Pe.map(oe=>oe.id),bench:Ze.map(oe=>oe.id),reserves:De.map(oe=>oe.id)},customFormations:Object.keys(u).length>0?u:void 0};await La(t.id,wf(r),z),c(F??null),G.success("Kadro ayarlarnz kaydedildi.")}catch(F){console.error("[TeamPlanning] failed to save roster",F),G.error("Kadro kaydedilemedi.")}finally{R(!1)}},_t=async F=>{var oe;if(!t||!de)return;const z=v.trim();if(!z){G.error("Yeni bir isim girmelisin.");return}if(F==="ad"&&!re){G.error("Reklam hakk henz yenilenmedi.");return}try{S(!0),F==="purchase"&&await n(l_);const he=new Date,xe=F==="ad"?new Date(he.getTime()+DA*jle):(oe=de.rename)!=null&&oe.adAvailableAt?new Date(de.rename.adAvailableAt):null,ot=r.map(Ht=>{var ur;return Ht.id!==de.id?Ht:Bf({...Ht,name:z,rename:{...Ht.rename??{adAvailableAt:new Date(0).toISOString()},lastUpdatedAt:he.toISOString(),lastMethod:F,adAvailableAt:(xe==null?void 0:xe.toISOString())??((ur=Ht.rename)==null?void 0:ur.adAvailableAt)??he.toISOString()}})});await La(t.id,ot),s(ot),G.success("Oyuncu ad gncellendi."),j(null)}catch(he){console.error("[TeamPlanning] failed to rename player",he),G.error("Oyuncu ad gncellenemedi.")}finally{S(!1)}},tn=async F=>{if(!t){G.error("Bu ilem iin giri yapmalsn.");return}O(!0);try{const z=r.find(he=>he.id===F);if(!z){G.error("Oyuncu bulunamad.");return}if(To(z)!==null){const he=await G3(t.id,F,{players:r});s(wf(he))}else{const he=r.map(xe=>xe.id===F?Bf({...xe,squadRole:"reserve",contract:{...xe.contract??{salary:0,extensions:0,expiresAt:new Date().toISOString()},status:"released"}}):xe);await La(t.id,he),s(he)}G.success("Oyuncu serbest brakld."),Q(null)}catch(z){console.error("[TeamPlanning] failed to release contract",z),G.error("Oyuncu serbest braklamad.")}finally{O(!1)}},Mn=async F=>{if(!t){G.error("Bu ilem iin giri yapmalsn.");return}O(!0);try{const z=r.find(ot=>ot.id===F);if(!z){G.error("Oyuncu bulunamad.");return}if(To(z)!==null){G.error("Nostalji efsanelerinin szlemesi uzatlamaz.");return}const oe=HE(z)??new Date,he=jB(oe,PB),xe=r.map(ot=>{var Ht;return ot.id===F?Bf({...ot,contract:{...ot.contract??{salary:0,extensions:0,status:"active",expiresAt:new Date().toISOString()},status:"active",extensions:(((Ht=ot.contract)==null?void 0:Ht.extensions)??0)+1,expiresAt:he.toISOString()}}):ot});await La(t.id,xe),s(xe),G.success("Szleme uzatld."),Q(null)}catch(z){console.error("[TeamPlanning] failed to extend contract",z),G.error("Szleme uzatlamad.")}finally{O(!1)}};return k?l.jsx("div",{className:"flex min-h-[50vh] items-center justify-center text-sm text-muted-foreground",children:"Kadro ykleniyor..."}):l.jsxs("div",{className:"nostalgia-screen nostalgia-team-planning",children:[l.jsx("div",{className:"nostalgia-screen__gradient","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__orb nostalgia-screen__orb--left","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__orb nostalgia-screen__orb--right","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__noise","aria-hidden":!0}),l.jsxs("div",{className:"nostalgia-screen__content-shell","data-scale-active":ve?"true":"false",style:ae,children:[l.jsxs("div",{className:"nostalgia-screen__content",ref:Z,children:[l.jsxs("header",{className:"nostalgia-main-menu__header nostalgia-team-planning__header",children:[l.jsxs("div",{className:"nostalgia-team-planning__header-title",children:[l.jsx(qr,{}),l.jsxs("div",{children:[l.jsx("h1",{className:"nostalgia-main-menu__title",children:"Takm Plan"}),l.jsx("p",{className:"nostalgia-main-menu__subtitle",children:"Kadronuzu dzenleyin, formasyonunuzu ekillendirin."})]})]}),l.jsxs("div",{className:"nostalgia-team-planning__header-actions",children:[l.jsxs(fe,{variant:"outline",size:"sm",children:[l.jsx(Dre,{className:"mr-2 h-4 w-4"}),"Formasyon"]}),l.jsxs(fe,{onClick:Zt,disabled:P,children:[l.jsx(Kre,{className:"mr-2 h-4 w-4"}),P?"Kaydediliyor...":"Kaydet"]})]})]}),l.jsx("div",{className:"nostalgia-team-planning__stage",children:l.jsxs("div",{className:"nostalgia-main-menu__stage nostalgia-main-menu__stage--mobile",children:[l.jsx("div",{className:"nostalgia-main-menu__slide nostalgia-team-planning__slide nostalgia-team-planning__slide--pitch",children:l.jsx("div",{className:"nostalgia-team-planning__slide-inner",children:l.jsxs("div",{className:"nostalgia-team-planning__pitch-layout",children:[l.jsxs(Ue,{className:"nostalgia-team-planning__pitch-card",children:[l.jsxs(It,{className:"flex flex-col gap-3 border-b border-white/60 bg-white/70 backdrop-blur-sm sm:flex-row sm:items-center sm:justify-between dark:border-white/10 dark:bg-slate-900/80",children:[l.jsxs(Ct,{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500"}),l.jsxs("div",{className:"flex flex-col text-left",children:[l.jsx("span",{children:"Formasyon"}),l.jsx("span",{className:"text-sm font-normal text-emerald-900 dark:text-emerald-100",children:Ae}),Ie?l.jsxs("span",{className:"text-xs font-normal text-emerald-700 dark:text-emerald-200/80",children:["ablon: ",i]}):null]})]}),l.jsxs(vi,{value:i,onValueChange:o,children:[l.jsx($s,{className:"w-full md:w-40","aria-label":"Formasyon",children:l.jsx("span",{className:"truncate",children:Ae})}),l.jsx(Ws,{children:Kl.map(F=>l.jsx(zt,{value:F.name,children:F.name},F.name))})]})]}),l.jsx(Je,{className:"bg-gradient-to-br from-emerald-600/95 via-emerald-700/95 to-emerald-800/95",children:l.jsx("div",{className:"relative",children:l.jsx("div",{className:"relative aspect-[3/4] w-full overflow-hidden rounded-2xl bg-gradient-to-b from-emerald-600 via-emerald-700 to-emerald-800 shadow-[0_20px_45px_-25px_rgba(16,80,40,0.8)] sm:aspect-[2/3] lg:aspect-[3/4]",children:l.jsx("div",{className:"absolute inset-0 p-5",children:l.jsxs("div",{ref:_e,className:"relative h-full w-full",onDragOver:F=>F.preventDefault(),onDrop:me,children:[l.jsx("div",{className:"absolute inset-0 opacity-80",children:l.jsxs("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 h-full w-full text-white/60",pointerEvents:"none",children:[l.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"currentColor",strokeWidth:"1"}),l.jsx("circle",{cx:"50",cy:"50",r:"9",stroke:"currentColor",strokeWidth:"1",fill:"none"}),l.jsx("rect",{x:"16",y:"0",width:"68",height:"16",stroke:"currentColor",strokeWidth:"1",fill:"none"}),l.jsx("rect",{x:"16",y:"84",width:"68",height:"16",stroke:"currentColor",strokeWidth:"1",fill:"none"}),l.jsx("rect",{x:"30",y:"0",width:"40",height:"6",stroke:"currentColor",strokeWidth:"1",fill:"none"}),l.jsx("rect",{x:"30",y:"94",width:"40",height:"6",stroke:"currentColor",strokeWidth:"1",fill:"none"}),l.jsx("circle",{cx:"50",cy:"11",r:"1.5",fill:"currentColor"}),l.jsx("circle",{cx:"50",cy:"89",r:"1.5",fill:"currentColor"})]})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx(Sre,{className:"h-24 w-24 text-white/15"})}),l.jsx("div",{className:"absolute inset-0",children:K.map(F=>l.jsx("div",{className:"absolute text-center",style:{left:`${F.x}%`,top:`${F.y}%`,transform:"translate(-50%, -50%)"},onDragOver:z=>{z.preventDefault(),z.stopPropagation()},onDrop:z=>nt(z,F),children:F.player?l.jsxs(lh,{children:[l.jsx(ch,{asChild:!0,children:l.jsx(zle,{player:F.player,isFocused:F.player.id===b,onSelect:()=>{var z;return _(((z=F.player)==null?void 0:z.id)??null)},onDragStart:z=>{var oe;A(((oe=F.player)==null?void 0:oe.id)??null),F.player&&z.dataTransfer.setData("text/plain",F.player.id)},onDragEnd:He})}),l.jsxs($c,{className:"z-50 w-56 space-y-2",children:[l.jsx("div",{className:"text-xs font-semibold",children:F.player.name}),l.jsx(Po,{label:"G",value:Uf(F.player)}),l.jsx(Po,{label:"Kondisyon",value:Fle(F.player)}),l.jsx(Po,{label:"Motivasyon",value:Vle(F.player)})]})]}):l.jsx("div",{className:"rounded-full border border-dashed border-white/40 bg-white/5 px-3 py-1 text-xs text-white/70",children:"Bo"})},F.slotIndex))})]})})})})})]}),l.jsx("div",{className:"nostalgia-team-planning__alternatives",children:$e?l.jsxs(Ue,{className:"nostalgia-team-planning__alternatives-card border-emerald-200/20 bg-emerald-900/10 shadow-lg backdrop-blur",children:[l.jsx(It,{className:"pb-3",children:l.jsxs(Ct,{className:"text-sm font-semibold text-emerald-50",children:[di($e.position)," iin alternatifler"]})}),l.jsx(Je,{className:"space-y-3",children:je.length>0?l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:je.map(F=>l.jsx(Wle,{player:F,onSelect:tt,variant:"panel",compareToPlayer:$e},F.id))}):l.jsx("p",{className:"text-xs text-emerald-100/80",children:"Bu pozisyon iin yedek veya rezerv oyuncu bulunmad."})})]}):l.jsxs(Ue,{className:"nostalgia-team-planning__alternatives-card nostalgia-team-planning__alternatives-card--empty border-emerald-200/10 bg-emerald-900/20 shadow-lg backdrop-blur",children:[l.jsx(It,{className:"pb-3",children:l.jsx(Ct,{className:"text-sm font-semibold text-emerald-100",children:"Alternatif oyuncular"})}),l.jsxs(Je,{className:"space-y-2 text-sm text-emerald-100/80",children:[l.jsx("p",{children:"Krokide bir oyuncuya tklayn."}),l.jsx("p",{children:"Alternatifler burada gsterilecek."})]})]})})]})})}),l.jsx("div",{className:"nostalgia-main-menu__slide nostalgia-main-menu__slide--actions nostalgia-team-planning__slide nostalgia-team-planning__slide--lists",children:l.jsxs("div",{className:"nostalgia-team-planning__slide-inner",children:[l.jsx(Ue,{className:"shadow-sm",children:l.jsx(Je,{className:"p-4",children:l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Vv,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),l.jsx(Xn,{placeholder:"Oyuncu ara...",value:y,onChange:F=>T(F.target.value),className:"pl-10"})]}),l.jsxs(vi,{value:g,onValueChange:F=>w(F),children:[l.jsx($s,{className:"w-full md:w-40",children:l.jsx(qi,{placeholder:"Srala"})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"role",children:"Role gre"}),l.jsx(zt,{value:"overall",children:"Ortalamaya gre"}),l.jsx(zt,{value:"potential",children:"Maks. potansiyel"})]})]})]})})}),l.jsx("div",{className:"nostalgia-team-planning__lists",children:l.jsxs(pC,{value:h,onValueChange:F=>m(F),children:[l.jsxs(j0,{className:"flex w-full gap-2 overflow-x-auto sm:overflow-visible",children:[l.jsxs(ko,{value:"starting",className:"flex-none min-w-[140px] whitespace-nowrap sm:flex-1 sm:min-w-0 sm:w-auto",children:["lk 11 (",Pe.length,")"]}),l.jsxs(ko,{value:"bench",className:"flex-none min-w-[140px] whitespace-nowrap sm:flex-1 sm:min-w-0 sm:w-auto",children:["Yedek (",Ze.length,")"]}),l.jsxs(ko,{value:"reserve",className:"flex-none min-w-[140px] whitespace-nowrap sm:flex-1 sm:min-w-0 sm:w-auto",children:["Rezerv (",De.length,")"]})]}),l.jsx(Ro,{value:"starting",className:"mt-4 space-y-4",children:ee.length===0?l.jsx(Ue,{children:l.jsxs(Je,{className:"p-8 text-center",children:[l.jsx("div",{className:"mb-4 text-4xl",children:""}),l.jsx("h3",{className:"mb-2 font-semibold",children:"lk 11'inizi oluturun"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Yedek kulbesinden oyuncularnz ilk 11'e tayn"})]})}):ee.map(F=>l.jsx(o_,{player:F,compact:!0,defaultCollapsed:!0,draggable:!0,onDragStart:z=>{A(F.id),z.dataTransfer.setData("text/plain",F.id)},onDragEnd:()=>A(null),onMoveToBench:()=>Ke(F.id,"bench"),onMoveToReserve:()=>Ke(F.id,"reserve"),onListForTransfer:te,onRenamePlayer:()=>j(F.id),onFirePlayer:()=>ut(F.id)},F.id))}),l.jsx(Ro,{value:"bench",className:"mt-4 space-y-4",children:ee.length===0?l.jsx(Ue,{children:l.jsxs(Je,{className:"p-8 text-center",children:[l.jsx("div",{className:"mb-4 text-4xl",children:""}),l.jsx("h3",{className:"mb-2 font-semibold",children:"Yedek kulbesi bo"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Rezervden oyuncularnz yedek kulbesine tayn"})]})}):ee.map(F=>l.jsx(o_,{player:F,compact:!0,defaultCollapsed:!0,draggable:!0,onDragStart:z=>{A(F.id),z.dataTransfer.setData("text/plain",F.id)},onDragEnd:()=>A(null),onMoveToStarting:()=>Ke(F.id,"starting"),onMoveToReserve:()=>Ke(F.id,"reserve"),onListForTransfer:te,onRenamePlayer:()=>j(F.id),onFirePlayer:()=>ut(F.id)},F.id))}),l.jsx(Ro,{value:"reserve",className:"mt-4 space-y-4",children:ee.length===0?l.jsx(Ue,{children:l.jsxs(Je,{className:"p-8 text-center",children:[l.jsx("div",{className:"mb-4 text-4xl",children:""}),l.jsx("h3",{className:"mb-2 font-semibold",children:"Rezerv oyuncu yok"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Altyapdan oyuncu transfer edin veya pazardan oyuncu satn aln"})]})}):ee.map(F=>l.jsx(o_,{player:F,compact:!0,defaultCollapsed:!0,draggable:!0,onDragStart:z=>{A(F.id),z.dataTransfer.setData("text/plain",F.id)},onDragEnd:()=>A(null),onMoveToStarting:()=>Ke(F.id,"starting"),onMoveToBench:()=>Ke(F.id,"bench"),onListForTransfer:te,onRenamePlayer:()=>j(F.id),onFirePlayer:()=>ut(F.id)},F.id))})]})})]})})]})})]}),l.jsx(Go,{open:!!de,onOpenChange:F=>{F||j(null)},children:l.jsxs(Ji,{className:"sm:max-w-lg",children:[l.jsxs(Ho,{children:[l.jsx(Ko,{children:"Oyuncu Adn zelletir"}),l.jsx(ul,{children:de?`${de.name} iin yeni bir isim belirleyin.`:"Oyuncu adn gncelleyin."})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Xn,{value:v,onChange:F=>E(F.target.value),placeholder:"Yeni oyuncu ad",disabled:C,autoFocus:!0}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reklam seenei ",DA," saatte bir kullanlabilir. Elmas seenei ",l_," elmas harcar. Bakiyeniz: ",e]}),!re&&ze&&l.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:["Bir sonraki reklam hakk ",ze.toLocaleString("tr-TR")," tarihinde yenilenecek."]})]}),l.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:justify-end",children:[l.jsx(fe,{variant:"secondary",disabled:!re||C,onClick:()=>_t("ad"),children:"Reklam zle ve A"}),l.jsxs(fe,{disabled:C,onClick:()=>_t("purchase"),children:[l_," Elmasla Onayla"]})]})]})}),l.jsx(Go,{open:!!be,onOpenChange:F=>{F||Q(null)},children:l.jsxs(Ji,{className:"sm:max-w-md",onInteractOutside:F=>F.preventDefault(),onEscapeKeyDown:F=>F.preventDefault(),children:[l.jsxs(Ho,{children:[l.jsx(Ko,{children:"Szleme Yenileme Karar"}),l.jsx(ul,{children:be?`${be.name} iin szleme ilemi.`:"Szleme sresi dolan oyuncu bulunamad."})]}),be?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"rounded-md border border-muted bg-muted/40 p-3 text-sm",children:[l.jsxs("p",{children:["Biti Tarihi: ",((xt=HE(be))==null?void 0:xt.toLocaleDateString("tr-TR"))??"-"]}),l.jsxs("p",{children:["Mevcut Rol: ",be.squadRole]}),l.jsxs("p",{children:["Durum: ",Ole(be)?"Sresi doldu":((X=be.contract)==null?void 0:X.status)??"active"]})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:To(be)!==null?"Bu nostalji efsanesinin szlemesi uzatlamaz. Sre dolduunda oyuncu otomatik olarak kulpten ayrlr.":"Szlemeyi uzatrsanz oyuncu takmda kalmaya devam eder. Aksi halde serbest brakabilirsiniz."})]}):null,l.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:justify-end",children:[be&&l.jsx(fe,{variant:"secondary",disabled:le,onClick:()=>tn(be.id),children:"Serbest Brak"}),be&&To(be)===null&&l.jsx(fe,{disabled:le,onClick:()=>Mn(be.id),children:"Szlemeyi Uzat"})]})]})})]})]})},DB=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{className:"relative w-full overflow-auto",children:l.jsx("table",{ref:n,className:ue("w-full caption-bottom text-sm",t),...e})}));DB.displayName="Table";const OB=p.forwardRef(({className:t,...e},n)=>l.jsx("thead",{ref:n,className:ue("[&_tr]:border-b",t),...e}));OB.displayName="TableHeader";const LB=p.forwardRef(({className:t,...e},n)=>l.jsx("tbody",{ref:n,className:ue("[&_tr:last-child]:border-0",t),...e}));LB.displayName="TableBody";const Hle=p.forwardRef(({className:t,...e},n)=>l.jsx("tfoot",{ref:n,className:ue("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));Hle.displayName="TableFooter";const _f=p.forwardRef(({className:t,...e},n)=>l.jsx("tr",{ref:n,className:ue("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));_f.displayName="TableRow";const Vl=p.forwardRef(({className:t,...e},n)=>l.jsx("th",{ref:n,className:ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Vl.displayName="TableHead";const mo=p.forwardRef(({className:t,...e},n)=>l.jsx("td",{ref:n,className:ue("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));mo.displayName="TableCell";const Kle=p.forwardRef(({className:t,...e},n)=>l.jsx("caption",{ref:n,className:ue("mt-4 text-sm text-muted-foreground",t),...e}));Kle.displayName="TableCaption";const qle="transferListings",FB=t=>typeof t=="number"&&Number.isFinite(t),Yle=t=>{if(!FB(t))return 100;const e=Math.floor(t);return Math.min(Math.max(e,1),500)};function VB(t,e={}){const{pos:n,maxPrice:r,sort:s="overall_desc",take:i}=e,o=[gr("status","==","active")],a=typeof n=="string"?n.toUpperCase():void 0;if(a&&a!=="ALL"&&o.push(gr("pos","==",a)),FB(r)&&r>=0){const c=Math.max(0,r);o.push(gr("price","<=",c)),o.push(ts("price","asc")),s==="overall_desc"?o.push(ts("overall","desc")):s==="overall_asc"?o.push(ts("overall","asc")):o.push(ts("createdAt","desc"))}else s==="price_asc"?o.push(ts("price","asc")):s==="price_desc"?o.push(ts("price","desc")):s==="overall_asc"?o.push(ts("overall","asc")):s==="overall_desc"?o.push(ts("overall","desc")):o.push(ts("createdAt","desc"));return o.push(kc(Yle(i))),Pr(pn(t,qle),...o)}const Qle=t=>{const e=Number(t);return Number.isFinite(e)?Math.max(0,Math.round(e)):0},Xle=t=>{if(!t)return!1;const e=typeof t.uniqueId=="string"?t.uniqueId:"";if(/^legend-(\d+)$/.test(e))return!0;const n=typeof t.id=="string"?t.id:String(t.id??"");return/^legend-(\d+)-/.test(n)};async function Jle(t){var u;const e=Ln.currentUser;if(!(e!=null&&e.uid))throw new Error("Giri bilgisi bulunamad.");const n=e.uid,{player:r,price:s}=t,i=Qle(s);if(!(r!=null&&r.id))throw new Error("Oyuncu bilgisi eksik.");if(i<=0)throw new Error("Fiyat sfrdan byk olmal.");if((u=r.market)!=null&&u.locked||Xle(r))throw new Error("Bu oyuncu transfer pazarnda satlamaz.");const o=String(r.id),a=`teams/${n}/players/${o}`,c=Qs(Xs,"marketCreateListing");try{const{data:d}=await c({teamId:n,playerId:o,playerPath:a,price:i,pos:r.position,overall:r.overall});if(!d||d.ok!==!0){const h=d&&"message"in d&&typeof d.message=="string"?d.message:"lan oluturulamad.";throw new Error(h)}}catch(d){const h=d;throw h&&typeof h.code=="string"?new Error(h.message||"lan oluturulamad."):d instanceof Error?d:new Error("lan oluturulamad.")}}const BB=t=>{const e=t.data(),n=e.status==="available"?"active":e.status,r=e.sellerUid??e.sellerId??"",s=e.sellerId??e.sellerUid??"",i=e.teamId??s??r,o=e.player??{};return{id:t.id,...e,status:n,sellerUid:r,sellerId:s,teamId:i,price:Number(e.price??0),pos:e.pos??e.position??(o==null?void 0:o.position),overall:e.overall??(o==null?void 0:o.overall),player:o}};function Zle(t={},e,n){const r=VB(Me,{pos:t.pos,maxPrice:t.maxPrice,sort:t.sort,take:t.take});return Vs(r,{next:s=>{const i=s.docs.map(BB);e(i)},error:s=>{console.error("[transferListings] onSnapshot error:",s),n==null||n(s instanceof Error?s:new Error(String(s)))}})}function ece(t,e,n){const r=VB(Me,{sort:"newest"}),s=Pr(r,gr("sellerUid","==",t));return Vs(s,{next:i=>{const o=i.docs.map(BB);e(o)},error:i=>{console.error("[transferListings] seller onSnapshot error:",i),n==null||n(i instanceof Error?i:new Error(String(i)))}})}async function tce(t,e){const n=Ln.currentUser;if(!(n!=null&&n.uid))throw new Error("Giri bilgisi bulunamad.");if(!e)throw new Error("Satn alma iin takm bilgisi gerekli.");const r=Qs(Xs,"marketPurchaseListing");try{const s={listingId:t,buyerTeamId:e,purchaseId:typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`},{data:i}=await r(s);if(!i||i.ok!==!0)throw new Error("Satn alma baarsz.");return i}catch(s){const i=s,o=(i==null?void 0:i.code)||(i==null?void 0:i.details)||"internal",a={"resource-exhausted":"Bte yetersiz.","failed-precondition":"lan artk satn alnamaz (satld veya kullanm d).","permission-denied":"Bu takmla ilem yapma yetkin yok.","not-found":"lan veya oyuncu bulunamad.",unauthenticated:"Giri yapmalsn.",internal:"Sunucu hatas. Ltfen tekrar deneyin."};throw new Error(a[o]||(i==null?void 0:i.message)||"Satn alma baarsz.")}}async function nce(t){const e=Ln.currentUser;if(!(e!=null&&e.uid))throw new Error("Giri bilgisi bulunamad.");const n=Qs(Xs,"marketCancelListing");try{const{data:r}=await n({listingId:t});if(!r||r.ok!==!0){const s=r&&"message"in r&&typeof r.message=="string"?r.message:"lan iptal edilemedi.";throw new Error(s)}}catch(r){const s=r;throw s&&typeof s.code=="string"?new Error(s.message||"lan iptal edilemedi."):r instanceof Error?r:new Error("lan iptal edilemedi.")}}const rce=[{key:"strength",label:"G"},{key:"acceleration",label:"Hzlanma"},{key:"topSpeed",label:"Maks Hz"},{key:"dribbleSpeed",label:"Dribling Hz"},{key:"jump",label:"Srama"},{key:"tackling",label:"Mcadele"},{key:"ballKeeping",label:"Top Saklama"},{key:"passing",label:"Pas"},{key:"longBall",label:"Uzun Top"},{key:"agility",label:"eviklik"},{key:"shooting",label:"ut"},{key:"shootPower",label:"ut Gc"},{key:"positioning",label:"Pozisyon Alma"},{key:"reaction",label:"Refleks"},{key:"ballControl",label:"Top Kontrol"}],sce=t=>t.split(" ").filter(Boolean).slice(0,2).map(e=>{var n;return((n=e[0])==null?void 0:n.toUpperCase())??""}).join("");function UB({player:t,className:e}){var i;const n=Zi(t.condition),r=Zi(t.motivation),s=p.useMemo(()=>BI({...t,condition:n,motivation:r}),[t,n,r]);return l.jsxs("div",{className:ue("w-80 rounded-xl border border-emerald-100 bg-white p-4 shadow-lg shadow-emerald-100/40 dark:border-emerald-900/60 dark:bg-slate-900",e),children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0 space-y-1",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Oyuncu Statleri"}),l.jsx("h3",{className:"truncate text-base font-semibold",children:t.name}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.position,"  G ",Ii(s),"  Genel ",Hn(t.overall)]}),l.jsxs("div",{className:"flex flex-wrap gap-1 pt-1",children:[l.jsxs(Mt,{variant:"secondary",className:"text-[11px]",children:[t.age," ya"]}),l.jsxs(Mt,{variant:"outline",className:"text-[11px]",children:["Potansiyel ",Hn(t.potential)]}),t.injuryStatus==="injured"&&l.jsx(Mt,{variant:"destructive",className:"text-[11px]",children:"Sakat"}),(i=t.roles)==null?void 0:i.map(o=>l.jsx(Mt,{variant:"outline",className:"text-[11px]",children:o},o))]})]}),l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-emerald-100 to-emerald-200 text-sm font-semibold text-emerald-700 dark:from-emerald-700/60 dark:to-emerald-800/80 dark:text-emerald-50",children:sce(t.name)})]}),l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsx(Po,{label:"G",value:s}),l.jsx(Po,{label:"Kondisyon",value:n}),l.jsx(Po,{label:"Motivasyon",value:r})]}),l.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:rce.map(({key:o,label:a})=>l.jsx($n,{label:a,value:t.attributes[o],condensed:!0},o))})]})}const ice=["GK","CB","LB","RB","CM","LM","RM","CAM","LW","RW","ST"],oce=t=>{const e=t.match(/https:\/\/\S+/i);return e?e[0].replace(/[).,]$/,""):null},ace=t=>{switch(t){case"overall-asc":return"overall_asc";case"price-asc":return"price_asc";case"price-desc":return"price_desc";case"overall-desc":default:return"overall_desc"}},Zh=t=>`${t.toLocaleString("tr-TR")} `,Al=t=>Hn(t),lce=t=>{const e=t.message??"";return t.code==="failed-precondition"||e.includes("The query requires an index")},VA=t=>{const e=t instanceof Error?t:new Error(typeof t=="string"?t:String(t));return lce(e)?(oce(e.message??""),{title:"Veri yklenemedi."}):e.message.includes("permission")?{title:"Pazar okunamyor. Kurallar gncelliyor musunuz?"}:{title:e.message||"Beklenmedik bir hata olutu."}};function cce(){const{user:t}=Vn(),e=lp(),n=qs(),[r,s]=p.useState([]),[i,o]=p.useState(""),[a,c]=p.useState(0),[u,d]=p.useState(!1),[h,m]=p.useState([]),[g,w]=p.useState([]),[y,T]=p.useState(""),[b,_]=p.useState(""),[I,A]=p.useState(!1),[M,j]=p.useState(""),[v,E]=p.useState(!0),[C,S]=p.useState(!1),[P,R]=p.useState(!1),[k,W]=p.useState(""),[J,Q]=p.useState({position:"all",maxPrice:"",sortBy:"overall-desc"}),[le,O]=p.useState(null),V=p.useRef(0),[Z,ye]=p.useState(()=>typeof window>"u"?!0:window.matchMedia("(min-width: 768px)").matches);p.useEffect(()=>{if(typeof window>"u")return;const L=window.matchMedia("(min-width: 768px)"),K=Ae=>ye(Ae.matches),ie=()=>ye(L.matches);return ye(L.matches),typeof L.addEventListener=="function"?(L.addEventListener("change",K),()=>L.removeEventListener("change",K)):(L.addListener(ie),()=>L.removeListener(ie))},[]);const ae=e.state,ve=(ae==null?void 0:ae.listPlayerId)??"",_e=p.useCallback(async()=>{if(!t){s([]),o("Takmm"),c(0);return}d(!0);try{const L=await jn(t.id);s((L==null?void 0:L.players)??[]),o((L==null?void 0:L.name)??t.teamName??"Takmm");const K=Number.isFinite(L==null?void 0:L.transferBudget)?Number(L==null?void 0:L.transferBudget):Number.isFinite(L==null?void 0:L.budget)?Number(L==null?void 0:L.budget):0;c(K)}catch(L){console.error("[TransferMarket] takm ykleme hatas",L),G.error("Takm bilgileri alnamad.",{description:L instanceof Error?L.message:void 0})}finally{d(!1)}},[t]);p.useEffect(()=>{_e()},[_e]),p.useEffect(()=>{if(!t){m([]),E(!1);return}let L=!0;E(!0);const K=Number(J.maxPrice),ie=Number.isFinite(K)&&K>0?K:void 0,Ae=Zle({pos:J.position==="all"?void 0:J.position,maxPrice:ie,sort:ace(J.sortBy)},Ie=>{L&&(m(Ie),O($e=>$e&&Ie.some(je=>je.id===$e)?$e:null),E(!1))},Ie=>{if(!L)return;console.error("[TransferMarket] marketplace listen error",Ie);const $e=VA(Ie),je={};$e.description&&(je.description=$e.description),$e.action&&(je.action={label:$e.action.label,onClick:$e.action.onClick}),Object.keys(je).length>0?G.error($e.title,je):G.error($e.title),m([]),E(!1)});return()=>{L=!1,Ae()}},[J.maxPrice,J.position,J.sortBy,t]),p.useEffect(()=>{if(!(t!=null&&t.id)){w([]),S(!1);return}let L=!0;S(!0);const K=ece(t.id,ie=>{L&&(w(ie),S(!1))},ie=>{if(!L)return;console.error("[TransferMarket] my listings listen error",ie);const Ae=VA(ie),Ie={};Ae.description&&(Ie.description=Ae.description),Ae.action&&(Ie.action={label:Ae.action.label,onClick:Ae.action.onClick}),Object.keys(Ie).length>0?G.error(Ae.title,Ie):G.error(Ae.title),w([]),S(!1)});return()=>{L=!1,K()}},[t==null?void 0:t.id]),p.useEffect(()=>{t&&(V.current>g.length&&_e(),V.current=g.length)},[_e,g.length,t]);const de=p.useMemo(()=>{const L=new Set(g.map(K=>K.playerId));return r.filter(K=>{var ie;return!(L.has(K.id)||(ie=K.market)!=null&&ie.locked||To(K)!==null)})},[g,r]);p.useEffect(()=>{var L;if(ve&&r.length!==0){if(de.some(K=>K.id===ve))T(ve),_("");else{const K=r.find(ie=>ie.id===ve);(L=K==null?void 0:K.market)!=null&&L.locked||K&&To(K)!==null?G.error("Oyuncu pazara eklenemiyor.",{description:"Nostalji paketinden alnan oyuncular transfer pazarnda satlamaz."}):G.error("Oyuncu pazara eklenemiyor.",{description:"Oyuncu zaten listede olabilir veya kadroda bulunmuyor."})}n(e.pathname,{replace:!0,state:null})}},[de,e.pathname,n,ve,r.length]);const ze=()=>v?l.jsx(_f,{children:l.jsx(mo,{colSpan:6,className:"py-12 text-center text-muted-foreground",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx(Qn,{className:"h-4 w-4 animate-spin"}),"lanlar ykleniyor..."]})})}):h.length===0?l.jsx(_f,{children:l.jsx(mo,{colSpan:6,className:"py-12 text-center text-muted-foreground",children:"Filtrenize uyan aktif ilan bulunamad."})}):h.map(L=>{const K=L.player,ie=(K==null?void 0:K.name)??L.playerName??"Bilinmeyen Oyuncu",Ae=(K==null?void 0:K.position)??L.pos??"N/A",Ie=(K==null?void 0:K.overall)??L.overall??0,$e=(K==null?void 0:K.potential)??Ie,je=(K==null?void 0:K.age)??"",ee=L.sellerUid??L.sellerId,be=le===L.id;return l.jsxs(_f,{className:ue("transition-colors",be&&"bg-emerald-500/10"),children:[l.jsx(mo,{children:K?l.jsxs(N5,{open:be,onOpenChange:Ke=>{O(tt=>Ke?L.id:tt===L.id?null:tt)},children:[l.jsx(k5,{asChild:!0,children:l.jsxs("button",{type:"button",className:ue("group flex w-full flex-col items-start rounded-md border border-transparent px-0 py-1 text-left transition focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500/60",be&&"border-emerald-200 bg-emerald-50/70 dark:border-emerald-800 dark:bg-emerald-900/40"),children:[l.jsx("span",{className:"font-semibold text-foreground transition-colors group-hover:text-emerald-700 dark:group-hover:text-emerald-200",children:ie}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ya ",je,"  Potansiyel ",Al($e)]})]})}),l.jsx(nC,{align:Z?"start":"center",side:Z?"right":"bottom",sideOffset:Z?16:8,className:"w-[min(320px,80vw)] border-none bg-transparent p-0 shadow-none",children:l.jsx(UB,{player:K})})]}):l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:ie}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Ya ",je,"  Potansiyel ",Al($e)]})]})}),l.jsx(mo,{children:l.jsx(Mt,{variant:"outline",className:"border-white/20 bg-white/5 text-slate-100",children:Ae})}),l.jsx(mo,{className:"text-slate-200",children:Al(Ie)}),l.jsx(mo,{className:"text-slate-300",children:L.sellerTeamName}),l.jsx(mo,{className:"font-semibold text-emerald-300",children:Zh(L.price)}),l.jsx(mo,{className:"text-right",children:l.jsx(fe,{size:"sm",onClick:()=>ce(L),disabled:ee===(t==null?void 0:t.id)||M===L.id||a<L.price,className:"bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",children:M===L.id?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"lem Yaplyor"]}):"Satn Al"})})]},L.id)}),re=()=>v?l.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-xl border border-white/20 bg-white/5 py-6 text-sm text-slate-300",children:[l.jsx(Qn,{className:"h-4 w-4 animate-spin"}),"lanlar ykleniyor..."]}):h.length===0?l.jsx("div",{className:"rounded-xl border border-white/20 bg-white/5 p-4 text-center text-sm text-slate-300",children:"Filtrenize uyan aktif ilan bulunamad."}):h.map(L=>{const K=L.player,ie=(K==null?void 0:K.name)??L.playerName??"Bilinmeyen Oyuncu",Ae=(K==null?void 0:K.position)??L.pos??"N/A",Ie=(K==null?void 0:K.overall)??L.overall??0,$e=(K==null?void 0:K.potential)??Ie,je=(K==null?void 0:K.age)??"",ee=L.sellerUid??L.sellerId;return l.jsxs("div",{className:"transfer-market-mobile-card",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-base font-semibold text-foreground",children:ie}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Ya ",je,"  Potansiyel ",Al($e)]})]}),l.jsx(Mt,{variant:"outline",className:"border-white/20 bg-white/5 text-slate-100",children:Ae})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs text-muted-foreground",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-foreground",children:"G Ortalamas"}),l.jsx("div",{children:Al(Ie)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-foreground",children:"Satc"}),l.jsx("div",{children:L.sellerTeamName})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-foreground",children:"Fiyat"}),l.jsx("div",{className:"transfer-market-mobile-card__price",children:Zh(L.price)})]})]}),l.jsx(fe,{className:"mt-4 w-full bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",onClick:()=>ce(L),disabled:ee===(t==null?void 0:t.id)||M===L.id||a<L.price,children:M===L.id?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"lem Yaplyor"]}):"Satn Al"})]},L.id)}),Pe=async()=>{if(!t){G.error("Giri yapmalsn.");return}R(!0);try{const L=await bte(t.id,1e4);c(L),G.success("Takm btene 10.000  eklendi.")}catch(L){console.error("[TransferMarket] budget adjust error",L),G.error("Bte gncellenemedi.",{description:L instanceof Error?L.message:void 0})}finally{R(!1)}},Ze=async()=>{var ie;if(!t){G.error("Giri yapmalsn.");return}const L=de.find(Ae=>Ae.id===y);if(!L){G.error("Pazara koymak iin bir oyuncu se.");return}if((ie=L.market)!=null&&ie.locked||To(L)!==null){G.error("Bu oyuncu transfer pazarnda satlamaz.");return}const K=Number(b);if(!Number.isFinite(K)||K<=0){G.error("Geerli bir fiyat gir.");return}A(!0);try{await Jle({player:L,price:K}),G.success(`${L.name} transfer pazarna eklendi.`),T(""),_(""),await _e()}catch(Ae){G.error("lan oluturulamad.",{description:Ae instanceof Error?Ae.message:void 0})}finally{A(!1)}},De=async L=>{if(!t){G.error("Giri yapmalsn.");return}W(L);try{await nce(L),G.success("lan transfer pazarndan kaldrld."),await _e()}catch(K){G.error("lan kaldrlamad.",{description:K instanceof Error?K.message:void 0})}finally{W("")}},ce=async L=>{if(!t){G.error("Giri yapmalsn.");return}if((L.sellerUid??L.sellerId)===t.id){G.error("Kendi oyuncunu satn alamazsn.");return}if(a<L.price){G.error("Bten yetersiz.",{description:"Satn alma testleri iin sadaki butondan btene 10.000  ekleyebilirsin."});return}O(ie=>ie===L.id?null:ie),j(L.id);try{await tce(L.id,t.id),G.success(`${L.player.name} takmza katld!`),c(ie=>Math.max(0,ie-L.price)),await _e()}catch(ie){G.error("Satn alma baarsz.",{description:ie instanceof Error?ie.message:void 0})}finally{j("")}};return l.jsxs("div",{className:"transfer-market-page",children:[l.jsx("div",{className:"transfer-market-gradient"}),l.jsx("div",{className:"transfer-market-orb transfer-market-orb--left"}),l.jsx("div",{className:"transfer-market-orb transfer-market-orb--right"}),l.jsx("div",{className:"transfer-market-noise"}),l.jsxs("div",{className:"transfer-market-shell",children:[l.jsxs("header",{className:"transfer-market-header",children:[l.jsxs("div",{className:"transfer-market-header__main",children:[l.jsx(qr,{}),l.jsxs("div",{className:"transfer-market-header__title",children:[l.jsx("h1",{children:"Transfer Pazar"}),l.jsx("p",{children:"Oyuncularn pazara kar, eksik blgeler iin yeni yldzlar kefet. Mevkilere, ortalama gce ve fiyata gre filtreleyerek hedeflediin transferi kolayca bul."})]})]}),l.jsxs("div",{className:"transfer-market-summary",children:[l.jsx("div",{className:"transfer-market-summary__icon",children:l.jsx(Yre,{className:"h-6 w-6"})}),l.jsxs("div",{className:"transfer-market-summary__info",children:[l.jsx("span",{children:"Takm"}),l.jsx("strong",{children:i||(t==null?void 0:t.teamName)||"Takmm"})]}),l.jsxs("div",{className:"transfer-market-summary__info",children:[l.jsx("span",{children:"Bte"}),l.jsx("strong",{children:Zh(a)})]})]})]}),l.jsxs("div",{className:"transfer-market-layout",children:[l.jsxs(Ue,{className:ue("transfer-market-card","overflow-hidden"),children:[l.jsxs(It,{className:ue("transfer-market-card__header"),children:[l.jsxs(Ct,{className:"flex items-center gap-2 text-xl",children:[l.jsx(nV,{className:"h-5 w-5 text-emerald-300"}),"Pazardaki Oyuncular"]}),l.jsxs("div",{className:"transfer-market-card__filters",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium uppercase text-slate-300",children:"Mevki"}),l.jsxs(vi,{value:J.position,onValueChange:L=>Q(K=>({...K,position:L})),children:[l.jsx($s,{className:"border-white/20 bg-slate-900/60 text-slate-100",children:l.jsx(qi,{placeholder:"Mevki se"})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"all",children:"Tm"}),ice.map(L=>l.jsx(zt,{value:L,children:L},L))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium uppercase text-slate-300",children:"Maksimum Fiyat"}),l.jsx(Xn,{inputMode:"numeric",type:"number",min:0,placeholder:"rn. 500000",value:J.maxPrice,onChange:L=>Q(K=>({...K,maxPrice:L.target.value})),className:"border-white/20 bg-slate-900/60 text-slate-100 placeholder:text-slate-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium uppercase text-slate-300",children:"Sralama"}),l.jsxs(vi,{value:J.sortBy,onValueChange:L=>Q(K=>({...K,sortBy:L})),children:[l.jsx($s,{className:"border-white/20 bg-slate-900/60 text-slate-100",children:l.jsx(qi,{placeholder:"Srala"})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"overall-desc",children:"G (Yksek  Dk)"}),l.jsx(zt,{value:"overall-asc",children:"G (Dk  Yksek)"}),l.jsx(zt,{value:"price-asc",children:"Fiyat (Dk  Yksek)"}),l.jsx(zt,{value:"price-desc",children:"Fiyat (Yksek  Dk)"})]})]})]})]})]}),l.jsx(Je,{className:"p-0",children:Z?l.jsx("div",{className:"transfer-market-card__table",children:l.jsxs(DB,{children:[l.jsx(OB,{children:l.jsxs(_f,{children:[l.jsx(Vl,{children:"Oyuncu"}),l.jsx(Vl,{children:"Mevki"}),l.jsx(Vl,{children:"G Ortalamas"}),l.jsx(Vl,{children:"Satc"}),l.jsx(Vl,{children:"Fiyat"}),l.jsx(Vl,{className:"text-right",children:"lem"})]})}),l.jsx(LB,{children:ze()})]})}):l.jsx("div",{className:"transfer-market-mobile-listings p-6",children:re()})})]}),l.jsxs("div",{className:"transfer-market-aside",children:[l.jsxs("div",{className:"transfer-market-budget",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"transfer-market-budget__label",children:"Kalan Bte"}),l.jsx("p",{className:"transfer-market-budget__value",children:Zh(a)})]}),l.jsx(fe,{variant:"outline",onClick:Pe,disabled:P||!t,className:"border-white/20 bg-white/5 text-slate-100 hover:bg-emerald-500/20",children:P?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Ekleniyor"]}):"+10.000  Ekle"})]}),l.jsx("p",{className:"mt-4 text-xs text-slate-400",children:"Test amal btene hzlca para eklemek iin bu butonu kullanabilirsin. lem Firebase zerinde kaydedilir."})]}),l.jsxs("div",{className:"transfer-market-form",children:[l.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-white",children:[l.jsx(kre,{className:"h-5 w-5 text-emerald-300"}),"Oyuncu lan Olutur"]}),l.jsxs("div",{className:"mt-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium uppercase text-slate-300",children:"Oyuncu Se"}),l.jsxs(vi,{value:y,onValueChange:L=>T(L),disabled:de.length===0||I||u,children:[l.jsx($s,{className:"border-white/20 bg-slate-900/60 text-slate-100",children:l.jsx(qi,{placeholder:u?"Takm ykleniyor...":de.length===0?"Pazara koyabilecein oyuncu kalmad":"Oyuncu se"})}),l.jsx(Ws,{children:de.map(L=>l.jsxs(zt,{value:L.id,children:[L.name,"  ",L.position,"  Overall ",Al(L.overall)]},L.id))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium uppercase text-slate-300",children:"Sat Fiyat ()"}),l.jsx(Xn,{type:"number",inputMode:"numeric",min:1,step:"10000",placeholder:"rn. 250000",value:b,onChange:L=>_(L.target.value),disabled:I,className:"border-white/20 bg-slate-900/60 text-slate-100 placeholder:text-slate-500"})]}),l.jsx(fe,{className:"w-full bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",onClick:Ze,disabled:!y||!b||I,children:I?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"lan Oluturuluyor"]}):"Pazara Ekle"}),l.jsx("p",{className:"text-xs text-slate-400",children:"lan verdiin oyuncular satlana kadar kadronda grnmeye devam eder. Sat gerekletiinde oyuncu yeni takmna otomatik olarak transfer edilir."})]})]}),l.jsxs("div",{className:"transfer-market-listings",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:"Aktif lanlarn"}),l.jsx("div",{className:"mt-4",children:C?l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[l.jsx(Qn,{className:"h-4 w-4 animate-spin"}),"lanlarn ykleniyor..."]}):g.length===0?l.jsx("p",{className:"text-sm text-slate-400",children:"u anda pazarda aktif ilanlarn bulunmuyor."}):l.jsx("ul",{children:g.map(L=>{const K=L.player,ie=(K==null?void 0:K.name)??L.playerName??"Bilinmeyen Oyuncu",Ae=(K==null?void 0:K.position)??L.pos??"N/A",Ie=(K==null?void 0:K.overall)??L.overall??0;return l.jsxs("li",{children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:ie}),l.jsxs("span",{className:"text-xs text-slate-400",children:[Ae,"  Overall ",Al(Ie)]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{children:Zh(L.price)}),l.jsx(fe,{variant:"outline",size:"sm",onClick:()=>De(L.id),disabled:k===L.id,className:"border-white/20 bg-white/5 text-slate-100 hover:bg-emerald-500/20",children:k===L.id?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Kaldrlyor"]}):"Kaldr"})]})]},L.id)})})})]})]})]})]})]})}const Qd=({message:t,title:e="Bilgi",triggerLabel:n="Bilgi mesajn grntle",triggerClassName:r,contentClassName:s})=>{const[i,o]=p.useState(!1);return l.jsxs(Go,{open:i,onOpenChange:o,children:[l.jsx(lae,{asChild:!0,children:l.jsx("button",{type:"button","aria-label":n,className:ue("flex h-9 w-9 items-center justify-center rounded-full border border-white/20 bg-white/10 text-cyan-200 transition hover:border-cyan-300 hover:bg-cyan-500/10 hover:text-cyan-100 focus:outline-none focus:ring-2 focus:ring-cyan-400/60 focus:ring-offset-2 focus:ring-offset-slate-950",r),children:l.jsx(Nre,{className:"h-4 w-4"})})}),l.jsx(Ji,{className:ue("max-w-sm border border-white/10 bg-slate-950/95 text-left text-slate-100 shadow-2xl backdrop-blur",s),children:l.jsxs(Ho,{className:"space-y-2",children:[l.jsx(Ko,{className:"text-lg font-semibold text-white",children:e}),l.jsx(ul,{className:"text-sm text-slate-300",children:t})]})})]})},uce=({candidate:t,onAccept:e,onRelease:n})=>{const{player:r}=t,s=r.name.split(" ").map(c=>c[0]).join(""),i=[["Hz",r.attributes.topSpeed],["ut",r.attributes.shooting],["G",r.attributes.strength],["vme",r.attributes.acceleration],["Top Srme",r.attributes.dribbleSpeed],["Zplama",r.attributes.jump],["Savunma",r.attributes.tackling],["Top Saklama",r.attributes.ballKeeping],["Pas",r.attributes.passing],["Uzun Pas",r.attributes.longBall],["eviklik",r.attributes.agility],["ut Gc",r.attributes.shootPower],["Pozisyon Alma",r.attributes.positioning],["Reaksiyon",r.attributes.reaction],["Top Kontrol",r.attributes.ballControl]],o=i.slice(0,2),a=i.slice(2);return l.jsxs(Ue,{"data-testid":`youth-candidate-${t.id}`,className:"group relative flex h-full min-h-[280px] flex-col overflow-hidden rounded-2xl border border-white/10 bg-slate-900/75 p-4 text-slate-100 shadow-lg backdrop-blur transition-all duration-300 hover:-translate-y-1 hover:border-cyan-400/40 hover:shadow-2xl sm:p-5 md:min-h-[320px] xl:min-w-0",children:[l.jsx("div",{className:"absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-transparent to-emerald-500/20"})}),l.jsxs("div",{className:"relative flex flex-1 flex-col gap-3 xl:flex-row xl:items-start",children:[l.jsxs("div",{className:"relative shrink-0",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-cyan-500 to-emerald-500 text-base font-semibold text-white shadow-lg shadow-cyan-500/20",children:s}),l.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-6 w-6 items-center justify-center rounded-full border border-white/20 bg-slate-950/80 text-[10px] font-bold text-cyan-100 shadow-md shadow-cyan-500/20",children:r.position})]}),l.jsxs("div",{className:"min-w-0 flex flex-1 flex-col",children:[l.jsxs("div",{className:"flex flex-col gap-3 xl:flex-row xl:flex-wrap xl:items-start xl:justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"truncate text-base font-semibold tracking-tight",children:r.name}),l.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-1.5 text-xs",children:[l.jsxs(Mt,{variant:"secondary",className:"border-white/20 bg-white/10 text-white backdrop-blur",children:[r.age," ya"]}),l.jsxs("div",{className:"flex items-center gap-1 rounded-full border border-white/10 bg-white/10 px-2 py-0.5 text-[11px] font-medium text-cyan-100 shadow-inner shadow-cyan-500/10",children:[l.jsx(hc,{className:"h-3 w-3"}),l.jsxs(lh,{children:[l.jsx(ch,{asChild:!0,children:l.jsx("span",{className:"font-semibold",children:Hn(r.overall)})}),l.jsxs($c,{children:["Maks. Potansiyel: ",Hn(r.potential)]})]})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:r.roles.map(c=>l.jsx(Mt,{variant:"outline",className:"border-white/20 bg-transparent text-cyan-100",children:c},c))})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-1.5 xl:justify-end",children:[l.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>e(t.id),"data-testid":`youth-accept-${t.id}`,className:"rounded-full border border-transparent bg-white/5 px-3 text-xs font-semibold text-cyan-100 shadow-sm transition hover:border-cyan-400/60 hover:bg-cyan-500/20 hover:text-white",children:"Takma Al"}),l.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>n(t.id),"data-testid":`youth-release-${t.id}`,className:"rounded-full border border-transparent bg-white/5 px-3 text-xs font-semibold text-slate-200 shadow-sm transition hover:border-rose-500/60 hover:bg-rose-500/20 hover:text-white",children:"Serbest Brak"})]})]}),l.jsxs("div",{className:"mt-4 flex flex-1 flex-col justify-between",children:[l.jsx("div",{className:"space-y-1",children:o.map(([c,u])=>l.jsx($n,{label:c,value:u,className:"text-slate-200"},c))}),l.jsxs("div",{className:"mt-3 hidden space-y-1 text-[11px] text-slate-300 group-hover:block",children:[a.map(([c,u])=>l.jsx($n,{label:c,value:u,className:"text-slate-200"},c)),l.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-slate-300/90",children:[l.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Boy: ",r.height," cm"]}),l.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Kilo: ",r.weight," kg"]})]})]})]})]})]})]})},dce=({candidates:t,onAccept:e,onRelease:n,className:r,emptyStateClassName:s})=>t.length===0?l.jsx("div",{className:ue("flex justify-center py-6",s),children:l.jsx(Qd,{title:"Oyuncu Havuzu",triggerLabel:"Altyap oyuncusu bulunmadnda bilgi mesajn a",message:"Henz altyap oyuncusu yok. Yeni aday ret."})}):l.jsx("div",{className:ue("grid gap-4 md:grid-cols-2 xl:grid-cols-3",r),children:t.map(i=>l.jsx(uce,{candidate:i,onAccept:e,onRelease:n},i.id))}),hce=({nextGenerateAt:t,onReset:e,canReset:n,onWatchAd:r,canWatchAd:s,cooldownDurationMs:i,className:o})=>{const[a,c]=p.useState(0);p.useEffect(()=>{const y=()=>{if(!t){c(0);return}const b=t.getTime()-Date.now();c(b>0?b:0)};y();const T=setInterval(y,1e3);return()=>clearInterval(T)},[t]);const u=Math.max(1,i),d=u?(u-a)/u*100:100,h=Math.floor(a/36e5).toString().padStart(2,"0"),m=Math.floor(a%36e5/6e4).toString().padStart(2,"0"),g=Math.floor(a%6e4/1e3).toString().padStart(2,"0"),w=a===0;return l.jsxs(Ue,{className:ue("border-white/10 bg-slate-900/80 text-slate-100 shadow-xl backdrop-blur",o),children:[l.jsx(It,{className:"pb-4",children:l.jsx(Ct,{className:"text-xl font-semibold text-white",children:"Oyuncu retimi"})}),l.jsxs(Je,{className:"space-y-4 text-sm text-slate-200",children:[l.jsx(Yd,{value:d,className:"h-2 bg-white/10"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("span",{className:"font-medium text-white",children:["Sonraki retim: ",h,":",m,":",g]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[l.jsx(fe,{onClick:r,disabled:!s,size:"sm",variant:"outline","data-testid":"youth-watch-ad",className:"border-white/20 bg-transparent text-cyan-100 hover:border-cyan-400/60 hover:bg-cyan-500/20 hover:text-white",children:"Reklam zle (-12 saat)"}),l.jsxs(fe,{onClick:e,disabled:!n||w,size:"sm",variant:"secondary","data-testid":"youth-reset",className:"border border-transparent bg-gradient-to-r from-emerald-500 to-cyan-500 text-slate-950 shadow-lg shadow-emerald-500/20 hover:from-emerald-400 hover:to-cyan-400",children:["Hemen Al (",Wv,")"]})]})]}),l.jsxs("p",{className:"leading-relaxed text-slate-300",children:["Altyap oyuncular haftada bir gelir. Reklam izleyerek bekleme sresini"," ",(sC/36e5).toFixed(0)," saat ksaltabilir veya elmas kullanarak hemen yeni oyuncu alabilirsin."]})]})]})]})},BA=["GK","CB","LB","RB","CM","LM","RM","CAM","LW","RW","ST"],Lr=()=>parseFloat(Math.random().toFixed(3)),fce=()=>{const t=BA[Math.floor(Math.random()*BA.length)],e={strength:Lr(),acceleration:Lr(),topSpeed:Lr(),dribbleSpeed:Lr(),jump:Lr(),tackling:Lr(),ballKeeping:Lr(),passing:Lr(),longBall:Lr(),agility:Lr(),shooting:Lr(),shootPower:Lr(),positioning:Lr(),reaction:Lr(),ballControl:Lr()},n=p0(t,e),r=Math.min(1,n+Math.random()*(1-n));return{id:crypto.randomUUID(),name:Dm(),position:t,roles:Kn(t),overall:n,potential:r,attributes:e,age:Math.floor(Math.random()*5)+16,height:180,weight:75,squadRole:"youth"}},mce=({icon:t,label:e,value:n,helper:r})=>l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg backdrop-blur transition-transform duration-300 hover:-translate-y-1 hover:border-cyan-400/40",children:[l.jsx("div",{className:"absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-transparent to-emerald-500/20"})}),l.jsxs("div",{className:"relative flex items-start gap-4",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900/70 text-cyan-200 shadow-inner shadow-cyan-500/20",children:l.jsx(t,{className:"h-5 w-5"})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-cyan-200/70",children:e}),l.jsx(Qd,{message:r,title:e,triggerLabel:`${e} iin bilgi mesajn a`,triggerClassName:"h-7 w-7 rounded-lg border-white/15 bg-transparent text-cyan-200 hover:border-cyan-300"})]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-white",children:n})]})]})]}),pce=()=>{const{user:t}=Vn(),{balance:e}=Ni(),{vipDurationMultiplier:n}=Xc(),[r,s]=p.useState([]),[i,o]=p.useState(null),[a,c]=p.useState(!1),u=Math.round(L5*n);p.useEffect(()=>{if(t!=null&&t.id)return F5(t.id).then(s).catch(console.warn),Koe(t.id,s)},[t==null?void 0:t.id]),p.useEffect(()=>{if(t!=null&&t.id)try{const j=kt(Me,"users",t.id);return Vs(j,v=>{var S;const E=v.data(),C=(S=E==null?void 0:E.youth)==null?void 0:S.nextGenerateAt;o(C?C.toDate():null)})}catch(j){console.warn(j)}},[t==null?void 0:t.id]),p.useEffect(()=>{const j=()=>{if(!i){c(!0);return}c(i.getTime()<=Date.now())};j();const v=setInterval(j,1e3);return()=>clearInterval(v)},[i]);const d=async()=>{if(t!=null&&t.id)try{const j=fce(),v=await qoe(t.id,j,{durationMultiplier:n});s(E=>[v,...E]),o(new Date(Date.now()+u)),G.success("Oyuncu retildi")}catch(j){console.warn(j),G.error(j.message||"lem baarsz")}},h=async()=>{if(t!=null&&t.id)try{await Xoe(t.id),o(new Date),G.success("Bekleme sresi kaldrld")}catch(j){console.warn(j),G.error("Elmas ile hzlandrma baarsz")}},m=async()=>{if(t!=null&&t.id)try{await Joe(t.id),o(j=>{if(!j)return new Date;const v=new Date(j.getTime()-sC),E=new Date;return v>E?v:E}),G.success("Reklam izlendi, sre 12 saat ksald")}catch(j){console.warn(j),G.error("Reklam izleme baarsz")}},g=async j=>{if(t!=null&&t.id)try{await Yoe(t.id,j),s(v=>v.filter(E=>E.id!==j)),G.success("Oyuncu takma eklendi")}catch(v){console.warn(v),G.error("lem baarsz")}},w=async j=>{if(t!=null&&t.id)try{await Qoe(t.id,j),s(v=>v.filter(E=>E.id!==j)),G.success("Oyuncu serbest brakld")}catch(v){console.warn(v),G.error("lem baarsz")}};if(!t)return l.jsx("div",{className:"p-4",children:"Giri yapmalsn"});const y=r.length,T=y===0?0:Ii(r.reduce((j,v)=>j+v.player.overall,0)/y),b=y===0?0:Ii(Math.max(...r.map(j=>j.player.potential))),_=y>0?`Kadron iin ${y} umut vadeden oyuncu seni bekliyor. En yksek potansiyel ${b}.`:"lk altyap yeteneklerini kefetmek iin hemen retim yap.",I=a?"Hazr":i?i.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):"",A=a?"Yeni aday hemen retilebilir":"Planlanan retim saati",M=[{icon:Hd,label:"Aday Havuzu",value:y.toString(),helper:y>0?"Seime hazr gen yetenek":"Henz aday bulunmuyor"},{icon:Lre,label:"Ortalama Genel",value:y>0?T.toString():"",helper:"Performans puan (100 zerinden)"},{icon:_y,label:"En Yksek Potansiyel",value:y>0?b.toString():"",helper:y>0?"Scout ekibinin grd tavan":"Aday retildiinde grntlenir"},{icon:J4,label:"Yeni retim",value:I,helper:A}];return l.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-100",children:[l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.18),_transparent_65%)]","aria-hidden":!0}),l.jsx("div",{className:"pointer-events-none absolute -left-32 top-24 h-96 w-96 rounded-full bg-emerald-500/15 blur-3xl","aria-hidden":!0}),l.jsx("div",{className:"pointer-events-none absolute right-[-18%] bottom-[-10%] h-[28rem] w-[28rem] rounded-full bg-cyan-500/15 blur-[140px]","aria-hidden":!0}),l.jsx("div",{className:"relative z-10 px-4 py-10 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"relative mx-auto max-w-7xl rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-6 py-8 shadow-2xl",children:[l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.25),_transparent_60%)]"}),l.jsx("div",{className:"pointer-events-none absolute -left-24 bottom-0 h-72 w-72 rounded-full bg-emerald-500/20 blur-3xl"}),l.jsx("div",{className:"pointer-events-none absolute right-[-10%] top-[-20%] h-72 w-72 rounded-full bg-cyan-500/25 blur-3xl"}),l.jsxs("div",{className:"relative space-y-10",children:[l.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[l.jsx("div",{className:"flex flex-col gap-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsxs("div",{children:[l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-cyan-200",children:[l.jsx(_y,{className:"h-3.5 w-3.5"}),"altyap ynetimi"]}),l.jsx("h1",{className:"mt-4 text-3xl font-bold tracking-tight sm:text-4xl",children:"Altyap Merkezi"}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-300 sm:text-base",children:_})]})]})}),l.jsx(fe,{onClick:d,disabled:!a,"data-testid":"youth-generate",className:"group relative overflow-hidden rounded-full border-0 bg-gradient-to-r from-cyan-500 via-emerald-500 to-teal-500 px-6 py-3 text-base font-semibold text-slate-950 shadow-lg shadow-cyan-500/30 transition hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-50",children:l.jsxs("span",{className:"relative flex items-center gap-2",children:[l.jsx(_y,{className:"h-5 w-5 transition-transform group-hover:rotate-6"}),"Oyuncu ret"]})})]}),l.jsx("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:M.map(j=>l.jsx(mce,{...j},j.label))}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr,1fr]",children:[l.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl backdrop-blur",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-white",children:"Oyuncu Havuzu"}),l.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"Geliime hazr gen yetenekleri filtrele ve doru zamanda A takma ykselt."})]}),y>0&&l.jsxs(Mt,{variant:"outline",className:"w-fit border-white/20 bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-widest text-cyan-200",children:[y," Aday"]})]}),l.jsx("div",{className:"mt-6",children:l.jsx(dce,{candidates:r,onAccept:g,onRelease:w,className:"2xl:grid-cols-4",emptyStateClassName:"text-slate-300"})})]}),l.jsxs("aside",{className:"space-y-6",children:[l.jsx(hce,{nextGenerateAt:i,onReset:h,canReset:e>=Wv&&!a,onWatchAd:m,canWatchAd:!a,cooldownDurationMs:u}),l.jsxs("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl backdrop-blur",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Scout Notlar"}),l.jsxs("ul",{className:"mt-4 space-y-3 text-sm text-slate-300",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(Yw,{className:"mt-0.5 h-4 w-4 text-cyan-300"}),l.jsx("span",{children:"Yksek potansiyelli oyuncular hazrlk kampna erken dahil ederek geliim patlamas yakala."})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(Yw,{className:"mt-0.5 h-4 w-4 text-cyan-300"}),l.jsx("span",{children:"Reklam izleyerek bekleme sresini ksalt ve transfer dnemlerinde altyapn scak tut."})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx(Yw,{className:"mt-0.5 h-4 w-4 text-cyan-300"}),l.jsx("span",{children:"Elmasla beklemeyi sfrlamak, kritik malardan nce kadroyu tazelemek iin gl bir hamle."})]})]})]})]})]})]})]})})]})};function gce(){return l.jsx(pce,{})}var L0="Switch",[yce,qme]=Ps(L0),[vce,xce]=yce(L0),zB=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),w=vt(e,I=>g(I)),y=p.useRef(!1),T=m?d||!!m.closest("form"):!0,[b,_]=Bo({prop:s,defaultProp:i??!1,onChange:u,caller:L0});return l.jsxs(vce,{scope:n,checked:b,disabled:a,children:[l.jsx(rt.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":HB(b),"data-disabled":a?"":void 0,disabled:a,value:c,...h,ref:w,onClick:Ne(t.onClick,I=>{_(A=>!A),T&&(y.current=I.isPropagationStopped(),y.current||I.stopPropagation())})}),T&&l.jsx(GB,{control:m,bubbles:!y.current,name:r,value:c,checked:b,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});zB.displayName=L0;var $B="SwitchThumb",WB=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=xce($B,n);return l.jsx(rt.span,{"data-state":HB(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});WB.displayName=$B;var wce="SwitchBubbleInput",GB=p.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=p.useRef(null),a=vt(o,i),c=H3(n),u=E2(e);return p.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&g){const w=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(w)}},[c,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});GB.displayName=wce;function HB(t){return t?"checked":"unchecked"}var KB=zB,_ce=WB;const ql=p.forwardRef(({className:t,...e},n)=>l.jsx(KB,{className:ue("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:l.jsx(_ce,{className:ue("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ql.displayName=KB.displayName;const bce={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},Ece=(t,e,n)=>{let r;const s=bce[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+" sonra":r+" nce":r},Sce={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},Tce={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ice={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cce={date:Ju({formats:Sce,defaultWidth:"full"}),time:Ju({formats:Tce,defaultWidth:"full"}),dateTime:Ju({formats:Ice,defaultWidth:"full"})},Nce={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},kce=(t,e,n,r)=>Nce[t],Rce={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},Pce={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},Ace={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},jce={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},Mce={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},Dce={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},Oce=(t,e)=>Number(t)+".",Lce={ordinalNumber:Oce,era:Fi({values:Rce,defaultWidth:"wide"}),quarter:Fi({values:Pce,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Fi({values:Ace,defaultWidth:"wide"}),day:Fi({values:jce,defaultWidth:"wide"}),dayPeriod:Fi({values:Mce,defaultWidth:"wide",formattingValues:Dce,defaultFormattingWidth:"wide"})},Fce=/^(\d+)(\.)?/i,Vce=/\d+/i,Bce={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},Uce={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},zce={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},$ce={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},Wce={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},Gce={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},Hce={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},Kce={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},qce={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},Yce={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},Qce={ordinalNumber:M4({matchPattern:Fce,parsePattern:Vce,valueCallback:function(t){return parseInt(t,10)}}),era:Vi({matchPatterns:Bce,defaultMatchWidth:"wide",parsePatterns:Uce,defaultParseWidth:"any"}),quarter:Vi({matchPatterns:zce,defaultMatchWidth:"wide",parsePatterns:$ce,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vi({matchPatterns:Wce,defaultMatchWidth:"wide",parsePatterns:Gce,defaultParseWidth:"any"}),day:Vi({matchPatterns:Hce,defaultMatchWidth:"wide",parsePatterns:Kce,defaultParseWidth:"any"}),dayPeriod:Vi({matchPatterns:qce,defaultMatchWidth:"any",parsePatterns:Yce,defaultParseWidth:"any"})},qB={code:"tr",formatDistance:Ece,formatLong:Cce,formatRelative:kce,localize:Lce,match:Qce,options:{weekStartsOn:1,firstWeekContainsDate:1}};var UA={};const zA="@firebase/database",$A="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YB="";function Xce(t){YB=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jce{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ar(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:vm(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Qo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Jce(e)}}catch{}return new Zce},ec=QB("localStorage"),eue=QB("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new cp("@firebase/database"),tue=function(){let t=1;return function(){return t++}}(),XB=function(t){const e=SK(t),n=new wK;n.update(e);const r=n.digest();return Bx.encodeByteArray(r)},Mp=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Mp.apply(null,r):typeof r=="object"?e+=ar(r):e+=r,e+=" "}return e};let zf=null,WA=!0;const nue=function(t,e){Te(!0,"Can't turn on custom loggers persistently."),td.logLevel=bt.VERBOSE,zf=td.log.bind(td)},kr=function(...t){if(WA===!0&&(WA=!1,zf===null&&eue.get("logging_enabled")===!0&&nue()),zf){const e=Mp.apply(null,t);zf(e)}},Dp=function(t){return function(...e){kr(t,...e)}},KE=function(...t){const e="FIREBASE INTERNAL ERROR: "+Mp(...t);td.error(e)},qo=function(...t){const e=`FIREBASE FATAL ERROR: ${Mp(...t)}`;throw td.error(e),new Error(e)},Is=function(...t){const e="FIREBASE WARNING: "+Mp(...t);td.warn(e)},rue=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},JB=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},sue=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Xd="[MIN_NAME]",Oc="[MAX_NAME]",Eh=function(t,e){if(t===e)return 0;if(t===Xd||e===Oc)return-1;if(e===Xd||t===Oc)return 1;{const n=GA(t),r=GA(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},iue=function(t,e){return t===e?0:t<e?-1:1},ef=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ar(e))},vC=function(t){if(typeof t!="object"||t===null)return ar(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ar(e[r]),n+=":",n+=vC(t[e[r]]);return n+="}",n},ZB=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function fs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const eU=function(t){Te(!JB(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),h=h+m}return h.toLowerCase()},oue=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},aue=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function lue(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const cue=new RegExp("^-?(0*)\\d{1,10}$"),uue=-2147483648,due=2147483647,GA=function(t){if(cue.test(t)){const e=Number(t);if(e>=uue&&e<=due)return e}return null},Op=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Is("Exception was thrown by user callback.",n),e},Math.floor(0))}},hue=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$f=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fue{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mue{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(kr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(e)}}class Iy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Iy.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="5",tU="v",nU="s",rU="r",sU="f",iU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oU="ls",aU="p",qE="ac",lU="websocket",cU="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ec.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ec.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function pue(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dU(t,e,n){Te(typeof e=="string","typeof type must == string"),Te(typeof n=="object","typeof params must == object");let r;if(e===lU)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cU)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);pue(t)&&(n.ns=t.namespace);const s=[];return fs(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gue{constructor(){this.counters_={}}incrementCounter(e,n=1){Qo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nK(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_={},u_={};function wC(t){const e=t.toString();return c_[e]||(c_[e]=new gue),c_[e]}function yue(t,e){const n=t.toString();return u_[n]||(u_[n]=e()),u_[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Op(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="start",xue="close",wue="pLPCommand",_ue="pRTLPCB",hU="id",fU="pw",mU="ser",bue="cb",Eue="seg",Sue="ts",Tue="d",Iue="dframe",pU=1870,gU=30,Cue=pU-gU,Nue=25e3,kue=3e4;class Lu{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dp(e),this.stats_=wC(n),this.urlFn=c=>(this.appCheckToken&&(c[qE]=this.appCheckToken),dU(n,cU,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new vue(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kue)),sue(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _C((...i)=>{const[o,a,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===HA)this.id=a,this.password=c;else if(o===xue)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[HA]="t",r[mU]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[bue]=this.scriptTagHolder.uniqueCallbackIdentifier),r[tU]=xC,this.transportSessionId&&(r[nU]=this.transportSessionId),this.lastSessionId&&(r[oU]=this.lastSessionId),this.applicationId&&(r[aU]=this.applicationId),this.appCheckToken&&(r[qE]=this.appCheckToken),typeof location<"u"&&location.hostname&&iU.test(location.hostname)&&(r[rU]=sU);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lu.forceAllow_=!0}static forceDisallow(){Lu.forceDisallow_=!0}static isAvailable(){return Lu.forceAllow_?!0:!Lu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!oue()&&!aue()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ar(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=NO(n),s=ZB(r,Cue);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Iue]="t",r[hU]=e,r[fU]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ar(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class _C{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=tue(),window[wue+this.uniqueCallbackIdentifier]=e,window[_ue+this.uniqueCallbackIdentifier]=n,this.myIFrame=_C.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){kr("frame writing exception"),a.stack&&kr(a.stack),kr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[hU]=this.myID,e[fU]=this.myPW,e[mU]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gU+r.length<=pU;){const o=this.pendingSegs.shift();r=r+"&"+Eue+s+"="+o.seg+"&"+Sue+s+"="+o.ts+"&"+Tue+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Nue)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{kr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rue=16384,Pue=45e3;let Xv=null;typeof MozWebSocket<"u"?Xv=MozWebSocket:typeof WebSocket<"u"&&(Xv=WebSocket);class ui{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dp(this.connId),this.stats_=wC(n),this.connURL=ui.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[tU]=xC,typeof location<"u"&&location.hostname&&iU.test(location.hostname)&&(o[rU]=sU),n&&(o[nU]=n),r&&(o[oU]=r),s&&(o[qE]=s),i&&(o[aU]=i),dU(e,lU,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ec.set("previous_websocket_failure",!0);try{let r;fK(),this.mySock=new Xv(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ui.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Xv!==null&&!ui.forceDisallow_}static previouslyFailed(){return ec.isInMemoryStorage||ec.get("previous_websocket_failure")===!0}markConnectionHealthy(){ec.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=vm(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ar(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ZB(n,Rue);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Pue))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ui.responsesRequiredToBeHealthy=2;ui.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Lu,ui]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ui&&ui.isAvailable();let r=n&&!ui.previouslyFailed();if(e.webSocketOnly&&(n||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ui];else{const s=this.transports_=[];for(const i of Bm.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Bm.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Bm.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aue=6e4,jue=5e3,Mue=10*1024,Due=100*1024,d_="t",KA="d",Oue="s",qA="r",Lue="e",YA="o",QA="a",XA="n",JA="p",Fue="h";class Vue{constructor(e,n,r,s,i,o,a,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dp("c:"+this.id+":"),this.transportManager_=new Bm(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=$f(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Due?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Mue?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(d_ in e){const n=e[d_];n===QA?this.upgradeIfSecondaryHealthy_():n===qA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===YA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ef("t",e),r=ef("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:JA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:QA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:XA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ef("t",e),r=ef("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ef(d_,e);if(KA in e){const r=e[KA];if(n===Fue){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===XA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Oue?this.onConnectionShutdown_(r):n===qA?this.onReset_(r):n===Lue?KE("Server Error: "+r):n===YA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),xC!==r&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$f(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Aue))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$f(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jue))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:JA,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ec.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.allowedEvents_=e,this.listeners_={},Te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends vU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ST()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jv}getInitialEvent(e){return Te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=32,ej=768;class rn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function $t(){return new rn("")}function Et(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function dl(t){return t.pieces_.length-t.pieceNum_}function on(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new rn(t.pieces_,e)}function xU(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Bue(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function wU(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _U(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new rn(e,0)}function Jn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof rn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new rn(n,0)}function St(t){return t.pieceNum_>=t.pieces_.length}function ls(t,e){const n=Et(t),r=Et(e);if(n===null)return e;if(n===r)return ls(on(t),on(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bC(t,e){if(dl(t)!==dl(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function hi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(dl(t)>dl(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Uue{constructor(e,n){this.errorPrefix_=n,this.parts_=wU(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zx(this.parts_[r]);bU(this)}}function zue(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zx(e),bU(t)}function $ue(t){const e=t.parts_.pop();t.byteLength_-=zx(e),t.parts_.length>0&&(t.byteLength_-=1)}function bU(t){if(t.byteLength_>ej)throw new Error(t.errorPrefix_+"has a key path longer than "+ej+" bytes ("+t.byteLength_+").");if(t.parts_.length>ZA)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZA+") or object contains a cycle "+Bl(t))}function Bl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC extends vU{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new EC}getInitialEvent(e){return Te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=1e3,Wue=60*5*1e3,tj=30*1e3,Gue=1.3,Hue=3e4,Kue="server_kill",nj=3;class Ao extends yU{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Ao.nextPersistentConnectionId_++,this.log_=Dp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tf,this.maxReconnectDelay_=Wue,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EC.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Jv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ar(i)),Te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new ym,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Te(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;Ao.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Qo(e,"w")){const r=Nd(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||xK(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=tj)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=vK(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ar(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):KE("Unrecognized action received from server: "+ar(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Hue&&(this.reconnectDelay_=tf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Gue)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ao.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(h){Te(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,m]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?kr("getToken() completed but was canceled"):(kr("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=m&&m.token,a=new Vue(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{Is(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(Kue)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Is(h),c())}}}interrupt(e){kr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){kr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ub(this.interruptReasons_)&&(this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>vC(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new rn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){kr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=nj&&(this.reconnectDelay_=tj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){kr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=nj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+YB.replace(/\./g,"-")]=1,ST()?e["framework.cordova"]=1:MO()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jv.getInstance().currentlyOnline();return Ub(this.interruptReasons_)&&e}}Ao.nextPersistentConnectionId_=0;Ao.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new wt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new wt(Xd,e),s=new wt(Xd,n);return this.compare(r,s)!==0}minPost(){return wt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;class EU extends F0{static get __EMPTY_NODE(){return Fg}static set __EMPTY_NODE(e){Fg=e}compare(e,n){return Eh(e.name,n.name)}isDefinedOn(e){throw uh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return wt.MIN}maxPost(){return new wt(Oc,Fg)}makePost(e,n){return Te(typeof e=="string","KeyIndex indexValue must always be a string."),new wt(e,Fg)}toString(){return".key"}}const nd=new EU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class or{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??or.RED,this.left=s??cs.EMPTY_NODE,this.right=i??cs.EMPTY_NODE}copy(e,n,r,s,i){return new or(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return cs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return cs.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}or.RED=!0;or.BLACK=!1;class que{copy(e,n,r,s,i){return this}insert(e,n,r){return new or(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class cs{constructor(e,n=cs.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new cs(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,or.BLACK,null,null))}remove(e){return new cs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,or.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vg(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vg(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vg(this.root_,null,this.comparator_,!0,e)}}cs.EMPTY_NODE=new que;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yue(t,e){return Eh(t.name,e.name)}function SC(t,e){return Eh(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YE;function Que(t){YE=t}const SU=function(t){return typeof t=="number"?"number:"+eU(t):"string:"+t},TU=function(t){if(t.isLeafNode()){const e=t.val();Te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qo(e,".sv"),"Priority must be a string or number.")}else Te(t===YE||t.isEmpty(),"priority of unexpected type.");Te(t===YE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rj;class rr{constructor(e,n=rr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),TU(this.priorityNode_)}static set __childrenNodeConstructor(e){rj=e}static get __childrenNodeConstructor(){return rj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return St(e)?this:Et(e)===".priority"?this.priorityNode_:rr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:rr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Et(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Te(r!==".priority"||dl(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,rr.__childrenNodeConstructor.EMPTY_NODE.updateChild(on(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+SU(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=eU(this.value_):e+=this.value_,this.lazyHash_=XB(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rr.__childrenNodeConstructor?-1:(Te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=rr.VALUE_TYPE_ORDER.indexOf(n),i=rr.VALUE_TYPE_ORDER.indexOf(r);return Te(s>=0,"Unknown leaf type: "+n),Te(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}rr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IU,CU;function Xue(t){IU=t}function Jue(t){CU=t}class Zue extends F0{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Eh(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return wt.MIN}maxPost(){return new wt(Oc,new rr("[PRIORITY-POST]",CU))}makePost(e,n){const r=IU(e);return new wt(n,new rr("[PRIORITY-POST]",r))}toString(){return".priority"}}const An=new Zue;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ede=Math.log(2);class tde{constructor(e){const n=i=>parseInt(Math.log(i)/ede,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Zv=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,m;if(d===0)return null;if(d===1)return h=t[c],m=n?n(h):h,new or(m,h.node,or.BLACK,null,null);{const g=parseInt(d/2,10)+c,w=s(c,g),y=s(g+1,u);return h=t[g],m=n?n(h):h,new or(m,h.node,or.BLACK,w,y)}},i=function(c){let u=null,d=null,h=t.length;const m=function(w,y){const T=h-w,b=h;h-=w;const _=s(T+1,b),I=t[T],A=n?n(I):I;g(new or(A,I.node,y,null,_))},g=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){const y=c.nextBitIsOne(),T=Math.pow(2,c.count-(w+1));y?m(T,or.BLACK):(m(T,or.BLACK),m(T,or.RED))}return d},o=new tde(t.length),a=i(o);return new cs(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h_;const mu={};class Io{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Te(mu&&An,"ChildrenNode.ts has not been loaded"),h_=h_||new Io({".priority":mu},{".priority":An}),h_}get(e){const n=Nd(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof cs?n:null}hasIndex(e){return Qo(this.indexSet_,e.toString())}addIndex(e,n){Te(e!==nd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(wt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Zv(r,e.getCompare()):a=mu;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const d=Object.assign({},this.indexes_);return d[c]=a,new Io(d,u)}addToIndexes(e,n){const r=uv(this.indexes_,(s,i)=>{const o=Nd(this.indexSet_,i);if(Te(o,"Missing index implementation for "+i),s===mu)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(wt.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Zv(a,o.getCompare())}else return mu;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new wt(e.name,a))),c.insert(e,e.node)}});return new Io(r,this.indexSet_)}removeFromIndexes(e,n){const r=uv(this.indexes_,s=>{if(s===mu)return s;{const i=n.get(e.name);return i?s.remove(new wt(e.name,i)):s}});return new Io(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf;class ct{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&TU(this.priorityNode_),this.children_.isEmpty()&&Te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nf||(nf=new ct(new cs(SC),null,Io.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nf}updatePriority(e){return this.children_.isEmpty()?this:new ct(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?nf:n}}getChild(e){const n=Et(e);return n===null?this:this.getImmediateChild(n).getChild(on(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new wt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?nf:this.priorityNode_;return new ct(s,o,i)}}updateChild(e,n){const r=Et(e);if(r===null)return n;{Te(Et(e)!==".priority"||dl(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(on(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(An,(o,a)=>{n[o]=a.val(e),r++,i&&ct.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+SU(this.getPriority().val())+":"),this.forEachChild(An,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":XB(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new wt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new wt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new wt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,wt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,wt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Lp?-1:0}withIndex(e){if(e===nd||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ct(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===nd||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(An),s=n.getIterator(An);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===nd?null:this.indexMap_.get(e.toString())}}ct.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class nde extends ct{constructor(){super(new cs(SC),ct.EMPTY_NODE,Io.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ct.EMPTY_NODE}isEmpty(){return!1}}const Lp=new nde;Object.defineProperties(wt,{MIN:{value:new wt(Xd,ct.EMPTY_NODE)},MAX:{value:new wt(Oc,Lp)}});EU.__EMPTY_NODE=ct.EMPTY_NODE;rr.__childrenNodeConstructor=ct;Que(Lp);Jue(Lp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rde=!0;function Rr(t,e=null){if(t===null)return ct.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new rr(n,Rr(e))}if(!(t instanceof Array)&&rde){const n=[];let r=!1;if(fs(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Rr(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new wt(o,c)))}}),n.length===0)return ct.EMPTY_NODE;const i=Zv(n,Yue,o=>o.name,SC);if(r){const o=Zv(n,An.getCompare());return new ct(i,Rr(e),new Io({".priority":o},{".priority":An}))}else return new ct(i,Rr(e),Io.Default)}else{let n=ct.EMPTY_NODE;return fs(t,(r,s)=>{if(Qo(t,r)&&r.substring(0,1)!=="."){const i=Rr(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Rr(e))}}Xue(Rr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde extends F0{constructor(e){super(),this.indexPath_=e,Te(!St(e)&&Et(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Eh(e.name,n.name):i}makePost(e,n){const r=Rr(e),s=ct.EMPTY_NODE.updateChild(this.indexPath_,r);return new wt(n,s)}maxPost(){const e=ct.EMPTY_NODE.updateChild(this.indexPath_,Lp);return new wt(Oc,e)}toString(){return wU(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ide extends F0{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Eh(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return wt.MIN}maxPost(){return wt.MAX}makePost(e,n){const r=Rr(e);return new wt(n,r)}toString(){return".value"}}const ode=new ide;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(t){return{type:"value",snapshotNode:t}}function Jd(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Um(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function zm(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function ade(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Te(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Um(n,a)):Te(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Jd(n,r)):o.trackChildChange(zm(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(An,(s,i)=>{n.hasChild(s)||r.trackChildChange(Um(s,i))}),n.isLeafNode()||n.forEachChild(An,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(zm(s,i,o))}else r.trackChildChange(Jd(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ct.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.indexedFilter_=new TC(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$m.getStartPost_(e),this.endPost_=$m.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new wt(n,r))||(r=ct.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ct.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(ct.EMPTY_NODE);const i=this;return n.forEachChild(An,(o,a)=>{i.matches(new wt(o,a))||(s=s.updateImmediateChild(o,ct.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $m(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new wt(n,r))||(r=ct.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=ct.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=ct.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(ct.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,ct.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(m,g)=>h(g,m)}else o=this.index_.getCompare();const a=e;Te(a.numChildren()===this.limit_,"");const c=new wt(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){const h=a.getImmediateChild(n);let m=s.getChildAfterChild(this.index_,u,this.reverse_);for(;m!=null&&(m.name===n||a.hasChild(m.name));)m=s.getChildAfterChild(this.index_,m,this.reverse_);const g=m==null?1:o(m,c);if(d&&!r.isEmpty()&&g>=0)return i!=null&&i.trackChildChange(zm(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Um(n,h));const y=a.updateImmediateChild(n,ct.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(i!=null&&i.trackChildChange(Jd(m.name,m.node)),y.updateImmediateChild(m.name,m.node)):y}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(Um(u.name,u.node)),i.trackChildChange(Jd(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,ct.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=An}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xd}hasEnd(){return this.endSet_}getIndexEndValue(){return Te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Oc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===An}copy(){const e=new IC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cde(t){return t.loadsAllData()?new TC(t.getIndex()):t.hasLimit()?new lde(t):new $m(t)}function sj(t){const e={};if(t.isDefault())return e;let n;if(t.index_===An?n="$priority":t.index_===ode?n="$value":t.index_===nd?n="$key":(Te(t.index_ instanceof sde,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ar(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ar(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ar(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ar(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ar(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ij(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==An&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends yU{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Dp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=ex.getListenId_(e,r),a={};this.listens_[o]=a;const c=sj(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),Nd(this.listens_,o)===a){let m;u?u===401?m="permission_denied":m="rest_error:"+u:m="ok",s(m,null)}})}unlisten(e,n){const r=ex.getListenId_(e,n);delete this.listens_[r]}get(e){const n=sj(e._queryParams),r=e._path.toString(),s=new ym;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hh(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=vm(a.responseText)}catch{Is("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Is("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ude{constructor(){this.rootNode_=ct.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(){return{value:null,children:new Map}}function kU(t,e,n){if(St(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Et(e);t.children.has(r)||t.children.set(r,tx());const s=t.children.get(r);e=on(e),kU(s,e,n)}}function QE(t,e,n){t.value!==null?n(e,t.value):dde(t,(r,s)=>{const i=new rn(e.toString()+"/"+r);QE(s,i,n)})}function dde(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hde{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&fs(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=10*1e3,fde=30*1e3,mde=5*60*1e3;class pde{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new hde(e);const r=oj+(fde-oj)*Math.random();$f(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;fs(e,(s,i)=>{i>0&&Qo(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),$f(this.reportStats_.bind(this),Math.floor(Math.random()*2*mde))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(fi||(fi={}));function RU(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function CC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function NC(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=fi.ACK_USER_WRITE,this.source=RU()}operationForChild(e){if(St(this.path)){if(this.affectedTree.value!=null)return Te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new rn(e));return new nx($t(),n,this.revert)}}else return Te(Et(this.path)===e,"operationForChild called for unrelated child."),new nx(on(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.source=e,this.path=n,this.type=fi.LISTEN_COMPLETE}operationForChild(e){return St(this.path)?new Wm(this.source,$t()):new Wm(this.source,on(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=fi.OVERWRITE}operationForChild(e){return St(this.path)?new Lc(this.source,$t(),this.snap.getImmediateChild(e)):new Lc(this.source,on(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=fi.MERGE}operationForChild(e){if(St(this.path)){const n=this.children.subtree(new rn(e));return n.isEmpty()?null:n.value?new Lc(this.source,$t(),n.value):new Gm(this.source,$t(),n)}else return Te(Et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gm(this.source,on(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(St(e))return this.isFullyInitialized()&&!this.filtered_;const n=Et(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gde{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yde(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(ade(o.childName,o.snapshotNode))}),rf(t,s,"child_removed",e,r,n),rf(t,s,"child_added",e,r,n),rf(t,s,"child_moved",i,r,n),rf(t,s,"child_changed",e,r,n),rf(t,s,"value",e,r,n),s}function rf(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>xde(t,a,c)),o.forEach(a=>{const c=vde(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function vde(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function xde(t,e,n){if(e.childName==null||n.childName==null)throw uh("Should only compare child_ events.");const r=new wt(e.childName,e.snapshotNode),s=new wt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t,e){return{eventCache:t,serverCache:e}}function Wf(t,e,n,r){return V0(new Fc(e,n,r),t.serverCache)}function PU(t,e,n,r){return V0(t.eventCache,new Fc(e,n,r))}function XE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Vc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f_;const wde=()=>(f_||(f_=new cs(iue)),f_);class fn{constructor(e,n=wde()){this.value=e,this.children=n}static fromObject(e){let n=new fn(null);return fs(e,(r,s)=>{n=n.set(new rn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:$t(),value:this.value};if(St(e))return null;{const r=Et(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(on(e),n);return i!=null?{path:Jn(new rn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(St(e))return this;{const n=Et(e),r=this.children.get(n);return r!==null?r.subtree(on(e)):new fn(null)}}set(e,n){if(St(e))return new fn(n,this.children);{const r=Et(e),i=(this.children.get(r)||new fn(null)).set(on(e),n),o=this.children.insert(r,i);return new fn(this.value,o)}}remove(e){if(St(e))return this.children.isEmpty()?new fn(null):new fn(null,this.children);{const n=Et(e),r=this.children.get(n);if(r){const s=r.remove(on(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new fn(null):new fn(this.value,i)}else return this}}get(e){if(St(e))return this.value;{const n=Et(e),r=this.children.get(n);return r?r.get(on(e)):null}}setTree(e,n){if(St(e))return n;{const r=Et(e),i=(this.children.get(r)||new fn(null)).setTree(on(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new fn(this.value,o)}}fold(e){return this.fold_($t(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Jn(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,$t(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(St(e))return null;{const i=Et(e),o=this.children.get(i);return o?o.findOnPath_(on(e),Jn(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$t(),n)}foreachOnPath_(e,n,r){if(St(e))return this;{this.value&&r(n,this.value);const s=Et(e),i=this.children.get(s);return i?i.foreachOnPath_(on(e),Jn(n,s),r):new fn(null)}}foreach(e){this.foreach_($t(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Jn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.writeTree_=e}static empty(){return new xi(new fn(null))}}function Gf(t,e,n){if(St(e))return new xi(new fn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=ls(s,e);return i=i.updateChild(o,n),new xi(t.writeTree_.set(s,i))}else{const s=new fn(n),i=t.writeTree_.setTree(e,s);return new xi(i)}}}function aj(t,e,n){let r=t;return fs(n,(s,i)=>{r=Gf(r,Jn(e,s),i)}),r}function lj(t,e){if(St(e))return xi.empty();{const n=t.writeTree_.setTree(e,new fn(null));return new xi(n)}}function JE(t,e){return Jc(t,e)!=null}function Jc(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ls(n.path,e)):null}function cj(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(An,(r,s)=>{e.push(new wt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new wt(r,s.value))}),e}function el(t,e){if(St(e))return t;{const n=Jc(t,e);return n!=null?new xi(new fn(n)):new xi(t.writeTree_.subtree(e))}}function ZE(t){return t.writeTree_.isEmpty()}function Zd(t,e){return AU($t(),t.writeTree_,e)}function AU(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Te(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=AU(Jn(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Jn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t,e){return OU(e,t)}function _de(t,e,n,r,s){Te(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Gf(t.visibleWrites,e,n)),t.lastWriteId=r}function bde(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Ede(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Te(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Sde(a,r.path)?s=!1:hi(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Tde(t),!0;if(r.snap)t.visibleWrites=lj(t.visibleWrites,r.path);else{const a=r.children;fs(a,c=>{t.visibleWrites=lj(t.visibleWrites,Jn(r.path,c))})}return!0}else return!1}function Sde(t,e){if(t.snap)return hi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&hi(Jn(t.path,n),e))return!0;return!1}function Tde(t){t.visibleWrites=jU(t.allWrites,Ide,$t()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Ide(t){return t.visible}function jU(t,e,n){let r=xi.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)hi(n,o)?(a=ls(n,o),r=Gf(r,a,i.snap)):hi(o,n)&&(a=ls(o,n),r=Gf(r,$t(),i.snap.getChild(a)));else if(i.children){if(hi(n,o))a=ls(n,o),r=aj(r,a,i.children);else if(hi(o,n))if(a=ls(o,n),St(a))r=aj(r,$t(),i.children);else{const c=Nd(i.children,Et(a));if(c){const u=c.getChild(on(a));r=Gf(r,$t(),u)}}}else throw uh("WriteRecord should have .snap or .children")}}return r}function MU(t,e,n,r,s){if(!r&&!s){const i=Jc(t.visibleWrites,e);if(i!=null)return i;{const o=el(t.visibleWrites,e);if(ZE(o))return n;if(n==null&&!JE(o,$t()))return null;{const a=n||ct.EMPTY_NODE;return Zd(o,a)}}}else{const i=el(t.visibleWrites,e);if(!s&&ZE(i))return n;if(!s&&n==null&&!JE(i,$t()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(hi(u.path,e)||hi(e,u.path))},a=jU(t.allWrites,o,e),c=n||ct.EMPTY_NODE;return Zd(a,c)}}}function Cde(t,e,n){let r=ct.EMPTY_NODE;const s=Jc(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(An,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=el(t.visibleWrites,e);return n.forEachChild(An,(o,a)=>{const c=Zd(el(i,new rn(o)),a);r=r.updateImmediateChild(o,c)}),cj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=el(t.visibleWrites,e);return cj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Nde(t,e,n,r,s){Te(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Jn(e,n);if(JE(t.visibleWrites,i))return null;{const o=el(t.visibleWrites,i);return ZE(o)?s.getChild(n):Zd(o,s.getChild(n))}}function kde(t,e,n,r){const s=Jn(e,n),i=Jc(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=el(t.visibleWrites,s);return Zd(o,r.getNode().getImmediateChild(n))}else return null}function Rde(t,e){return Jc(t.visibleWrites,e)}function Pde(t,e,n,r,s,i,o){let a;const c=el(t.visibleWrites,e),u=Jc(c,$t());if(u!=null)a=u;else if(n!=null)a=Zd(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),m=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=m.getNext();for(;g&&d.length<s;)h(g,r)!==0&&d.push(g),g=m.getNext();return d}else return[]}function Ade(){return{visibleWrites:xi.empty(),allWrites:[],lastWriteId:-1}}function rx(t,e,n,r){return MU(t.writeTree,t.treePath,e,n,r)}function RC(t,e){return Cde(t.writeTree,t.treePath,e)}function uj(t,e,n,r){return Nde(t.writeTree,t.treePath,e,n,r)}function sx(t,e){return Rde(t.writeTree,Jn(t.treePath,e))}function jde(t,e,n,r,s,i){return Pde(t.writeTree,t.treePath,e,n,r,s,i)}function PC(t,e,n){return kde(t.writeTree,t.treePath,e,n)}function DU(t,e){return OU(Jn(t.treePath,e),t.writeTree)}function OU(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mde{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Te(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,zm(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Um(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Jd(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,zm(r,e.snapshotNode,s.oldSnap));else throw uh("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dde{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const LU=new Dde;class AC{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Fc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PC(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vc(this.viewCache_),i=jde(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ode(t){return{filter:t}}function Lde(t,e){Te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Fde(t,e,n,r,s){const i=new Mde;let o,a;if(n.type===fi.OVERWRITE){const u=n;u.source.fromUser?o=eS(t,e,u.path,u.snap,r,s,i):(Te(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!St(u.path),o=ix(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===fi.MERGE){const u=n;u.source.fromUser?o=Bde(t,e,u.path,u.children,r,s,i):(Te(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=tS(t,e,u.path,u.children,r,s,a,i))}else if(n.type===fi.ACK_USER_WRITE){const u=n;u.revert?o=$de(t,e,u.path,r,s,i):o=Ude(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===fi.LISTEN_COMPLETE)o=zde(t,e,n.path,r,i);else throw uh("Unknown operation type: "+n.type);const c=i.getChanges();return Vde(e,o,c),{viewCache:o,changes:c}}function Vde(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=XE(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(NU(XE(e)))}}function FU(t,e,n,r,s,i){const o=e.eventCache;if(sx(r,n)!=null)return e;{let a,c;if(St(n))if(Te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Vc(e),d=u instanceof ct?u:ct.EMPTY_NODE,h=RC(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=rx(r,Vc(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=Et(n);if(u===".priority"){Te(dl(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=uj(r,n,d,c);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=on(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const m=uj(r,n,o.getNode(),c);m!=null?h=o.getNode().getImmediateChild(u).updateChild(d,m):h=o.getNode().getImmediateChild(u)}else h=PC(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,s,i):a=o.getNode()}}return Wf(e,a,o.isFullyInitialized()||St(n),t.filter.filtersNodes())}}function ix(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(St(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const g=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),g,null)}else{const g=Et(n);if(!c.isCompleteForPath(n)&&dl(n)>1)return e;const w=on(n),T=c.getNode().getImmediateChild(g).updateChild(w,r);g===".priority"?u=d.updatePriority(c.getNode(),T):u=d.updateChild(c.getNode(),g,T,w,LU,null)}const h=PU(e,u,c.isFullyInitialized()||St(n),d.filtersNodes()),m=new AC(s,h,i);return FU(t,h,n,s,m,a)}function eS(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const d=new AC(s,e,i);if(St(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Wf(e,u,!0,t.filter.filtersNodes());else{const h=Et(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Wf(e,u,a.isFullyInitialized(),a.isFiltered());else{const m=on(n),g=a.getNode().getImmediateChild(h);let w;if(St(m))w=r;else{const y=d.getCompleteChild(h);y!=null?xU(m)===".priority"&&y.getChild(_U(m)).isEmpty()?w=y:w=y.updateChild(m,r):w=ct.EMPTY_NODE}if(g.equals(w))c=e;else{const y=t.filter.updateChild(a.getNode(),h,w,m,d,o);c=Wf(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function dj(t,e){return t.eventCache.isCompleteForChild(e)}function Bde(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const d=Jn(n,c);dj(e,Et(d))&&(a=eS(t,a,d,u,s,i,o))}),r.foreach((c,u)=>{const d=Jn(n,c);dj(e,Et(d))||(a=eS(t,a,d,u,s,i,o))}),a}function hj(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function tS(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;St(n)?u=r:u=new fn(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,m)=>{if(d.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),w=hj(t,g,m);c=ix(t,c,new rn(h),w,s,i,o,a)}}),u.children.inorderTraversal((h,m)=>{const g=!e.serverCache.isCompleteForChild(h)&&m.value===null;if(!d.hasChild(h)&&!g){const w=e.serverCache.getNode().getImmediateChild(h),y=hj(t,w,m);c=ix(t,c,new rn(h),y,s,i,o,a)}}),c}function Ude(t,e,n,r,s,i,o){if(sx(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(St(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ix(t,e,n,c.getNode().getChild(n),s,i,a,o);if(St(n)){let u=new fn(null);return c.getNode().forEachChild(nd,(d,h)=>{u=u.set(new rn(d),h)}),tS(t,e,n,u,s,i,a,o)}else return e}else{let u=new fn(null);return r.foreach((d,h)=>{const m=Jn(n,d);c.isCompleteForPath(m)&&(u=u.set(d,c.getNode().getChild(m)))}),tS(t,e,n,u,s,i,a,o)}}function zde(t,e,n,r,s){const i=e.serverCache,o=PU(e,i.getNode(),i.isFullyInitialized()||St(n),i.isFiltered());return FU(t,o,n,r,LU,s)}function $de(t,e,n,r,s,i){let o;if(sx(r,n)!=null)return e;{const a=new AC(r,e,s),c=e.eventCache.getNode();let u;if(St(n)||Et(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=rx(r,Vc(e));else{const h=e.serverCache.getNode();Te(h instanceof ct,"serverChildren would be complete if leaf node"),d=RC(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=Et(n);let h=PC(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,on(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,ct.EMPTY_NODE,on(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=rx(r,Vc(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||sx(r,$t())!=null,Wf(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wde{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new TC(r.getIndex()),i=cde(r);this.processor_=Ode(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(ct.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ct.EMPTY_NODE,a.getNode(),null),d=new Fc(c,o.isFullyInitialized(),s.filtersNodes()),h=new Fc(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=V0(h,d),this.eventGenerator_=new gde(this.query_)}get query(){return this.query_}}function Gde(t){return t.viewCache_.serverCache.getNode()}function Hde(t,e){const n=Vc(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!St(e)&&!n.getImmediateChild(Et(e)).isEmpty())?n.getChild(e):null}function fj(t){return t.eventRegistrations_.length===0}function Kde(t,e){t.eventRegistrations_.push(e)}function mj(t,e,n){const r=[];if(n){Te(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function pj(t,e,n,r){e.type===fi.MERGE&&e.source.queryId!==null&&(Te(Vc(t.viewCache_),"We should always have a full cache before handling merges"),Te(XE(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Fde(t.processor_,s,e,n,r);return Lde(t.processor_,i.viewCache),Te(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,VU(t,i.changes,i.viewCache.eventCache.getNode(),null)}function qde(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(An,(i,o)=>{r.push(Jd(i,o))}),n.isFullyInitialized()&&r.push(NU(n.getNode())),VU(t,r,n.getNode(),e)}function VU(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return yde(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ox;class Yde{constructor(){this.views=new Map}}function Qde(t){Te(!ox,"__referenceConstructor has already been defined"),ox=t}function Xde(){return Te(ox,"Reference.ts has not been loaded"),ox}function Jde(t){return t.views.size===0}function jC(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Te(i!=null,"SyncTree gave us an op for an invalid query."),pj(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(pj(o,e,n,r));return i}}function Zde(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=rx(n,s?r:null),c=!1;a?c=!0:r instanceof ct?(a=RC(n,r),c=!1):(a=ct.EMPTY_NODE,c=!1);const u=V0(new Fc(a,c,!1),new Fc(r,s,!1));return new Wde(e,u)}return o}function ehe(t,e,n,r,s,i){const o=Zde(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Kde(o,n),qde(o,n)}function the(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=hl(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(mj(u,n,r)),fj(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(mj(c,n,r)),fj(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!hl(t)&&i.push(new(Xde())(e._repo,e._path)),{removed:i,events:o}}function BU(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function rd(t,e){let n=null;for(const r of t.views.values())n=n||Hde(r,e);return n}function UU(t,e){if(e._queryParams.loadsAllData())return B0(t);{const r=e._queryIdentifier;return t.views.get(r)}}function zU(t,e){return UU(t,e)!=null}function hl(t){return B0(t)!=null}function B0(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ax;function nhe(t){Te(!ax,"__referenceConstructor has already been defined"),ax=t}function rhe(){return Te(ax,"Reference.ts has not been loaded"),ax}let she=1;class gj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fn(null),this.pendingWriteTree_=Ade(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ihe(t,e,n,r,s){return _de(t.pendingWriteTree_,e,n,r,s),s?Fp(t,new Lc(RU(),e,n)):[]}function Fu(t,e,n=!1){const r=bde(t.pendingWriteTree_,e);if(Ede(t.pendingWriteTree_,e)){let i=new fn(null);return r.snap!=null?i=i.set($t(),!0):fs(r.children,o=>{i=i.set(new rn(o),!0)}),Fp(t,new nx(r.path,i,n))}else return[]}function U0(t,e,n){return Fp(t,new Lc(CC(),e,n))}function ohe(t,e,n){const r=fn.fromObject(n);return Fp(t,new Gm(CC(),e,r))}function ahe(t,e){return Fp(t,new Wm(CC(),e))}function lhe(t,e,n){const r=MC(t,n);if(r){const s=DC(r),i=s.path,o=s.queryId,a=ls(i,e),c=new Wm(NC(o),a);return OC(t,i,c)}else return[]}function nS(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||zU(o,e))){const c=the(o,e,n,r);Jde(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const d=u.findIndex(m=>m._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(m,g)=>hl(g));if(d&&!h){const m=t.syncPointTree_.subtree(i);if(!m.isEmpty()){const g=dhe(m);for(let w=0;w<g.length;++w){const y=g[w],T=y.query,b=HU(t,y);t.listenProvider_.startListening(Hf(T),lx(t,T),b.hashFn,b.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(Hf(e),null):u.forEach(m=>{const g=t.queryToTagMap.get(z0(m));t.listenProvider_.stopListening(Hf(m),g)}))}hhe(t,u)}return a}function che(t,e,n,r){const s=MC(t,r);if(s!=null){const i=DC(s),o=i.path,a=i.queryId,c=ls(o,e),u=new Lc(NC(a),c,n);return OC(t,o,u)}else return[]}function uhe(t,e,n,r){const s=MC(t,r);if(s){const i=DC(s),o=i.path,a=i.queryId,c=ls(o,e),u=fn.fromObject(n),d=new Gm(NC(a),c,u);return OC(t,o,d)}else return[]}function yj(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(m,g)=>{const w=ls(m,s);i=i||rd(g,w),o=o||hl(g)});let a=t.syncPointTree_.get(s);a?(o=o||hl(a),i=i||rd(a,$t())):(a=new Yde,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=ct.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((g,w)=>{const y=rd(w,$t());y&&(i=i.updateImmediateChild(g,y))}));const u=zU(a,e);if(!u&&!e._queryParams.loadsAllData()){const m=z0(e);Te(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const g=fhe();t.queryToTagMap.set(m,g),t.tagToQueryMap.set(g,m)}const d=kC(t.pendingWriteTree_,s);let h=ehe(a,e,n,d,i,c);if(!u&&!o&&!r){const m=UU(a,e);h=h.concat(mhe(t,e,m))}return h}function $U(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=ls(o,e),u=rd(a,c);if(u)return u});return MU(s,e,i,n,!0)}function Fp(t,e){return WU(e,t.syncPointTree_,null,kC(t.pendingWriteTree_,$t()))}function WU(t,e,n,r){if(St(t.path))return GU(t,e,n,r);{const s=e.get($t());n==null&&s!=null&&(n=rd(s,$t()));let i=[];const o=Et(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,d=DU(r,o);i=i.concat(WU(a,c,u,d))}return s&&(i=i.concat(jC(s,t,r,n))),i}}function GU(t,e,n,r){const s=e.get($t());n==null&&s!=null&&(n=rd(s,$t()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=DU(r,o),d=t.operationForChild(o);d&&(i=i.concat(GU(d,a,c,u)))}),s&&(i=i.concat(jC(s,t,r,n))),i}function HU(t,e){const n=e.query,r=lx(t,n);return{hashFn:()=>(Gde(e)||ct.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?lhe(t,n._path,r):ahe(t,n._path);{const i=lue(s,n);return nS(t,n,null,i)}}}}function lx(t,e){const n=z0(e);return t.queryToTagMap.get(n)}function z0(t){return t._path.toString()+"$"+t._queryIdentifier}function MC(t,e){return t.tagToQueryMap.get(e)}function DC(t){const e=t.indexOf("$");return Te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new rn(t.substr(0,e))}}function OC(t,e,n){const r=t.syncPointTree_.get(e);Te(r,"Missing sync point for query tag that we're tracking");const s=kC(t.pendingWriteTree_,e);return jC(r,n,s,null)}function dhe(t){return t.fold((e,n,r)=>{if(n&&hl(n))return[B0(n)];{let s=[];return n&&(s=BU(n)),fs(r,(i,o)=>{s=s.concat(o)}),s}})}function Hf(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(rhe())(t._repo,t._path):t}function hhe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=z0(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function fhe(){return she++}function mhe(t,e,n){const r=e._path,s=lx(t,e),i=HU(t,n),o=t.listenProvider_.startListening(Hf(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Te(!hl(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,d,h)=>{if(!St(u)&&d&&hl(d))return[B0(d).query];{let m=[];return d&&(m=m.concat(BU(d).map(g=>g.query))),fs(h,(g,w)=>{m=m.concat(w)}),m}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(Hf(d),lx(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new LC(n)}node(){return this.node_}}class FC{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Jn(this.path_,e);return new FC(this.syncTree_,n)}node(){return $U(this.syncTree_,this.path_)}}const phe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vj=function(t,e,n){if(!t||typeof t!="object")return t;if(Te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return ghe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return yhe(t[".sv"],e);Te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},ghe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Te(!1,"Unexpected server value: "+t)}},yhe=function(t,e,n){t.hasOwnProperty("increment")||Te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Te(!1,"Unexpected increment value: "+r);const s=e.node();if(Te(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},vhe=function(t,e,n,r){return VC(e,new FC(n,t),r)},xhe=function(t,e,n){return VC(t,new LC(e),n)};function VC(t,e,n){const r=t.getPriority().val(),s=vj(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=vj(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new rr(a,Rr(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new rr(s))),o.forEachChild(An,(a,c)=>{const u=VC(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function UC(t,e){let n=e instanceof rn?e:new rn(e),r=t,s=Et(n);for(;s!==null;){const i=Nd(r.node.children,s)||{children:{},childCount:0};r=new BC(s,r,i),n=on(n),s=Et(n)}return r}function Sh(t){return t.node.value}function KU(t,e){t.node.value=e,rS(t)}function qU(t){return t.node.childCount>0}function whe(t){return Sh(t)===void 0&&!qU(t)}function $0(t,e){fs(t.node.children,(n,r)=>{e(new BC(n,t,r))})}function YU(t,e,n,r){n&&e(t),$0(t,s=>{YU(s,e,!0)})}function _he(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Vp(t){return new rn(t.parent===null?t.name:Vp(t.parent)+"/"+t.name)}function rS(t){t.parent!==null&&bhe(t.parent,t.name,t)}function bhe(t,e,n){const r=whe(n),s=Qo(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,rS(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,rS(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ehe=/[\[\].#$\/\u0000-\u001F\u007F]/,She=/[\[\].#$\u0000-\u001F\u007F]/,m_=10*1024*1024,QU=function(t){return typeof t=="string"&&t.length!==0&&!Ehe.test(t)},XU=function(t){return typeof t=="string"&&t.length!==0&&!She.test(t)},The=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XU(t)},JU=function(t,e,n){const r=n instanceof rn?new Uue(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bl(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bl(r)+" with contents = "+e.toString());if(JB(e))throw new Error(t+"contains "+e.toString()+" "+Bl(r));if(typeof e=="string"&&e.length>m_/3&&zx(e)>m_)throw new Error(t+"contains a string greater than "+m_+" utf8 bytes "+Bl(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(fs(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!QU(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zue(r,o),JU(t,a,r),$ue(r)}),s&&i)throw new Error(t+' contains ".value" child '+Bl(r)+" in addition to actual children.")}},ZU=function(t,e,n,r){if(!XU(n))throw new Error(LO(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Ihe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ZU(t,e,n)},Che=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!QU(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!The(n))throw new Error(LO(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nhe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ez(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!bC(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function tz(t,e,n){ez(t,n),nz(t,r=>bC(r,e))}function Zc(t,e,n){ez(t,n),nz(t,r=>hi(r,e)||hi(e,r))}function nz(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(khe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function khe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();zf&&kr("event: "+n.toString()),Op(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe="repo_interrupt",Phe=25;class Ahe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nhe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tx(),this.transactionQueueTree_=new BC,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jhe(t,e,n){if(t.stats_=wC(t.repoInfo_),t.forceRestClient_||hue())t.server_=new ex(t.repoInfo_,(r,s,i,o)=>{xj(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>wj(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ar(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ao(t.repoInfo_,e,(r,s,i,o)=>{xj(t,r,s,i,o)},r=>{wj(t,r)},r=>{Dhe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=yue(t.repoInfo_,()=>new pde(t.stats_,t.server_)),t.infoData_=new ude,t.infoSyncTree_=new gj({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=U0(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),zC(t,"connected",!1),t.serverSyncTree_=new gj({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);Zc(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Mhe(t){const n=t.infoData_.getNode(new rn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function rz(t){return phe({timestamp:Mhe(t)})}function xj(t,e,n,r,s){t.dataUpdateCount++;const i=new rn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=uv(n,u=>Rr(u));o=uhe(t.serverSyncTree_,i,c,s)}else{const c=Rr(n);o=che(t.serverSyncTree_,i,c,s)}else if(r){const c=uv(n,u=>Rr(u));o=ohe(t.serverSyncTree_,i,c)}else{const c=Rr(n);o=U0(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=WC(t,i)),Zc(t.eventQueue_,a,o)}function wj(t,e){zC(t,"connected",e),e===!1&&Lhe(t)}function Dhe(t,e){fs(e,(n,r)=>{zC(t,n,r)})}function zC(t,e,n){const r=new rn("/.info/"+e),s=Rr(n);t.infoData_.updateSnapshot(r,s);const i=U0(t.infoSyncTree_,r,s);Zc(t.eventQueue_,r,i)}function Ohe(t){return t.nextWriteId_++}function Lhe(t){iz(t,"onDisconnectEvents");const e=rz(t),n=tx();QE(t.onDisconnect_,$t(),(s,i)=>{const o=vhe(s,i,t.serverSyncTree_,e);kU(n,s,o)});let r=[];QE(n,$t(),(s,i)=>{r=r.concat(U0(t.serverSyncTree_,s,i));const o=zhe(t,s);WC(t,o)}),t.onDisconnect_=tx(),Zc(t.eventQueue_,$t(),r)}function Fhe(t,e,n){let r;Et(e._path)===".info"?r=yj(t.infoSyncTree_,e,n):r=yj(t.serverSyncTree_,e,n),tz(t.eventQueue_,e._path,r)}function sz(t,e,n){let r;Et(e._path)===".info"?r=nS(t.infoSyncTree_,e,n):r=nS(t.serverSyncTree_,e,n),tz(t.eventQueue_,e._path,r)}function Vhe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Rhe)}function iz(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),kr(n,...e)}function oz(t,e,n){return $U(t.serverSyncTree_,e,n)||ct.EMPTY_NODE}function $C(t,e=t.transactionQueueTree_){if(e||W0(t,e),Sh(e)){const n=lz(t,e);Te(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Bhe(t,Vp(e),n)}else qU(e)&&$0(e,n=>{$C(t,n)})}function Bhe(t,e,n){const r=n.map(u=>u.currentWriteId),s=oz(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];Te(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=ls(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{iz(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(Fu(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&h.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();W0(t,UC(t.transactionQueueTree_,e)),$C(t,t.transactionQueueTree_),Zc(t.eventQueue_,e,d);for(let m=0;m<h.length;m++)Op(h[m])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Is("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}WC(t,e)}},o)}function WC(t,e){const n=az(t,e),r=Vp(n),s=lz(t,n);return Uhe(t,s,r),r}function Uhe(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=ls(n,c.path);let d=!1,h;if(Te(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(Fu(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Phe)d=!0,h="maxretry",s=s.concat(Fu(t.serverSyncTree_,c.currentWriteId,!0));else{const m=oz(t,c.path,o);c.currentInputSnapshot=m;const g=e[a].update(m.val());if(g!==void 0){JU("transaction failed: Data returned ",g,c.path);let w=Rr(g);typeof g=="object"&&g!=null&&Qo(g,".priority")||(w=w.updatePriority(m.getPriority()));const T=c.currentWriteId,b=rz(t),_=xhe(w,m,b);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=_,c.currentWriteId=Ohe(t),o.splice(o.indexOf(T),1),s=s.concat(ihe(t.serverSyncTree_,c.path,_,c.currentWriteId,c.applyLocally)),s=s.concat(Fu(t.serverSyncTree_,T,!0))}else d=!0,h="nodata",s=s.concat(Fu(t.serverSyncTree_,c.currentWriteId,!0))}Zc(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}W0(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Op(r[a]);$C(t,t.transactionQueueTree_)}function az(t,e){let n,r=t.transactionQueueTree_;for(n=Et(e);n!==null&&Sh(r)===void 0;)r=UC(r,n),e=on(e),n=Et(e);return r}function lz(t,e){const n=[];return cz(t,e,n),n.sort((r,s)=>r.order-s.order),n}function cz(t,e,n){const r=Sh(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);$0(e,s=>{cz(t,s,n)})}function W0(t,e){const n=Sh(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,KU(e,n.length>0?n:void 0)}$0(e,r=>{W0(t,r)})}function zhe(t,e){const n=Vp(az(t,e)),r=UC(t.transactionQueueTree_,e);return _he(r,s=>{p_(t,s)}),p_(t,r),YU(r,s=>{p_(t,s)}),n}function p_(t,e){const n=Sh(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Te(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Te(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Fu(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?KU(e,void 0):n.length=i+1,Zc(t.eventQueue_,Vp(e),s);for(let o=0;o<r.length;o++)Op(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $he(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Whe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Is(`Invalid query segment '${n}' in query '${t}'`)}return e}const _j=function(t,e){const n=Ghe(t),r=n.namespace;n.domain==="firebase.com"&&qo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&qo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||rue();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uU(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new rn(n.pathString)}},Ghe=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=$he(t.substring(d,h)));const m=Whe(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in m&&(i=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ar(this.snapshot.exportVal())}}class dz{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hhe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Te(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return St(this._path)?null:xU(this._path)}get ref(){return new ea(this._repo,this._path)}get _queryIdentifier(){const e=ij(this._queryParams),n=vC(e);return n==="{}"?"default":n}get _queryObject(){return ij(this._queryParams)}isEqual(e){if(e=Gt(e),!(e instanceof GC))return!1;const n=this._repo===e._repo,r=bC(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Bue(this._path)}}class ea extends GC{constructor(e,n){super(e,n,new IC,!1)}get parent(){const e=_U(this._path);return e===null?null:new ea(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Hm{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new rn(e),r=cx(this.ref,e);return new Hm(this._node.getChild(n),r,An)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Hm(s,cx(this.ref,r),An)))}hasChild(e){const n=new rn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function sS(t,e){return t=Gt(t),t._checkNotDeleted("ref"),e!==void 0?cx(t._root,e):t._root}function cx(t,e){return t=Gt(t),Et(t._path)===null?Ihe("child","path",e):ZU("child","path",e),new ea(t._repo,Jn(t._path,e))}class HC{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new uz("value",this,new Hm(e.snapshotNode,new ea(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new dz(this,e,n):null}matches(e){return e instanceof HC?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class KC{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new dz(this,e,n):null}createEvent(e,n){Te(e.childName!=null,"Child events should have a childName.");const r=cx(new ea(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new uz(e.type,this,new Hm(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof KC?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function hz(t,e,n,r,s){const i=new Hhe(n,void 0),o=e==="value"?new HC(i):new KC(e,i);return Fhe(t._repo,t,o),()=>sz(t._repo,t,o)}function fz(t,e,n,r){return hz(t,"value",e)}function Khe(t,e,n,r){return hz(t,"child_added",e)}function iS(t,e,n){sz(t._repo,t,null)}Qde(ea);nhe(ea);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qhe="FIREBASE_DATABASE_EMULATOR_HOST",oS={};let Yhe=!1;function Qhe(t,e,n,r){t.repoInfo_=new uU(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Xhe(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||qo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kr("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=_j(i,s),a=o.repoInfo,c;typeof process<"u"&&UA&&(c=UA[qhe]),c?(i=`http://${c}?ns=${a.namespace}`,o=_j(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new mue(t.name,t.options,e);Che("Invalid Firebase Database URL",o),St(o.path)||qo("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Zhe(a,t,u,new fue(t.name,n));return new efe(d,t)}function Jhe(t,e){const n=oS[e];(!n||n[t.key]!==t)&&qo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Vhe(t),delete n[t.key]}function Zhe(t,e,n,r){let s=oS[e.name];s||(s={},oS[e.name]=s);let i=s[t.toURLString()];return i&&qo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Ahe(t,Yhe,n,r),s[t.toURLString()]=i,i}class efe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jhe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ea(this._repo,$t())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Jhe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qo("Cannot call "+e+" on a deleted database.")}}function mz(t=CT(),e){const n=up(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=PO("database");r&&tfe(n,...r)}return n}function tfe(t,e,n,r={}){t=Gt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&qo("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&qo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Iy(Iy.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:lK(r.mockUserToken,t.app.options.projectId);i=new Iy(o)}Qhe(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nfe(t){Xce(Wc),Qi(new Ei("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Xhe(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Ss(zA,$A,t),Ss(zA,$A,"esm2017")}Ao.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ao.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};nfe();function pz(t,e,n){const r=mz(),s=sS(r,`live/${t}/events`),i=sS(r,`live/${t}/meta`),o=Khe(s,c=>{const u=c.val();u&&e({seq:c.key||void 0,...u})}),a=fz(i,c=>{n==null||n(c.val()||null)});return()=>{iS(s),iS(i);try{o()}catch{}try{a()}catch{}}}function rfe(t,e){const n=mz(),r=sS(n,`live/${t}/meta`),s=fz(r,i=>{e(i.val()||null)});return()=>{iS(r);try{s()}catch{}}}const qC="Europe/Istanbul";function sfe(t){return Pc(t,qC,"dd MMM yyyy, HH:mm",{locale:qB})}function ife(t){return Pc(t,qC,"yyyy-MM-dd")}function ofe(t){return Pc(t,qC,"dd MMM yyyy",{locale:qB})}function g_(){const t=qs(),e=lp(),{user:n}=Vn(),[r,s]=p.useState([]),[i,o]=p.useState(!0),[a,c]=p.useState(null),[u,d]=p.useState(!1),[h,m]=p.useState(!1),[g,w]=p.useState("Takmm"),[y,T]=p.useState({}),b=Se.useRef({});p.useEffect(()=>{(async()=>{if(!n)return;const S=await Ac(n.id);if(!S){s([]),c(null);return}c(S),await tA(S);const[P,R]=await Promise.all([Lv(S,n.id),Za(S)]),k=new Map(R.map(Q=>[Q.id,Q.name])),W=k.get(n.id)||n.teamName||"Takmm",J=P.map(Q=>{const le=Q.homeTeamId===n.id,O=le?Q.awayTeamId:Q.homeTeamId;return{...Q,opponent:k.get(O)||O,home:le}});w(W),s(J)})()},[n]);const _=Se.useCallback(async()=>{if(!n)return;const C=await Ac(n.id);if(!C){s([]),c(null);return}c(C),await tA(C);const[S,P]=await Promise.all([Lv(C,n.id),Za(C)]),R=new Map(P.map(W=>[W.id,W.name])),k=S.map(W=>{const J=W.homeTeamId===n.id,Q=J?W.awayTeamId:W.homeTeamId;return{...W,opponent:R.get(Q)||Q,home:J}});s(k)},[n]);p.useEffect(()=>{Object.values(b.current).forEach(P=>P()),b.current={};const C=r.filter(P=>P.status!=="played");if(C.length===0){T({});return}const S={};return C.forEach(P=>{const R=rfe(P.id,k=>{const W=!!(k&&(k.status==="live"||k.startedAt&&!k.endedAt));T(J=>({...J,[P.id]:W}))});b.current[P.id]=R,S[P.id]=!1}),T(P=>({...S,...P})),()=>{Object.values(b.current).forEach(P=>P()),b.current={}}},[r]);const I=e.pathname.includes("match-history"),A=p.useMemo(()=>I?r.filter(C=>C.status==="played"):i?r.filter(C=>C.status!=="played"):r,[r,i,I]),M=p.useMemo(()=>{const C={};for(const S of A){const P=ife(S.date);(C[P]||(C[P]=[])).push(S)}return C},[A]),j=async()=>{if(!n||!a){G.message("Lig bulunamad",{description:"nce bir lige katlmalsnz."});return}try{d(!0);const C=G.loading("Fikstr oluturuluyor...",{description:"Ltfen bekleyin."});await Qs(Xs,"generateRoundRobinFixturesFn")({leagueId:a,force:!0});const[P,R]=await Promise.all([Gd(a,n.id),Za(a)]),k=new Map(R.map(J=>[J.id,J.name])),W=P.map(J=>{const Q=J.homeTeamId===n.id,le=Q?J.awayTeamId:J.homeTeamId;return{...J,opponent:k.get(le)||le,home:Q}});s(W),G.success("Fikstr yeniden oluturuldu",{description:"Malar baaryla gncellendi.",id:C})}catch(C){console.warn("[MyFixturesPage] generate fixtures failed",C),G.error("Hata",{description:"Fikstr oluturulamad. Ltfen tekrar deneyin."})}finally{d(!1)}},v=async()=>{let C;try{m(!0),C=G.loading("Malar balatlyor...",{description:"Sradaki ma gn"});const S=await z4();if(!S){C!==void 0?G.message("Oynatlacak ma yok",{description:"Yaklaan ma bulunamad.",id:C}):G.message("Oynatlacak ma yok",{description:"Yaklaan ma bulunamad."});return}const P=S.total??0,R=S.started??0,k=S.dayKey?`(${S.dayKey}) `:"";G.success("Balatma tamamland",{description:`${k}${R}/${P} ma balatld.`,id:C}),_()}catch(S){const P=(S==null?void 0:S.message)||"lem baarsz";C!==void 0?G.error("Hata",{description:P,id:C}):G.error("Hata",{description:P})}finally{m(!1)}},E=Object.keys(M).sort();return l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(qr,{}),l.jsx("h1",{className:"text-xl font-bold",children:I?"Ma Gemii":"Fikstr"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[!I&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-sm",children:"Sadece yaklaan"}),l.jsx(ql,{checked:i,onCheckedChange:o,"aria-label":"Upcoming only toggle"})]}),l.jsx(fe,{size:"sm",onClick:j,disabled:!a||u,children:"Fikstr Olutur"}),!I&&l.jsx(fe,{size:"sm",variant:"secondary",onClick:v,disabled:h,children:"Bir Sonraki Malar Oynat"})]})]}),E.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"Gsterilecek ma yok."}):l.jsx("div",{className:"space-y-6",children:E.map(C=>{const S=M[C],P=ofe(S[0].date);return l.jsxs("section",{children:[l.jsx("div",{className:"text-sm font-semibold text-muted-foreground mb-2",children:P}),l.jsx("div",{className:"space-y-2",children:S.map(R=>{const k=R.status==="played",W=!k&&!!y[R.id],J=sfe(R.date),Q=R.home?"EV":"DEP",le=k&&R.score?`${R.score.home}-${R.score.away}`:"vs";return l.jsx(Ue,{"data-testid":`fixture-row-${R.id}`,className:"overflow-hidden",children:l.jsxs(Je,{className:"p-4 flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Mt,{variant:W?"default":"secondary",children:k?"Bitti":W?"Canl":"Planl"}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"font-semibold",children:[R.home?g:R.opponent," ",le," ",R.home?R.opponent:g]}),l.jsxs("div",{className:"text-muted-foreground",children:[J,"  ",Q]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[k&&l.jsx(fe,{variant:"outline",size:"sm",onClick:()=>t(`/match/${R.id}`),children:"zle"}),a&&l.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>t(`/leagues/${a}`),children:"Lig"})]})]})},R.id)})})]},C)})})]})}function y_({className:t,...e}){return l.jsx("div",{className:ue("animate-pulse rounded-md bg-muted",t),...e})}const afe=1,lfe=1e6;let v_=0;function cfe(){return v_=(v_+1)%Number.MAX_SAFE_INTEGER,v_.toString()}const x_=new Map,bj=t=>{if(x_.has(t))return;const e=setTimeout(()=>{x_.delete(t),Cy({type:"REMOVE_TOAST",toastId:t})},lfe);x_.set(t,e)},ufe=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,afe)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?bj(n):t.toasts.forEach(r=>{bj(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},dfe=[];let w_={toasts:[]};function Cy(t){w_=ufe(w_,t),dfe.forEach(e=>{e(w_)})}function jl({...t}){const e=cfe(),n=s=>Cy({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Cy({type:"DISMISS_TOAST",toastId:e});return Cy({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function hfe(){const t=qs(),{user:e}=Vn(),[n,r]=p.useState([]),[s,i]=p.useState(null),[o,a]=p.useState(!0);p.useEffect(()=>{(async()=>{try{await are();const h=await nA();r(h)}finally{a(!1)}})()},[]),p.useEffect(()=>e?cre(e.id,h=>{i((h==null?void 0:h.id)??null)}):void 0,[e]);const c=n.find(d=>d.id===s)||null,u=n.filter(d=>d.id!==s);return l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(qr,{}),l.jsx("h1",{className:"text-xl font-bold",children:"Ligler"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[l.jsx(fe,{variant:"secondary",onClick:async()=>{try{await lre();const d=await nA();r(d),jl({description:"Aylk ligler oluturuldu/yenilendi."})}catch(d){jl({description:(d==null?void 0:d.message)||"Bootstrap hata"})}},children:"Test: Ligleri Olutur (Aylk)"}),l.jsx(fe,{onClick:async()=>{const d=Pc(new Date,"Europe/Istanbul","yyyy-MM-dd");try{const h=await RE(d,{instant:!0});jl({description:`Bun (${d}) malar: ${(h==null?void 0:h.started)??0}/${(h==null?void 0:h.total)??0}`})}catch(h){jl({description:(h==null?void 0:h.message)||"Bun oynatma hata"})}},children:"Test: Bugn Oynat (TR)"}),l.jsx(fe,{onClick:async()=>{try{const d=await z4();if(!d){jl({description:"Planl ma bulunamad."});return}jl({description:`n (${d.dayKey}) malar: ${d.started??0}/${d.total??0}`})}catch(d){jl({description:(d==null?void 0:d.message)||"Sonraki n oynatma hata"})}},children:"Test: Sonraki Gn Oynat"})]}),o&&l.jsxs("div",{className:"space-y-2","data-testid":"leagues-loading",children:[l.jsx(y_,{className:"h-20 w-full"}),l.jsx(y_,{className:"h-20 w-full"}),l.jsx(y_,{className:"h-20 w-full"})]}),!o&&n.length===0&&l.jsx("p",{"data-testid":"no-leagues-message",className:"text-sm text-muted-foreground",children:"Henz lig oluturulmam."}),c&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"font-semibold mb-2",children:"Takmnn Ligi"}),l.jsx(Ue,{"data-testid":`league-row-${c.id}`,className:"cursor-pointer",onClick:()=>t(`/leagues/${c.id}`),children:l.jsxs(Je,{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:c.name}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Sezon ",c.season," - ",c.teamCount??0,"/",c.capacity]}),c.teams&&c.teams.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Takmlar: ",c.teams.map(d=>d.name).join(", ")]})]}),l.jsx(Mt,{children:c.state})]})},c.id)]}),u.length>0&&l.jsxs("div",{className:"space-y-2",children:[c&&l.jsx("h2",{className:"font-semibold mb-2",children:"Dier Ligler"}),u.map(d=>l.jsx(Ue,{"data-testid":`league-row-${d.id}`,className:"cursor-pointer",onClick:()=>t(`/leagues/${d.id}`),children:l.jsxs(Je,{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:d.name}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Sezon ",d.season," - ",d.teamCount??0,"/",d.capacity]}),d.teams&&d.teams.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Takmlar: ",d.teams.map(h=>h.name).join(", ")]})]}),l.jsx(Mt,{children:d.state})]})},d.id))]})]})}function ffe(){const{leagueId:t}=bO(),[e,n]=p.useState([]);return p.useEffect(()=>t?$4(t,async s=>{if(s.length===0){const i=await Za(t);n(i.map(o=>({id:o.id,teamId:o.id,name:o.name,P:0,W:0,D:0,L:0,GF:0,GA:0,GD:0,Pts:0})))}else n(s)}):void 0,[t]),l.jsxs("div",{className:"p-4",children:[l.jsx("h1",{className:"text-xl font-bold mb-4",children:"Lig Detay"}),l.jsx(Ue,{children:l.jsx(Je,{className:"p-0",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left border-b",children:[l.jsx("th",{className:"p-2 w-10",children:"S"}),l.jsx("th",{className:"p-2",children:"Takm"}),l.jsx("th",{className:"p-2",children:"P"}),l.jsx("th",{className:"p-2",children:"W"}),l.jsx("th",{className:"p-2",children:"D"}),l.jsx("th",{className:"p-2",children:"L"}),l.jsx("th",{className:"p-2",children:"GF"}),l.jsx("th",{className:"p-2",children:"GA"}),l.jsx("th",{className:"p-2",children:"GD"}),l.jsx("th",{className:"p-2",children:"Pts"})]})}),l.jsx("tbody",{children:e.map((r,s)=>l.jsxs("tr",{"data-testid":`standings-row-${r.teamId}`,className:"border-b",children:[l.jsx("td",{className:"p-2",children:s+1}),l.jsx("td",{className:"p-2",children:r.name}),l.jsx("td",{className:"p-2",children:r.P}),l.jsx("td",{className:"p-2",children:r.W}),l.jsx("td",{className:"p-2",children:r.D}),l.jsx("td",{className:"p-2",children:r.L}),l.jsx("td",{className:"p-2",children:r.GF}),l.jsx("td",{className:"p-2",children:r.GA}),l.jsx("td",{className:"p-2",children:r.GD}),l.jsx("td",{className:"p-2",children:r.Pts})]},r.teamId))})]})})})]})}const mfe=t3,pfe=n3,gfe=r3,gz=p.forwardRef(({className:t,...e},n)=>l.jsx(I0,{className:ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));gz.displayName=I0.displayName;const yfe=g0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),yz=p.forwardRef(({side:t="right",className:e,children:n,...r},s)=>l.jsxs(gfe,{children:[l.jsx(gz,{}),l.jsxs(C0,{ref:s,className:ue(yfe({side:t}),e),...r,children:[n,l.jsxs(s3,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[l.jsx(Bv,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yz.displayName=C0.displayName;const vz=({className:t,...e})=>l.jsx("div",{className:ue("flex flex-col space-y-2 text-center sm:text-left",t),...e});vz.displayName="SheetHeader";const xz=p.forwardRef(({className:t,...e},n)=>l.jsx(N0,{ref:n,className:ue("text-lg font-semibold text-foreground",t),...e}));xz.displayName=N0.displayName;const vfe=p.forwardRef(({className:t,...e},n)=>l.jsx(k0,{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));vfe.displayName=k0.displayName;const xfe=15,wfe=5,_fe=8,bfe=20,Efe=18;function Sfe(){const t=qs(),{user:e}=Vn(),{balance:n,spend:r}=Ni(),{vipDurationMultiplier:s}=Xc(),[i,o]=p.useState([]),[a,c]=p.useState([]),[u,d]=p.useState([]),[h,m]=p.useState(null),[g,w]=p.useState(""),[y,T]=p.useState(""),[b,_]=p.useState(!1),[I,A]=p.useState(0),[M,j]=p.useState(null),[v,E]=p.useState(null),[C,S]=p.useState([]),[P,R]=p.useState("all"),[k,W]=p.useState("all"),[J,Q]=p.useState("all"),[le,O]=p.useState(!1),[V,Z]=p.useState(!1),[ye,ae]=p.useState(null),[ve,_e]=p.useState(null),[de,ze]=p.useState({starters:[],bench:[],reserves:[]}),re=p.useRef(null),Pe=p.useRef(!1),Ze=p.useRef(null),De=p.useCallback(()=>{Pe.current||(Pe.current=!0,setTimeout(()=>{const X=Ze.current;X&&X()},0))},[]),ce=p.useCallback(X=>{if(re.current&&(clearInterval(re.current),re.current=null),Pe.current=!1,X<=0){A(0),De();return}A(X),re.current=window.setInterval(()=>{A(F=>F<=1?(re.current&&(clearInterval(re.current),re.current=null),De(),0):F-1)},1e3)},[De]);p.useEffect(()=>{(async()=>{if(!e)return;const F=await jn(e.id);if(o((F==null?void 0:F.players)||[]),F){const z=F.plan??F.lineup;ze({starters:(z==null?void 0:z.starters)&&z.starters.filter(Boolean)||F.players.filter(oe=>oe.squadRole==="starting").map(oe=>oe.id),bench:(z==null?void 0:z.bench)&&z.bench.filter(Boolean)||(z==null?void 0:z.subs)&&z.subs.filter(Boolean)||F.players.filter(oe=>oe.squadRole==="bench").map(oe=>oe.id),reserves:(z==null?void 0:z.reserves)&&z.reserves.filter(Boolean)||F.players.filter(oe=>oe.squadRole==="reserve").map(oe=>oe.id)})}})()},[e]),p.useEffect(()=>{(async()=>{if(e)try{const F=await Uoe(e.id);let z=F;const oe=F.filter(he=>!he.viewed&&!!he.id).map(he=>he.id).filter(Boolean);if(oe.length>0)try{await $oe(e.id,oe);const he=new Set(oe);z=F.map(xe=>he.has(xe.id??"")?{...xe,viewed:!0}:xe)}catch(he){console.warn("Antrenman kaytlar grld olarak iaretlenemedi",he)}S(z)}catch(F){console.warn("Antrenman gemii yklenemedi",F)}})()},[e]),p.useEffect(()=>{ye&&!i.some(X=>X.id===ye)&&(ae(null),_e(null))},[i,ye]),p.useEffect(()=>{b&&(ae(null),_e(null))},[b]),p.useEffect(()=>{ve||ae(null)},[ve]),p.useEffect(()=>{(async()=>{if(e)try{const F=await M5(e.id);F&&E(F)}catch(F){console.warn("Aktif antrenman yklenemedi",F)}})()},[e]),p.useEffect(()=>()=>{re.current&&clearInterval(re.current)},[]);const L=p.useCallback(async()=>{if(Pe.current=!0,re.current&&(clearInterval(re.current),re.current=null),!b)return;if(!e||!M){_(!1),A(0),j(null);return}const{updatedPlayers:X,records:F}=j5(M.players,M.trainings),z=i.map(oe=>X.find(xe=>xe.id===oe.id)??oe);if(o(z),e){try{await La(e.id,z)}catch(xe){console.warn("Oyuncular kaydedilirken hata olutu",xe)}const oe=[],he=Dt.now();for(const xe of F)try{const ot=await D5(e.id,{...xe,completedAt:he,viewed:!0});oe.push({...xe,id:ot,completedAt:he,viewed:!0})}catch(ot){console.warn("Antrenman kayd eklenemedi",ot)}try{await Ty(e.id)}catch(xe){console.warn("Aktif antrenman temizlenemedi",xe)}S(xe=>[...xe,...oe])}_(!1),A(0),j(null),E(null),c([]),d([]),G.success("Antrenman tamamland")},[M,b,i,e]);p.useEffect(()=>{Ze.current=L},[L]),p.useEffect(()=>{if(!v)return;const X=v.playerIds.map(ot=>i.find(Ht=>Ht.id===ot)).filter(ot=>!!ot),F=v.trainingIds.map(ot=>bu.find(Ht=>Ht.id===ot)).filter(ot=>!!ot);if(X.length===0||F.length===0)return;X.length!==v.playerIds.length&&console.warn("Eksik oyuncular bulundu, antrenman eksik verilerle devam edecek"),F.length!==v.trainingIds.length&&console.warn("Eksik antrenman kartlar bulundu, antrenman eksik verilerle devam edecek");const{durationSeconds:z,startAt:oe}=v,he=Math.floor((Date.now()-oe.toDate().getTime())/1e3),xe=Math.max(z-he,0);c(X),d(F),j({players:X,trainings:F,durationSeconds:z,startedAt:oe}),_(!0),ce(xe),E(null)},[L,v,i,ce,bu]);const K=p.useMemo(()=>{const X=g.toLowerCase();return i.filter(F=>F.name.toLowerCase().includes(X)||F.position.toLowerCase().includes(X)).sort((F,z)=>z.overall-F.overall)},[i,g]),ie=p.useMemo(()=>{const X=y.toLowerCase();return bu.filter(F=>F.name.toLowerCase().includes(X)||F.type.toLowerCase().includes(X))},[y]),Ae=p.useMemo(()=>{const X=a.length,F=u.length;if(X===0||F===0)return 0;const z=xfe+Math.max(0,X-1)*wfe+Math.max(0,F-1)*_fe,oe=Math.round(z*s);return Math.max(1,oe)},[a.length,u.length,s]),Ie=p.useMemo(()=>{const X=a.length*u.length;return X<=1?0:(X-1)*bfe},[a.length,u.length]),$e=p.useMemo(()=>a.length*u.length,[a.length,u.length]),je=p.useMemo(()=>{const X=(M==null?void 0:M.players.length)??a.length,F=(M==null?void 0:M.trainings.length)??u.length,z=X*F;return z===0?TA:TA+Math.max(0,z-1)*Efe},[M,a.length,u.length]),ee=X=>{const F=Math.floor(X/60).toString().padStart(2,"0"),z=(X%60).toString().padStart(2,"0");return`${F}:${z}`},be=(X,F,z)=>{if(b)return;m(F);const oe=JSON.stringify({type:F,id:z});X.dataTransfer.effectAllowed="move",X.dataTransfer.setData("application/json",oe),X.dataTransfer.setData("text/plain",oe)},Ke=()=>{m(null)},tt=(X,F)=>{b||h===F&&X.preventDefault()},me=(X,F)=>{if(b)return;X.preventDefault(),m(null);const z=X.dataTransfer.getData("application/json")||X.dataTransfer.getData("text/plain");if(z)try{const oe=JSON.parse(z);if(oe.type!==F)return;if(F==="player"){const he=i.find(xe=>xe.id===oe.id);if(!he)return;c(xe=>xe.some(ot=>ot.id===he.id)?xe:[...xe,he])}else{const he=bu.find(xe=>xe.id===oe.id);if(!he)return;d(xe=>xe.some(ot=>ot.id===he.id)?xe:[...xe,he])}}catch(oe){console.warn("Drag drop parse error",oe)}},nt=X=>{b||c(F=>F.filter(z=>z.id!==X))},He=X=>{b||d(F=>F.filter(z=>z.id!==X))},te=async()=>{if(!e){G.error("Ltfen giri yapn");return}if(a.length===0||u.length===0){G.error("En az bir oyuncu ve antrenman sein");return}if(b){G("Devam eden bir antrenman var");return}if(Ie>0){if(n<Ie){G.error("Yetersiz elmas bakiyesi");return}try{await r(Ie)}catch{G.error("Elmas ilemi tamamlanamad");return}}const X=Ae*60;if(X<=0){G.error("Geerli bir sre hesaplanamad");return}const F=[...a],z=[...u],oe=Dt.now();try{await Boe(e.id,{playerIds:F.map(he=>he.id),trainingIds:z.map(he=>he.id),startAt:oe,durationSeconds:X})}catch(he){console.warn("Aktif antrenman kaydedilemedi",he),G.error("Antrenman balatlamad");return}j({players:F,trainings:z,durationSeconds:X,startedAt:oe}),_(!0),ce(X),G.success("Antrenman balatld")},ut=async()=>{if(!e||!M||le)return;if(I<=0){G.info("Antrenman zaten tamamlanm");return}const X=je;if(n<X){G.error("Yetersiz elmas bakiyesi");return}const F=I;re.current&&(clearInterval(re.current),re.current=null),O(!0);try{await zoe(e.id,X),await L()}catch(z){console.warn("Antrenman elmasla tamamlanamad",z),G.error("Elmasla bitirme baarsz"),b&&F>0&&ce(F)}finally{O(!1)}},Zt=async()=>{if(!e||!M||V)return;if(I<=0){G.info("Antrenman zaten tamamlanm");return}const X=I;re.current&&(clearInterval(re.current),re.current=null),Z(!0);try{const F=await Goe(e.id);j(xe=>xe&&{...xe,durationSeconds:F.durationSeconds});const z=M.startedAt.toDate(),oe=Math.max(0,Math.floor((Date.now()-z.getTime())/1e3)),he=Math.max(F.durationSeconds-oe,0);he<=0?(A(0),G.success("Antrenman sresi %25 azaltld"),await L()):(ce(he),G.success("Antrenman sresi %25 azaltld"))}catch(F){console.warn("Antrenman reklamla hzlandrlamad",F),G.error(F.message||"Reklam izleme baarsz"),b&&X>0&&ce(X)}finally{Z(!1)}};p.useEffect(()=>{b&&I<=0&&De()},[b,I,De]);const _t=()=>{t("/match-preview")},tn=C.filter(X=>(P==="all"||X.playerId===P)&&(k==="all"||X.trainingId===k)&&(J==="all"||X.result===J)),Mn=a.length>0&&u.length>0&&!b,ln=p.useMemo(()=>{if(i.length===0)return{starters:[],bench:[],reserves:[]};const X=new Map(i.map(oe=>[oe.id,oe])),F=oe=>oe.map(he=>X.get(he)).filter(he=>!!he),z={starters:i.filter(oe=>oe.squadRole==="starting"),bench:i.filter(oe=>oe.squadRole==="bench"),reserves:i.filter(oe=>oe.squadRole==="reserve")};return{starters:de.starters.length>0?F(de.starters):z.starters,bench:de.bench.length>0?F(de.bench):z.bench,reserves:de.reserves.length>0?F(de.reserves):z.reserves}},[i,de]),xt=p.useCallback(X=>{if(b)return;const F=ln[X];if(F.length===0){G.info("Bu grupta oyuncu bulunmuyor");return}c(F),ae(null),_e(null)},[b,ln]);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-950 dark:via-emerald-950 dark:to-teal-950",children:[l.jsx("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b p-4",children:l.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsx("h1",{className:"text-xl font-bold",children:"Antrenman Merkezi"})]}),l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(fe,{variant:"secondary",size:"sm",disabled:b||ln.starters.length===0,onClick:()=>xt("starters"),children:"lk 11"}),l.jsx(fe,{variant:"secondary",size:"sm",disabled:b||ln.bench.length===0,onClick:()=>xt("bench"),children:"Yedekler"}),l.jsx(fe,{variant:"secondary",size:"sm",disabled:b||ln.reserves.length===0,onClick:()=>xt("reserves"),children:"Kadro D"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(mfe,{children:[l.jsx(pfe,{asChild:!0,children:l.jsx(fe,{variant:"outline",children:"Gemi"})}),l.jsxs(yz,{side:"left",className:"w-[350px] sm:w-[400px] overflow-y-auto",children:[l.jsx(vz,{children:l.jsx(xz,{children:"Gemi Antrenmanlar"})}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(vi,{value:P,onValueChange:R,children:[l.jsx($s,{children:l.jsx(qi,{placeholder:"Oyuncu"})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"all",children:"Tm"}),i.map(X=>l.jsx(zt,{value:X.id,children:X.name},X.id))]})]}),l.jsxs(vi,{value:k,onValueChange:W,children:[l.jsx($s,{children:l.jsx(qi,{placeholder:"Antrenman"})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"all",children:"Tm"}),bu.map(X=>l.jsx(zt,{value:X.id,children:X.name},X.id))]})]}),l.jsxs(vi,{value:J,onValueChange:Q,children:[l.jsx($s,{children:l.jsx(qi,{placeholder:"Durum"})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"all",children:"Tm"}),l.jsx(zt,{value:"success",children:"Baarl"}),l.jsx(zt,{value:"average",children:"Ortalama"}),l.jsx(zt,{value:"fail",children:"Baarsz"})]})]})]}),l.jsxs("div",{className:"space-y-2 max-h-[calc(100vh-200px)] overflow-y-auto pr-2",children:[tn.length===0&&l.jsx("div",{className:"flex justify-center py-4",children:l.jsx(Qd,{title:"Gemi Antrenmanlar",triggerLabel:"Gemi antrenman kayd bulunmadnda bilgi mesajn a",message:"Kayt yok"})}),tn.map((X,F)=>l.jsxs("div",{className:"border p-2 rounded",children:[l.jsx("p",{className:"font-semibold",children:X.playerName}),l.jsxs("p",{className:"text-sm",children:[X.trainingName," ",X.result==="success"?" Baarl":X.result==="average"?" Ortalama":" Baarsz",X.gain>0&&`  +${(X.gain*100).toFixed(1)}%`]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:X.completedAt.toDate().toLocaleString()})]},F))]})]})]})]}),l.jsx(fe,{onClick:_t,variant:"outline",children:"Ma nizleme "})]})]})]})}),l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"grid gap-4 xl:grid-cols-[1fr_minmax(320px,1.1fr)_1fr]",children:[l.jsxs(Ue,{className:"border-emerald-200/70 bg-white/70 dark:border-emerald-900/60 dark:bg-emerald-950/50",children:[l.jsxs(It,{className:"space-y-3",children:[l.jsxs(Ct,{className:"flex items-center gap-2 text-lg",children:[l.jsx(Hd,{className:"h-5 w-5"})," Oyuncular"]}),l.jsxs("div",{className:"relative",children:[l.jsx(Vv,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l.jsx(Xn,{value:g,onChange:X=>w(X.target.value),placeholder:"Oyuncu ara",className:"pl-9"})]})]}),l.jsxs(Je,{className:"space-y-3 max-h-[calc(100vh-260px)] overflow-y-auto pr-2",children:[K.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Eleen oyuncu bulunamad."}),K.map(X=>{const F=ye===X.id;return l.jsx(Ue,{draggable:!b,onDragStart:z=>{ae(null),_e(null),be(z,"player",X.id)},onDragEnd:Ke,onClick:()=>{b||ae(z=>{const oe=z===X.id?null:X.id;return _e(oe?X:null),oe})},onDoubleClick:()=>{b||c(z=>z.some(oe=>oe.id===X.id)?z:[...z,X]),ae(null),_e(null)},className:ue("cursor-pointer select-none border-emerald-100 transition hover:border-emerald-300 dark:border-emerald-900/50 dark:hover:border-emerald-700",b&&"pointer-events-none opacity-60",F&&"border-emerald-300 ring-2 ring-emerald-200/70 dark:border-emerald-700"),children:l.jsxs(Je,{className:"flex items-center justify-between gap-3 p-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:X.name}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[X.position,"  Genel ",Hn(X.overall)]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Motivasyon"}),l.jsxs("p",{className:"font-semibold",children:[Math.round(X.motivation*100),"%"]})]})]})},X.id)})]})]}),l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs(Ue,{onDragOver:X=>tt(X,"player"),onDrop:X=>me(X,"player"),className:ue("min-h-[220px] border-2 border-dashed bg-white/80 transition dark:bg-emerald-950/40",h==="player"?"border-emerald-400 shadow-lg":"border-emerald-200/60 dark:border-emerald-900/50",b&&"opacity-70"),children:[l.jsx(It,{className:"pb-2",children:l.jsxs(Ct,{className:"flex items-center gap-2 text-base",children:[l.jsx(Hd,{className:"h-5 w-5"})," Seilen Oyuncular"]})}),l.jsxs(Je,{className:"space-y-2",children:[a.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Oyuncular srkleyip brakn veya ift tklayn."}),a.map(X=>l.jsxs("div",{className:"flex items-center justify-between rounded-md border border-emerald-100 bg-emerald-50/60 px-3 py-2 text-sm dark:border-emerald-900/60 dark:bg-emerald-900/40",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:X.name}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[X.position,"  ",Hn(X.overall)]})]}),l.jsx(fe,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground",onClick:()=>nt(X.id),children:l.jsx(Bv,{className:"h-4 w-4"})})]},X.id))]})]}),l.jsxs(Ue,{onDragOver:X=>tt(X,"training"),onDrop:X=>me(X,"training"),className:ue("min-h-[220px] border-2 border-dashed bg-white/80 transition dark:bg-emerald-950/40",h==="training"?"border-teal-400 shadow-lg":"border-teal-200/60 dark:border-emerald-900/50",b&&"opacity-70"),children:[l.jsx(It,{className:"pb-2",children:l.jsxs(Ct,{className:"flex items-center gap-2 text-base",children:[l.jsx(Fv,{className:"h-5 w-5"})," Seilen Antrenmanlar"]})}),l.jsxs(Je,{className:"space-y-2",children:[u.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Antrenman kartlarn bu alana brakn."}),u.map(X=>l.jsxs("div",{className:"flex items-center justify-between rounded-md border border-teal-100 bg-teal-50/60 px-3 py-2 text-sm dark:border-emerald-900/60 dark:bg-emerald-900/30",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:X.name}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[X.type,"  ",X.duration," dk"]})]}),l.jsx(fe,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground",onClick:()=>He(X.id),children:l.jsx(Bv,{className:"h-4 w-4"})})]},X.id))]})]})]}),l.jsxs(Ue,{className:"border-emerald-200/80 bg-white/80 dark:border-emerald-900/50 dark:bg-emerald-950/40",children:[l.jsx(It,{className:"pb-2",children:l.jsxs(Ct,{className:"flex items-center gap-2 text-lg",children:[l.jsx(Are,{className:"h-5 w-5"})," Antrenman Kontrol"]})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{className:"rounded-md bg-emerald-50/80 p-2 dark:bg-emerald-900/40",children:[l.jsx("p",{className:"text-muted-foreground",children:"Oyuncu Says"}),l.jsx("p",{className:"text-lg font-semibold",children:a.length})]}),l.jsxs("div",{className:"rounded-md bg-teal-50/80 p-2 dark:bg-emerald-900/40",children:[l.jsx("p",{className:"text-muted-foreground",children:"Antrenman Says"}),l.jsx("p",{className:"text-lg font-semibold",children:u.length})]}),l.jsxs("div",{className:"rounded-md bg-emerald-50/80 p-2 dark:bg-emerald-900/40",children:[l.jsx("p",{className:"text-muted-foreground",children:"Toplam Kombinasyon"}),l.jsx("p",{className:"text-lg font-semibold",children:$e})]}),l.jsxs("div",{className:"rounded-md bg-teal-50/80 p-2 dark:bg-emerald-900/40",children:[l.jsx("p",{className:"text-muted-foreground",children:"Beklenen Sre"}),l.jsxs("p",{className:"text-lg font-semibold",children:[Ae," dk"]})]})]}),l.jsxs("div",{className:"rounded-lg border border-emerald-100 bg-gradient-to-r from-emerald-50 to-teal-50 p-4 text-sm dark:border-emerald-900/60 dark:from-emerald-950 dark:to-teal-950",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(J4,{className:"h-4 w-4"}),l.jsx("span",{children:"Sre"})]}),l.jsx("span",{className:"font-semibold",children:b?ee(I):`${Ae} dakika`})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Vf,{className:"h-4 w-4"}),l.jsx("span",{children:"Elmas Maliyeti"})]}),l.jsx("span",{className:"font-semibold",children:Ie})]}),b&&l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Vf,{className:"h-4 w-4"}),l.jsx("span",{children:"Erken Bitirme creti"})]}),l.jsx("span",{className:"font-semibold",children:je})]}),Ie===0&&l.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Bir oyuncu + bir antrenman kombinasyonu cretsizdir."})]}),l.jsx(fe,{onClick:te,disabled:!Mn,className:"h-12 w-full",children:b?ee(I):"Antrenman Balat"}),b&&l.jsxs("div",{className:"space-y-2",children:[I>0&&l.jsxs(l.Fragment,{children:[l.jsxs(fe,{onClick:ut,variant:"outline",className:"w-full",disabled:le,children:[l.jsx(Vf,{className:"mr-2 h-4 w-4"})," Elmasla Bitir (",je,")"]}),l.jsxs(fe,{onClick:Zt,variant:"secondary",className:"w-full",disabled:V,children:[l.jsx(Pre,{className:"mr-2 h-4 w-4"})," Reklam zle (%25 Daha Hzl)"]})]}),l.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Antrenman devam ederken seimler kilitlenir."})]})]})]})]}),l.jsxs(Ue,{className:"border-teal-200/70 bg-white/70 dark:border-emerald-900/60 dark:bg-emerald-950/50",children:[l.jsxs(It,{className:"space-y-3",children:[l.jsxs(Ct,{className:"flex items-center gap-2 text-lg",children:[l.jsx(Fv,{className:"h-5 w-5"})," Antrenmanlar"]}),l.jsxs("div",{className:"relative",children:[l.jsx(Vv,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l.jsx(Xn,{value:y,onChange:X=>T(X.target.value),placeholder:"Antrenman ara",className:"pl-9"})]})]}),l.jsxs(Je,{className:"space-y-3 max-h-[calc(100vh-260px)] overflow-y-auto pr-2",children:[ie.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Uygun antrenman bulunamad."}),ie.map(X=>l.jsx(Ue,{draggable:!b,onDragStart:F=>be(F,"training",X.id),onDragEnd:Ke,onDoubleClick:()=>{b||d(F=>F.some(z=>z.id===X.id)?F:[...F,X])},className:ue("cursor-grab select-none border-teal-100 transition hover:border-teal-300 dark:border-emerald-900/50 dark:hover:border-emerald-700",b&&"pointer-events-none opacity-60"),children:l.jsxs(Je,{className:"flex items-center justify-between gap-3 p-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:X.name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:X.description})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Hedef"}),l.jsx("p",{className:"font-semibold",children:X.type}),l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[X.duration," dk"]})]})]})},X.id))]})]})]})}),l.jsx(Go,{open:!!ve,onOpenChange:X=>{X||_e(null)},children:l.jsx(Ji,{className:"max-w-md border-none bg-transparent p-0 shadow-none",children:ve?l.jsx(UB,{player:ve}):null})})]})}const Ej={GK:0,LB:1,CB:2,RB:3,LM:4,CM:5,RM:6,CAM:7,LW:8,RW:9,ST:10},Bg=t=>[...t].sort((e,n)=>{const r=(Ej[e.position]??99)-(Ej[n.position]??99);return r!==0?r:e.name.localeCompare(n.name,"tr")}),Sj=(t,e)=>t.filter(r=>r.status==="played"&&r.score).sort((r,s)=>r.date.getTime()-s.date.getTime()).slice(-5).map(r=>{const s=r.homeTeamId===e,{home:i,away:o}=r.score;return i===o?"D":s&&i>o||!s&&o>i?"W":"L"}),Tj=t=>[...t].sort((e,n)=>n.overall-e.overall).slice(0,5).map(e=>({name:e.name,position:e.position,highlight:`Genel: ${Hn(e.overall)}`,stats:{rating:Number((Ii(e.overall)/10).toFixed(1))}})),Tfe={W:1,D:0,L:-1},Ij=t=>t.length?t.reduce((n,r)=>n+Tfe[r],0)/t.length:0,Ife=({teamOverall:t,opponentOverall:e,teamForm:n,opponentForm:r,venue:s})=>{const u=((t??.75)-(e??.75))*6,d=(Ij(n)-Ij(r))*1.5,h=s==="home"?.4:s==="away"?-.2:0,m=u+d+h,g=Math.exp(m),w=Math.exp(-m),y=Math.exp(-Math.abs(m)*.7+.3),T=g+w+y;return!Number.isFinite(T)||T<=0?{win:1/3,draw:1/3,loss:1/3}:{win:g/T,draw:y/T,loss:w/T}};function Cfe(){var Ie,$e,je;const t=qs(),{user:e}=Vn(),n=Ou[0],[r,s]=p.useState(n),[i,o]=p.useState(null),[a,c]=p.useState([]),[u,d]=p.useState("Takmm"),[h,m]=p.useState(null),[g,w]=p.useState([]),[y,T]=p.useState(!1),[b,_]=p.useState(null),[I,A]=p.useState(null),[M,j]=p.useState(null),[v,E]=p.useState([]),[C,S]=p.useState(null),[P,R]=p.useState([]),[k,W]=p.useState(!1),[J,Q]=p.useState(!1);p.useEffect(()=>{let ee=!1;return e?((async()=>{const[be,Ke]=await Promise.all([jn(e.id),Ac(e.id)]);if(ee)return;if(be){d(be.name),m(be.logo&&be.logo.trim()?be.logo:null);const _t=Bg(be.players.filter(Mn=>Mn.squadRole==="starting")),tn=_t.length?_t.slice(0,11):Bg(be.players).slice(0,11);if(w(tn),tn.length){const Mn=tn.reduce((ln,xt)=>ln+xt.overall,0)/tn.length;o(Ii(Mn))}else o(null)}else d("Takmm"),m(null),w([]),o(null);if(!Ke){c([]),A(null);return}const[tt,me]=await Promise.all([Lv(Ke,e.id),Za(Ke).catch(()=>[])]);if(ee)return;c(Sj(tt,e.id));const nt=tt.filter(_t=>_t.status!=="played").sort((_t,tn)=>_t.date.getTime()-tn.date.getTime())[0];if(!nt){A(null);return}const He=nt.homeTeamId===e.id,te=He?nt.awayTeamId:nt.homeTeamId,Zt=new Map(me.map(_t=>[_t.id,_t.name])).get(te)??te;A({fixture:nt,leagueId:Ke,opponentId:te,opponentName:Zt,home:He})})(),()=>{ee=!0}):(s(n),d("Takmm"),m(null),w([]),o(null),c([]),A(null),j(null),E([]),S(null),R([]),W(!1),Q(!1),()=>{})},[e,n]);const le=()=>{t("/match-simulation")},O=ee=>typeof ee=="number"?Hn(ee):"-",V=ee=>{if(!ee)return null;const be=ee.trim();if(!be)return null;const Ke=/^(https?:\/\/|\/|\.\/|\.\.\/|data:image\/)/.test(be),tt=/\.(svg|png|jpe?g|webp|gif)$/i.test(be);return Ke||tt||be.includes("/")?be:null},Z="/Logo/ball.svg",ye=V(h)??V((e==null?void 0:e.teamLogo)??null)??Z,ae=V(r.opponentLogoUrl)??V((M==null?void 0:M.logo)??null)??Z,ve=p.useMemo(()=>v.length?Tj(v):[],[v]),_e=p.useMemo(()=>{var be;const ee=((be=r.opponentStats)==null?void 0:be.keyPlayers)??[];return ve.length?ve:ee},[(Ie=r.opponentStats)==null?void 0:Ie.keyPlayers,ve]),de=y?_e:_e.slice(0,3),ze=Math.max(_e.length-de.length,0);p.useEffect(()=>{W(!1)},[g.length]),p.useEffect(()=>{Q(!1)},[v.length]),p.useEffect(()=>{if(!I){j(null),E([]),S(null),R([]),s(n);return}let ee=!1;return(async()=>{var xt,X,F,z;const[be,Ke]=await Promise.all([jn(I.opponentId).catch(()=>null),Lv(I.leagueId,I.opponentId).catch(()=>[])]);if(ee)return;j(be);let tt=[],me=null;if((xt=be==null?void 0:be.players)!=null&&xt.length){const oe=Bg(be.players.filter(he=>he.squadRole==="starting"));if(tt=oe.length?oe.slice(0,11):Bg(be.players).slice(0,11),tt.length){const he=tt.reduce((xe,ot)=>xe+ot.overall,0)/tt.length;me=Ii(he)}E(tt),S(me)}else E([]),S(null);const nt=Sj(Ke,I.opponentId);R(nt);const He=Ou.find(oe=>oe.opponent.toLowerCase()===I.opponentName.toLowerCase()),te=I.fixture.date,ut=te.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),Zt=xy((X=He==null?void 0:He.opponentStats)==null?void 0:X.overall),_t=me??Zt??null,tn=tt.length?Tj(tt):((F=He==null?void 0:He.opponentStats)==null?void 0:F.keyPlayers)??[],Mn=nt.length?nt:((z=He==null?void 0:He.opponentStats)==null?void 0:z.form)??[],ln=be!=null&&be.logo&&be.logo.trim()?be.logo:(He==null?void 0:He.opponentLogo)??"";s({id:I.fixture.id,opponent:I.opponentName,opponentLogo:ln,opponentLogoUrl:He==null?void 0:He.opponentLogoUrl,date:te.toISOString(),time:ut,venue:I.home?"home":"away",status:"scheduled",competition:(He==null?void 0:He.competition)??"Lig Ma",venueName:He==null?void 0:He.venueName,opponentStats:_t!=null||Mn.length||tn.length?{overall:_t??0,form:Mn,keyPlayers:tn}:void 0})})(),()=>{ee=!0}},[I,n]),p.useEffect(()=>{if(!_e.length){_(null),T(!1);return}_(ee=>{if(ee){const be=_e.find(Ke=>Ke.name===ee.name);if(be)return be}return _e[0]}),_e.length<=3&&T(!1)},[_e]);const re=(ee,be,Ke,tt="h-14 w-14",me)=>{const nt=(me==null?void 0:me.ringClass)??"ring-emerald-500",He=(me==null?void 0:me.fallbackClass)??"bg-emerald-100 text-emerald-800";return ee?l.jsx("img",{src:ee,alt:Ke,className:`${tt} rounded-full object-cover ring-2 ${nt}`}):l.jsx("div",{className:`${tt} rounded-full ${He} flex items-center justify-center text-2xl font-semibold`,children:be})},Pe=P.length?P:(($e=r.opponentStats)==null?void 0:$e.form)??[],Ze=typeof C=="number"?C:((je=r.opponentStats)==null?void 0:je.overall)??null,De=p.useMemo(()=>Ife({teamOverall:i,opponentOverall:Ze,teamForm:a,opponentForm:Pe,venue:r.venue}),[i,Ze,a,Pe,r.venue]),ce=new Date(r.date),L=k?g:g.slice(0,4),K=J?v:v.slice(0,4),ie=ee=>typeof ee=="number"?`${Math.round(ee*100)}%`:"",Ae=ee=>Hn(ee);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-950 dark:via-emerald-950 dark:to-teal-950",children:[l.jsx("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b p-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsx("h1",{className:"text-xl font-bold",children:"Ma nizleme"})]})})}),l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsx(Ue,{children:l.jsxs(Je,{className:"p-6",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx(Mt,{variant:"outline",className:"mb-2",children:r.competition}),l.jsxs("div",{className:"text-sm text-muted-foreground mb-4",children:[ce.toLocaleDateString("tr-TR"),"  ",r.time]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"text-center flex-1",children:[l.jsx("div",{className:"flex justify-center mb-2",children:re(ye,"",`${u} logosu`)}),l.jsx("div",{className:"font-bold text-lg",children:u}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Overall: ",O(i)]}),a.length>0&&l.jsx("div",{className:"flex items-center justify-center gap-1 mt-1 text-sm text-muted-foreground",children:a.map((ee,be)=>l.jsx(Mt,{variant:ee==="W"?"default":ee==="D"?"secondary":"destructive",className:"px-2",children:ee},`${ee}-${be}`))})]}),l.jsx("div",{className:"text-center px-6",children:l.jsx("div",{className:"text-3xl font-bold text-muted-foreground",children:"VS"})}),l.jsxs("div",{className:"text-center flex-1",children:[l.jsx("div",{className:"flex justify-center mb-2",children:re(ae,r.opponentLogo??"",`${r.opponent} logosu`,"h-14 w-14",{fallbackClass:"bg-amber-100 text-amber-900",ringClass:"ring-amber-500"})}),l.jsx("div",{className:"font-bold text-lg",children:r.opponent}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Overall: ",O(Ze)]}),Pe.length>0&&l.jsx("div",{className:"flex items-center justify-center gap-1 mt-1 text-sm text-muted-foreground",children:Pe.map((ee,be)=>l.jsx(Mt,{variant:ee==="W"?"default":ee==="D"?"secondary":"destructive",className:"px-2",children:ee},`${r.id}-opponent-${ee}-${be}`))})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx($re,{className:"h-4 w-4"}),l.jsx("span",{children:r.venue==="home"?"Ev Sahiplii":"Deplasman"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx($I,{className:"h-4 w-4"}),l.jsxs("span",{children:["Stadyum: ",r.venueName??"Belirlenecek"]})]})]})]})}),l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(hc,{className:"h-5 w-5"}),"Rakip Analizi"]})}),l.jsx(Je,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold mb-2",children:"Son Form"}),Pe.length>0?l.jsx("div",{className:"flex gap-1",children:Pe.map((ee,be)=>l.jsx(Mt,{variant:ee==="W"?"default":ee==="D"?"secondary":"destructive",className:"w-8 h-8 rounded-full flex items-center justify-center text-xs",children:ee},`${r.id}-analysis-${ee}-${be}`))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"Rakip form verisi henz mevcut deil."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold mb-2",children:"Kritik Oyuncular"}),_e.length?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"space-y-2",children:de.map(ee=>{const Ke={GK:"bg-slate-500",CB:"bg-blue-500",LB:"bg-emerald-500",RB:"bg-emerald-500",CM:"bg-green-500",DM:"bg-teal-500",CAM:"bg-orange-500",LW:"bg-yellow-500",RW:"bg-yellow-500",ST:"bg-red-500"}[ee.position]??"bg-gray-500",tt=(b==null?void 0:b.name)===ee.name;return l.jsx("button",{type:"button",onClick:()=>_(ee),className:`flex w-full items-center justify-between rounded border p-2 text-left transition ${tt?"border-emerald-500 bg-emerald-500/10":"border-transparent bg-muted hover:border-emerald-200 hover:bg-muted/80"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full text-xs font-bold text-white ${Ke}`,children:ee.position}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium leading-tight",children:ee.name}),l.jsx("div",{className:"text-xs text-muted-foreground",children:ee.highlight})]})]})},`${ee.name}-${ee.position}`)})}),ze>0&&!y&&l.jsxs(fe,{variant:"outline",size:"sm",className:"w-full border-dashed",onClick:()=>T(!0),children:["+",ze," oyuncu daha gster"]}),b&&l.jsxs("div",{className:"rounded-lg border bg-muted/60 p-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:b.name}),l.jsx("div",{className:"text-xs text-muted-foreground",children:b.highlight})]}),l.jsx(Mt,{variant:"secondary",className:"font-semibold",children:b.position})]}),b.stats?l.jsxs("dl",{className:"mt-4 grid grid-cols-2 gap-3 text-sm sm:grid-cols-4",children:[b.stats.matches!==void 0&&l.jsxs("div",{className:"rounded bg-background/70 p-2 text-center",children:[l.jsx("dt",{className:"text-xs text-muted-foreground",children:"Ma"}),l.jsx("dd",{className:"font-semibold",children:b.stats.matches})]}),b.stats.goals!==void 0&&l.jsxs("div",{className:"rounded bg-background/70 p-2 text-center",children:[l.jsx("dt",{className:"text-xs text-muted-foreground",children:"Gol"}),l.jsx("dd",{className:"font-semibold",children:b.stats.goals})]}),b.stats.assists!==void 0&&l.jsxs("div",{className:"rounded bg-background/70 p-2 text-center",children:[l.jsx("dt",{className:"text-xs text-muted-foreground",children:"Asist"}),l.jsx("dd",{className:"font-semibold",children:b.stats.assists})]}),b.stats.rating!==void 0&&l.jsxs("div",{className:"rounded bg-background/70 p-2 text-center",children:[l.jsx("dt",{className:"text-xs text-muted-foreground",children:"Ma Reytingi"}),l.jsx("dd",{className:"font-semibold",children:b.stats.rating.toFixed(1)})]}),b.stats.cleanSheets!==void 0&&l.jsxs("div",{className:"rounded bg-background/70 p-2 text-center",children:[l.jsx("dt",{className:"text-xs text-muted-foreground",children:"Gol Yemedi"}),l.jsx("dd",{className:"font-semibold",children:b.stats.cleanSheets})]}),b.stats.minutes!==void 0&&l.jsxs("div",{className:"rounded bg-background/70 p-2 text-center",children:[l.jsx("dt",{className:"text-xs text-muted-foreground",children:"Dakika"}),l.jsx("dd",{className:"font-semibold",children:b.stats.minutes})]})]}):l.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:"Ayrntl istatistik bilgisi bulunamad."})]})]}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"Rakip oyuncu verisi henz mevcut deil."})]})]})})]}),l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(Hd,{className:"h-5 w-5"}),"Rakip lk 11"]})}),l.jsx(Je,{children:v.length?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Toplam oyuncu: ",v.length]}),l.jsx("div",{className:"space-y-2",children:K.map(ee=>l.jsxs("div",{className:"flex items-center gap-3 rounded border bg-background/60 p-3 text-sm",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-amber-500 text-xs font-bold uppercase text-white",children:ee.position}),l.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[l.jsx("span",{className:"font-semibold",children:ee.name}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[l.jsxs("span",{children:["Genel: ",Ae(ee.overall)]}),ee.condition!==void 0&&l.jsxs("span",{children:["Form: ",ie(ee.condition)]}),ee.motivation!==void 0&&l.jsxs("span",{children:["Motivasyon: ",ie(ee.motivation)]})]})]})]},ee.id))}),v.length>K.length&&l.jsx(fe,{variant:"outline",size:"sm",className:"w-full border-dashed",onClick:()=>Q(ee=>!ee),children:J?"Daha az oyuncu gster":`lk 11'i gster (+${v.length-K.length})`})]}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"Rakip ilk 11 bilgisi bulunamad."})})]}),l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(Hd,{className:"h-5 w-5"}),"Takmmn lk 11'i"]})}),l.jsx(Je,{children:g.length?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Toplam oyuncu: ",g.length]}),l.jsx("div",{className:"space-y-2",children:L.map(ee=>l.jsxs("div",{className:"flex items-center gap-3 rounded border bg-background/60 p-3 text-sm",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-emerald-500 text-xs font-bold uppercase text-white",children:ee.position}),l.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[l.jsx("span",{className:"font-semibold",children:ee.name}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[l.jsxs("span",{children:["Genel: ",Ae(ee.overall)]}),ee.condition!==void 0&&l.jsxs("span",{children:["Form: ",ie(ee.condition)]}),ee.motivation!==void 0&&l.jsxs("span",{children:["Motivasyon: ",ie(ee.motivation)]})]})]})]},ee.id))}),g.length>L.length&&l.jsx(fe,{variant:"outline",size:"sm",className:"w-full border-dashed",onClick:()=>W(ee=>!ee),children:k?"Daha az oyuncu gster":`lk 11'i gster (+${g.length-L.length})`})]}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"lk 11 henz belirlenmedi."})})]}),l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsx(Ct,{children:"Ma Tahmini"})}),l.jsx(Je,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Galibiyet ans"}),l.jsx(Mt,{variant:"outline",children:ie(De.win)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Beraberlik ans"}),l.jsx(Mt,{variant:"outline",children:ie(De.draw)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Malubiyet ans"}),l.jsx(Mt,{variant:"outline",children:ie(De.loss)})]})]})})]}),l.jsx(Ue,{children:l.jsxs(Je,{className:"p-6",children:[l.jsxs(fe,{onClick:le,className:"w-full h-12",size:"lg",children:[l.jsx(AE,{className:"h-5 w-5 mr-2"}),"Maa Bala"]}),l.jsx("p",{className:"text-center text-sm text-muted-foreground mt-2",children:"Hazr olduunuzda ma simlasyonunu balatn"})]})})]})]})}function Nfe(t,e){let n=null,r=null;const s=[],i=(e==null?void 0:e.log)||(()=>{}),o=m=>{const g=r==null?void 0:r.MatchBridgeAPI;if(g&&typeof g.loadByKeys=="function")try{return g.loadByKeys(m),!0}catch(w){i("[UnityBridge] MatchBridgeAPI.loadByKeys failed",w)}if(!n)return!1;try{const w=JSON.stringify(m);return n.SendMessage("MatchBridge","LoadMatchFromJSON",w),!0}catch(w){return i("[UnityBridge] SendMessage failed",w),!1}},a=()=>{if(!s.length)return;const m=s.splice(0,s.length);for(const g of m)if(!o(g)){s.unshift(g);break}},c=()=>{var g;if(!t.contentWindow)return;r=t.contentWindow;const m=r.MGX&&r.MGX.unityInstance||r.__MGX__&&r.__MGX__.unityInstance;m&&typeof m.SendMessage=="function"&&(n=m,(g=e==null?void 0:e.onReady)==null||g.call(e,m),a())},u=m=>{var g;i("[UnityBridge] onUnityReady received"),n=m,(g=e==null?void 0:e.onReady)==null||g.call(e,m),a()},d=m=>{var g;try{const w=m,y=(w==null?void 0:w.detail)||"",T=y?JSON.parse(y):{};(g=e==null?void 0:e.onResult)==null||g.call(e,T);try{const b=new CustomEvent("unityMatchFinished",{detail:y});window.dispatchEvent(b)}catch{}}catch(w){i("[UnityBridge] result parse error",w)}},h=()=>{var m;try{if(!t.contentWindow)return;r=t.contentWindow,(m=r.addEventListener)==null||m.call(r,"unityMatchFinished",d),r.onUnityReady=u;try{YC(r,15e3).then(()=>i("[UnityBridge] MatchBridgeAPI ready"))}catch{}c()}catch(g){i("[UnityBridge] onLoad error",g)}};return t.complete?setTimeout(h,0):t.addEventListener("load",h,{once:!0}),{isReady:()=>!!n,sendMatch:m=>o(m)?!0:(s.push(m),c(),!1),sendTeams:m=>{try{const g=r==null?void 0:r.MatchBridgeAPI;if(g){if(typeof g.sendTeams=="function"){const y=typeof m=="string"?m:JSON.stringify(m);return g.sendTeams(y),!0}if(typeof g.showTeams=="function")return g.showTeams(m),!0}if(!n)return!1;const w=typeof m=="string"?m:JSON.stringify(m);return n.SendMessage("MatchBridge","ShowTeamsFromJSON",w),!0}catch(g){return i("[UnityBridge] showTeams failed",g),!1}},publishTeams:m=>{try{const g=r==null?void 0:r.MatchBridgeAPI;if(g&&typeof g.publishTeams=="function")return g.publishTeams(m),!0;if(n){const w=JSON.stringify(m);return n.SendMessage("MatchBridge","LoadTeamsToSelectionFromJSON",w),!0}return!1}catch(g){return i("[UnityBridge] publishTeams failed",g),!1}},preselectMenu:m=>{try{const g=r==null?void 0:r.MatchBridgeAPI;if(g&&typeof g.preselectMenu=="function")return g.preselectMenu(m),!0;if(n){const w=JSON.stringify(m);return n.SendMessage("MatchBridge","PreselectMenuFromJSON",w),!0}return!1}catch(g){return i("[UnityBridge] preselectMenu failed",g),!1}},hideOverlay:()=>{try{const m=r==null?void 0:r.MatchBridgeAPI;return m&&typeof m.hideOverlay=="function"?(m.hideOverlay(),!0):n?(n.SendMessage("MatchBridge","HideOverlay"),!0):!1}catch(m){return i("[UnityBridge] hideOverlay failed",m),!1}},dispose:()=>{var m;try{t.removeEventListener("load",h)}catch{}try{(m=r==null?void 0:r.removeEventListener)==null||m.call(r,"unityMatchFinished",d)}catch{}n=null,r=null,s.splice(0,s.length)}}}function __(t){if(!t)return;const e=t.trim();if(!e)return;if(e.startsWith("_"))return e;const n=e.match(/^(\d(?:[-_]\d)+)(?:[ _-]*([A-Za-z]))?$/);if(!n)return;const r=n[1].replace(/-/g,"_"),s=(n[2]||"").toUpperCase();return`_${r}${s?`_${s}`:""}`}function Cj(t=15e3){return YC(window,t)}function YC(t,e=15e3){return new Promise((n,r)=>{const s=Date.now(),i=()=>{const o=t.MatchBridgeAPI;if(kfe(o))return n(o);if(Date.now()-s>e)return r(new Error("MatchBridgeAPI timeout"));typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame(i):setTimeout(i,50)};i()})}function kfe(t){return t?typeof t.sendTeams=="function"||typeof t.showTeams=="function"||typeof t.loadByKeys=="function"||typeof t.publishTeams=="function":!1}function wz({title:t="Unity WebGL",autoPayload:e=null,autoPublishPayload:n=null,autoShowTeamsPayload:r=null,onResult:s}){const i=p.useRef(null),o=p.useRef(null),[a,c]=p.useState(!1),[u,d]=p.useState(!1),[h,m]=p.useState(null),[g,w]=p.useState(null),y=p.useRef({}),[T,b]=p.useState(!1),[_,I]=p.useState(!1),[A,M]=p.useState(null),j=p.useMemo(()=>"/Unity/match-viewer/index.html",[]);p.useEffect(()=>{if(!i.current)return;const R=Nfe(i.current,{onReady:()=>c(!0),onResult:k=>{m(k),s==null||s(k)}});return w(R),()=>R.dispose()},[s]),p.useEffect(()=>{const R=()=>{const k=o.current,W=!!(k&&document.fullscreenElement===k);I(W),document.fullscreenElement||b(!1)};return document.addEventListener("fullscreenchange",R),()=>document.removeEventListener("fullscreenchange",R)},[]),p.useEffect(()=>{if(!T){M(null);return}const R=W=>{W.key==="Escape"&&b(!1)},k=document.body.style.overflow;return document.body.style.overflow="hidden",document.addEventListener("keydown",R),()=>{document.body.style.overflow=k,document.removeEventListener("keydown",R)}},[T]);const v=()=>{document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen().catch(()=>{}),b(!1)},E=()=>{var W;const R=o.current;if(!R)return;if(_||T){v();return}const k=(W=R.requestFullscreen)==null?void 0:W.call(R);k&&typeof k.then=="function"?k.catch(()=>{M(R.getBoundingClientRect().height),b(!0)}):(M(R.getBoundingClientRect().height),b(!0))};p.useEffect(()=>{if(!a){d(!1);return}let R=!1,k=null;const W=()=>{var Q;if(R)return;const J=(Q=i.current)==null?void 0:Q.contentWindow;if(!J){k=window.setTimeout(W,200);return}YC(J,15e3).then(()=>{R||d(!0)}).catch(()=>{R||(d(!1),k=window.setTimeout(W,500))})};return d(!1),W(),()=>{R=!0,k&&window.clearTimeout(k)}},[a]),p.useEffect(()=>{if(!a||!g||!u)return;const R=r||(n&&n.home&&n.away?{home:n.home,away:n.away,autoStart:!1}:null),k=R?JSON.stringify(R):"",W=n?JSON.stringify(n):"",J=e?JSON.stringify(e):"",Q=[];if(k&&y.current.show!==k&&(g.sendTeams(R),y.current.show=k),W&&y.current.pub!==W&&(g.publishTeams(n),y.current.pub=W),J&&y.current.match!==J){const le=()=>{g.sendMatch(e),y.current.match=J};k||W?Q.push(window.setTimeout(le,200)):le()}return()=>{Q.forEach(le=>window.clearTimeout(le))}},[a,u,g,r,n,e]);const C=_||T,S=a?"Hazr":"Ykleniyor...",P=C?"Tam Ekrandan k":"Tam Ekran";return l.jsxs(l.Fragment,{children:[T&&A?l.jsx("div",{style:{height:A},"aria-hidden":"true"}):null,l.jsx("div",{ref:o,className:ue("relative z-10 flex w-full flex-col",T&&"fixed inset-0 z-50 bg-black/95 p-4 md:p-8",C&&"text-white"),children:l.jsx(Ue,{className:ue("flex h-full w-full flex-col border border-border/80 shadow-md",C&&"bg-black text-white border-white/30 shadow-2xl"),children:l.jsxs(Je,{className:ue("flex h-full flex-col gap-4 p-4 sm:p-6",C&&"text-white"),children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx("div",{className:"font-semibold text-base",children:t}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx("span",{className:ue(C&&"text-white/80"),children:S}),l.jsx(fe,{variant:C?"secondary":"outline",size:"sm",onClick:E,className:ue("h-8 px-3",C&&"border-white/50 bg-white/10 text-white hover:bg-white/20"),children:P})]})]}),l.jsx("div",{className:ue("relative w-full overflow-hidden rounded-xl border bg-black",C?"flex-1 min-h-[420px] md:min-h-[520px]":"aspect-[16/9] min-h-[360px] sm:min-h-[420px] md:min-h-[520px]"),children:l.jsx("iframe",{ref:i,src:j,title:"Unity Bridge Iframe",className:"h-full w-full",allowFullScreen:!0})}),h&&l.jsxs("div",{className:ue("text-xs text-muted-foreground",C&&"text-white/70"),children:["Sonu: ",h.homeTeam," ",h.homeGoals,"-",h.awayGoals," ",h.awayTeam]})]})})})]})}function Rfe(){const t=qs(),{user:e}=Vn(),[n,r]=p.useState(!0),[s,i]=p.useState(null),[o,a]=p.useState(null),[c,u]=p.useState([]),[d,h]=p.useState(!0),[m,g]=p.useState(null),[w,y]=p.useState(null),[T,b]=p.useState(null),[_,I]=p.useState(null),[A,M]=p.useState(!1),[j,v]=p.useState(null),[E,C]=p.useState(null),[S,P]=p.useState(void 0),[R,k]=p.useState(void 0),[W,J]=p.useState(null),[Q,le]=p.useState(null),[O,V]=p.useState([]),[Z,ye]=p.useState([]);p.useEffect(()=>{(async()=>{if(e){r(!0);try{const ce=await Ac(e.id);if(!ce){i(null),a(null);return}i(ce);const[L,K]=await Promise.all([Gd(ce,e.id),Za(ce)]);u(K);const ie=new Map(K.map(je=>[je.id,je.name])),Ae=L.filter(je=>je.status!=="played").sort((je,ee)=>je.date.getTime()-ee.date.getTime())[0];if(!Ae){a(null);return}const Ie=Ae.homeTeamId===e.id,$e=Ie?Ae.awayTeamId:Ae.homeTeamId;a({...Ae,opponent:ie.get($e)||$e,home:Ie})}finally{r(!1)}}})()},[e]),p.useEffect(()=>{(async()=>{if(M(!1),y(null),b(null),g(null),h(!0),I(null),!o){J(null),le(null),v(null),C(null),V([]),ye([]),P(void 0),k(void 0);return}const[ce,L]=await Promise.all([jn(o.homeTeamId).catch(()=>null),jn(o.awayTeamId).catch(()=>null)]);J((ce==null?void 0:ce.players)||null),le((L==null?void 0:L.players)||null);const K=je=>{if(!je||!je.length)return[];const ee=je.filter(me=>me.squadRole==="starting"),be=ee.length?ee:je,Ke=me=>me==="GK"?0:me==="LB"||me==="RB"||me==="CB"?1:me==="LM"||me==="CM"||me==="RM"||me==="CAM"?2:3;return[...be].sort((me,nt)=>{const He=Ke(me.position),te=Ke(nt.position);if(He!==te)return He-te;const ut=["GK","LB","CB","RB","LM","CM","RM","CAM","LW","ST","RW"];return ut.indexOf(me.position)-ut.indexOf(nt.position)}).slice(0,11).map(me=>me.name)},ie=(je,ee)=>{if(!je||!je.length)return[];const be=new Set(ee),Ke=(me,nt)=>{const He=typeof me.order=="number"?me.order:Number.MAX_SAFE_INTEGER,te=typeof nt.order=="number"?nt.order:Number.MAX_SAFE_INTEGER;return He-te},tt=je.filter(me=>me.squadRole==="bench"&&!be.has(me.name)).sort(Ke).map(me=>me.name);return tt.length?tt.slice(0,9):je.filter(me=>!be.has(me.name)).sort(Ke).map(me=>me.name).slice(0,9)},Ae=je=>{if(!je||!je.length)return __("4-3-3");const ee=je.filter(te=>te.squadRole==="starting"),be=ee.length?ee:je.slice(0,11),Ke=te=>be.filter(ut=>te.has(ut.position)).length,tt=Ke(new Set(["LB","RB","CB"])),me=Ke(new Set(["LW","RW","ST"])),nt=Math.max(0,11-tt-me),He=`${tt}-${nt}-${me}`;return __(He)||__("4-3-3")},Ie=K(ce==null?void 0:ce.players),$e=K(L==null?void 0:L.players);v(Ie.length?Ie:null),C($e.length?$e:null),V(ie(ce==null?void 0:ce.players,Ie)),ye(ie(L==null?void 0:L.players,$e)),P(Ae(ce==null?void 0:ce.players)),k(Ae(L==null?void 0:L.players))})()},[o]);const ae=p.useMemo(()=>{var L;if(!e||!c.length||!o)return"";const ce=o.home?o.homeTeamId:o.awayTeamId;return((L=c.find(K=>K.id===ce))==null?void 0:L.name)||ce},[c,o,e]),ve=(o==null?void 0:o.opponent)||"",_e=ce=>ce?Object.entries(ce).filter(([,L])=>L!=null&&L!=="").map(([L,K])=>`${L}=${K}`).join(", "):"",de=(ce,L)=>{const K=_e(L);return K?l.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[ce,": ",K]}):null},ze=(ce,L)=>{const K=[];return ce.position&&K.push(ce.position),typeof ce.overall=="number"&&K.push(`OVR ${Hn(ce.overall)}`),`${L+1}. ${ce.name}${K.length?` (${K.join(", ")})`:""}`},re=ce=>{const L=[ce.position||"?"];return typeof ce.overall=="number"&&L.push(`OVR ${Hn(ce.overall)}`),typeof ce.age=="number"&&L.push(`Age ${ce.age}`),L.join(" | ")},Pe=(ce,L,K)=>{const ie=Object.entries(ce.attributes||{});return l.jsx("li",{children:l.jsxs(lh,{children:[l.jsx(ch,{asChild:!0,children:l.jsx("span",{className:"cursor-help",children:ze(ce,L)})}),l.jsxs($c,{className:"max-w-xs",children:[l.jsx("div",{className:"font-medium mb-1",children:ce.name}),l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:re(ce)}),ie.length?l.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:ie.map(([Ae,Ie])=>l.jsxs("div",{className:"flex justify-between gap-2",children:[l.jsx("span",{className:"capitalize",children:Ae}),l.jsx("span",{className:"tabular-nums",children:typeof Ie=="number"?Ie.toFixed(3):String(Ie)})]},Ae))}):null]})]})},ce.id||`${K}-${L}`)},Ze=(ce,L,K)=>{var Ae,Ie,$e,je,ee,be;const ie=ce||null;return l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium",children:[L,": ",(ie==null?void 0:ie.name)||"?"]}),(ie==null?void 0:ie.formation)&&l.jsxs("div",{className:"text-muted-foreground",children:["Dizili: ",ie.formation]}),de("Home Kit",ie==null?void 0:ie.homeKit),de("Away Kit",ie==null?void 0:ie.awayKit),(Ae=ie==null?void 0:ie.playersData)!=null&&Ae.length?l.jsx("ul",{className:"mt-1 list-disc list-inside space-y-0.5",children:ie.playersData.map((Ke,tt)=>Pe(Ke,tt,`${K}-player`))}):(Ie=ie==null?void 0:ie.players)!=null&&Ie.length?l.jsx("ul",{className:"mt-1 list-disc list-inside space-y-0.5",children:ie.players.map((Ke,tt)=>l.jsx("li",{children:`${tt+1}. ${Ke}`},`${K}-player-name-${tt}`))}):null,($e=ie==null?void 0:ie.benchData)!=null&&$e.length||(je=ie==null?void 0:ie.bench)!=null&&je.length?l.jsxs("div",{className:"mt-3",children:[l.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Yedekler"}),(ee=ie==null?void 0:ie.benchData)!=null&&ee.length?l.jsx("ul",{className:"mt-1 list-disc list-inside space-y-0.5",children:ie.benchData.map((Ke,tt)=>Pe(Ke,tt,`${K}-bench`))}):(be=ie==null?void 0:ie.bench)!=null&&be.length?l.jsx("ul",{className:"mt-1 list-disc list-inside space-y-0.5",children:ie.bench.map((Ke,tt)=>l.jsx("li",{children:`${tt+1}. ${Ke}`},`${K}-bench-name-${tt}`))}):null]}):null]})},De=l.jsx("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b p-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsx("h1",{className:"text-xl font-bold",children:"Ma Simlasyonu"})]})})});return n?l.jsxs("div",{className:"flex min-h-screen w-full flex-col overflow-x-hidden bg-muted/10",children:[De,l.jsx("div",{className:"p-4",children:"Ykleniyor"})]}):!o||!s?l.jsxs("div",{className:"flex min-h-screen w-full flex-col overflow-x-hidden bg-muted/10",children:[De,l.jsx("div",{className:"p-4",children:l.jsx(Ue,{children:l.jsx(Je,{className:"p-4",children:"Yaklaan ma bulunamad veya lig bilgisi eksik."})})})]}):l.jsxs("div",{className:"flex min-h-screen w-full flex-col overflow-x-hidden bg-muted/10",children:[De,l.jsxs("div",{className:"flex-1 w-full px-4 py-4 space-y-4 sm:px-6 lg:px-8",children:[l.jsx(Ue,{children:l.jsxs(Je,{className:"p-4 flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"font-semibold",children:[o.home?ae:ve," vs ",o.home?ve:ae]}),l.jsxs("div",{className:"text-muted-foreground",children:["Id: ",o.id]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(fe,{variant:"outline",size:"sm",onClick:()=>t("/team-planning"),children:"Kadroyu Ayarla"}),l.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>t("/fixtures"),children:"Fikstr"})]})]})}),l.jsx(Ue,{children:l.jsxs(Je,{className:"p-4 space-y-3",children:[l.jsx("div",{className:"font-semibold",children:"Simlasyon"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(fe,{onClick:()=>{var Ie,$e;if(!o)return;const ce=((Ie=c.find(je=>je.id===o.homeTeamId))==null?void 0:Ie.name)||o.homeTeamId,L=(($e=c.find(je=>je.id===o.awayTeamId))==null?void 0:$e.name)||o.awayTeamId,K=(je,ee,be)=>{if(!je||!ee)return;const Ke=new Map(ee.map(nt=>[nt.name,nt])),tt=typeof be=="number"?je.slice(0,be):je.slice();if(!tt.length)return;const me=nt=>{const He=Ke.get(nt);if(!He)return{name:nt};const te=He.attributes,ut={strength:(te==null?void 0:te.strength)??0,acceleration:(te==null?void 0:te.acceleration)??0,topSpeed:(te==null?void 0:te.topSpeed)??0,dribbleSpeed:(te==null?void 0:te.dribbleSpeed)??0,jump:(te==null?void 0:te.jump)??0,tackling:(te==null?void 0:te.tackling)??0,ballKeeping:(te==null?void 0:te.ballKeeping)??0,passing:(te==null?void 0:te.passing)??0,longBall:(te==null?void 0:te.longBall)??0,agility:(te==null?void 0:te.agility)??0,shooting:(te==null?void 0:te.shooting)??0,shootPower:(te==null?void 0:te.shootPower)??0,positioning:(te==null?void 0:te.positioning)??0,reaction:(te==null?void 0:te.reaction)??0,ballControl:(te==null?void 0:te.ballControl)??0,speed:(te==null?void 0:te.topSpeed)??0,accel:(te==null?void 0:te.acceleration)??0,power:(te==null?void 0:te.shootPower)??0,shotPower:(te==null?void 0:te.shootPower)??0,pass:(te==null?void 0:te.passing)??0,longPass:(te==null?void 0:te.longBall)??0,control:(te==null?void 0:te.ballControl)??0,dribbling:(te==null?void 0:te.dribbleSpeed)??0,tackle:(te==null?void 0:te.tackling)??0,reactions:(te==null?void 0:te.reaction)??0,pace:Number(((((te==null?void 0:te.topSpeed)??0)+((te==null?void 0:te.acceleration)??0))/2).toFixed(3))};return{id:He.id,name:He.name,position:He.position,overall:He.overall,age:He.age,attributes:ut}};return tt.map(me)},ie={home:{name:ce,players:j&&j.length===11?j:(j||[]).concat(Array.from({length:Math.max(0,11-((j==null?void 0:j.length)||0))},(je,ee)=>`Player ${ee+1}`)).slice(0,11),playersData:K(j,W,11),bench:O.length?[...O]:[],benchData:K(O,W),formation:S},away:{name:L,players:E&&E.length===11?E:(E||[]).concat(Array.from({length:Math.max(0,11-((E==null?void 0:E.length)||0))},(je,ee)=>`Player ${ee+1}`)).slice(0,11),playersData:K(E,Q,11),bench:Z.length?[...Z]:[],benchData:K(Z,Q),formation:R},openMenu:!1,select:!1};y(ie);const Ae={home:ie.home,away:ie.away,aiLevel:"Legendary",userTeam:o.home?"Home":"Away",dayTime:"Night",autoStart:!1};b(Ae),M(!0)},children:"Kadrolar Gnder"}),l.jsx(fe,{disabled:!A,onClick:()=>{var ie,Ae;if(!e||!o)return;const ce=((ie=c.find(Ie=>Ie.id===o.homeTeamId))==null?void 0:ie.name)||o.homeTeamId,L=((Ae=c.find(Ie=>Ie.id===o.awayTeamId))==null?void 0:Ae.name)||o.awayTeamId,K={matchId:o.id,homeTeamKey:ce,awayTeamKey:L,autoStart:!0,aiLevel:"Legendary",userTeam:o.home?"Home":"Away",dayTime:"Night",homeAltKit:!1,awayAltKit:!0};g(K),h(!0)},children:"Simlasyonu Balat"})]}),d&&l.jsx("div",{className:"pt-2",children:l.jsx(wz,{title:"Unity Kpr",autoPayload:m,autoPublishPayload:w,autoShowTeamsPayload:T,onResult:ce=>I(ce)})}),_&&l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Sonu: ",_.homeTeam," ",_.homeGoals,"-",_.awayGoals," ",_.awayTeam]}),w&&l.jsxs("div",{className:"mt-3 border-t pt-3",children:[l.jsx("div",{className:"font-semibold mb-2",children:"Gnderilen Takm Verileri"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[Ze(w.home,"Ev Sahibi","home"),Ze(w.away,"Deplasman","away")]})]}),(T||w)&&l.jsxs("div",{className:"mt-3 border-t pt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold",children:"WebGL'e Gnderilen Format"}),T&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"showTeams(payload)"}),l.jsx("pre",{className:"text-xs bg-muted rounded p-2 overflow-auto max-h-64",children:JSON.stringify(T,null,2)})]}),w&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"publishTeams(payload)"}),l.jsx("pre",{className:"text-xs bg-muted rounded p-2 overflow-auto max-h-64",children:JSON.stringify(w,null,2)})]}),m&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"loadMatchFromJSON(payload)"}),l.jsx("pre",{className:"text-xs bg-muted rounded p-2 overflow-auto max-h-64",children:JSON.stringify(m,null,2)})]})]}),l.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Ayarlar: AI=Legendary, Kullanc Takm=",o.home?"Home":"Away",", Zaman=Night"]})]})})]})]})}function Pfe(){const[t,e]=p.useState(null);p.useEffect(()=>{const r=()=>{Cj().then(e).catch(console.error)};return window.onUnityReady=r,Cj().then(e).catch(()=>{}),()=>{window.onUnityReady===r&&delete window.onUnityReady}},[]),p.useEffect(()=>{function r(s){const i=s.detail;try{const o=JSON.parse(i);console.log("Match finished:",o)}catch{console.log("Match finished (raw):",i)}}return window.addEventListener("unityMatchFinished",r),()=>window.removeEventListener("unityMatchFinished",r)},[]);function n(){if(!t||typeof t.sendTeams!="function")return;const r={formationHome:"4-3-3",formationAway:"4-2-3-1",autoStart:!0,home:[{id:"H1",name:"GK A",pos:"GK",overall:80},{id:"H9",name:"ST A",pos:"ST",overall:85}],away:[{id:"A1",name:"GK B",pos:"GK",overall:78},{id:"A9",name:"ST B",pos:"ST",overall:83}]};t.sendTeams(JSON.stringify(r))}return l.jsx("div",{className:"flex min-h-screen w-full flex-col items-center justify-center gap-4 overflow-x-hidden p-6",children:l.jsx("button",{onClick:n,disabled:!t,className:"rounded border border-primary px-4 py-2 font-semibold text-primary transition hover:bg-primary/10 disabled:cursor-not-allowed disabled:opacity-60",children:"Send Teams & Start"})})}function Nj(t,e=15e3){return new Promise((n,r)=>{const s=Date.now();function i(){const o=t.MatchBridgeAPI;if(o&&(typeof o.sendTeams=="function"||typeof o.showTeams=="function"))return n(o);if(Date.now()-s>e)return r(new Error("MatchBridgeAPI timeout"));requestAnimationFrame(i)}i()})}function Afe(){const t=p.useRef(null),[e,n]=p.useState(null);p.useEffect(()=>{const s=t.current;if(!s)return;const i=s.contentWindow;i&&(i.onUnityReady=()=>{Nj(i).then(n).catch(console.error)},Nj(i).then(n).catch(()=>{}))},[]),p.useEffect(()=>{function s(i){console.log("Match finished (iframe):",i.detail)}return window.addEventListener("unityMatchFinished",s),()=>window.removeEventListener("unityMatchFinished",s)},[]);function r(){!e||typeof e.sendTeams!="function"||e.sendTeams(JSON.stringify({home:[],away:[],autoStart:!0}))}return l.jsx("div",{className:"flex min-h-screen w-full flex-col gap-4 overflow-x-hidden p-4 sm:p-6",children:l.jsxs("div",{className:"flex w-full flex-col gap-4",children:[l.jsx("div",{className:"aspect-[16/9] w-full min-h-[360px] overflow-hidden rounded-xl border bg-black sm:min-h-[420px] md:min-h-[520px]",children:l.jsx("iframe",{ref:t,src:"/Unity/match-viewer/index.html",className:"h-full w-full"})}),l.jsx("button",{onClick:r,disabled:!e,className:"self-start rounded border border-primary px-4 py-2 text-sm font-semibold text-primary transition hover:bg-primary/10 disabled:cursor-not-allowed disabled:opacity-60",children:"Send Teams"})]})})}const kj=["GK","CB","LB","RB","CM","LM","RM","CAM","LW","RW","ST"];function Fr(){return Math.round(Math.random()*1e3)/1e3}function Rj(t,e){const n=e||kj[Math.floor(Math.random()*kj.length)],r={strength:Fr(),acceleration:Fr(),topSpeed:Fr(),dribbleSpeed:Fr(),jump:Fr(),tackling:Fr(),ballKeeping:Fr(),passing:Fr(),longBall:Fr(),agility:Fr(),shooting:Fr(),shootPower:Fr(),positioning:Fr(),reaction:Fr(),ballControl:Fr()},s=Number((.25*r.shooting+.25*r.passing+.15*r.ballControl+.1*r.topSpeed+.1*r.acceleration+.15*r.positioning).toFixed(3));return{id:String(t),name:Dm(),position:n,roles:[n],overall:s,potential:Math.min(1,s+Math.random()*(1-s)),attributes:r,age:18+Math.floor(Math.random()*15),height:170+Math.floor(Math.random()*20),weight:65+Math.floor(Math.random()*20),squadRole:"reserve",condition:parseFloat((.6+Math.random()*.4).toFixed(3)),motivation:parseFloat((.55+Math.random()*.45).toFixed(3)),injuryStatus:"healthy"}}function Pj(t,e,n="AI Coach"){const r=[],i=Kl[0].positions.map(o=>o.position);i.forEach((o,a)=>{r.push(Rj(a+1,o))});for(let o=i.length;o<30;o++)r.push(Rj(o+1));return r.slice(0,11).forEach(o=>o.squadRole="starting"),r.slice(11,22).forEach(o=>o.squadRole="bench"),r.slice(22).forEach(o=>o.squadRole="reserve"),{id:t,name:e,manager:n,kitHome:"home",kitAway:"away",budget:0,players:r}}function jfe(t){const e=t.attributes||{},n={strength:(e==null?void 0:e.strength)??0,acceleration:(e==null?void 0:e.acceleration)??0,topSpeed:(e==null?void 0:e.topSpeed)??0,dribbleSpeed:(e==null?void 0:e.dribbleSpeed)??0,jump:(e==null?void 0:e.jump)??0,tackling:(e==null?void 0:e.tackling)??0,ballKeeping:(e==null?void 0:e.ballKeeping)??0,passing:(e==null?void 0:e.passing)??0,longBall:(e==null?void 0:e.longBall)??0,agility:(e==null?void 0:e.agility)??0,shooting:(e==null?void 0:e.shooting)??0,shootPower:(e==null?void 0:e.shootPower)??0,positioning:(e==null?void 0:e.positioning)??0,reaction:(e==null?void 0:e.reaction)??0,ballControl:(e==null?void 0:e.ballControl)??0,speed:(e==null?void 0:e.topSpeed)??0,pace:Number(((((e==null?void 0:e.topSpeed)??0)+((e==null?void 0:e.acceleration)??0))/2).toFixed(3)),accel:(e==null?void 0:e.acceleration)??0,power:(e==null?void 0:e.shootPower)??0,shotPower:(e==null?void 0:e.shootPower)??0,pass:(e==null?void 0:e.passing)??0,longPass:(e==null?void 0:e.longBall)??0,control:(e==null?void 0:e.ballControl)??0,dribbling:(e==null?void 0:e.dribbleSpeed)??0,tackle:(e==null?void 0:e.tackling)??0,reactions:(e==null?void 0:e.reaction)??0};return{id:t.id,name:t.name,position:t.position,overall:t.overall,age:t.age,attributes:n}}function Aj(t,e="4-4-2"){const n=t.players.filter(i=>i.squadRole==="starting").slice(0,11),r=n.map(i=>i.name),s=n.map(jfe);return{name:t.name,formation:e,players:r,playersData:s,homeKit:{color1:"#1b5e20",color2:"#ffffff"},awayKit:{color1:"#0d47a1",color2:"#ffffff"}}}function Mfe(){const[t,e]=p.useState(1),n=p.useMemo(()=>{const r=Pj("H"+t,"Catalagna"),s=Pj("A"+t,"Royal");return{home:Aj(r,"4-4-2"),away:Aj(s,"4-4-2"),autoStart:!1,openMenu:!0,select:!0,userTeam:"Home"}},[t]);return l.jsxs("div",{className:"min-h-screen p-4 space-y-4",children:[l.jsx(Ue,{children:l.jsxs(Je,{className:"p-4 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:"Unity Mock Takm Seimi"}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Sayfa alnca iki takm seim ekranna otomatik baslr ve seilir."})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(fe,{size:"sm",variant:"outline",onClick:()=>e(r=>r+1),children:"Yeni Kadrolar"})})]})}),l.jsx(wz,{title:"Unity Kpr (Auto Seed)",autoShowTeamsPayload:n})]})}function Dfe(){const[t,e]=p.useState("MDEMO"),[n,r]=p.useState([]),s=p.useRef();function i(){var a;(a=s.current)==null||a.call(s),r([]),s.current=pz(t,c=>{r(u=>[...u,c])})}function o(){var a;(a=s.current)==null||a.call(s),s.current=void 0}return p.useEffect(()=>()=>o(),[]),l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx(Xn,{value:t,onChange:a=>e(a.target.value),placeholder:"matchId",className:"max-w-xs"}),l.jsx(fe,{onClick:i,children:"Balan"}),l.jsx(fe,{variant:"outline",onClick:o,children:"Kes"})]}),l.jsxs(Ue,{className:"p-4",children:[l.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Events (",n.length,")"]}),l.jsx("div",{className:"space-y-1 max-h-[60vh] overflow-auto",children:n.map((a,c)=>l.jsxs("div",{className:"text-sm font-mono",children:[new Date(a.ts).toLocaleTimeString("tr-TR")," - ",a.eventType||a.type,a.seq?` #${a.seq}`:""," ",a.payload?JSON.stringify(a.payload):""]},c))})]})]})}function Ofe({url:t}){var a;const[e,n]=p.useState(null),[r,s]=p.useState(0),i=p.useRef(0);if(p.useEffect(()=>{let c=!1;return(async()=>{try{const d=await(await fetch(t)).text();c||n(JSON.parse(d))}catch(u){console.warn("[ReplayPlayer] fetch failed",u)}})(),()=>{c=!0}},[t]),p.useEffect(()=>{if(!e)return;let c=0;const u=performance.now(),d=()=>{const h=(performance.now()-u)/1e3;for(s(h);i.current<e.events.length&&e.events[i.current].ts<=h;){const m=e.events[i.current++];console.log("replay event",m)}c=requestAnimationFrame(d)};return c=requestAnimationFrame(d),()=>cancelAnimationFrame(c)},[e]),!e)return l.jsx("div",{children:"Replay ykleniyor"});const o=(a=e.final)==null?void 0:a.score;return l.jsxs("div",{children:[o&&l.jsxs("div",{className:"mb-2",children:["Skor: ",o.h," - ",o.a]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Zaman: ",r.toFixed(1),"s"]})]})}function Lfe({matchId:t,replayUrl:e}){const[n,r]=p.useState(null);p.useEffect(()=>{let i=!1;const o=new AbortController,a=setTimeout(()=>o.abort(),2500);return(async()=>{try{const c=`${window.location.origin}/Unity/match-viewer/index.html`,u=await fetch(c,{method:"GET",cache:"no-store",signal:o.signal});i||r(u.ok)}catch{i||r(!1)}finally{clearTimeout(a)}})(),()=>{i=!0,clearTimeout(a),o.abort()}},[]);const s=p.useMemo(()=>{const i=new URLSearchParams;return i.set("matchId",t),i.set("replayUrl",e),`/Unity/match-viewer/index.html?${i.toString()}`},[t,e]);return n?l.jsx("div",{className:"w-full h-[640px] border rounded overflow-hidden bg-black",children:l.jsx("iframe",{src:s,title:"Unity Match Viewer",className:"w-full h-full",allowFullScreen:!0})}):n===null?l.jsx("div",{children:"Oynatc hazrlanyor"}):l.jsx(Ofe,{url:e})}async function Ffe(t){const r=(await Qs(Xs,"getReplay")({replayPath:t})).data;if(r&&r.ok&&typeof r.url=="string")return r.url;throw new Error("Replay URL alnamad")}function Vfe(){const{id:t}=bO(),[e,n]=p.useState("loading"),[r,s]=p.useState(null),[i,o]=p.useState([]),[a,c]=p.useState(null),u=p.useRef();p.useEffect(()=>{let h=!1;return(async()=>{if(t){n("loading");try{const m=await ure(t);if(!m){h||n("not-found");return}if(m.fixture.replayPath){const g=await Ffe(m.fixture.replayPath);h||(s(g),n("replay"));return}h||n("live")}catch(m){console.warn("[MatchWatcher] failed to load fixture",m),h||n("live")}}})(),()=>{h=!0}},[t]),p.useEffect(()=>{var h;if(t&&e==="live")return(h=u.current)==null||h.call(u),o([]),u.current=pz(t,m=>o(g=>[...g,m]),m=>c(m)),()=>{var m;(m=u.current)==null||m.call(u),u.current=void 0}},[t,e]);const d=p.useMemo(()=>i.slice(-20),[i]);return e==="loading"?l.jsx("div",{className:"p-4",children:"Ykleniyor"}):e==="not-found"?l.jsx("div",{className:"p-4",children:"Ma bulunamad."}):e==="replay"&&r?l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Ma Kayd"}),l.jsx(Lfe,{matchId:t,replayUrl:r})]}):l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Canl Ma"}),(a==null?void 0:a.score)&&l.jsxs("div",{className:"text-sm",children:["Skor: ",a.score.h," - ",a.score.a]}),l.jsxs(Ue,{className:"p-3",children:[l.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Son olaylar"}),l.jsx("div",{className:"space-y-1",children:d.map((h,m)=>l.jsxs("div",{className:"text-sm bg-muted/40 rounded px-2 py-1 font-mono",children:[l.jsx("span",{className:"opacity-60",children:h.seq}),"  ",l.jsx("b",{children:h.type||h.eventType})," ",h.payload?" "+JSON.stringify(h.payload):""]},m))})]})]})}function Bfe(){qs();const[t,e]=p.useState("overview"),n=Jh.filter(o=>o.type==="income").reduce((o,a)=>o+a.amount,0),r=Jh.filter(o=>o.type==="expense").reduce((o,a)=>o+a.amount,0),s=n-r+25e5,i=o=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0}).format(o);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-950 dark:via-emerald-950 dark:to-teal-950",children:[l.jsx("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsx("h1",{className:"text-xl font-bold",children:"Finans"})]}),l.jsxs(fe,{variant:"outline",size:"sm",children:[l.jsx(Ore,{className:"h-4 w-4 mr-2"}),"Filtre"]})]})}),l.jsxs("div",{className:"p-4",children:[l.jsx(Ue,{className:"mb-6",children:l.jsxs(Je,{className:"p-6",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:i(s)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Mevcut Bakiye"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950/30 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-center mb-2",children:[l.jsx(hc,{className:"h-4 w-4 text-green-600 mr-1"}),l.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Gelir"})]}),l.jsx("div",{className:"font-semibold text-green-600",children:i(n)})]}),l.jsxs("div",{className:"text-center p-3 bg-red-50 dark:bg-red-950/30 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-center mb-2",children:[l.jsx(Qw,{className:"h-4 w-4 text-red-600 mr-1"}),l.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Gider"})]}),l.jsx("div",{className:"font-semibold text-red-600",children:i(r)})]})]})]})}),l.jsxs(Ue,{className:"mb-6",children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(Z4,{className:"h-5 w-5"}),"Aylk Gelir-Gider Grafii"]})}),l.jsx(Je,{children:l.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-950 to-purple-950 rounded-lg p-8 text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("div",{className:"font-semibold mb-2",children:"Grafik Grnm"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Son 12 ayn gelir-gider dalm burada grntlenecek"})]})})]}),l.jsxs(pC,{value:t,onValueChange:e,children:[l.jsxs(j0,{className:"grid w-full grid-cols-3",children:[l.jsx(ko,{value:"overview",children:"Tm"}),l.jsx(ko,{value:"income",children:"Gelir"}),l.jsx(ko,{value:"expense",children:"Gider"})]}),l.jsx(Ro,{value:"overview",className:"space-y-4 mt-4",children:l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsx(Ct,{children:"Son lemler"})}),l.jsx(Je,{children:l.jsx("div",{className:"space-y-3",children:Jh.map(o=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${o.type==="income"?"bg-green-100 dark:bg-green-950":"bg-red-100 dark:bg-red-950"}`,children:o.type==="income"?l.jsx(hc,{className:"h-5 w-5 text-green-600"}):l.jsx(Qw,{className:"h-5 w-5 text-red-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:o.category}),l.jsx("div",{className:"text-sm text-muted-foreground",children:o.description}),l.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[l.jsx($I,{className:"h-3 w-3"}),new Date(o.date).toLocaleDateString("tr-TR")]})]})]}),l.jsxs("div",{className:`font-semibold ${o.type==="income"?"text-green-600":"text-red-600"}`,children:[o.type==="income"?"+":"-",i(o.amount)]})]},o.id))})})]})}),l.jsx(Ro,{value:"income",className:"space-y-4 mt-4",children:l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(hc,{className:"h-5 w-5 text-green-600"}),"Gelir Kalemleri"]})}),l.jsx(Je,{children:l.jsx("div",{className:"space-y-3",children:Jh.filter(o=>o.type==="income").map(o=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-950/30 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:o.category}),l.jsx("div",{className:"text-sm text-muted-foreground",children:o.description}),l.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(o.date).toLocaleDateString("tr-TR")})]}),l.jsxs("div",{className:"font-semibold text-green-600",children:["+",i(o.amount)]})]},o.id))})})]})}),l.jsx(Ro,{value:"expense",className:"space-y-4 mt-4",children:l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(Qw,{className:"h-5 w-5 text-red-600"}),"Gider Kalemleri"]})}),l.jsx(Je,{children:l.jsx("div",{className:"space-y-3",children:Jh.filter(o=>o.type==="expense").map(o=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-950/30 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:o.category}),l.jsx("div",{className:"text-sm text-muted-foreground",children:o.description}),l.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(o.date).toLocaleDateString("tr-TR")})]}),l.jsxs("div",{className:"font-semibold text-red-600",children:["-",i(o.amount)]})]},o.id))})})]})})]}),l.jsxs(Ue,{className:"mt-6",children:[l.jsx(It,{children:l.jsx(Ct,{children:"Hzl lemler"})}),l.jsx(Je,{children:l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(fe,{variant:"outline",className:"h-12",children:"Sponsorluk Anlamas"}),l.jsx(fe,{variant:"outline",className:"h-12",children:"Oyuncu Sat"}),l.jsx(fe,{variant:"outline",className:"h-12",children:"Stadyum Gelitirme"}),l.jsx(fe,{variant:"outline",className:"h-12",children:"Kredi Bavurusu"})]})})]})]})]})}const Ufe=512*1024,jj=["image/png","image/jpeg","image/svg+xml"],Ug=300,zg=220,$g=3,pu=32;function zfe(){var X,F;const{theme:t}=H4(),{user:e,refreshTeamInfo:n}=Vn(),{balance:r}=Ni(),[s,i]=p.useState((e==null?void 0:e.teamLogo)??null),[o,a]=p.useState(!1),c=p.useRef(null),u=jj.join(","),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[w,y]=p.useState(""),[T,b]=p.useState(""),[_,I]=p.useState(!1),[A,M]=p.useState(!1),[j,v]=p.useState(null),[E,C]=p.useState((e==null?void 0:e.contactPhone)??""),[S,P]=p.useState((e==null?void 0:e.contactCrypto)??""),[R,k]=p.useState(!1),W=qs(),{lastDailyRewardDate:J,processDailyReward:Q,vipStatus:le,vipActive:O,vipPlans:V,deactivateVip:Z,claimMonthlyStarCard:ye,canClaimMonthlyStarCard:ae,isHydrated:ve}=Xc(),_e=(z,oe)=>{if(!z)return"Henuz alinmadi";const he=oe!=null&&oe.dateOnly?`${z}T00:00:00Z`:z,xe=new Date(he);return Number.isNaN(xe.getTime())?"Bilinmiyor":xe.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"})},de=_e(J,{dateOnly:!0}),ze=_e(le.lastMonthlyStarCardDate),re=_e(le.expiresAt),Pe=le.plan?V[le.plan].label:"Secilmedi",Ze=new Date().toISOString().split("T")[0],De=J===Ze,ce=Math.round((le.durationReductionPercent??0)*100),L=O,K=ae?"Aylik karti al":"Aylik kart alindi",ie=le.starCardCredits??0,Ie=!!e&&ve,$e=((X=e==null?void 0:e.contactPhone)==null?void 0:X.trim())??"",je=((F=e==null?void 0:e.contactCrypto)==null?void 0:F.trim())??"",ee=E.trim(),be=S.trim(),Ke=ee!==$e||be!==je;p.useEffect(()=>{i((e==null?void 0:e.teamLogo)??null)},[e==null?void 0:e.teamLogo]),p.useEffect(()=>{C((e==null?void 0:e.contactPhone)??""),P((e==null?void 0:e.contactCrypto)??"")},[e==null?void 0:e.contactPhone,e==null?void 0:e.contactCrypto]),p.useEffect(()=>{if(!e){v(null);return}let z=!0;return(async()=>{var he;try{const xe=await jn(e.id);if(!z)return;v(((he=xe==null?void 0:xe.stadium)==null?void 0:he.name)??null)}catch(xe){console.warn("[Settings] Failed to load stadium name",xe)}})(),()=>{z=!1}},[e]);const tt=async()=>{if(!e){G.error("Oturum bulunamadi.");return}const z=w.trim();if(z.length<$g){G.error(`Kulup adi en az ${$g} karakter olmalidir.`);return}if(z.length>pu){G.error(`Kulup adi en fazla ${pu} karakter olabilir.`);return}if(z===(e.teamName??"").trim()){G.error("Yeni isim mevcut isim ile ayni.");return}if(r<Ug){G.error("Yetersiz elmas bakiyesi.");return}I(!0);try{await Tte(z),G.success("Kulup adi guncellendi."),y(""),h(!1),await n()}catch(oe){const he=oe instanceof Error?oe.message:"Kulup adi guncellenemedi.";G.error(he)}finally{I(!1)}},me=async()=>{if(!e){G.error("Oturum bulunamadi.");return}const z=T.trim();if(z.length<$g){G.error(`Stadyum adi en az ${$g} karakter olmalidir.`);return}if(z.length>pu){G.error(`Stadyum adi en fazla ${pu} karakter olabilir.`);return}if(z===(j??"").trim()){G.error("Yeni stadyum adi ayni gorunuyor.");return}if(r<zg){G.error("Yetersiz elmas bakiyesi.");return}M(!0);try{await Ite(z),G.success("Stadyum adi guncellendi."),v(z),b(""),g(!1)}catch(oe){const he=oe instanceof Error?oe.message:"Stadyum adi guncellenemedi.";G.error(he)}finally{M(!1)}},nt=z=>new Promise((oe,he)=>{const xe=new FileReader;xe.onload=()=>{const ot=xe.result;typeof ot=="string"?oe(ot):he(new Error("Logo dntrlemedi."))},xe.onerror=()=>he(new Error("Logo okunurken bir hata olutu.")),xe.readAsDataURL(z)}),He=async z=>{var he;if(!e){G.error("Logo yklemek iin giri yapmalsn.");return}const oe=(he=z.type)==null?void 0:he.toLowerCase();if(!oe||!jj.includes(oe)){G.error("Desteklenmeyen dosya format.",{description:"Ltfen PNG, JPG veya SVG formatnda bir grsel ykleyin."});return}if(z.size>Ufe){G.error("Logo dosyas ok byk.",{description:"512 KB'dan kk bir grsel semelisin."});return}a(!0);try{const xe=await nt(z);await LP(e.id,xe),i(xe),G.success("Takm logon baaryla gncellendi."),await n()}catch(xe){console.error("[Settings] Logo update failed",xe),G.error("Logo kaydedilemedi.",{description:xe instanceof Error?xe.message:void 0})}finally{a(!1)}},te=async z=>{var he;const oe=(he=z.target.files)==null?void 0:he[0];z.target.value="",oe&&await He(oe)},ut=async()=>{if(e){a(!0);try{await LP(e.id,null),i(null),G.success("Takm logon kaldrld."),await n()}catch(z){console.error("[Settings] Logo remove failed",z),G.error("Logo kaldrlrken bir hata olutu.",{description:z instanceof Error?z.message:void 0})}finally{a(!1)}}},Zt=async()=>{if(!e){G.error("Iletisim bilgilerini kaydetmek icin oturum acmalisin.");return}if(Ke){k(!0);try{await hre(e.id,{phone:ee||null,crypto:be||null}),G.success("Iletisim bilgileri guncellendi."),await n()}catch(z){console.error("[Settings] Failed to update contact info",z),G.error("Iletisim bilgileri kaydedilemedi.")}finally{k(!1)}}},_t=()=>{C((e==null?void 0:e.contactPhone)??""),P((e==null?void 0:e.contactCrypto)??"")},tn=()=>{var z;o||(z=c.current)==null||z.click()},Mn=()=>{G.success("nbellek temizlendi")},ln=()=>{G.success("Veriler da aktarld")},xt="border-white/10 bg-slate-900/60 text-slate-100 backdrop-blur-lg";return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-emerald-950 text-slate-100",children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("div",{className:"absolute -left-24 top-0 h-72 w-72 rounded-full bg-emerald-500/20 blur-3xl"}),l.jsx("div",{className:"absolute right-[-20%] bottom-[-25%] h-[28rem] w-[28rem] rounded-full bg-cyan-500/10 blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 flex flex-col gap-6 px-4 py-8 sm:px-6 lg:px-10",children:[l.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-4 sm:p-6 backdrop-blur-lg",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Ayarlar"}),l.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"Kulbn kiiselletir, bildirim tercihlerini dzenle ve verilerini ynet."})]})]}),l.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-emerald-300/30 bg-emerald-500/10 px-4 py-2 text-sm text-emerald-100 shadow-lg",children:[l.jsx(PE,{className:"h-4 w-4"}),l.jsxs("span",{children:["Tema: ",t==="dark"?"Koyu":"Ak"]})]})]})}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr,0.8fr]",children:[l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2 text-xl",children:[l.jsx(Vre,{className:"h-5 w-5 text-emerald-300"}),"Takm Kimlii"]})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-300",children:"Logonu ykleyerek kulbn dier menajerlerden ayr. PNG, JPG veya SVG formatnda en fazla 512 KB boyutunda bir grsel seebilirsin."}),l.jsx("input",{ref:c,type:"file",accept:u,className:"hidden",onChange:te}),l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[l.jsx("div",{className:"flex h-20 w-20 items-center justify-center overflow-hidden rounded-2xl border border-emerald-300/30 bg-slate-950/70 shadow-inner",children:s?l.jsx("img",{src:s,alt:"Takm logosu",className:"h-full w-full object-cover"}):l.jsx("span",{className:"text-3xl",children:""})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx(fe,{onClick:tn,disabled:!e||o,className:"bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",children:o?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Kaydediliyor"]}):"Logo Ykle"}),l.jsx(fe,{variant:"ghost",onClick:ut,disabled:!e||o||!s,className:"text-slate-300 hover:text-emerald-100",children:"Logoyu Kaldr"})]}),l.jsxs("p",{className:"text-xs text-slate-400",children:[(e==null?void 0:e.teamName)??"Takmn"," logosu yenilendiinde st mende ve dier sayfalarda otomatik olarak gncellenir."]})]})]})]})]}),l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(jE,{className:"h-5 w-5 text-emerald-300"}),"Kulup ve Stadyum Adi"]})}),l.jsxs(Je,{className:"space-y-5",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm text-slate-300",children:["Kulup adi: ",l.jsx("span",{className:"font-semibold text-emerald-200",children:(e==null?void 0:e.teamName)??"Takimim"})]}),l.jsxs("p",{className:"text-xs text-slate-400",children:["Degistirme maliyeti: ",Ug," elmas"]}),l.jsx(fe,{variant:"secondary",className:"bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",onClick:()=>{y((e==null?void 0:e.teamName)??""),h(!0)},children:"Kulup adini degistir"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm text-slate-300",children:["Stadyum adi: ",l.jsx("span",{className:"font-semibold text-emerald-200",children:j??"Stadyumunuz"})]}),l.jsxs("p",{className:"text-xs text-slate-400",children:["Degistirme maliyeti: ",zg," elmas"]}),l.jsx(fe,{variant:"outline",className:"border-emerald-400/40 text-emerald-100 hover:bg-emerald-500/20",onClick:()=>{b(j??""),g(!0)},children:"Stadyum adini degistir"})]}),l.jsxs("p",{className:"text-xs text-slate-400",children:["Mevcut bakiye: ",l.jsx("span",{className:"font-semibold text-emerald-200",children:r})," elmas"]})]})]}),l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(Gre,{className:"h-5 w-5 text-emerald-300"}),"Iletisim Bilgileri"]})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-300",children:"Diger menajerlerin sana ulasmasi icin iletisim kanallarini kaydet. Bu bilgiler yalnizca paylasim izninle goruntulenir."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"contact-phone",className:"text-xs uppercase tracking-wide text-emerald-200/70",children:"Telefon numarasi"}),l.jsx(Xn,{id:"contact-phone",value:E,onChange:z=>C(z.target.value),placeholder:"+90 555 000 00 00",inputMode:"tel",disabled:!e||R}),l.jsx("p",{className:"text-xs text-slate-400",children:"Numarani uluslararasi formatta yazabilirsin. Kaydettiginde yalnizca kulubun resmi iletisim kanalindan paylasilir."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(qn,{htmlFor:"contact-crypto",className:"flex items-center gap-2 text-xs uppercase tracking-wide text-emerald-200/70",children:[l.jsx(tse,{className:"h-4 w-4"}),"Kripto hesabi"]}),l.jsx(Xn,{id:"contact-crypto",value:S,onChange:z=>P(z.target.value),placeholder:"USDT (TRC20) cuzdan adresi",disabled:!e||R}),l.jsx("p",{className:"text-xs text-slate-400",children:"Kripto odemeleri icin tercih ettigin cuzdan adresini veya borsa hesap bilgisini ekleyebilirsin."})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsx(fe,{type:"button",variant:"ghost",className:"text-slate-300 hover:text-emerald-100",onClick:_t,disabled:!Ke||R,children:"Alanlari sifirla"}),l.jsx(fe,{type:"button",onClick:Zt,disabled:!e||R||!Ke,className:"bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",children:R?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Kaydediliyor"]}):"Bilgileri kaydet"})]})]})]}),l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(PE,{className:"h-5 w-5 text-emerald-300"}),"Grnm"]})}),l.jsxs(Je,{className:"space-y-3",children:[l.jsx("p",{className:"text-sm text-slate-300",children:"Oyun deneyimini tutarl klmak iin koyu tema varsaylan hale getirildi ve tm kullanclar iin etkin."}),l.jsx("p",{className:"text-xs text-slate-400",children:"Sistem temandan bamsz olarak arayz koyu modda alr. Gelecekteki gncellemelerde farkl tema seenekleri eklenebilir."})]})]}),l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2 text-xl",children:[l.jsx(eV,{className:"h-5 w-5 text-emerald-300"}),"Gunluk Oduller ve VIP"]})}),l.jsxs(Je,{className:"space-y-6",children:[l.jsx("div",{className:"rounded-xl border border-emerald-300/20 bg-emerald-500/5 p-4",children:l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-100",children:"Gunluk giris odulu"}),l.jsx("p",{className:"text-sm text-slate-300",children:"Her giriste enerji, moral veya saglik kitlerinden biri otomatik olarak eklenir."}),l.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:["Son odul tarihi:"," ",l.jsx("span",{className:"font-medium text-emerald-200",children:de})]})]}),l.jsx(fe,{onClick:Q,disabled:!Ie||De,variant:"outline",className:"mt-2 w-full border-emerald-400/40 text-emerald-100 hover:bg-emerald-500/20 sm:mt-0 sm:w-auto",children:De?"Bugun alindi":"Odulu kontrol et"})]})}),l.jsx("div",{className:"rounded-xl border border-emerald-300/20 bg-slate-900/60 p-4",children:l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(WI,{className:`h-5 w-5 ${L?"text-amber-300":"text-slate-500"}`}),l.jsxs("p",{className:"font-semibold text-slate-100",children:["VIP durumu:"," ",l.jsx("span",{className:L?"text-amber-300":"text-slate-300",children:L?"Aktif":"Pasif"})]})]}),l.jsxs("div",{className:"text-sm text-slate-300",children:[l.jsx("p",{children:"- Gunluk +1 enerji, moral ve saglik kiti"}),l.jsxs("p",{children:["- Sureler %",ce," kisalir"]}),l.jsx("p",{children:"- Ayda 1 yildiz oyuncu karti"})]}),l.jsxs("div",{className:"text-xs text-slate-400",children:[l.jsxs("p",{children:["Secili paket:"," ",l.jsx("span",{className:"font-medium text-emerald-200",children:Pe})]}),l.jsxs("p",{children:["VIP bitis:"," ",l.jsx("span",{className:"font-medium text-emerald-200",children:re})]}),l.jsxs("p",{children:["Son yildiz karti:"," ",l.jsx("span",{className:"font-medium text-emerald-200",children:ze})]}),l.jsxs("p",{children:["Kart kredisi:"," ",l.jsx("span",{className:"font-medium text-emerald-200",children:ie})]})]})]}),L?l.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto",children:[l.jsx(fe,{onClick:ye,disabled:!Ie||!ae,className:"bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",children:K}),l.jsx(fe,{variant:"outline",onClick:()=>W("/store/vip"),disabled:!Ie,className:"border-emerald-400/40 text-emerald-100 hover:bg-emerald-500/20",children:"VIP paketlerini goruntule"}),l.jsx(fe,{variant:"ghost",onClick:Z,disabled:!Ie,className:"text-slate-300 hover:text-emerald-100",children:"VIP devre disi"})]}):l.jsx("div",{className:"flex w-full flex-col gap-2 sm:w-auto",children:l.jsx(fe,{onClick:()=>W("/store/vip"),disabled:!Ie,className:"bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",children:"VIP paketlerini goruntule"})})]})})]})]})]}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsx(Ct,{children:"Bildirimler"})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(qn,{className:"font-medium",children:"Ma Bildirimleri"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Ma balamadan nce bildirim al"})]}),l.jsx(ql,{defaultChecked:!0})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(qn,{className:"font-medium",children:"Antrenman Bildirimleri"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Antrenman tamamlandnda bildirim al"})]}),l.jsx(ql,{defaultChecked:!0})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(qn,{className:"font-medium",children:"Transfer Bildirimleri"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Transfer dneminde frsatlar iin bildirim al"})]}),l.jsx(ql,{})]})]})]}),l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(ese,{className:"h-5 w-5 text-emerald-300"}),"Ses ve Performans"]})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(qn,{className:"font-medium",children:"Ses Efektleri"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Ma srasnda ses efektlerini oynat"})]}),l.jsx(ql,{defaultChecked:!0})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(qn,{className:"font-medium",children:"Animasyonlar"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Gei animasyonlarn azalt"})]}),l.jsx(ql,{})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{children:"Grafik Kalitesi"}),l.jsxs(vi,{defaultValue:"high",children:[l.jsx($s,{children:l.jsx(qi,{})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"low",children:"Dk"}),l.jsx(zt,{value:"medium",children:"Orta"}),l.jsx(zt,{value:"high",children:"Yksek"})]})]})]})]})]})]}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsx(Ct,{children:"Dil ve Blge"})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{children:"Dil"}),l.jsxs(vi,{defaultValue:"tr",children:[l.jsx($s,{children:l.jsx(qi,{})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"tr",children:"Trke"}),l.jsx(zt,{value:"en",children:"English"}),l.jsx(zt,{value:"de",children:"Deutsch"}),l.jsx(zt,{value:"es",children:"Espaol"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{children:"Para Birimi"}),l.jsxs(vi,{defaultValue:"try",children:[l.jsx($s,{children:l.jsx(qi,{})}),l.jsxs(Ws,{children:[l.jsx(zt,{value:"try",children:"Trk Liras ()"}),l.jsx(zt,{value:"eur",children:"Euro ()"}),l.jsx(zt,{value:"usd",children:"US Dollar ($)"}),l.jsx(zt,{value:"gbp",children:"British Pound ()"})]})]})]})]})]}),l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex items-center gap-2",children:[l.jsx(jE,{className:"h-5 w-5 text-emerald-300"}),"Veri Ynetimi"]})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs(fe,{variant:"outline",className:"w-full justify-start border-white/20 bg-white/5 text-slate-100 hover:bg-white/10",onClick:ln,children:[l.jsx(jre,{className:"mr-2 h-4 w-4"}),"Verileri Da Aktar"]}),l.jsxs(fe,{variant:"outline",className:"w-full justify-start border-white/20 bg-white/5 text-slate-100 hover:bg-white/10",onClick:Mn,children:[l.jsx(Jre,{className:"mr-2 h-4 w-4"}),"nbellei Temizle"]})]}),l.jsx("div",{className:"border-t border-white/10 pt-4",children:l.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Oyun Verisi:"}),l.jsx("span",{children:"2.4 MB"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"nbellek:"}),l.jsx("span",{children:"15.8 MB"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Toplam:"}),l.jsx("span",{children:"18.2 MB"})]})]})})]})]})]}),l.jsxs(Ue,{className:xt,children:[l.jsx(It,{children:l.jsx(Ct,{children:"Hakknda"})}),l.jsxs(Je,{children:[l.jsxs("div",{className:"space-y-3 text-sm text-slate-300",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Versiyon:"}),l.jsx("span",{children:"1.0.0"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Son Gncelleme:"}),l.jsx("span",{children:"18 Austos 2025"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Gelitirici:"}),l.jsx("span",{children:"Turhan KAYAER"})]})]}),l.jsx("div",{className:"mt-4 border-t border-white/10 pt-4",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx(fe,{variant:"ghost",className:"w-full justify-start text-sm text-slate-200 hover:text-emerald-100",children:"Gizlilik Politikas"}),l.jsx(fe,{variant:"ghost",className:"w-full justify-start text-sm text-slate-200 hover:text-emerald-100",children:"Kullanm artlar"}),l.jsx(fe,{variant:"ghost",className:"w-full justify-start text-sm text-slate-200 hover:text-emerald-100",children:"Destek"})]})})]})]})]})]}),l.jsx(Go,{open:d,onOpenChange:z=>{h(z),z||y("")},children:l.jsxs(Ji,{children:[l.jsxs(Ho,{children:[l.jsx(Ko,{children:"Kulup adini guncelle"}),l.jsxs(ul,{children:["Yeni kulup adini gir ve ",Ug," elmas ile onayla."]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"club-name",children:"Kulup adi"}),l.jsx(Xn,{id:"club-name",value:w,onChange:z=>y(z.target.value),placeholder:(e==null?void 0:e.teamName)??"Takimin",maxLength:pu})]}),l.jsxs(Vm,{className:"gap-2 sm:gap-0",children:[l.jsx(fe,{variant:"ghost",onClick:()=>h(!1),children:"Vazgec"}),l.jsxs(fe,{onClick:tt,disabled:_,children:[_?l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Onayla (",Ug,")"]})]})]})}),l.jsx(Go,{open:m,onOpenChange:z=>{g(z),z||b("")},children:l.jsxs(Ji,{children:[l.jsxs(Ho,{children:[l.jsx(Ko,{children:"Stadyum adini guncelle"}),l.jsxs(ul,{children:["Yeni stadyum adini gir ve ",zg," elmas ile onayla."]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qn,{htmlFor:"stadium-name",children:"Stadyum adi"}),l.jsx(Xn,{id:"stadium-name",value:T,onChange:z=>b(z.target.value),placeholder:j??"Stadyum",maxLength:pu})]}),l.jsxs(Vm,{className:"gap-2 sm:gap-0",children:[l.jsx(fe,{variant:"ghost",onClick:()=>g(!1),children:"Vazgec"}),l.jsxs(fe,{onClick:me,disabled:A,children:[A?l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Onayla (",zg,")"]})]})]})})]})}const $fe=[{id:"instagram",label:"Instagram",description:"Kulubumuzun son duyurulari, mac ozetleri ve etkinliklerini buradan takip edebilirsin.",href:"https://instagram.com/FHSfootball",icon:Bre,accent:"from-pink-500/20 to-rose-500/10"},{id:"whatsapp",label:"WhatsApp",description:"Dogrudan iletisim icin WhatsApp hattimizi kullanabilirsin. Mesajlara haftanin her gunu yanit veriyoruz.",href:"https://wa.me/905550000000",icon:Wre,accent:"from-emerald-500/25 to-emerald-400/10"},{id:"telegram",label:"Telegram",description:"Toplulugumuza katil ve transfer haberlerini ilk sen ogrenen ol.",href:"https://t.me/FHSfootball",icon:qre,accent:"from-sky-500/25 to-cyan-500/10"},{id:"youtube",label:"YouTube",description:"Haftalik ozetler, egitimler ve menajerlik ipuclari icin YouTube kanalimiz aktif.",href:"https://youtube.com/@FHSfootball",icon:nse,accent:"from-red-500/25 to-red-400/10"}],Wfe=()=>{const t=e=>{typeof window>"u"||window.open(e,"_blank","noopener,noreferrer")};return l.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-emerald-950 text-slate-100",children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("div",{className:"absolute -left-20 top-0 h-64 w-64 rounded-full bg-emerald-400/10 blur-3xl"}),l.jsx("div",{className:"absolute right-[-10%] bottom-[-15%] h-[22rem] w-[22rem] rounded-full bg-cyan-500/10 blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 mx-auto flex w-full max-w-5xl flex-col gap-6 px-4 py-8 sm:px-8",children:[l.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-4 sm:p-6 backdrop-blur-lg",children:l.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold",children:"Iletisim"}),l.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"Oyuncularimiz ve menajerlerimiz icin resmi iletisim kanallarimiz. Ornek baglantilar yakinda guncellenecek."})]})]})})}),l.jsx("div",{className:"grid gap-5 md:grid-cols-2",children:$fe.map(e=>{const n=e.icon;return l.jsxs(Ue,{className:"border-white/10 bg-slate-900/60 backdrop-blur-lg transition hover:border-emerald-300/30 hover:shadow-xl hover:shadow-emerald-500/10",children:[l.jsx(It,{children:l.jsxs("div",{className:`inline-flex items-center gap-2 rounded-full bg-gradient-to-r ${e.accent} px-3 py-1 text-xs font-medium uppercase tracking-wide text-emerald-100`,children:[l.jsx(n,{className:"h-4 w-4"}),e.label]})}),l.jsxs(Je,{className:"space-y-4",children:[l.jsxs(Ct,{className:"text-lg text-slate-100",children:[e.label," Kanalimiz"]}),l.jsx("p",{className:"text-sm text-slate-300",children:e.description}),l.jsxs(fe,{type:"button",className:"w-full bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",onClick:()=>t(e.href),children:[e.label," sayfasina git"]})]})]},e.id)})}),l.jsx(Ue,{className:"border-white/10 bg-slate-900/60 backdrop-blur-lg",children:l.jsxs(Je,{className:"flex flex-col gap-3 p-4 text-sm text-slate-300 sm:flex-row sm:items-center sm:justify-between sm:p-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-100",children:"Destek ekibi ile iletisime gec"}),l.jsx("p",{children:"Bekledigimiz sayfalar hazir olana kadar bu ornek hesaplari kullanabilirsin."})]}),l.jsx(fe,{type:"button",variant:"outline",className:"border-emerald-400/50 text-emerald-100 hover:bg-emerald-500/10",onClick:()=>t("mailto:support@FHSfootball.test"),children:"support@FHSfootball.test"})]})})]})]})};function Gfe(){return l.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-blue-50 p-6 text-center",children:l.jsxs("div",{className:"space-y-6 max-w-md",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("h1",{className:"text-8xl font-bold text-blue-600",children:"404"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Page Not Found"}),l.jsx("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or may have been moved."})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[l.jsx(fe,{asChild:!0,children:l.jsx("a",{href:"/",children:"Return Home"})}),l.jsx(fe,{variant:"outline",onClick:()=>window.history.back(),children:"Go Back"})]})]})})}const Hfe=({pack:t,onClose:e})=>{const{purchase:n}=Ni(),r=async()=>{t&&(await n(t),e())};return l.jsx(Go,{open:!!t,onOpenChange:e,children:l.jsxs(Ji,{children:[l.jsx(Ho,{children:l.jsx(Ko,{children:"Kripto ile deme"})}),l.jsx("p",{children:"Czdan baland (simlasyon)"}),t&&l.jsxs("div",{className:"mt-4 space-y-1 text-sm",children:[l.jsx("div",{children:"A creti: ~0.001 ETH"}),t.priceFiat&&l.jsxs("div",{children:["Toplam: ",t.priceFiat.toFixed(2)]})]}),l.jsx(Vm,{children:l.jsx(fe,{onClick:r,"data-testid":"checkout-confirm",children:"demeyi Onayla"})})]})})},Kfe=({packs:t,onSelect:e})=>l.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.map(n=>l.jsxs(Ue,{"data-testid":`diamond-pack-${n.id}`,className:"hover:shadow-md transition-transform hover:scale-105",children:[l.jsx(It,{children:l.jsxs(Ct,{className:"flex justify-between items-center",children:[l.jsx("span",{children:n.label}),n.bestDeal&&l.jsx("span",{className:"text-xs text-green-600",children:"Best Deal"})]})}),l.jsxs(Je,{className:"flex flex-col items-center gap-2",children:[l.jsxs("span",{className:"flex items-center gap-1 text-lg font-bold",children:[l.jsx(Vf,{className:"h-6 w-6 text-blue-500"}),n.amount]}),n.priceFiat&&l.jsxs("span",{className:"text-sm text-muted-foreground",children:["",n.priceFiat.toFixed(2)]})]}),l.jsx(C3,{children:l.jsx(fe,{className:"w-full",onClick:()=>e(n),"data-testid":`diamond-buy-${n.id}`,children:"Satn Al"})})]},n.id))}),qfe=[{id:"small",amount:200,priceFiat:39.99,label:"Small"},{id:"medium",amount:900,priceFiat:199.99,label:"Medium",bestDeal:!0},{id:"large",amount:2800,priceFiat:399.99,label:"Large"},{id:"mega",amount:6e3,priceFiat:749.99,label:"Mega"}],Yfe=()=>{const{user:t}=Vn(),{balance:e}=Ni(),[n,r]=p.useState(null);return t?l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{fallbackPath:"/"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Elmas Magazasi"}),l.jsx("p",{className:"text-muted-foreground",children:"Oyun deneyimini gelistirmek icin elmas satin al."})]})]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Bakiyen: ",e," elmas"]})]}),l.jsx(Kfe,{packs:qfe,onSelect:r}),l.jsx(Hfe,{pack:n,onClose:()=>r(null)})]}):l.jsx("div",{className:"p-4 text-center",children:"Giris yapmalisin"})},Qfe=["Ahmet","Mehmet","Ali","Can","Emre","Mert"],Xfe=["GK","DEF","MID","FWD"],Jfe=["Hzl","Gl","Teknik","Dayankl"];function b_(t){return t[Math.floor(Math.random()*t.length)]}function Zfe(t,e){return Math.floor(Math.random()*(e-t+1))+t}function eme(){const t=Math.random(),e=Math.min(1,t+Math.random()*.2);return{name:b_(Qfe),age:Zfe(16,19),position:b_(Xfe),overall:t,potential:e,traits:[b_(Jfe)],attributes:{topSpeed:Math.random(),shooting:Math.random()}}}const ux=2*60*60*1e3;function tme(t,e){const n=pn(Me,"users",t,"academyCandidates"),r=Pr(n,gr("status","==","pending"),ts("createdAt","desc"));return Vs(r,s=>{const i=s.docs.map(o=>({id:o.id,...o.data()}));e(i)})}async function nme(t){const e=kt(Me,"users",t),n=pn(e,"academyCandidates"),r=new Date,s=new Date(r.getTime()+ux),i=eme(),o=kt(n),a={id:o.id,status:"pending",createdAt:Dt.fromDate(r),player:i,source:"academy"};try{return await ro(Me,async c=>{var m,g;const h=(g=(m=(await c.get(e)).data().academy)==null?void 0:m.nextPullAt)==null?void 0:g.toDate();if(h&&h>r)throw new Error("2 saat beklemelisin");c.set(o,{status:"pending",createdAt:cl(),player:i,source:"academy"}),c.set(e,{academy:{lastPullAt:cl(),nextPullAt:Dt.fromDate(s)}},{merge:!0})}),G.success("Yeni aday eklendi"),a}catch(c){throw console.warn(c),G.error(c.message||"lem baarsz"),c}}async function rme(t){const e=kt(Me,"users",t),n=new Date;try{await ro(Me,async r=>{if(((await r.get(e)).data().diamondBalance??0)<180)throw new Error("Yetersiz elmas");r.update(e,{diamondBalance:m0(-180),"academy.lastPullAt":cl(),"academy.nextPullAt":Dt.fromDate(n)})}),G.success("Sre sfrland")}catch(r){throw console.warn(r),G.error(r.message||"lem baarsz"),r}}function sme(t){return{GK:"GK",DEF:"CB",MID:"CM",FWD:"ST"}[t]??"CM"}function ime(t,e){const n=()=>parseFloat(Math.random().toFixed(3)),r=sme(e.position),s={strength:n(),acceleration:n(),topSpeed:e.attributes.topSpeed,dribbleSpeed:n(),jump:n(),tackling:n(),ballKeeping:n(),passing:n(),longBall:n(),agility:n(),shooting:e.attributes.shooting,shootPower:n(),positioning:n(),reaction:n(),ballControl:n()};return{id:t,name:e.name,position:r,roles:Kn(r),overall:p0(r,s),potential:e.potential,attributes:s,age:e.age,height:180,weight:75,squadRole:"reserve",condition:parseFloat((.65+Math.random()*.3).toFixed(3)),motivation:parseFloat((.6+Math.random()*.35).toFixed(3)),injuryStatus:"healthy"}}async function ome(t,e){const n=kt(Me,"users",t,"academyCandidates",e);try{const r=await Sl(n);if(!r.exists())throw new Error("Aday bulunamad");const s=r.data(),i=ime(e,s.player);await UI(t,i),await I4(n,{status:"accepted"}),G.success("Oyuncu takma eklendi")}catch(r){throw console.warn(r),G.error("lem baarsz"),r}}async function ame(t,e){const n=kt(Me,"users",t,"academyCandidates",e);try{await I4(n,{status:"released"}),G.success("Oyuncu serbest brakld")}catch(r){throw console.warn(r),G.error("lem baarsz"),r}}const lme=({nextPullAt:t,onReset:e,canReset:n})=>{const[r,s]=p.useState(0);p.useEffect(()=>{const d=()=>{if(!t){s(0);return}const m=t.getTime()-Date.now();s(m>0?m:0)};d();const h=setInterval(d,1e3);return()=>clearInterval(h)},[t]);const i=(ux-r)/ux*100,o=Math.floor(r/36e5).toString().padStart(2,"0"),a=Math.floor(r%36e5/6e4).toString().padStart(2,"0"),c=Math.floor(r%6e4/1e3).toString().padStart(2,"0"),u=r===0;return l.jsxs(Ue,{children:[l.jsx(It,{children:l.jsx(Ct,{children:"Oyuncu retimi"})}),l.jsxs(Je,{className:"space-y-2",children:[l.jsx(Yd,{value:i,className:"h-2"}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("span",{children:["Sonraki retim: ",o,":",a,":",c]}),l.jsx(fe,{onClick:e,disabled:!n||u,size:"sm",variant:"secondary","data-testid":"academy-reset",children:"Hzlandr (5)"})]})]})]})},cme=t=>({GK:"GK",DEF:"CB",MID:"CM",FWD:"ST"})[t]||"CM",ume=({candidate:t,onAccept:e,onRelease:n})=>{const{player:r}=t,s=Kn(cme(r.position)),i=r.name.split(" ").map(h=>h[0]).join(""),o=r.attributes,a=[["Hz",o.topSpeed??r.overall??0],["ut",o.shooting??r.overall??0]],c=["strength","acceleration","dribbleSpeed","jump","tackling","ballKeeping","passing","longBall","agility","shootPower","positioning","reaction","ballControl"],u={strength:"G",acceleration:"vme",topSpeed:"Hz",dribbleSpeed:"Top Srme",jump:"Zplama",tackling:"Savunma",ballKeeping:"Top Saklama",passing:"Pas",longBall:"Uzun Pas",agility:"eviklik",shooting:"ut",shootPower:"ut Gc",positioning:"Pozisyon Alma",reaction:"Reaksiyon",ballControl:"Top Kontrol"},d=c.map(h=>{const m=o==null?void 0:o[h];return typeof m!="number"?null:[u[h],m]}).filter(h=>h!==null);return l.jsxs(Ue,{"data-testid":`academy-candidate-${t.id}`,className:"group relative flex h-full flex-col overflow-hidden border border-white/10 bg-slate-900/70 p-5 text-slate-100 shadow-lg backdrop-blur transition-all duration-300 hover:-translate-y-1 hover:border-cyan-400/40 hover:shadow-xl",children:[l.jsx("div",{className:"absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-transparent to-emerald-500/20"})}),l.jsxs("div",{className:"relative flex flex-1 flex-col gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-start lg:justify-between",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-cyan-500 to-emerald-500 text-lg font-semibold text-white shadow-lg shadow-cyan-500/20",children:i}),l.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-7 w-7 items-center justify-center rounded-full border border-white/20 bg-slate-950/80 text-[11px] font-bold text-cyan-100 shadow-md shadow-cyan-500/20",children:r.position})]}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h3",{className:"truncate text-base font-semibold tracking-tight",children:r.name}),l.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs",children:[l.jsxs(Mt,{variant:"secondary",className:"border-white/20 bg-white/10 text-white backdrop-blur",children:[r.age," ya"]}),l.jsxs("div",{className:"flex items-center gap-1 rounded-full border border-white/10 bg-white/10 px-2 py-1 text-[11px] font-medium text-cyan-100 shadow-inner shadow-cyan-500/10",children:[l.jsx(hc,{className:"h-3 w-3"}),l.jsxs(lh,{children:[l.jsx(ch,{asChild:!0,children:l.jsx("span",{className:"font-semibold",children:Hn(r.overall)})}),l.jsxs($c,{children:["Maks. Potansiyel: ",Hn(r.potential)]})]})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(h=>l.jsx(Mt,{variant:"outline",className:"border-white/20 bg-transparent text-cyan-100",children:h},h))})]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>e(t.id),className:"rounded-full border border-transparent bg-white/5 px-4 text-xs font-semibold text-cyan-100 shadow-sm transition hover:border-cyan-400/60 hover:bg-cyan-500/20 hover:text-white",children:"Takma Al"}),l.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>n(t.id),className:"rounded-full border border-transparent bg-white/5 px-4 text-xs font-semibold text-slate-200 shadow-sm transition hover:border-rose-500/60 hover:bg-rose-500/20 hover:text-white",children:"Serbest Brak"})]})]}),l.jsx("div",{className:"space-y-1",children:a.map(([h,m])=>l.jsx($n,{label:h,value:m,className:"text-slate-200"},h))}),d.length>0&&l.jsx("div",{className:"mt-2 hidden space-y-1 text-xs text-slate-300 group-hover:block",children:d.map(([h,m])=>l.jsx($n,{label:h,value:m,className:"text-slate-200"},h))})]})]})},dme=({candidates:t,onAccept:e,onRelease:n})=>t.length===0?l.jsx("div",{className:"flex justify-center py-6",children:l.jsx(Qd,{title:"Altyap Adaylar",triggerLabel:"Altyap aday yokken bilgi mesajn a",message:"Henz aday yok"})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(r=>l.jsx(ume,{candidate:r,onAccept:e,onRelease:n},r.id))}),Mj="academyCandidates",E_="academyNextPullAt",hme=()=>{const{user:t}=Vn(),{balance:e}=Ni(),[n,r]=p.useState(null),[s,i]=p.useState([]),[o,a]=p.useState(!1);p.useEffect(()=>{const y=localStorage.getItem(Mj);if(y)try{const b=JSON.parse(y);i(b)}catch(b){console.warn(b)}const T=localStorage.getItem(E_);if(T){const b=parseInt(T,10);isNaN(b)||r(new Date(b))}},[]),p.useEffect(()=>{if(t)try{const y=kt(Me,"users",t.id);return Vs(y,T=>{var I;const b=T.data(),_=(I=b==null?void 0:b.academy)==null?void 0:I.nextPullAt;r(_?_.toDate():null)})}catch(y){console.warn(y)}},[t]),p.useEffect(()=>{if(t)try{return tme(t.id,i)}catch(y){console.warn(y)}},[t]),p.useEffect(()=>{localStorage.setItem(Mj,JSON.stringify(s))},[s]),p.useEffect(()=>{n?localStorage.setItem(E_,n.getTime().toString()):localStorage.removeItem(E_)},[n]),p.useEffect(()=>{const y=()=>{if(!n){a(!0);return}a(n.getTime()<=Date.now())};y();const T=setInterval(y,1e3);return()=>clearInterval(T)},[n]);const c=async()=>{if(t)try{const y=await nme(t.id);i(T=>[y,...T]),r(new Date(Date.now()+ux))}catch(y){console.warn(y)}},u=async()=>{if(t)try{await rme(t.id)}catch(y){console.warn(y)}},d=async y=>{if(t)try{await ome(t.id,y),i(T=>T.filter(b=>b.id!==y))}catch(T){console.warn(T)}},h=async y=>{if(t)try{await ame(t.id,y),i(T=>T.filter(b=>b.id!==y))}catch(T){console.warn(T)}};if(!t)return l.jsx("div",{className:"p-4",children:"Giri yapmalsn"});const m=s.length,g=s.filter(y=>y.player.potential>=.8).length,w=m?Math.round(s.reduce((y,T)=>y+T.player.age,0)/m):0;return l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qr,{}),l.jsx("h1",{className:"text-2xl font-bold",children:"Altyap"})]}),l.jsx(fe,{onClick:c,disabled:!o,"data-testid":"academy-pull",children:"Oyuncu ret"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsx(Ue,{children:l.jsxs(Je,{className:"p-4 text-center",children:[l.jsx("div",{className:"text-2xl font-bold",children:m}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Gen Oyuncu"})]})}),l.jsx(Ue,{children:l.jsxs(Je,{className:"p-4 text-center",children:[l.jsx("div",{className:"text-2xl font-bold",children:g}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Yetenekli"})]})}),l.jsx(Ue,{children:l.jsxs(Je,{className:"p-4 text-center",children:[l.jsx("div",{className:"text-2xl font-bold",children:w}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Ort. Ya"})]})})]}),l.jsx(lme,{nextPullAt:n,onReset:u,canReset:e>=100}),l.jsx("h2",{className:"text-xl font-semibold",children:"Gen Oyuncular"}),l.jsx(dme,{candidates:s,onAccept:d,onRelease:h})]})};function fme(){const{user:t}=Vn(),[e,n]=p.useState(null),[r,s]=p.useState([]);return p.useEffect(()=>{let i;return(async()=>{if(!t)return;const a=await Ac(t.id);if(n(a),!a){s([]);return}i=$4(a,async c=>{if(c.length===0){const u=await Za(a);s(u.map(d=>({id:d.id,teamId:d.id,name:d.name,P:0,W:0,D:0,L:0,GF:0,GA:0,GD:0,Pts:0})))}else s(c)})})(),()=>{i==null||i()}},[t]),l.jsxs("div",{className:"p-4",children:[l.jsx("h1",{className:"text-xl font-bold mb-4",children:"Puan Durumu"}),e?l.jsx(Ue,{children:l.jsx(Je,{className:"p-0",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left border-b",children:[l.jsx("th",{className:"p-2 w-10",children:"S"}),l.jsx("th",{className:"p-2",children:"Takm"}),l.jsx("th",{className:"p-2",children:"P"}),l.jsx("th",{className:"p-2",children:"W"}),l.jsx("th",{className:"p-2",children:"D"}),l.jsx("th",{className:"p-2",children:"L"}),l.jsx("th",{className:"p-2",children:"GF"}),l.jsx("th",{className:"p-2",children:"GA"}),l.jsx("th",{className:"p-2",children:"GD"}),l.jsx("th",{className:"p-2",children:"Pts"})]})}),l.jsx("tbody",{children:r.map((i,o)=>l.jsxs("tr",{"data-testid":`standings-row-${i.teamId}`,className:"border-b",children:[l.jsx("td",{className:"p-2",children:o+1}),l.jsx("td",{className:"p-2",children:i.name}),l.jsx("td",{className:"p-2",children:i.P}),l.jsx("td",{className:"p-2",children:i.W}),l.jsx("td",{className:"p-2",children:i.D}),l.jsx("td",{className:"p-2",children:i.L}),l.jsx("td",{className:"p-2",children:i.GF}),l.jsx("td",{className:"p-2",children:i.GA}),l.jsx("td",{className:"p-2",children:i.GD}),l.jsx("td",{className:"p-2",children:i.Pts})]},i.teamId))})]})})}):l.jsx("div",{className:"text-sm text-muted-foreground",children:"nce bir lige katln."})]})}const mme={legend:"Efsane",rare:"Nadir",common:"Klasik"};function pme({player:t,onRent:e,onRelease:n}){const[r,s]=p.useState(!1);p.useEffect(()=>{const a=setTimeout(()=>s(!0),50);return()=>clearTimeout(a)},[t]);const i=mme[t.rarity],o=p.useMemo(()=>`url("${encodeURI(t.image)}")`,[t.image]);return l.jsx("div",{className:"legend-card-wrapper",children:l.jsxs("div",{className:`legend-card ${r?"show":"reveal"} ${t.rarity}`,children:[l.jsx("div",{className:"legend-card-bg",style:{backgroundImage:o},"aria-hidden":!0}),l.jsxs("div",{className:"legend-card-content",children:[l.jsxs("div",{className:"legend-card-meta",children:[l.jsxs("span",{className:"legend-card-tag",children:["G ",t.rating]}),l.jsx("span",{className:`legend-card-rarity ${t.rarity}`,children:i})]}),l.jsxs("div",{className:"legend-card-actions",children:[e&&l.jsx(fe,{size:"sm",variant:"ghost",className:"legend-card-accept",onClick:()=>e(t),children:"Kabul Et"}),n&&l.jsx(fe,{size:"sm",variant:"ghost",className:"legend-card-release",onClick:()=>n(t),children:"Serbest Brak"})]})]})]})})}const Ny=[{id:1,name:"Pel",rating:98,rarity:"legend",weight:1,image:"/legend-images/Pel.png",position:"ST"},{id:2,name:"Diego Maradona",rating:97,rarity:"legend",weight:1,image:"/legend-images/Diego Maradona.png",position:"CAM"},{id:3,name:"Johan Cruyff",rating:96,rarity:"legend",weight:1,image:"/legend-images/Johan Cruyff.png",position:"LW"},{id:4,name:"Franz Beckenbauer",rating:96,rarity:"legend",weight:1,image:"/legend-images/Franz Beckenbauer.png",position:"CB"},{id:5,name:"Zinedine Zidane",rating:95,rarity:"legend",weight:1,image:"/legend-images/Zinedine Zidane.png",position:"CM"},{id:6,name:"Ronaldo Nazrio",rating:95,rarity:"legend",weight:1,image:"/legend-images/Ronaldo Nazrio.png",position:"ST"},{id:7,name:"Ronaldinho",rating:94,rarity:"legend",weight:1,image:"/legend-images/Ronaldinho.png",position:"CAM"},{id:8,name:"George Best",rating:94,rarity:"legend",weight:1,image:"/legend-images/George Best.png",position:"RW"},{id:9,name:"Ferenc Pusks",rating:96,rarity:"legend",weight:1,image:"/legend-images/Ferenc Pusks.png",position:"ST"},{id:10,name:"Lev Yashin",rating:95,rarity:"legend",weight:1,image:"/legend-images/Lev Yashin.png",position:"GK"},{id:11,name:"Paolo Maldini",rating:95,rarity:"legend",weight:1,image:"/legend-images/Paolo Maldini.png",position:"CB"},{id:12,name:"Roberto Baggio",rating:94,rarity:"legend",weight:1,image:"/legend-images/Roberto Baggio.png",position:"CAM"},{id:13,name:"Thierry Henry",rating:94,rarity:"legend",weight:1,image:"/legend-images/Thierry Henry.png",position:"ST"},{id:14,name:"Xavi",rating:93,rarity:"legend",weight:1,image:"/legend-images/Xavi.png",position:"CM"},{id:15,name:"Andrs Iniesta",rating:93,rarity:"legend",weight:1,image:"/legend-images/Andrs Iniesta.png",position:"CM"},{id:16,name:"Eric Cantona",rating:91,rarity:"rare",weight:3,image:"/legend-images/Eric Cantona.png",position:"ST"},{id:17,name:"Zico",rating:92,rarity:"rare",weight:3,image:"/legend-images/Zico.png",position:"CAM"},{id:18,name:"Lothar Matthus",rating:92,rarity:"rare",weight:3,image:"/legend-images/Lothar Matthus.png",position:"CM"},{id:19,name:"Marco van Basten",rating:92,rarity:"rare",weight:3,image:"/legend-images/Marco van Basten.png",position:"ST"},{id:20,name:"Michel Platini",rating:91,rarity:"rare",weight:3,image:"/legend-images/Michel Platini.png",position:"CAM"},{id:21,name:"Garrincha",rating:92,rarity:"rare",weight:3,image:"/legend-images/Garrincha.png",position:"RW"},{id:22,name:"Eusbio",rating:92,rarity:"rare",weight:3,image:"/legend-images/Eusbio.png",position:"ST"},{id:23,name:"Gerd Mller",rating:91,rarity:"rare",weight:3,image:"/legend-images/Gerd Mller.png",position:"ST"},{id:24,name:"Bobby Charlton",rating:91,rarity:"rare",weight:3,image:"/legend-images/Bobby Charlton.png",position:"CM"},{id:25,name:"Ruud Gullit",rating:92,rarity:"rare",weight:3,image:"/legend-images/Ruud Gullit.png",position:"CM"},{id:26,name:"Hristo Stoichkov",rating:90,rarity:"rare",weight:3,image:"/legend-images/Hristo Stoichkov.png",position:"LW"},{id:27,name:"Rivaldo",rating:91,rarity:"rare",weight:3,image:"/legend-images/Rivaldo.png",position:"CAM"},{id:28,name:"Kak",rating:91,rarity:"rare",weight:3,image:"/legend-images/Kak.png",position:"CAM"},{id:29,name:"Ryan Giggs",rating:90,rarity:"rare",weight:3,image:"/legend-images/Ryan Giggs.png",position:"LM"},{id:30,name:"Dennis Bergkamp",rating:90,rarity:"rare",weight:3,image:"/legend-images/Dennis Bergkamp.png",position:"ST"},{id:31,name:"Patrick Vieira",rating:90,rarity:"rare",weight:3,image:"/legend-images/Patrick Vieira.png",position:"CM"},{id:32,name:"Peter Schmeichel",rating:91,rarity:"rare",weight:3,image:"/legend-images/Peter Schmeichel.png",position:"GK"},{id:33,name:"Franco Baresi",rating:91,rarity:"rare",weight:3,image:"/legend-images/Franco Baresi.png",position:"CB"},{id:34,name:"Andrea Pirlo",rating:90,rarity:"rare",weight:3,image:"/legend-images/Andrea Pirlo.png",position:"CM"},{id:35,name:"Oliver Kahn",rating:92,rarity:"rare",weight:3,image:"/legend-images/Oliver Kahn.png",position:"GK"},{id:36,name:"Alessandro Del Piero",rating:90,rarity:"rare",weight:3,image:"/legend-images/Alessandro Del Piero.png",position:"ST"},{id:37,name:"Kenny Dalglish",rating:90,rarity:"rare",weight:3,image:"/legend-images/Kenny Dalglish.png",position:"ST"},{id:38,name:"David Beckham",rating:89,rarity:"common",weight:6,image:"/legend-images/David Beckham.png",position:"RM"},{id:39,name:"Cafu",rating:88,rarity:"common",weight:6,image:"/legend-images/Cafu.png",position:"RB"},{id:40,name:"Roberto Carlos",rating:89,rarity:"common",weight:6,image:"/legend-images/Roberto Carlos.png",position:"LB"},{id:41,name:"Carles Puyol",rating:88,rarity:"common",weight:6,image:"/legend-images/Carles Puyol.png",position:"CB"},{id:42,name:"Fernando Hierro",rating:87,rarity:"common",weight:6,image:"/legend-images/Fernando Hierro.png",position:"CB"},{id:43,name:"Clarence Seedorf",rating:87,rarity:"common",weight:6,image:"/legend-images/Clarence Seedorf.png",position:"CM"},{id:44,name:"Pavel Nedvd",rating:88,rarity:"common",weight:6,image:"/legend-images/Pavel Nedvd.png",position:"LM"},{id:45,name:"Jay-Jay Okocha",rating:86,rarity:"common",weight:6,image:"/legend-images/Jay-Jay Okocha.png",position:"CAM"},{id:46,name:"Gheorghe Hagi",rating:88,rarity:"common",weight:6,image:"/legend-images/Gheorghe Hagi.png",position:"CAM"},{id:47,name:"Henrik Larsson",rating:87,rarity:"common",weight:6,image:"/legend-images/Henrik Larsson.png",position:"ST"},{id:48,name:"Didier Drogba",rating:89,rarity:"common",weight:6,image:"/legend-images/Didier Drogba.png",position:"ST"},{id:49,name:"Claude Makll",rating:87,rarity:"common",weight:6,image:"/legend-images/Claude Makll.png",position:"CM"},{id:50,name:"Scrates",rating:88,rarity:"common",weight:6,image:"/legend-images/Scrates.png",position:"CM"}];function gme(t){const e=t.reduce((r,s)=>r+s.weight,0);let n=Math.random()*e;for(const r of t)if(n-=r.weight,n<=0)return r;return t[t.length-1]}const Wg=250,aS=30,yme=1e3*60*60*24*aS,vme=Ny.length,xme="legend-pack-current",Dj=t=>`${xme}:${t}`,wme=()=>{const{user:t}=Vn(),{balance:e,spend:n}=Ni(),{vipNostalgiaFreeAvailable:r,consumeVipNostalgiaReward:s}=Xc(),[i,o]=p.useState(null),[a,c]=p.useState([]),[u,d]=p.useState([]),[h,m]=p.useState(!1),g=RB(),{contentRef:w,scale:y}=gC(g),T=g?{"--nostalgia-scale":y}:void 0,b=g&&y<.999,_=p.useMemo(()=>{const C=new Map;return Ny.forEach(S=>{C.set(S.id,S)}),C},[]);p.useEffect(()=>{let C=!0;const S=()=>{C&&(d([]),c([]),o(null))};return t?(m(!0),c([]),o(null),(async()=>{try{const[R,k]=await Promise.all([jn(t.id),nle(t.id)]);if(!C)return;if(!(R!=null&&R.players))d([]);else{const J=_me(R.players);d(J)}const W=k.map(({legendId:J,playerId:Q,expiresAt:le})=>{const O=_.get(J);return O?{...O,expiresAt:le,playerId:Q}:null}).filter(J=>!!J).sort((J,Q)=>J.expiresAt.getTime()-Q.expiresAt.getTime());c(W)}catch(R){console.warn(R)}finally{C&&m(!1)}})(),()=>{C=!1}):(S(),m(!1),()=>{C=!1})},[_,t]);const I=p.useMemo(()=>new Set(u),[u]);p.useEffect(()=>{if(!t||typeof window>"u")return;const C=Dj(t.id),S=window.localStorage.getItem(C);if(!S)return;const P=Number.parseInt(S,10);if(Number.isNaN(P)||I.has(P)){window.localStorage.removeItem(C);return}const R=_.get(P);if(!R){window.localStorage.removeItem(C);return}o(k=>(k==null?void 0:k.id)===R.id?k:R)},[_,I,t]),p.useEffect(()=>{if(!t||typeof window>"u")return;const C=Dj(t.id);i?window.localStorage.setItem(C,String(i.id)):window.localStorage.removeItem(C)},[i,t]);const A=p.useMemo(()=>Ny.every(C=>I.has(C.id)),[I]),M=u.length,j=async()=>{if(!t){G.error("Giris yapmalisin");return}if(i){G.info("nce mevcut kartn iin karar vermelisin");return}const C=!!r;if(!C&&e<Wg){G.error("Yeterli elmas yok");return}try{const S=Ny.filter(R=>!I.has(R.id));if(S.length===0){G.info("Tm nostalji oyuncularn topladn");return}C||await n(Wg);const P=gme(S);o(P),C&&(s(),G.success("VIP nostalji paketi ucretsiz acildi."))}catch(S){console.warn(S),G.error("Islem basarisiz")}},v=async C=>{if(!t)return;const S=new Date(Date.now()+yme);try{const P=await tle(t.id,C,S);c(R=>[...R,{...C,playerId:P.id,expiresAt:S}].sort((W,J)=>W.expiresAt.getTime()-J.expiresAt.getTime())),d(R=>R.includes(C.id)?R:[...R,C.id].sort((k,W)=>k-W)),G.success(`${C.name} ${aS} gnlne kadrona katld`),o(null)}catch(P){console.warn(P);const R=P instanceof Error?P.message:"lem baarsz";G.error(R)}},E=()=>{G.message("Kart serbest brakld"),o(null)};return l.jsxs("div",{className:"legend-pack-page",children:[l.jsx("div",{className:"legend-pack-gradient","aria-hidden":!0}),l.jsx("div",{className:"legend-pack-orb legend-pack-orb--left","aria-hidden":!0}),l.jsx("div",{className:"legend-pack-orb legend-pack-orb--right","aria-hidden":!0}),l.jsx("div",{className:"legend-pack-noise","aria-hidden":!0}),l.jsx("div",{className:"nostalgia-screen__content-shell legend-pack-shell-wrapper","data-scale-active":b?"true":"false",style:T,children:l.jsxs("div",{className:"legend-pack-shell",ref:w,children:[l.jsxs("header",{className:"legend-pack-header",children:[l.jsxs("div",{className:"legend-pack-header-main",children:[l.jsx(qr,{}),l.jsxs("div",{children:[l.jsx("p",{className:"legend-pack-title",children:"Nostalji Paketi"}),l.jsx("p",{className:"legend-pack-subtitle",children:"80'ler ve 90'larn efsanelerini kulbne yeniden kazandr. Paketi a, rastgele bir ikon 30 gnlne kadrona katlsn. Nostalji oyuncular transfer pazarnda satlamaz ve szlemeleri uzatlamaz."})]})]}),l.jsxs("div",{className:"legend-pack-balance",children:[l.jsx("label",{children:"Elmas"}),l.jsx("strong",{children:e})]})]}),l.jsxs("main",{className:"legend-pack-main",children:[l.jsxs("section",{className:"legend-pack-panel",children:[l.jsx("h2",{children:"Yeni bir efsane kefet"}),l.jsx("p",{children:"Her paket alnda henz sahip olmadn bir efsaneyi kadrona kiralayabilir ve 30 gn boyunca mcadeleye sokabilirsin. Sre sonunda efsane otomatik olarak kulbnden ayrlr."}),l.jsxs("div",{className:"legend-pack-metrics",children:[l.jsxs("div",{className:"legend-pack-metric",children:[l.jsx("span",{children:"Toplanan kart"}),l.jsxs("strong",{children:[M,"/",vme]})]}),l.jsxs("div",{className:"legend-pack-metric",children:[l.jsx("span",{children:"Kira sresi"}),l.jsxs("strong",{children:[aS," gn"]})]})]}),r?l.jsx("p",{className:"mb-3 text-sm font-semibold text-emerald-200",children:"VIP uyeligin sayesinde bu paketi bir kez ucretsiz acabilirsin."}):null,l.jsx(fe,{size:"lg",className:"w-full",onClick:j,disabled:!r&&e<Wg||A||h||!!i,children:r?"Paket Ac (Ucretsiz)":`Paket Ac (${Wg} Elmas)`}),h?l.jsx("p",{className:"text-sm text-slate-300/80",children:"Takm bilgileri ykleniyor..."}):i?l.jsx("p",{className:"text-sm text-amber-200",children:"ektiin kart seni bekliyor. Kabul etmeden veya serbest brakmadan yeni paket aamazsn."}):A?l.jsx("p",{className:"text-sm text-emerald-200",children:"Tm nostalji efsanelerine sahipsin!"}):l.jsx("p",{className:"text-sm text-slate-300/80",children:"Eksik kartlarn tamamlamak iin paket amaya devam et."})]}),l.jsx("section",{className:"legend-pack-card-slot",children:i?l.jsx(pme,{player:i,onRent:v,onRelease:E}):l.jsx("div",{className:"legend-pack-placeholder",children:l.jsx(Qd,{title:"Nostalji Paketi",triggerLabel:"Yeni efsane kart bilgisi",triggerClassName:"h-12 w-12 rounded-2xl border-white/20 bg-transparent text-amber-200 hover:border-amber-300",contentClassName:"bg-slate-950/95",message:"Yeni bir efsane iin paketi a ve kart kulbne kat."})})})]}),l.jsxs("section",{className:"legend-pack-rented",children:[l.jsxs("header",{children:[l.jsx("p",{className:"legend-pack-rented-title",children:"Kiralanan efsaneler"}),l.jsxs("span",{className:"legend-pack-rented-count",children:[a.length," aktif"]})]}),a.length>0?l.jsx("div",{className:"legend-pack-rented-list",children:a.map(C=>l.jsxs("div",{className:"legend-pack-rented-item",children:[l.jsx("strong",{children:C.name}),l.jsx("span",{children:"Biti tarihi"}),l.jsx("time",{children:C.expiresAt.toLocaleDateString()})]},C.id))}):l.jsx("div",{className:"legend-pack-empty flex justify-center",children:l.jsx(Qd,{title:"Kiralanan Efsaneler",triggerLabel:"Kiralanan efsaneler bilgisi",triggerClassName:"h-10 w-10 rounded-2xl border-white/20 bg-transparent text-cyan-200 hover:border-cyan-300",contentClassName:"bg-slate-950/95",message:"u anda kiralanm efsane oyuncun yok. Paketi aarak kadronu glendirebilirsin."})})]})]})})]})};function _me(t){const e=new Set;return t.forEach(n=>{const r=To(n);typeof r=="number"&&e.add(r)}),Array.from(e).sort((n,r)=>n-r)}const bme=t=>{if(!t)return"Belirlenmedi";const e=new Date(t);return Number.isNaN(e.getTime())?"Belirlenmedi":e.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"})},Eme=()=>{const{user:t}=Vn(),{balance:e}=Ni(),{vipPlans:n,activateVip:r,vipStatus:s,vipActive:i,isHydrated:o}=Xc(),[a,c]=p.useState(null),u=p.useMemo(()=>Object.entries(n),[n]),d=async g=>{if(!a){c(g);try{await r(g)}finally{c(null)}}},h=!!t&&o&&!a,m=s.plan?n[s.plan].label:"Aktif VIP yok";return l.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-emerald-950 text-slate-100",children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("div",{className:"absolute left-[-15%] top-[-10%] h-72 w-72 rounded-full bg-emerald-500/15 blur-3xl"}),l.jsx("div",{className:"absolute right-[-30%] bottom-[-20%] h-[28rem] w-[28rem] rounded-full bg-cyan-400/10 blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 mx-auto flex max-w-5xl flex-col gap-8 px-4 pb-16 pt-10 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(qr,{}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-white",children:"VIP Paketleri"}),l.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"Haftalik, aylik veya yillik paketlerden birini secerek kulubune premium avantajlar ekle."})]})]}),l.jsxs(Mt,{variant:i?"secondary":"outline",className:i?"border-amber-200/40 bg-amber-500/20 text-amber-100":"border-white/20 text-slate-200",children:["Bakiye: ",e," elmas"]})]}),l.jsxs(Ue,{className:"border-white/10 bg-slate-900/60 backdrop-blur-lg",children:[l.jsxs(It,{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs(Ct,{className:"flex items-center gap-2 text-xl text-white",children:[l.jsx(WI,{className:`h-5 w-5 ${i?"text-amber-300":"text-slate-400"}`}),"VIP Durumu"]}),i?l.jsx(Mt,{className:"border-emerald-300/40 bg-emerald-500/20 text-emerald-100",children:"Aktif"}):l.jsx(Mt,{variant:"outline",className:"border-white/20 text-slate-200",children:"Pasif"})]}),l.jsxs(Je,{className:"space-y-4 text-sm text-slate-300",children:[l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Paket"}),l.jsx("p",{className:"text-base font-semibold text-emerald-200",children:m})]}),l.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"VIP Bitis"}),l.jsx("p",{className:"text-base font-semibold text-emerald-200",children:bme(s.expiresAt)})]})]}),l.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Ayricaliklar"}),l.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm",children:[l.jsx("li",{children:"Gunluk +1 enerji, moral ve saglik kiti"}),l.jsx("li",{children:"%5 antrenman ve sure kisalmasi"}),l.jsx("li",{children:"Her ay 1 yildiz oyuncu karti"})]})]})]})]}),l.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:u.map(([g,w])=>{const y=a===g;return l.jsxs(Ue,{className:"group flex flex-col border-white/10 bg-slate-900/60 transition hover:border-emerald-300/40 hover:shadow-lg hover:shadow-emerald-500/10",children:[l.jsxs(It,{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_y,{className:"h-4 w-4 text-emerald-300"}),l.jsx(Ct,{className:"text-lg text-white",children:w.label})]}),l.jsx("p",{className:"text-sm text-slate-300",children:w.description})]}),l.jsxs(Je,{className:"flex flex-1 flex-col justify-between gap-4",children:[l.jsxs("div",{className:"space-y-4 text-sm text-slate-300",children:[l.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3 text-center",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Sure"}),l.jsxs("p",{className:"text-lg font-semibold text-emerald-200",children:[w.durationDays," gun"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Faydalar"}),l.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5",children:w.perks.map(T=>l.jsx("li",{children:T},T))})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(fe,{onClick:()=>d(g),disabled:!h,className:"bg-emerald-500/20 text-emerald-100 hover:bg-emerald-500/30",children:y?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Satin aliniyor"]}):l.jsxs(l.Fragment,{children:[w.diamondCost," elmas"]})}),l.jsx("p",{className:"text-center text-xs text-slate-400",children:"VIP gunluk bonuslari otomatik olarak envanterine eklenir."})]})]})]},g)})})]})]})},Sme=zH([{element:l.jsx(Wae,{}),children:[{path:"/",element:l.jsx(Kae,{})},{path:"/team-planning",element:l.jsx(Gle,{})},{path:"/youth",element:l.jsx(gce,{})},{path:"/transfer-market",element:l.jsx(cce,{})},{path:"/fixtures",element:l.jsx(g_,{})},{path:"/my-matches",element:l.jsx(g_,{})},{path:"/standings",element:l.jsx(fme,{})},{path:"/leagues",element:l.jsx(hfe,{})},{path:"/leagues/:leagueId",element:l.jsx(ffe,{})},{path:"/training",element:l.jsx(Sfe,{})},{path:"/match-preview",element:l.jsx(Cfe,{})},{path:"/match-simulation",element:l.jsx(Rfe,{})},{path:"/match-simulation-demo",element:l.jsx(Pfe,{})},{path:"/match-simulation-iframe",element:l.jsx(Afe,{})},{path:"/unity-auto-seed",element:l.jsx(Mfe,{})},{path:"/live-debug",element:l.jsx(Dfe,{})},{path:"/match/:id",element:l.jsx(Vfe,{})},{path:"/match-history",element:l.jsx(g_,{})},{path:"/finance",element:l.jsx(Bfe,{})},{path:"/settings",element:l.jsx(zfe,{})},{path:"/contact",element:l.jsx(Wfe,{})},{path:"/store/diamonds",element:l.jsx(Yfe,{})},{path:"/store/vip",element:l.jsx(Eme,{})},{path:"/academy",element:l.jsx(hme,{})},{path:"/legend-pack",element:l.jsx(wme,{})},{path:"*",element:l.jsx(Gfe,{})}]}],{future:{v7_relativeSplatPath:!0}}),Tme=new l7,Ime=()=>(p.useEffect(()=>{const t=async()=>{const{orientation:r}=window.screen??{};if(r&&typeof r.lock=="function")try{await r.lock("landscape")}catch{}},e=()=>{document.documentElement.style.setProperty("--app-viewport-height",`${window.innerHeight}px`)},n=()=>{e(),t()};return t(),e(),window.addEventListener("resize",n,{passive:!0}),window.addEventListener("orientationchange",n),Lo.isNativePlatform()&&_9.hide({fadeOutDuration:300}).catch(()=>{}),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),l.jsx(f7,{client:Tme,children:l.jsx(mre,{children:l.jsx(fre,{children:l.jsx(xre,{children:l.jsx(Ooe,{children:l.jsxs(W8,{children:[l.jsx(Z9,{}),l.jsx(XH,{router:Sme,future:{v7_startTransition:!0}})]})})})})})}));S_.createRoot(document.getElementById("root")).render(l.jsx(Se.StrictMode,{children:l.jsx(Ime,{})}));export{i2 as W};
